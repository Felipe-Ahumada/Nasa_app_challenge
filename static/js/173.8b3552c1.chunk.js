"use strict";(self.webpackChunkzuricatas_simulator_frontend=self.webpackChunkzuricatas_simulator_frontend||[]).push([[173],{554:(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var r=s(43),a=s(918),n=s(985),i=s(201),o=s(45),c=s(168),l=s(408);const d=["args","children"];function h(e,t){const s=e+"Geometry";return r.forwardRef((e,a)=>{let{args:n,children:i}=e,l=(0,o.A)(e,d);const h=r.useRef(null);return r.useImperativeHandle(a,()=>h.current),r.useLayoutEffect(()=>{null==t||t(h.current)}),r.createElement("mesh",(0,c.A)({ref:h},l),r.createElement(s,{attach:"geometry",args:n}),i)})}h("box"),h("circle"),h("cone"),h("cylinder");const m=h("sphere");h("plane"),h("tube"),h("torus"),h("torusKnot"),h("tetrahedron"),h("ring"),h("polyhedron"),h("icosahedron"),h("octahedron"),h("dodecahedron"),h("extrude"),h("lathe"),h("capsule"),h("shape",e=>{let{geometry:t}=e;const s=t.attributes.position,r=(new l.Box3).setFromBufferAttribute(s),a=new l.Vector3;r.getSize(a);const n=[];let i=0,o=0,c=0,d=0;for(let l=0;l<s.count;l++)i=s.getX(l),o=s.getY(l),c=(i-r.min.x)/a.x,d=(o-r.min.y)/a.y,n.push(c,d);t.setAttribute("uv",new l.Float32BufferAttribute(n,2))});var u=s(7),p=s(309),x=s(579);const f=e=>{let{impactLocation:t,showImpact:s}=e;const n=(0,r.useRef)(),o=(0,r.useRef)(),c=t?function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=(90-e)*(Math.PI/180),a=(t+180)*(Math.PI/180);return{x:-s*Math.sin(r)*Math.cos(a),y:s*Math.cos(r),z:s*Math.sin(r)*Math.sin(a)}}(t.lat,t.lng):{x:0,y:0,z:0};(0,a.C)(()=>{n.current&&(n.current.rotation.y+=.001)});const[d,h,u]=(0,i.z)(["https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg","https://threejs.org/examples/textures/planets/earth_normal_2048.jpg","https://threejs.org/examples/textures/planets/earth_clouds_1024.png"]);return(0,x.jsxs)("group",{children:[(0,x.jsx)(m,{ref:n,args:[2,64,64],children:(0,x.jsx)("meshStandardMaterial",{map:d,normalMap:h,roughness:.85,metalness:0})}),(0,x.jsx)(m,{args:[2.03,64,64],children:(0,x.jsx)("meshPhongMaterial",{map:u,transparent:!0,opacity:.4,depthWrite:!1})}),(0,x.jsx)(m,{args:[2.05,64,64],children:(0,x.jsx)("meshStandardMaterial",{color:"#87CEEB",transparent:!0,opacity:.2,side:l.BackSide})}),s&&t&&(0,x.jsxs)("group",{position:[c.x,c.y,c.z],children:[(0,x.jsx)(m,{ref:o,args:[.05,16,16],children:(0,x.jsx)("meshStandardMaterial",{color:"#ff4444",emissive:"#ff2222",emissiveIntensity:.5})}),(0,x.jsxs)("mesh",{rotation:[0,0,0],children:[(0,x.jsx)("ringGeometry",{args:[.1,.15,32]}),(0,x.jsx)("meshStandardMaterial",{color:"#ff6666",transparent:!0,opacity:.7,side:l.DoubleSide})]})]})]})},g=e=>{let{position:t,size:s=.1,velocity:n,isAnimating:i}=e;const o=(0,r.useRef)(),[c,d]=(0,r.useState)(t);return(0,a.C)((e,t)=>{if(o.current&&i&&n){const e=new l.Vector3(0,0,0).sub(new l.Vector3(...c)).normalize(),s=new l.Vector3(...c).add(e.multiplyScalar(n*t));d([s.x,s.y,s.z]),o.current.position.copy(s),o.current.rotation.x+=.01,o.current.rotation.y+=.02}}),(0,x.jsxs)("group",{position:c,children:[(0,x.jsxs)("mesh",{ref:o,children:[(0,x.jsx)("dodecahedronGeometry",{args:[s,1]}),(0,x.jsx)("meshStandardMaterial",{color:"#8B4513",roughness:.9,metalness:.1})]}),i&&(0,x.jsxs)("mesh",{children:[(0,x.jsx)("cylinderGeometry",{args:[.002,.01,1,8]}),(0,x.jsx)("meshStandardMaterial",{color:"#ffaa00",transparent:!0,opacity:.6,emissive:"#ff6600",emissiveIntensity:.3})]})]})},j=e=>{let{position:t,isVisible:s,intensity:n=1}=e;const i=(0,r.useRef)(),[o,c]=(0,r.useState)(0);return(0,a.C)((e,t)=>{if(s&&i.current){const e=o+2*t;c(e),i.current.scale.setScalar(Math.min(e,n)),i.current.material&&(i.current.material.opacity=Math.max(0,1-e/n))}}),s?(0,x.jsxs)("group",{position:t,children:[(0,x.jsx)(m,{ref:i,args:[.1,16,16],children:(0,x.jsx)("meshStandardMaterial",{color:"#ff4400",transparent:!0,opacity:1,emissive:"#ff6600",emissiveIntensity:2})}),[1,2,3].map((e,t)=>(0,x.jsxs)("mesh",{rotation:[Math.PI/2,0,0],children:[(0,x.jsx)("ringGeometry",{args:[.2+.1*t,.25+.1*t,32]}),(0,x.jsx)("meshStandardMaterial",{color:"#ffaa00",transparent:!0,opacity:.5-.1*t,side:l.DoubleSide})]},t))]}):null},y=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=(90-e)*(Math.PI/180),a=(t+180)*(Math.PI/180);return{x:-s*Math.sin(r)*Math.cos(a),y:s*Math.cos(r),z:s*Math.sin(r)*Math.sin(a)}},M=e=>{let{impactLocation:t,asteroidData:s,showImpact:a=!1,animateImpact:i=!1,onAnimationComplete:o}=e;const[c,l]=(0,r.useState)(!1),[d,h]=(0,r.useState)([8,4,6]);(0,r.useEffect)(()=>{if(i){l(!1),h([8,4,6]);const e=setTimeout(()=>{l(!0),o&&o()},3e3);return()=>clearTimeout(e)}},[i,o]);const m=null!==s&&void 0!==s&&s.diameter?Math.max(.05,Math.min(.3,s.diameter/1e4)):.1;return(0,x.jsx)("div",{style:{width:"100%",height:"400px",borderRadius:"12px",overflow:"hidden"},children:(0,x.jsxs)(n.Hl,{camera:{position:[0,0,8],fov:45},children:[(0,x.jsx)("ambientLight",{intensity:.3}),(0,x.jsx)("directionalLight",{position:[5,5,5],intensity:1,castShadow:!0}),(0,x.jsx)("pointLight",{position:[-5,-5,-5],intensity:.5,color:"#4A90E2"}),(0,x.jsx)(f,{impactLocation:t,showImpact:a}),s&&(0,x.jsx)(g,{position:d,size:m,velocity:i?2:0,isAnimating:i}),a&&t&&(0,x.jsx)(j,{position:t?[y(t.lat,t.lng).x,y(t.lat,t.lng).y,y(t.lat,t.lng).z]:[0,0,0],isVisible:c,intensity:10*m}),(0,x.jsx)(u.N,{enableZoom:!0,enablePan:!0,enableRotate:!0,minDistance:3,maxDistance:15,autoRotate:!i,autoRotateSpeed:.5}),s&&(0,x.jsx)(p.E,{position:[3,3,0],children:(0,x.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"10px",borderRadius:"8px",fontSize:"12px",minWidth:"200px"},children:[(0,x.jsx)("h6",{style:{margin:"0 0 8px 0",color:"#00d4ff"},children:s.name||"Selected Asteroid"}),s.diameter&&(0,x.jsxs)("div",{children:["Diameter: ",(s.diameter/1e3).toFixed(2)," km"]}),s.velocity&&(0,x.jsxs)("div",{children:["Velocity: ",s.velocity.toFixed(2)," km/s"]}),s.mass&&(0,x.jsxs)("div",{children:["Mass: ",s.mass.toExponential(2)," kg"]})]})}),(0,x.jsx)(p.E,{position:[-4,-3,0],children:(0,x.jsx)("div",{style:{color:"#cccccc",fontSize:"11px",background:"rgba(0, 0, 0, 0.6)",padding:"8px",borderRadius:"4px"},children:"\ud83d\uddb1\ufe0f Drag to rotate \u2022 \ud83d\udd0d Scroll to zoom \u2022 \ud83d\udccd Impact location marked in red"})})]})})}}}]);
//# sourceMappingURL=173.8b3552c1.chunk.js.map