/*! For license information please see main.bc549191.js.LICENSE.txt */
(()=>{var t={7:(t,e,n)=>{"use strict";n.d(e,{N:()=>x});var i=n(45),r=n(168),s=n(918),a=n(43),o=n(408),l=Object.defineProperty,c=(t,e,n)=>(((t,e,n)=>{e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!==typeof e?e+"":e,n),n);class u{constructor(){c(this,"_listeners")}addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}var h=Object.defineProperty,d=(t,e,n)=>(((t,e,n)=>{e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!==typeof e?e+"":e,n),n);const f=new o.Ray,p=new o.Plane,m=Math.cos(Math.PI/180*70),g=(t,e)=>(t%e+e)%e;class v extends u{constructor(t,e){super(),d(this,"object"),d(this,"domElement"),d(this,"enabled",!0),d(this,"target",new o.Vector3),d(this,"minDistance",0),d(this,"maxDistance",1/0),d(this,"minZoom",0),d(this,"maxZoom",1/0),d(this,"minPolarAngle",0),d(this,"maxPolarAngle",Math.PI),d(this,"minAzimuthAngle",-1/0),d(this,"maxAzimuthAngle",1/0),d(this,"enableDamping",!1),d(this,"dampingFactor",.05),d(this,"enableZoom",!0),d(this,"zoomSpeed",1),d(this,"enableRotate",!0),d(this,"rotateSpeed",1),d(this,"enablePan",!0),d(this,"panSpeed",1),d(this,"screenSpacePanning",!0),d(this,"keyPanSpeed",7),d(this,"zoomToCursor",!1),d(this,"autoRotate",!1),d(this,"autoRotateSpeed",2),d(this,"reverseOrbit",!1),d(this,"reverseHorizontalOrbit",!1),d(this,"reverseVerticalOrbit",!1),d(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),d(this,"mouseButtons",{LEFT:o.MOUSE.ROTATE,MIDDLE:o.MOUSE.DOLLY,RIGHT:o.MOUSE.PAN}),d(this,"touches",{ONE:o.TOUCH.ROTATE,TWO:o.TOUCH.DOLLY_PAN}),d(this,"target0"),d(this,"position0"),d(this,"zoom0"),d(this,"_domElementKeyEvents",null),d(this,"getPolarAngle"),d(this,"getAzimuthalAngle"),d(this,"setPolarAngle"),d(this,"setAzimuthalAngle"),d(this,"getDistance"),d(this,"getZoomScale"),d(this,"listenToKeyEvents"),d(this,"stopListenToKeyEvents"),d(this,"saveState"),d(this,"reset"),d(this,"update"),d(this,"connect"),d(this,"dispose"),d(this,"dollyIn"),d(this,"dollyOut"),d(this,"getScale"),d(this,"setScale"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=t=>{let e=g(t,2*Math.PI),i=u.phi;i<0&&(i+=2*Math.PI),e<0&&(e+=2*Math.PI);let r=Math.abs(e-i);2*Math.PI-r<r&&(e<i?e+=2*Math.PI:i+=2*Math.PI),h.phi=e-i,n.update()},this.setAzimuthalAngle=t=>{let e=g(t,2*Math.PI),i=u.theta;i<0&&(i+=2*Math.PI),e<0&&(e+=2*Math.PI);let r=Math.abs(e-i);2*Math.PI-r<r&&(e<i?e+=2*Math.PI:i+=2*Math.PI),h.theta=e-i,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",nt),this._domElementKeyEvents=t},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",nt),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),l=a.NONE},this.update=(()=>{const e=new o.Vector3,r=new o.Vector3(0,1,0),s=(new o.Quaternion).setFromUnitVectors(t.up,r),d=s.clone().invert(),g=new o.Vector3,x=new o.Quaternion,_=2*Math.PI;return function(){const b=n.object.position;s.setFromUnitVectors(t.up,r),d.copy(s).invert(),e.copy(b).sub(n.target),e.applyQuaternion(s),u.setFromVector3(e),n.autoRotate&&l===a.NONE&&O(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=h.theta*n.dampingFactor,u.phi+=h.phi*n.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let w=n.minAzimuthAngle,S=n.maxAzimuthAngle;isFinite(w)&&isFinite(S)&&(w<-Math.PI?w+=_:w>Math.PI&&(w-=_),S<-Math.PI?S+=_:S>Math.PI&&(S-=_),u.theta=w<=S?Math.max(w,Math.min(S,u.theta)):u.theta>(w+S)/2?Math.max(w,u.theta):Math.min(S,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&R||n.object.isOrthographicCamera?u.radius=V(u.radius):u.radius=V(u.radius*v),e.setFromSpherical(u),e.applyQuaternion(d),b.copy(n.target).add(e),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),y.set(0,0,0));let M=!1;if(n.zoomToCursor&&R){let i=null;if(n.object instanceof o.PerspectiveCamera&&n.object.isPerspectiveCamera){const t=e.length();i=V(t*v);const r=t-i;n.object.position.addScaledVector(C,r),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const t=new o.Vector3(P.x,P.y,0);t.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),M=!0;const r=new o.Vector3(P.x,P.y,0);r.unproject(n.object),n.object.position.sub(r).add(t),n.object.updateMatrixWorld(),i=e.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==i&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(i).add(n.object.position):(f.origin.copy(n.object.position),f.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(f.direction))<m?t.lookAt(n.target):(p.setFromNormalAndCoplanarPoint(n.object.up,n.target),f.intersectPlane(p,n.target))))}else n.object instanceof o.OrthographicCamera&&n.object.isOrthographicCamera&&(M=1!==v,M&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,R=!1,!!(M||g.distanceToSquared(n.object.position)>c||8*(1-x.dot(n.object.quaternion))>c)&&(n.dispatchEvent(i),g.copy(n.object.position),x.copy(n.object.quaternion),M=!1,!0)}})(),this.connect=t=>{n.domElement=t,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",it),n.domElement.addEventListener("pointerdown",Q),n.domElement.addEventListener("pointercancel",tt),n.domElement.addEventListener("wheel",et)},this.dispose=()=>{var t,e,i,r,s,a;n.domElement&&(n.domElement.style.touchAction="auto"),null==(t=n.domElement)||t.removeEventListener("contextmenu",it),null==(e=n.domElement)||e.removeEventListener("pointerdown",Q),null==(i=n.domElement)||i.removeEventListener("pointercancel",tt),null==(r=n.domElement)||r.removeEventListener("wheel",et),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointermove",$),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointerup",tt),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",nt)};const n=this,i={type:"change"},r={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new o.Spherical,h=new o.Spherical;let v=1;const y=new o.Vector3,x=new o.Vector2,_=new o.Vector2,b=new o.Vector2,w=new o.Vector2,S=new o.Vector2,M=new o.Vector2,E=new o.Vector2,T=new o.Vector2,A=new o.Vector2,C=new o.Vector3,P=new o.Vector2;let R=!1;const L=[],N={};function k(){return Math.pow(.95,n.zoomSpeed)}function O(t){n.reverseOrbit||n.reverseHorizontalOrbit?h.theta+=t:h.theta-=t}function D(t){n.reverseOrbit||n.reverseVerticalOrbit?h.phi+=t:h.phi-=t}const I=(()=>{const t=new o.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),y.add(t)}})(),z=(()=>{const t=new o.Vector3;return function(e,i){!0===n.screenSpacePanning?t.setFromMatrixColumn(i,1):(t.setFromMatrixColumn(i,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),y.add(t)}})(),j=(()=>{const t=new o.Vector3;return function(e,i){const r=n.domElement;if(r&&n.object instanceof o.PerspectiveCamera&&n.object.isPerspectiveCamera){const s=n.object.position;t.copy(s).sub(n.target);let a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),I(2*e*a/r.clientHeight,n.object.matrix),z(2*i*a/r.clientHeight,n.object.matrix)}else r&&n.object instanceof o.OrthographicCamera&&n.object.isOrthographicCamera?(I(e*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),z(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function U(t){n.object instanceof o.PerspectiveCamera&&n.object.isPerspectiveCamera||n.object instanceof o.OrthographicCamera&&n.object.isOrthographicCamera?v=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function F(t){U(v/t)}function B(t){U(v*t)}function H(t){if(!n.zoomToCursor||!n.domElement)return;R=!0;const e=n.domElement.getBoundingClientRect(),i=t.clientX-e.left,r=t.clientY-e.top,s=e.width,a=e.height;P.x=i/s*2-1,P.y=-r/a*2+1,C.set(P.x,P.y,1).unproject(n.object).sub(n.object.position).normalize()}function V(t){return Math.max(n.minDistance,Math.min(n.maxDistance,t))}function W(t){x.set(t.clientX,t.clientY)}function G(t){w.set(t.clientX,t.clientY)}function X(){if(1==L.length)x.set(L[0].pageX,L[0].pageY);else{const t=.5*(L[0].pageX+L[1].pageX),e=.5*(L[0].pageY+L[1].pageY);x.set(t,e)}}function q(){if(1==L.length)w.set(L[0].pageX,L[0].pageY);else{const t=.5*(L[0].pageX+L[1].pageX),e=.5*(L[0].pageY+L[1].pageY);w.set(t,e)}}function Z(){const t=L[0].pageX-L[1].pageX,e=L[0].pageY-L[1].pageY,n=Math.sqrt(t*t+e*e);E.set(0,n)}function Y(t){if(1==L.length)_.set(t.pageX,t.pageY);else{const e=st(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);_.set(n,i)}b.subVectors(_,x).multiplyScalar(n.rotateSpeed);const e=n.domElement;e&&(O(2*Math.PI*b.x/e.clientHeight),D(2*Math.PI*b.y/e.clientHeight)),x.copy(_)}function K(t){if(1==L.length)S.set(t.pageX,t.pageY);else{const e=st(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);S.set(n,i)}M.subVectors(S,w).multiplyScalar(n.panSpeed),j(M.x,M.y),w.copy(S)}function J(t){const e=st(t),i=t.pageX-e.x,r=t.pageY-e.y,s=Math.sqrt(i*i+r*r);T.set(0,s),A.set(0,Math.pow(T.y/E.y,n.zoomSpeed)),F(A.y),E.copy(T)}function Q(t){var e,i;!1!==n.enabled&&(0===L.length&&(null==(e=n.domElement)||e.ownerDocument.addEventListener("pointermove",$),null==(i=n.domElement)||i.ownerDocument.addEventListener("pointerup",tt)),function(t){L.push(t)}(t),"touch"===t.pointerType?function(t){switch(rt(t),L.length){case 1:switch(n.touches.ONE){case o.TOUCH.ROTATE:if(!1===n.enableRotate)return;X(),l=a.TOUCH_ROTATE;break;case o.TOUCH.PAN:if(!1===n.enablePan)return;q(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(n.touches.TWO){case o.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&Z(),n.enablePan&&q(),l=a.TOUCH_DOLLY_PAN;break;case o.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&Z(),n.enableRotate&&X(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(r)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case o.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(t){H(t),E.set(t.clientX,t.clientY)}(t),l=a.DOLLY;break;case o.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;G(t),l=a.PAN}else{if(!1===n.enableRotate)return;W(t),l=a.ROTATE}break;case o.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;W(t),l=a.ROTATE}else{if(!1===n.enablePan)return;G(t),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(r)}(t))}function $(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(rt(t),l){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;Y(t),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;K(t),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){n.enableZoom&&J(t),n.enablePan&&K(t)}(t),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(t){n.enableZoom&&J(t),n.enableRotate&&Y(t)}(t),n.update();break;default:l=a.NONE}}(t):function(t){if(!1===n.enabled)return;switch(l){case a.ROTATE:if(!1===n.enableRotate)return;!function(t){_.set(t.clientX,t.clientY),b.subVectors(_,x).multiplyScalar(n.rotateSpeed);const e=n.domElement;e&&(O(2*Math.PI*b.x/e.clientHeight),D(2*Math.PI*b.y/e.clientHeight)),x.copy(_),n.update()}(t);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(t){T.set(t.clientX,t.clientY),A.subVectors(T,E),A.y>0?F(k()):A.y<0&&B(k()),E.copy(T),n.update()}(t);break;case a.PAN:if(!1===n.enablePan)return;!function(t){S.set(t.clientX,t.clientY),M.subVectors(S,w).multiplyScalar(n.panSpeed),j(M.x,M.y),w.copy(S),n.update()}(t)}}(t))}function tt(t){var e,i,r;!function(t){delete N[t.pointerId];for(let e=0;e<L.length;e++)if(L[e].pointerId==t.pointerId)return void L.splice(e,1)}(t),0===L.length&&(null==(e=n.domElement)||e.releasePointerCapture(t.pointerId),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointermove",$),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointerup",tt)),n.dispatchEvent(s),l=a.NONE}function et(t){!1===n.enabled||!1===n.enableZoom||l!==a.NONE&&l!==a.ROTATE||(t.preventDefault(),n.dispatchEvent(r),function(t){H(t),t.deltaY<0?B(k()):t.deltaY>0&&F(k()),n.update()}(t),n.dispatchEvent(s))}function nt(t){!1!==n.enabled&&!1!==n.enablePan&&function(t){let e=!1;switch(t.code){case n.keys.UP:j(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:j(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:j(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:j(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function it(t){!1!==n.enabled&&t.preventDefault()}function rt(t){let e=N[t.pointerId];void 0===e&&(e=new o.Vector2,N[t.pointerId]=e),e.set(t.pageX,t.pageY)}function st(t){const e=t.pointerId===L[0].pointerId?L[1]:L[0];return N[e.pointerId]}this.dollyIn=function(){B(arguments.length>0&&void 0!==arguments[0]?arguments[0]:k()),n.update()},this.dollyOut=function(){F(arguments.length>0&&void 0!==arguments[0]?arguments[0]:k()),n.update()},this.getScale=()=>v,this.setScale=t=>{U(t),n.update()},this.getZoomScale=()=>k(),void 0!==e&&this.connect(e),this.update()}}const y=["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"],x=a.forwardRef((t,e)=>{let{makeDefault:n,camera:o,regress:l,domElement:c,enableDamping:u=!0,keyEvents:h=!1,onChange:d,onStart:f,onEnd:p}=t,m=(0,i.A)(t,y);const g=(0,s.A)(t=>t.invalidate),x=(0,s.A)(t=>t.camera),_=(0,s.A)(t=>t.gl),b=(0,s.A)(t=>t.events),w=(0,s.A)(t=>t.setEvents),S=(0,s.A)(t=>t.set),M=(0,s.A)(t=>t.get),E=(0,s.A)(t=>t.performance),T=o||x,A=c||b.connected||_.domElement,C=a.useMemo(()=>new v(T),[T]);return(0,s.C)(()=>{C.enabled&&C.update()},-1),a.useEffect(()=>(h&&C.connect(!0===h?A:h),C.connect(A),()=>{C.dispose()}),[h,A,l,C,g]),a.useEffect(()=>{const t=t=>{g(),l&&E.regress(),d&&d(t)},e=t=>{f&&f(t)},n=t=>{p&&p(t)};return C.addEventListener("change",t),C.addEventListener("start",e),C.addEventListener("end",n),()=>{C.removeEventListener("start",e),C.removeEventListener("end",n),C.removeEventListener("change",t)}},[d,f,p,C,g,w]),a.useEffect(()=>{if(n){const t=M().controls;return S({controls:C}),()=>S({controls:t})}},[n,C]),a.createElement("primitive",(0,r.A)({ref:e,object:C,enableDamping:u},m))})},16:(t,e,n)=>{"use strict";t.exports=n(958)},24:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},43:(t,e,n)=>{"use strict";t.exports=n(202)},45:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(587);function r(t,e){if(null==t)return{};var n,r,s=(0,i.A)(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}},67:(t,e,n)=>{"use strict";t.exports=n(612)},71:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},139:(t,e)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];n&&(t=a(t,s(n)))}return t}function s(t){if("string"===typeof t||"number"===typeof t)return t;if("object"!==typeof t)return"";if(Array.isArray(t))return r.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var n in t)i.call(t,n)&&t[n]&&(e=a(e,n));return e}function a(t,e){return e?t?t+" "+e:t+e:t}t.exports?(r.default=r,t.exports=r):void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()},140:(t,e,n)=>{"use strict";Object.defineProperty(e,"m",{enumerable:!0,get:function(){return r.default}});var i,r=(i=n(351))&&i.__esModule?i:{default:i}},153:(t,e,n)=>{"use strict";var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,i)&&!l.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===s[i]&&(s[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:s,_owner:o.current}}e.Fragment=s,e.jsx=c,e.jsxs=c},168:(t,e,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(null,arguments)}n.d(e,{A:()=>i})},173:(t,e,n)=>{t.exports=n(497)()},201:(t,e,n)=>{"use strict";n.d(e,{z:()=>o});var i=n(408),r=n(918),s=n(43);const a=t=>t===Object(t)&&!Array.isArray(t)&&"function"!==typeof t;function o(t,e){const n=(0,r.A)(t=>t.gl),o=(0,r.F)(i.TextureLoader,a(t)?Object.values(t):t);if((0,s.useLayoutEffect)(()=>{null==e||e(o)},[e]),(0,s.useEffect)(()=>{if("initTexture"in n){(Array.isArray(o)?o:[o]).forEach(n.initTexture)}},[n,o]),a(t)){const e=Object.keys(t),n={};return e.forEach(t=>Object.assign(n,{[t]:o[e.indexOf(t)]})),n}return o}o.preload=t=>r.F.preload(i.TextureLoader,t),o.clear=t=>r.F.clear(i.TextureLoader,t)},202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||p}function y(){}function x(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var _=x.prototype=new y;_.constructor=x,m(_,v.prototype),_.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,i){var r,s={},a=null,o=null;if(null!=e)for(r in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,r)&&!M.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:t,key:a,ref:o,props:s,_owner:S.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var A=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function P(t,e,r,s,a){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var l=!1;if(null===t)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=t),t=""===s?"."+C(l,0):s,b(a)?(r="",null!=t&&(r=t.replace(A,"$&/")+"/"),P(a,e,r,"",function(t){return t})):null!=a&&(T(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+t)),e.push(a)),1;if(l=0,s=""===s?".":s+":",b(t))for(var c=0;c<t.length;c++){var u=s+C(o=t[c],c);l+=P(o,e,r,u,a)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(o=t.next()).done;)l+=P(o=o.value,e,r,u=s+C(o,c++),a);else if("object"===o)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function R(t,e,n){if(null==t)return t;var i=[],r=0;return P(t,i,"","",function(t){return e.call(n,t,r++)}),i}function L(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var N={current:null},k={transition:null},O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:k,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:R,forEach:function(t,e,n){R(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return R(t,function(){e++}),e},toArray:function(t){return R(t,function(t){return t})||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=x,e.StrictMode=s,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,e.act=D,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=m({},t.props),s=t.key,a=t.ref,o=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,o=S.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)w.call(e,c)&&!M.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:t.type,key:s,ref:a,props:r,_owner:o}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:L}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=k.transition;k.transition={};try{t()}finally{k.transition=e}},e.unstable_act=D,e.useCallback=function(t,e){return N.current.useCallback(t,e)},e.useContext=function(t){return N.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return N.current.useDeferredValue(t)},e.useEffect=function(t,e){return N.current.useEffect(t,e)},e.useId=function(){return N.current.useId()},e.useImperativeHandle=function(t,e,n){return N.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return N.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return N.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return N.current.useMemo(t,e)},e.useReducer=function(t,e,n){return N.current.useReducer(t,e,n)},e.useRef=function(t){return N.current.useRef(t)},e.useState=function(t){return N.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return N.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return N.current.useTransition()},e.version="18.3.1"},205:(t,e,n)=>{"use strict";t.exports=n(302)},216:(t,e,n)=>{"use strict";var i;n.d(e,{$3:()=>j,$P:()=>p,AV:()=>ht,BV:()=>st,C5:()=>et,Eu:()=>ht,Ew:()=>V,FE:()=>B,Ix:()=>rt,J8:()=>X,KC:()=>w,KP:()=>Y,KT:()=>dt,LG:()=>H,P1:()=>S,RQ:()=>y,Ri:()=>m,Rq:()=>l,UX:()=>d,V8:()=>Q,Ye:()=>T,Zp:()=>_,bg:()=>pt,cq:()=>U,fS:()=>tt,g:()=>M,jD:()=>at,jb:()=>u,mP:()=>W,oI:()=>q,ph:()=>A,qh:()=>it,r5:()=>G,sp:()=>o,sv:()=>nt,vL:()=>F,wE:()=>ft,wQ:()=>v,x$:()=>E,yN:()=>h,zy:()=>g});var r=n(43),s=n(387);function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a.apply(this,arguments)}const o=r.createContext(null);const l=r.createContext(null);const c=r.createContext(null);const u=r.createContext(null);const h=r.createContext(null);const d=r.createContext({outlet:null,matches:[],isDataRoute:!1});const f=r.createContext(null);function p(t,e){let{relative:n}=void 0===e?{}:e;m()||(0,s.Oi)(!1);let{basename:i,navigator:a}=r.useContext(u),{hash:o,pathname:l,search:c}=E(t,{relative:n}),h=l;return"/"!==i&&(h="/"===l?i:(0,s.HS)([i,l])),a.createHref({pathname:h,search:c,hash:o})}function m(){return null!=r.useContext(h)}function g(){return m()||(0,s.Oi)(!1),r.useContext(h).location}function v(){return r.useContext(h).navigationType}function y(t){m()||(0,s.Oi)(!1);let{pathname:e}=g();return r.useMemo(()=>(0,s.B6)(t,(0,s.RO)(e)),[e,t])}function x(t){r.useContext(u).static||r.useLayoutEffect(t)}function _(){let{isDataRoute:t}=r.useContext(d);return t?function(){let{router:t}=D(k.UseNavigateStable),e=z(O.UseNavigateStable),n=r.useRef(!1);return x(()=>{n.current=!0}),r.useCallback(function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?t.navigate(i):t.navigate(i,a({fromRouteId:e},r)))},[t,e])}():function(){m()||(0,s.Oi)(!1);let t=r.useContext(o),{basename:e,future:n,navigator:i}=r.useContext(u),{matches:a}=r.useContext(d),{pathname:l}=g(),c=JSON.stringify((0,s.yD)(a,n.v7_relativeSplatPath)),h=r.useRef(!1);return x(()=>{h.current=!0}),r.useCallback(function(n,r){if(void 0===r&&(r={}),!h.current)return;if("number"===typeof n)return void i.go(n);let a=(0,s.Gh)(n,JSON.parse(c),l,"path"===r.relative);null==t&&"/"!==e&&(a.pathname="/"===a.pathname?e:(0,s.HS)([e,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)},[e,i,c,l,t])}()}const b=r.createContext(null);function w(){return r.useContext(b)}function S(t){let e=r.useContext(d).outlet;return e?r.createElement(b.Provider,{value:t},e):e}function M(){let{matches:t}=r.useContext(d),e=t[t.length-1];return e?e.params:{}}function E(t,e){let{relative:n}=void 0===e?{}:e,{future:i}=r.useContext(u),{matches:a}=r.useContext(d),{pathname:o}=g(),l=JSON.stringify((0,s.yD)(a,i.v7_relativeSplatPath));return r.useMemo(()=>(0,s.Gh)(t,JSON.parse(l),o,"path"===n),[t,l,o,n])}function T(t,e){return A(t,e)}function A(t,e,n,i){m()||(0,s.Oi)(!1);let{navigator:o}=r.useContext(u),{matches:l}=r.useContext(d),c=l[l.length-1],f=c?c.params:{},p=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let v,y=g();if(e){var x;let t="string"===typeof e?(0,s.Rr)(e):e;"/"===p||(null==(x=t.pathname)?void 0:x.startsWith(p))||(0,s.Oi)(!1),v=t}else v=y;let _=v.pathname||"/",b=_;if("/"!==p){let t=p.replace(/^\//,"").split("/");b="/"+_.replace(/^\//,"").split("/").slice(t.length).join("/")}let w=(0,s.ue)(t,{pathname:b});let S=N(w&&w.map(t=>Object.assign({},t,{params:Object.assign({},f,t.params),pathname:(0,s.HS)([p,o.encodeLocation?o.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?p:(0,s.HS)([p,o.encodeLocation?o.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])})),l,n,i);return e&&S?r.createElement(h.Provider,{value:{location:a({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:s.rc.Pop}},S):S}function C(){let t=G(),e=(0,s.pX)(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},e),n?r.createElement("pre",{style:a},n):null,null)}const P=r.createElement(C,null);class R extends r.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?r.createElement(d.Provider,{value:this.props.routeContext},r.createElement(f.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L(t){let{routeContext:e,match:n,children:i}=t,s=r.useContext(o);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(d.Provider,{value:e},i)}function N(t,e,n,i){var a;if(void 0===e&&(e=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==t){var o;if(!n)return null;if(n.errors)t=n.matches;else{if(!(null!=(o=i)&&o.v7_partialHydration&&0===e.length&&!n.initialized&&n.matches.length>0))return null;t=n.matches}}let l=t,c=null==(a=n)?void 0:a.errors;if(null!=c){let t=l.findIndex(t=>t.route.id&&void 0!==(null==c?void 0:c[t.route.id]));t>=0||(0,s.Oi)(!1),l=l.slice(0,Math.min(l.length,t+1))}let u=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<l.length;r++){let t=l[r];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(h=r),t.route.id){let{loaderData:e,errors:i}=n,r=t.route.loader&&void 0===e[t.route.id]&&(!i||void 0===i[t.route.id]);if(t.route.lazy||r){u=!0,l=h>=0?l.slice(0,h+1):[l[0]];break}}}return l.reduceRight((t,i,s)=>{let a,o=!1,d=null,f=null;var p;n&&(a=c&&i.route.id?c[i.route.id]:void 0,d=i.route.errorElement||P,u&&(h<0&&0===s?(p="route-fallback",!1||K[p]||(K[p]=!0),o=!0,f=null):h===s&&(o=!0,f=i.route.hydrateFallbackElement||null)));let m=e.concat(l.slice(0,s+1)),g=()=>{let e;return e=a?d:o?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:t,r.createElement(L,{match:i,routeContext:{outlet:t,matches:m,isDataRoute:null!=n},children:e})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(R,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var k=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(k||{}),O=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(O||{});function D(t){let e=r.useContext(o);return e||(0,s.Oi)(!1),e}function I(t){let e=r.useContext(l);return e||(0,s.Oi)(!1),e}function z(t){let e=function(){let t=r.useContext(d);return t||(0,s.Oi)(!1),t}(),n=e.matches[e.matches.length-1];return n.route.id||(0,s.Oi)(!1),n.route.id}function j(){return z(O.UseRouteId)}function U(){return I(O.UseNavigation).navigation}function F(){let t=D(k.UseRevalidator),e=I(O.UseRevalidator);return r.useMemo(()=>({revalidate:t.router.revalidate,state:e.revalidation}),[t.router.revalidate,e.revalidation])}function B(){let{matches:t,loaderData:e}=I(O.UseMatches);return r.useMemo(()=>t.map(t=>(0,s.ro)(t,e)),[t,e])}function H(){let t=I(O.UseLoaderData),e=z(O.UseLoaderData);if(!t.errors||null==t.errors[e])return t.loaderData[e];console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")")}function V(t){return I(O.UseRouteLoaderData).loaderData[t]}function W(){let t=I(O.UseActionData),e=z(O.UseLoaderData);return t.actionData?t.actionData[e]:void 0}function G(){var t;let e=r.useContext(f),n=I(O.UseRouteError),i=z(O.UseRouteError);return void 0!==e?e:null==(t=n.errors)?void 0:t[i]}function X(){let t=r.useContext(c);return null==t?void 0:t._data}function q(){let t=r.useContext(c);return null==t?void 0:t._error}let Z=0;function Y(t){let{router:e,basename:n}=D(k.UseBlocker),i=I(O.UseBlocker),[o,l]=r.useState(""),c=r.useCallback(e=>{if("function"!==typeof t)return!!t;if("/"===n)return t(e);let{currentLocation:i,nextLocation:r,historyAction:o}=e;return t({currentLocation:a({},i,{pathname:(0,s.pb)(i.pathname,n)||i.pathname}),nextLocation:a({},r,{pathname:(0,s.pb)(r.pathname,n)||r.pathname}),historyAction:o})},[n,t]);return r.useEffect(()=>{let t=String(++Z);return l(t),()=>e.deleteBlocker(t)},[e]),r.useEffect(()=>{""!==o&&e.getBlocker(o,c)},[e,o,c]),o&&i.blockers.has(o)?i.blockers.get(o):s.G3}const K={};const J=(t,e,n)=>{};function Q(t,e){void 0===(null==t?void 0:t.v7_startTransition)&&J("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==t?void 0:t.v7_relativeSplatPath)||e&&void 0!==e.v7_relativeSplatPath||J("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(void 0===e.v7_fetcherPersist&&J("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===e.v7_normalizeFormMethod&&J("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===e.v7_partialHydration&&J("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===e.v7_skipActionErrorRevalidation&&J("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}const $=(i||(i=n.t(r,2))).startTransition;function tt(t){let{basename:e,children:n,initialEntries:i,initialIndex:a,future:o}=t,l=r.useRef();null==l.current&&(l.current=(0,s.sC)({initialEntries:i,initialIndex:a,v5Compat:!0}));let c=l.current,[u,h]=r.useState({action:c.action,location:c.location}),{v7_startTransition:d}=o||{},f=r.useCallback(t=>{d&&$?$(()=>h(t)):h(t)},[h,d]);return r.useLayoutEffect(()=>c.listen(f),[c,f]),r.useEffect(()=>Q(o),[o]),r.createElement(rt,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:o})}function et(t){let{to:e,replace:n,state:i,relative:a}=t;m()||(0,s.Oi)(!1);let{future:o,static:l}=r.useContext(u),{matches:c}=r.useContext(d),{pathname:h}=g(),f=_(),p=(0,s.Gh)(e,(0,s.yD)(c,o.v7_relativeSplatPath),h,"path"===a),v=JSON.stringify(p);return r.useEffect(()=>f(JSON.parse(v),{replace:n,state:i,relative:a}),[f,v,a,n,i]),null}function nt(t){return S(t.context)}function it(t){(0,s.Oi)(!1)}function rt(t){let{basename:e="/",children:n=null,location:i,navigationType:o=s.rc.Pop,navigator:l,static:c=!1,future:d}=t;m()&&(0,s.Oi)(!1);let f=e.replace(/^\/*/,"/"),p=r.useMemo(()=>({basename:f,navigator:l,static:c,future:a({v7_relativeSplatPath:!1},d)}),[f,d,l,c]);"string"===typeof i&&(i=(0,s.Rr)(i));let{pathname:g="/",search:v="",hash:y="",state:x=null,key:_="default"}=i,b=r.useMemo(()=>{let t=(0,s.pb)(g,f);return null==t?null:{location:{pathname:t,search:v,hash:y,state:x,key:_},navigationType:o}},[f,g,v,y,x,_,o]);return null==b?null:r.createElement(u.Provider,{value:p},r.createElement(h.Provider,{children:n,value:b}))}function st(t){let{children:e,location:n}=t;return T(ht(e),n)}function at(t){let{children:e,errorElement:n,resolve:i}=t;return r.createElement(ct,{resolve:i,errorElement:n},r.createElement(ut,null,e))}var ot=function(t){return t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error",t}(ot||{});const lt=new Promise(()=>{});class ct extends r.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,e){console.error("<Await> caught the following error during render",t,e)}render(){let{children:t,errorElement:e,resolve:n}=this.props,i=null,a=ot.pending;if(n instanceof Promise)if(this.state.error){a=ot.error;let t=this.state.error;i=Promise.reject().catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>t})}else n._tracked?(i=n,a="_error"in i?ot.error:"_data"in i?ot.success:ot.pending):(a=ot.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),i=n.then(t=>Object.defineProperty(n,"_data",{get:()=>t}),t=>Object.defineProperty(n,"_error",{get:()=>t})));else a=ot.success,i=Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>n});if(a===ot.error&&i._error instanceof s.tH)throw lt;if(a===ot.error&&!e)throw i._error;if(a===ot.error)return r.createElement(c.Provider,{value:i,children:e});if(a===ot.success)return r.createElement(c.Provider,{value:i,children:t});throw i}}function ut(t){let{children:e}=t,n=X(),i="function"===typeof e?e(n):e;return r.createElement(r.Fragment,null,i)}function ht(t,e){void 0===e&&(e=[]);let n=[];return r.Children.forEach(t,(t,i)=>{if(!r.isValidElement(t))return;let a=[...e,i];if(t.type===r.Fragment)return void n.push.apply(n,ht(t.props.children,a));t.type!==it&&(0,s.Oi)(!1),t.props.index&&t.props.children&&(0,s.Oi)(!1);let o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=ht(t.props.children,a)),n.push(o)}),n}function dt(t){return N(t)}function ft(t){let e={hasErrorBoundary:null!=t.ErrorBoundary||null!=t.errorElement};return t.Component&&Object.assign(e,{element:r.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:r.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:r.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}function pt(t,e){return(0,s.aE)({basename:null==e?void 0:e.basename,future:a({},null==e?void 0:e.future,{v7_prependBasename:!0}),history:(0,s.sC)({initialEntries:null==e?void 0:e.initialEntries,initialIndex:null==e?void 0:e.initialIndex}),hydrationData:null==e?void 0:e.hydrationData,routes:t,mapRouteProperties:ft,dataStrategy:null==e?void 0:e.dataStrategy,patchRoutesOnNavigation:null==e?void 0:e.patchRoutesOnNavigation}).initialize()}},218:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},228:function(t,e){!function(t){"use strict";var e="1.9.4";function n(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var s=0;function a(t){return"_leaflet_id"in t||(t._leaflet_id=++s),t._leaflet_id}function o(t,e,n){var i,r,s,a;return a=function(){i=!1,r&&(s.apply(n,r),r=!1)},s=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)},s}function l(t,e,n){var i=e[1],r=e[0],s=i-r;return t===i&&n?t:((t-r)%s+s)%s+r}function c(){return!1}function u(t,e){if(!1===e)return t;var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function f(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(t,e){return t.replace(m,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"===typeof i&&(i=i(e)),i})}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var x="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-b));return b=e+n,window.setTimeout(t,n)}var S=window.requestAnimationFrame||_("RequestAnimationFrame")||w,M=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,n){if(!n||S!==w)return S.call(window,r(t,e));t.call(e)}function T(t){t&&M.call(window,t)}var A={__proto__:null,extend:n,create:i,bind:r,get lastId(){return s},stamp:a,throttle:o,wrapNum:l,falseFn:c,formatNum:u,trim:h,splitWords:d,setOptions:f,getParamString:p,template:g,isArray:v,indexOf:y,emptyImageUrl:x,requestFn:S,cancelFn:M,requestAnimFrame:E,cancelAnimFrame:T};function C(){}function P(t){if("undefined"!==typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}C.extend=function(t){var e=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=e.__super__=this.prototype,s=i(r);for(var a in s.constructor=e,e.prototype=s,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&n(e,t.statics),t.includes&&(P(t.includes),n.apply(null,[s].concat(t.includes))),n(s,t),delete s.statics,delete s.includes,s.options&&(s.options=r.options?i(r.options):{},n(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=s._initHooks.length;t<e;t++)s._initHooks[t].call(this)}},e},C.include=function(t){var e=this.prototype.options;return n(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},C.mergeOptions=function(t){return n(this.prototype.options,t),this},C.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"===typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var R={on:function(t,e,n){if("object"===typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,s=(t=d(t)).length;r<s;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(arguments.length)if("object"===typeof t)for(var i in t)this._off(i,t[i],e);else{t=d(t);for(var r=1===arguments.length,s=0,a=t.length;s<a;s++)r?this._off(t[s]):this._off(t[s],e,n)}else delete this._events;return this},_on:function(t,e,n,i){if("function"===typeof e){if(!1===this._listens(t,e,n)){n===this&&(n=void 0);var r={fn:e,ctx:n};i&&(r.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(r)}}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,n){var i,r,s;if(this._events&&(i=this._events[t]))if(1!==arguments.length)if("function"===typeof e){var a=this._listens(t,e,n);if(!1!==a){var o=i[a];this._firingCount&&(o.fn=c,this._events[t]=i=i.slice()),i.splice(a,1)}}else console.warn("wrong listener type: "+typeof e);else{if(this._firingCount)for(r=0,s=i.length;r<s;r++)i[r].fn=c;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var r=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var a=0,o=s.length;a<o;a++){var l=s[a],c=l.fn;l.once&&this.off(t,c,l.ctx),c.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e,n,i){"string"!==typeof t&&console.warn('"string" type argument expected');var r=e;"function"!==typeof e&&(i=!!e,r=void 0,n=void 0);var s=this._events&&this._events[t];if(s&&s.length&&!1!==this._listens(t,r,n))return!0;if(i)for(var a in this._eventParents)if(this._eventParents[a].listens(t,e,n,i))return!0;return!1},_listens:function(t,e,n){if(!this._events)return!1;var i=this._events[t]||[];if(!e)return!!i.length;n===this&&(n=void 0);for(var r=0,s=i.length;r<s;r++)if(i[r].fn===e&&i[r].ctx===n)return r;return!1},once:function(t,e,n){if("object"===typeof t)for(var i in t)this._on(i,t[i],e,!0);else for(var r=0,s=(t=d(t)).length;r<s;r++)this._on(t[r],e,n,!0);return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};R.addEventListener=R.on,R.removeEventListener=R.clearAllEventListeners=R.off,R.addOneTimeEventListener=R.once,R.fireEvent=R.fire,R.hasEventListeners=R.listens;var N=C.extend(R);function k(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var O=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function D(t,e,n){return t instanceof k?t:v(t)?new k(t[0],t[1]):void 0===t||null===t?t:"object"===typeof t&&"x"in t&&"y"in t?new k(t.x,t.y):new k(t,e,n)}function I(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function z(t,e){return!t||t instanceof I?t:new I(t,e)}function j(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function U(t,e){return t instanceof j?t:new j(t,e)}function F(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function B(t,e,n){return t instanceof F?t:v(t)&&"object"!==typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:void 0===t||null===t?t:"object"===typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,n)}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(t){return this.clone()._add(D(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(D(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new k(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new k(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(t){var e=(t=D(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=D(t)).x===this.x&&t.y===this.y},contains:function(t){return t=D(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},I.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof k||"number"===typeof t[0]||"x"in t)e=n=D(t);else if(e=(t=z(t)).min,n=t.max,!e||!n)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=e.clone(),this.max=n.clone()),this},getCenter:function(t){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"===typeof t[0]||t instanceof k?D(t):z(t))instanceof I?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=z(t);var e=this.min,n=this.max,i=t.min,r=t.max,s=r.x>=e.x&&i.x<=n.x,a=r.y>=e.y&&i.y<=n.y;return s&&a},overlaps:function(t){t=z(t);var e=this.min,n=this.max,i=t.min,r=t.max,s=r.x>e.x&&i.x<n.x,a=r.y>e.y&&i.y<n.y;return s&&a},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,n=this.max,i=Math.abs(e.x-n.x)*t,r=Math.abs(e.y-n.y)*t;return z(D(e.x-i,e.y-r),D(n.x+i,n.y+r))},equals:function(t){return!!t&&(t=z(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},j.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof F)e=t,n=t;else{if(!(t instanceof j))return t?this.extend(B(t)||U(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new j(new F(e.lat-i,e.lng-r),new F(n.lat+i,n.lng+r))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"===typeof t[0]||t instanceof F||"lat"in t?B(t):U(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof j?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=U(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),s=r.lat>=e.lat&&i.lat<=n.lat,a=r.lng>=e.lng&&i.lng<=n.lng;return s&&a},overlaps:function(t){t=U(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),s=r.lat>e.lat&&i.lat<n.lat,a=r.lng>e.lng&&i.lng<n.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=U(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){return!!t&&(t=B(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return V.distance(this,B(t))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return U([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var H={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new I(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var s=t.getSouthWest(),a=t.getNorthEast();return new j(new F(s.lat-i,s.lng-r),new F(a.lat-i,a.lng-r))}},V=n({},H,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,s=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),o=s*s+Math.cos(i)*Math.cos(r)*a*a,l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return this.R*l}}),W=6378137,G={R:W,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new k(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=W*Math.PI;return new I([-t,-t],[t,t])}()};function X(t,e,n,i){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function q(t,e,n,i){return new X(t,e,n,i)}X.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new k((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Z=n({},V,{code:"EPSG:3857",projection:G,transformation:function(){var t=.5/(Math.PI*G.R);return q(t,.5,-t,.5)}()}),Y=n({},Z,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t,e){var n,i,r,s,a,o,l="";for(n=0,r=t.length;n<r;n++){for(i=0,s=(a=t[n]).length;i<s;i++)l+=(i?"L":"M")+(o=a[i]).x+" "+o.y;l+=e?It.svg?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,$="ActiveXObject"in window,tt=$&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),nt=Dt("webkit"),it=Dt("android"),rt=Dt("android 2")||Dt("android 3"),st=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=it&&Dt("Google")&&st<537&&!("AudioNode"in window),ot=!!window.opera,lt=!et&&Dt("chrome"),ct=Dt("gecko")&&!nt&&!ot&&!$,ut=!lt&&Dt("safari"),ht=Dt("phantom"),dt="OTransition"in Q,ft=0===navigator.platform.indexOf("Win"),pt=$&&"transition"in Q,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,gt="MozPerspective"in Q,vt=!window.L_DISABLE_3D&&(pt||mt||gt)&&!dt&&!ht,yt="undefined"!==typeof orientation||Dt("mobile"),xt=yt&&nt,_t=yt&&mt,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!bt),St="ontouchstart"in window||!!window.TouchEvent,Mt=!window.L_NO_TOUCH&&(St||wt),Et=yt&&ot,Tt=yt&&ct,At=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ct=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(n){}return t}(),Pt=!!document.createElement("canvas").getContext,Rt=!(!document.createElementNS||!K("svg").createSVGRect),Lt=!!Rt&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI)}(),Nt=!Rt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===typeof e.adj}catch(n){return!1}}(),kt=0===navigator.platform.indexOf("Mac"),Ot=0===navigator.platform.indexOf("Linux");function Dt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var It={ie:$,ielt9:tt,edge:et,webkit:nt,android:it,android23:rt,androidStock:at,opera:ot,chrome:lt,gecko:ct,safari:ut,phantom:ht,opera12:dt,win:ft,ie3d:pt,webkit3d:mt,gecko3d:gt,any3d:vt,mobile:yt,mobileWebkit:xt,mobileWebkit3d:_t,msPointer:bt,pointer:wt,touch:Mt,touchNative:St,mobileOpera:Et,mobileGecko:Tt,retina:At,passiveEvents:Ct,canvas:Pt,svg:Rt,vml:Nt,inlineSvg:Lt,mac:kt,linux:Ot},zt=It.msPointer?"MSPointerDown":"pointerdown",jt=It.msPointer?"MSPointerMove":"pointermove",Ut=It.msPointer?"MSPointerUp":"pointerup",Ft=It.msPointer?"MSPointerCancel":"pointercancel",Bt={touchstart:zt,touchmove:jt,touchend:Ut,touchcancel:Ft},Ht={touchstart:Qt,touchmove:Jt,touchend:Jt,touchcancel:Jt},Vt={},Wt=!1;function Gt(t,e,n){return"touchstart"===e&&Kt(),Ht[e]?(n=Ht[e].bind(this,n),t.addEventListener(Bt[e],n,!1),n):(console.warn("wrong event specified:",e),c)}function Xt(t,e,n){Bt[e]?t.removeEventListener(Bt[e],n,!1):console.warn("wrong event specified:",e)}function qt(t){Vt[t.pointerId]=t}function Zt(t){Vt[t.pointerId]&&(Vt[t.pointerId]=t)}function Yt(t){delete Vt[t.pointerId]}function Kt(){Wt||(document.addEventListener(zt,qt,!0),document.addEventListener(jt,Zt,!0),document.addEventListener(Ut,Yt,!0),document.addEventListener(Ft,Yt,!0),Wt=!0)}function Jt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in e.touches=[],Vt)e.touches.push(Vt[n]);e.changedTouches=[e],t(e)}}function Qt(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&qe(e),Jt(t,e)}function $t(t){var e,n,i={};for(n in t)e=t[n],i[n]=e&&e.bind?e.bind(t):e;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var te=200;function ee(t,e){t.addEventListener("dblclick",e);var n,i=0;function r(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var r=Ye(t);if(!r.some(function(t){return t instanceof HTMLLabelElement&&t.attributes.for})||r.some(function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement})){var s=Date.now();s-i<=te?2===++n&&e($t(t)):n=1,i=s}}}else n=t.detail}return t.addEventListener("click",r),{dblclick:e,simDblclick:r}}function ne(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var ie,re,se,ae,oe,le=Ee(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ce=Ee(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ue="webkitTransition"===ce||"OTransition"===ce?ce+"End":"transitionend";function he(t){return"string"===typeof t?document.getElementById(t):t}function de(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function fe(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function pe(t){var e=t.parentNode;e&&e.removeChild(t)}function me(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ge(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ve(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ye(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=we(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function xe(t,e){if(void 0!==t.classList)for(var n=d(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!ye(t,e)){var s=we(t);be(t,(s?s+" ":"")+e)}}function _e(t,e){void 0!==t.classList?t.classList.remove(e):be(t,h((" "+we(t)+" ").replace(" "+e+" "," ")))}function be(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function we(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function Se(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Me(t,e)}function Me(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(r){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}function Ee(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Te(t,e,n){var i=e||new k(0,0);t.style[le]=(It.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Ae(t,e){t._leaflet_pos=e,It.any3d?Te(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Ce(t){return t._leaflet_pos||new k(0,0)}if("onselectstart"in document)ie=function(){ze(window,"selectstart",qe)},re=function(){Ue(window,"selectstart",qe)};else{var Pe=Ee(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ie=function(){if(Pe){var t=document.documentElement.style;se=t[Pe],t[Pe]="none"}},re=function(){Pe&&(document.documentElement.style[Pe]=se,se=void 0)}}function Re(){ze(window,"dragstart",qe)}function Le(){Ue(window,"dragstart",qe)}function Ne(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(ke(),ae=t,oe=t.style.outlineStyle,t.style.outlineStyle="none",ze(window,"keydown",ke))}function ke(){ae&&(ae.style.outlineStyle=oe,ae=void 0,oe=void 0,Ue(window,"keydown",ke))}function Oe(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function De(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ie={__proto__:null,TRANSFORM:le,TRANSITION:ce,TRANSITION_END:ue,get:he,getStyle:de,create:fe,remove:pe,empty:me,toFront:ge,toBack:ve,hasClass:ye,addClass:xe,removeClass:_e,setClass:be,getClass:we,setOpacity:Se,testProp:Ee,setTransform:Te,setPosition:Ae,getPosition:Ce,get disableTextSelection(){return ie},get enableTextSelection(){return re},disableImageDrag:Re,enableImageDrag:Le,preventOutline:Ne,restoreOutline:ke,getSizedParentNode:Oe,getScale:De};function ze(t,e,n,i){if(e&&"object"===typeof e)for(var r in e)He(t,r,e[r],n);else for(var s=0,a=(e=d(e)).length;s<a;s++)He(t,e[s],n,i);return this}var je="_leaflet_events";function Ue(t,e,n,i){if(1===arguments.length)Fe(t),delete t[je];else if(e&&"object"===typeof e)for(var r in e)Ve(t,r,e[r],n);else if(e=d(e),2===arguments.length)Fe(t,function(t){return-1!==y(e,t)});else for(var s=0,a=e.length;s<a;s++)Ve(t,e[s],n,i);return this}function Fe(t,e){for(var n in t[je]){var i=n.split(/\d/)[0];e&&!e(i)||Ve(t,i,null,null,n)}}var Be={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function He(t,e,n,i){var r=e+a(n)+(i?"_"+a(i):"");if(t[je]&&t[je][r])return this;var s=function(e){return n.call(i||t,e||window.event)},o=s;!It.touchNative&&It.pointer&&0===e.indexOf("touch")?s=Gt(t,e,s):It.touch&&"dblclick"===e?s=ee(t,s):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Be[e]||e,s,!!It.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,$e(t,e)&&o(e)},t.addEventListener(Be[e],s,!1)):t.addEventListener(e,o,!1):t.attachEvent("on"+e,s),t[je]=t[je]||{},t[je][r]=s}function Ve(t,e,n,i,r){r=r||e+a(n)+(i?"_"+a(i):"");var s=t[je]&&t[je][r];if(!s)return this;!It.touchNative&&It.pointer&&0===e.indexOf("touch")?Xt(t,e,s):It.touch&&"dblclick"===e?ne(t,s):"removeEventListener"in t?t.removeEventListener(Be[e]||e,s,!1):t.detachEvent("on"+e,s),t[je][r]=null}function We(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ge(t){return He(t,"wheel",We),this}function Xe(t){return ze(t,"mousedown touchstart dblclick contextmenu",We),t._leaflet_disable_click=!0,this}function qe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ze(t){return qe(t),We(t),this}function Ye(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function Ke(t,e){if(!e)return new k(t.clientX,t.clientY);var n=De(e),i=n.boundingClientRect;return new k((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Je=It.linux&&It.chrome?window.devicePixelRatio:It.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qe(t){return It.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Je:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function $e(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t}var tn={__proto__:null,on:ze,off:Ue,stopPropagation:We,disableScrollPropagation:Ge,disableClickPropagation:Xe,preventDefault:qe,stop:Ze,getPropagationPath:Ye,getMousePosition:Ke,getWheelDelta:Qe,isExternalTarget:$e,addListener:ze,removeListener:Ue},en=N.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=Ce(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),Ae(this._el,n),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),nn=N.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(B(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ce&&It.any3d&&!It.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,ue,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(B(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e,i.pan&&i.pan.noMoveStart),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(It.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(It.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),s=(t instanceof k?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(s));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():U(t);var n=D(e.paddingTopLeft||e.padding||[0,0]),i=D(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"===typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var s=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),r),o=this.project(t.getNorthEast(),r);return{center:this.unproject(a.add(o).divideBy(2).add(s),r),zoom:r}},fitBounds:function(t,e){if(!(t=U(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=D(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new en,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){xe(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!It.any3d)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),s=this.getSize(),a=this._zoom;t=B(t),e=void 0===e?a:e;var o=Math.max(s.x,s.y),l=o*this.getZoomScale(a,e),c=r.distanceTo(i)||1,u=1.42,h=u*u;function d(t){var e=(l*l-o*o+(t?-1:1)*h*h*c*c)/(2*(t?l:o)*h*c),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return f(t)/p(t)}var g=d(0);function v(t){return o*(p(g)/p(g+u*t))}function y(t){return o*(p(g)*m(g+u*t)-f(g))/h}function x(t){return 1-Math.pow(1-t,1.5)}var _=Date.now(),b=(d(1)-g)/u,w=n.duration?1e3*n.duration:1e3*b*.8;function S(){var n=(Date.now()-_)/w,s=x(n)*b;n<=1?(this._flyToFrame=E(S,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(y(s)/c)),a),this.getScaleZoom(o/v(s),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),S.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=U(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,U(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=D((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=D(e.paddingBottomRight||e.padding||[0,0]),r=this.project(this.getCenter()),s=this.project(t),a=this.getPixelBounds(),o=z([a.min.add(n),a.max.subtract(i)]),l=o.getSize();if(!o.contains(s)){this._enforcingBounds=!0;var c=s.subtract(o.getCenter()),u=o.extend(s).getSize().subtract(l);r.x+=c.x<0?-u.x:u.x,r.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(r),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),s=e.divideBy(2).round(),a=i.divideBy(2).round(),o=s.subtract(a);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new F(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var s={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"===typeof t.coords[a]&&(s[a]=t.coords[a]);this.fire("locationfound",s)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)pe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=fe("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new j(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=U(t),n=D(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),s=this.getMaxZoom(),a=t.getNorthWest(),o=t.getSouthEast(),l=this.getSize().subtract(n),c=z(this.project(o,i),this.project(a,i)).getSize(),u=It.any3d?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,f=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(f,i),u&&(i=Math.round(i/(u/100))*(u/100),i=e?Math.ceil(i/u)*u:Math.floor(i/u)*u),Math.max(r,Math.min(s,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new I(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"===typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(B(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(D(t),e)},layerPointToLatLng:function(t){var e=D(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(B(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(B(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(U(t))},distance:function(t,e){return this.options.crs.distance(B(t),B(e))},containerPointToLayerPoint:function(t){return D(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return D(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(D(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(t)))},mouseEventToContainerPoint:function(t){return Ke(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=he(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");ze(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&It.any3d,xe(t,"leaflet-container"+(It.touch?" leaflet-touch":"")+(It.retina?" leaflet-retina":"")+(It.ielt9?" leaflet-oldie":"")+(It.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=de(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ae(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(t.markerPane,"leaflet-zoom-hide"),xe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){Ae(this._mapPane,new k(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,n)._move(t,e)._moveEnd(r),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,i){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),i?n&&n.pinch&&this.fire("zoom",n):((r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Ae(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Ue:ze;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),It.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,o=!1;s;){if((n=this._targets[a(s)])&&("click"===e||"preclick"===e)&&this._draggableMoved(n)){o=!0;break}if(n&&n.listens(e,!0)){if(r&&!$e(s,t))break;if(i.push(n),r)break}if(s===this._container)break;s=s.parentNode}return i.length||o||r||!this.listens(e,!0)||(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var n=t.type;"mousedown"===n&&Ne(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var r=n({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var s=this._findEventTargets(t,e);if(i){for(var a=[],o=0;o<i.length;o++)i[o].listens(e,!0)&&a.push(i[o]);s=a.concat(s)}if(s.length){"contextmenu"===e&&qe(t);var l=s[0],c={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(o=0;o<s.length;o++)if(s[o].fire(e,c,!0),c.originalEvent._stopped||!1===s[o].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Ce(this._mapPane)||new k(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return z([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),s=new I(i.subtract(r),i.add(r)),a=this._getBoundsOffset(s,n,e);return Math.abs(a.x)<=1&&Math.abs(a.y)<=1?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new I(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=z(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),s=i.max.subtract(t.max);return new k(this._rebound(r.x,-s.x),this._rebound(r.y,-s.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=It.any3d?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=fe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=le,n=this._proxy.style[e];Te(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Te(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r))&&(E(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(t,e){return new nn(t,e)}var sn=C.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return xe(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),an=function(t){return new sn(t)};nn.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=fe("div",e+"control-container",this._container);function i(i,r){var s=e+i+" "+e+r;t[i+r]=fe("div",s,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)pe(this._controlCorners[t]);pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var on=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return sn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):_e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=fe("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Xe(e),Ge(e);var i=this._section=fe("section",t+"-list");n&&(this._map.on("click",this.collapse,this),ze(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var r=this._layersLink=fe("a",t+"-toggle",e);r.href="#",r.title="Layers",r.setAttribute("role","button"),ze(r,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){qe(t),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=fe("div",t+"-base",i),this._separator=fe("div",t+"-separator",i),this._overlaysList=fe("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;me(this._baseLayersList),me(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+a(this),i),this._layerControlInputs.push(e),e.layerId=a(t.layer),ze(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var s=document.createElement("span");return n.appendChild(s),s.appendChild(e),s.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var s=n.length-1;s>=0;s--)t=n[s],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(s=0;s<r.length;s++)this._map.hasLayer(r[s])&&this._map.removeLayer(r[s]);for(s=0;s<i.length;s++)this._map.hasLayer(i[s])||this._map.addLayer(i[s]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,ze(t,"click",qe),this.expand();var e=this;setTimeout(function(){Ue(t,"click",qe),e._preventClick=!1})}}),ln=function(t,e,n){return new on(t,e,n)},cn=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=fe("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var s=fe("a",n,i);return s.innerHTML=t,s.href="#",s.title=e,s.setAttribute("role","button"),s.setAttribute("aria-label",e),Xe(s),ze(s,"click",Ze),ze(s,"click",r,this),ze(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";_e(this._zoomInButton,e),_e(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(xe(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(xe(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var un=function(t){return new cn(t)},hn=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=fe("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=fe("div",e,n)),t.imperial&&(this._iScale=fe("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),dn=function(t){return new hn(t)},fn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(It.inlineSvg?fn+" ":"")+"Leaflet</a>"},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=fe("div","leaflet-control-attribution"),Xe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new pn).addTo(this)});var mn=function(t){return new pn(t)};sn.Layers=on,sn.Zoom=cn,sn.Scale=hn,sn.Attribution=pn,an.layers=ln,an.zoom=un,an.scale=dn,an.attribution=mn;var gn=C.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(t,e){return t.addHandler(e,this),this};var vn={Events:R},yn=It.touch?"touchstart mousedown":"mousedown",xn=N.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){f(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(ze(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xn._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ye(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)xn._dragging===this&&this.finishDrag();else if(!(xn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(xn._dragging=this,this._preventOutline&&Ne(this._element),Re(),ie(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=Oe(this._element);this._startPoint=new k(e.clientX,e.clientY),this._startPos=Ce(this._element),this._parentScale=De(n);var i="mousedown"===t.type;ze(document,i?"mousemove":"touchmove",this._onMove,this),ze(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new k(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,qe(t),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Ae(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){_e(document.body,"leaflet-dragging"),this._lastTarget&&(_e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),Le(),re();var e=this._moved&&this._moving;this._moving=!1,xn._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function _n(t,e,n){var i,r,s,a,o,l,c,u,h,d=[1,4,2,8];for(r=0,c=t.length;r<c;r++)t[r]._code=kn(t[r],e);for(a=0;a<4;a++){for(u=d[a],i=[],r=0,s=(c=t.length)-1;r<c;s=r++)o=t[r],l=t[s],o._code&u?l._code&u||((h=Nn(l,o,u,e,n))._code=kn(h,e),i.push(h)):(l._code&u&&((h=Nn(l,o,u,e,n))._code=kn(h,e),i.push(h)),i.push(o));t=i}return t}function bn(t,e){var n,i,r,s,a,o,l,c,u;if(!t||0===t.length)throw new Error("latlngs not passed");In(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var h=B([0,0]),d=U(t);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(h=wn(t));var f=t.length,p=[];for(n=0;n<f;n++){var m=B(t[n]);p.push(e.project(B([m.lat-h.lat,m.lng-h.lng])))}for(o=l=c=0,n=0,i=f-1;n<f;i=n++)r=p[n],s=p[i],a=r.y*s.x-s.y*r.x,l+=(r.x+s.x)*a,c+=(r.y+s.y)*a,o+=3*a;u=0===o?p[0]:[l/o,c/o];var g=e.unproject(D(u));return B([g.lat+h.lat,g.lng+h.lng])}function wn(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var s=B(t[r]);e+=s.lat,n+=s.lng,i++}return B([e/i,n/i])}var Sn,Mn={__proto__:null,clipPolygon:_n,polygonCenter:bn,centroid:wn};function En(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=Cn(t=Rn(t,n),n)}function Tn(t,e,n){return Math.sqrt(Dn(t,e,n,!0))}function An(t,e,n){return Dn(t,e,n)}function Cn(t,e){var n=t.length,i=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Pn(t,i,e,0,n-1);var r,s=[];for(r=0;r<n;r++)i[r]&&s.push(t[r]);return s}function Pn(t,e,n,i,r){var s,a,o,l=0;for(a=i+1;a<=r-1;a++)(o=Dn(t[a],t[i],t[r],!0))>l&&(s=a,l=o);l>n&&(e[s]=1,Pn(t,e,n,i,s),Pn(t,e,n,s,r))}function Rn(t,e){for(var n=[t[0]],i=1,r=0,s=t.length;i<s;i++)On(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<s-1&&n.push(t[s-1]),n}function Ln(t,e,n,i,r){var s,a,o,l=i?Sn:kn(t,n),c=kn(e,n);for(Sn=c;;){if(!(l|c))return[t,e];if(l&c)return!1;o=kn(a=Nn(t,e,s=l||c,n,r),n),s===l?(t=a,l=o):(e=a,c=o)}}function Nn(t,e,n,i,r){var s,a,o=e.x-t.x,l=e.y-t.y,c=i.min,u=i.max;return 8&n?(s=t.x+o*(u.y-t.y)/l,a=u.y):4&n?(s=t.x+o*(c.y-t.y)/l,a=c.y):2&n?(s=u.x,a=t.y+l*(u.x-t.x)/o):1&n&&(s=c.x,a=t.y+l*(c.x-t.x)/o),new k(s,a,r)}function kn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function On(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function Dn(t,e,n,i){var r,s=e.x,a=e.y,o=n.x-s,l=n.y-a,c=o*o+l*l;return c>0&&((r=((t.x-s)*o+(t.y-a)*l)/c)>1?(s=n.x,a=n.y):r>0&&(s+=o*r,a+=l*r)),o=t.x-s,l=t.y-a,i?o*o+l*l:new k(s,a)}function In(t){return!v(t[0])||"object"!==typeof t[0][0]&&"undefined"!==typeof t[0][0]}function zn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),In(t)}function jn(t,e){var n,i,r,s,a,o,l,c;if(!t||0===t.length)throw new Error("latlngs not passed");In(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var u=B([0,0]),h=U(t);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(u=wn(t));var d=t.length,f=[];for(n=0;n<d;n++){var p=B(t[n]);f.push(e.project(B([p.lat-u.lat,p.lng-u.lng])))}for(n=0,i=0;n<d-1;n++)i+=f[n].distanceTo(f[n+1])/2;if(0===i)c=f[0];else for(n=0,s=0;n<d-1;n++)if(a=f[n],o=f[n+1],(s+=r=a.distanceTo(o))>i){l=(s-i)/r,c=[o.x-l*(o.x-a.x),o.y-l*(o.y-a.y)];break}var m=e.unproject(D(c));return B([m.lat+u.lat,m.lng+u.lng])}var Un={__proto__:null,simplify:En,pointToSegmentDistance:Tn,closestPointOnSegment:An,clipSegment:Ln,_getEdgeIntersection:Nn,_getBitCode:kn,_sqClosestPointOnSegment:Dn,isFlat:In,_flat:zn,polylineCenter:jn},Fn={project:function(t){return new k(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new I([-180,-90],[180,90])},Bn={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,s=Math.sqrt(1-r*r),a=s*Math.sin(i),o=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),s/2);return i=-n*Math.log(Math.max(o,1e-10)),new k(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,s=Math.sqrt(1-r*r),a=Math.exp(-t.y/i),o=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=s*Math.sin(o),e=Math.pow((1-e)/(1+e),s/2),o+=c=Math.PI/2-2*Math.atan(a*e)-o;return new F(o*n,t.x*n/i)}},Hn={__proto__:null,LonLat:Fn,Mercator:Bn,SphericalMercator:G},Vn=n({},V,{code:"EPSG:3395",projection:Bn,transformation:function(){var t=.5/(Math.PI*Bn.R);return q(t,.5,-t,.5)}()}),Wn=n({},V,{code:"EPSG:4326",projection:Fn,transformation:q(1/180,1,-1/180,.5)}),Gn=n({},H,{projection:Fn,transformation:q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});H.Earth=V,H.EPSG3395=Vn,H.EPSG3857=Z,H.EPSG900913=Y,H.EPSG4326=Wn,H.Simple=Gn;var Xn=N.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qn=Xn.extend({initialize:function(t,e){var n,i;if(f(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"===typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Zn=function(t,e){return new qn(t,e)},Yn=qn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),qn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),qn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new j;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Kn=function(t,e){return new Yn(t,e)},Jn=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"===typeof i&&(i=[i,i]);var r=D(i),s=D("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return It.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Qn(t){return new Jn(t)}var $n=Jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!==typeof $n.imagePath&&($n.imagePath=this._detectIconPath()),(this.options.imagePath||$n.imagePath)+Jn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,n){var i=e.exec(t);return i&&i[n]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=fe("div","leaflet-default-icon-path",document.body),e=de(t,"background-image")||de(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),ti=gn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new xn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,s=Ce(e._icon),a=n.getPixelBounds(),o=n.getPixelOrigin(),l=z(a.min._subtract(o).add(r),a.max._subtract(o).subtract(r));if(!l.contains(s)){var c=D((Math.max(l.max.x,s.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,s.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,s.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,s.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(i);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Ae(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=Ce(e._icon),r=e._map.layerPointToLatLng(i);n&&Ae(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ei=Xn.extend({options:{icon:new $n,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=B(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),xe(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(n,"focus",this._panOnFocus,this);var r=t.icon.createShadow(this._shadow),s=!1;r!==this._shadow&&(this._removeShadow(),s=!0),r&&(xe(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&s&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Ae(this._icon,t),this._shadow&&Ae(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ti)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ti(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Se(this._icon,t),this._shadow&&Se(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?D(e.iconSize):D(0,0),i=e.iconAnchor?D(e.iconAnchor):D(0,0);t.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ni(t,e){return new ei(t,e)}var ii=Xn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ri=ii.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=B(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return ii.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new I(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function si(t,e){return new ri(t,e)}var ai=ri.extend({initialize:function(t,e,i){if("number"===typeof e&&(e=n({},i,{radius:e})),f(this,e),this._latlng=B(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ii.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===V.distance){var r=Math.PI/180,s=this._mRadius/V.R/r,a=n.project([e+s,t]),o=n.project([e-s,t]),l=a.add(o).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(s*r)-Math.sin(e*r)*Math.sin(c*r))/(Math.cos(e*r)*Math.cos(c*r)))/r;(isNaN(u)||0===u)&&(u=s/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,t-u]).x,this._radiusY=l.y-a.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function oi(t,e,n){return new ai(t,e,n)}var li=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,s=Dn,a=0,o=this._parts.length;a<o;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var h=s(t,e=l[c-1],n=l[c],!0);h<i&&(i=h,r=s(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=B(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new j,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return In(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=In(t),i=0,r=t.length;i<r;i++)n?(e[i]=B(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new k(t,t);this._rawPxBounds&&(this._pxBounds=new I([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var i,r,s=t[0]instanceof F,a=t.length;if(s){for(r=[],i=0;i<a;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,s,a,o,l=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,s=(o=this._rings[e]).length;n<s-1;n++)(a=Ln(o[n],o[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(a[0]),a[1]===o[n+1]&&n!==s-2||(l[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=En(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,s,a,o,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,s=this._parts.length;n<s;n++)for(i=0,r=(a=(o=this._parts[n]).length)-1;i<a;r=i++)if((e||0!==i)&&Tn(t,o[r],o[i])<=l)return!0;return!1}});function ci(t,e){return new li(t,e)}li._flat=zn;var ui=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=li.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof F&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){li.prototype._setLatLngs.call(this,t),In(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return In(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new k(e,e);if(t=new I(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,s=this._rings.length;r<s;r++)(i=_n(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,s,a,o,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,o=this._parts.length;r<o;r++)for(s=0,a=(l=(e=this._parts[r]).length)-1;s<l;a=s++)n=e[s],i=e[a],n.y>t.y!==i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||li.prototype._containsPoint.call(this,t,!0)}});function hi(t,e){return new ui(t,e)}var di=Yn.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=v(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var a=fi(t,s);return a?(a.feature=_i(t),a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"===typeof e&&(e=e(t.feature)),t.setStyle(e))}});function fi(t,e){var n,i,r,s,a="Feature"===t.type?t.geometry:t,o=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,u=e&&e.coordsToLatLng||mi;if(!o&&!a)return null;switch(a.type){case"Point":return pi(c,t,n=u(o),e);case"MultiPoint":for(r=0,s=o.length;r<s;r++)n=u(o[r]),l.push(pi(c,t,n,e));return new Yn(l);case"LineString":case"MultiLineString":return i=gi(o,"LineString"===a.type?0:1,u),new li(i,e);case"Polygon":case"MultiPolygon":return i=gi(o,"Polygon"===a.type?1:2,u),new ui(i,e);case"GeometryCollection":for(r=0,s=a.geometries.length;r<s;r++){var h=fi({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new Yn(l);case"FeatureCollection":for(r=0,s=a.features.length;r<s;r++){var d=fi(a.features[r],e);d&&l.push(d)}return new Yn(l);default:throw new Error("Invalid GeoJSON object.")}}function pi(t,e,n,i){return t?t(e,n):new ei(n,i&&i.markersInheritOptions&&i)}function mi(t){return new F(t[1],t[0],t[2])}function gi(t,e,n){for(var i,r=[],s=0,a=t.length;s<a;s++)i=e?gi(t[s],e-1,n):(n||mi)(t[s]),r.push(i);return r}function vi(t,e){return void 0!==(t=B(t)).alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function yi(t,e,n,i){for(var r=[],s=0,a=t.length;s<a;s++)r.push(e?yi(t[s],In(t[s])?0:e-1,n,i):vi(t[s],i));return!e&&n&&r.length>0&&r.push(r[0].slice()),r}function xi(t,e){return t.feature?n({},t.feature,{geometry:e}):_i(e)}function _i(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var bi={toGeoJSON:function(t){return xi(this,{type:"Point",coordinates:vi(this.getLatLng(),t)})}};function wi(t,e){return new di(t,e)}ei.include(bi),ai.include(bi),ri.include(bi),li.include({toGeoJSON:function(t){var e=!In(this._latlngs);return xi(this,{type:(e?"Multi":"")+"LineString",coordinates:yi(this._latlngs,e?1:0,!1,t)})}}),ui.include({toGeoJSON:function(t){var e=!In(this._latlngs),n=e&&!In(this._latlngs[0]),i=yi(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),xi(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),qn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),xi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var s=_i(r);"FeatureCollection"===s.type?i.push.apply(i,s.features):i.push(s)}}}),n?xi(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Si=wi,Mi=Xn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=U(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ge(this._image),this},bringToBack:function(){return this._map&&ve(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=U(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:fe("img");xe(e,"leaflet-image-layer"),this._zoomAnimated&&xe(e,"leaflet-zoom-animated"),this.options.className&&xe(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Te(this._image,n,e)},_reset:function(){var t=this._image,e=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();Ae(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Se(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Ei=function(t,e,n){return new Mi(t,e,n)},Ti=Mi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:fe("video");if(xe(e,"leaflet-image-layer"),this._zoomAnimated&&xe(e,"leaflet-zoom-animated"),this.options.className&&xe(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],s=0;s<n.length;s++)i.push(n[s].src);this._url=n.length>0?i:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var a=0;a<this._url.length;a++){var o=fe("source");o.src=this._url[a],e.appendChild(o)}}}});function Ai(t,e,n){return new Ti(t,e,n)}var Ci=Mi.extend({_initImage:function(){var t=this._image=this._url;xe(t,"leaflet-image-layer"),this._zoomAnimated&&xe(t,"leaflet-zoom-animated"),this.options.className&&xe(t,this.options.className),t.onselectstart=c,t.onmousemove=c}});function Pi(t,e,n){return new Ci(t,e,n)}var Ri=Xn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof F||v(t))?(this._latlng=B(t),f(this,e)):(f(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Se(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Se(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Se(this._container,0),this._removeTimeout=setTimeout(r(pe,void 0,this._container),200)):pe(this._container),this.options.interactive&&(_e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=B(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ge(this._container),this},bringToBack:function(){return this._map&&ve(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Yn){e=null;var n=this._source._layers;for(var i in n)if(n[i]._map){e=n[i];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.");t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ae(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(t,e,n,i){var r=e;return r instanceof t||(r=new t(i).setContent(e)),n&&r.setLatLng(n),r}}),Xn.include({_initOverlay:function(t,e,n,i){var r=n;return r instanceof t?(f(r,i),r._source=this):(r=e&&!i?e:new t(i,this)).setContent(n),r}});var Li=Ri.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Ri.prototype.openOn.call(this,t)},onAdd:function(t){Ri.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",We))},onRemove:function(t){Ri.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",We))},getEvents:function(){var t=Ri.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=fe("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=fe("div",t+"-content-wrapper",e);if(this._contentNode=fe("div",t+"-content",n),Xe(e),Ge(this._contentNode),ze(e,"contextmenu",We),this._tipContainer=fe("div",t+"-tip-container",e),this._tip=fe("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=fe("a",t+"-close-button",e);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',ze(i,"click",function(t){qe(t),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,s="leaflet-popup-scrolled";r&&i>r?(e.height=r+"px",xe(t,s)):_e(t,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();Ae(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var t=this._map,e=parseInt(de(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new k(this._containerLeft,-n-this._containerBottom);r._add(Ce(this._container));var s=t.layerPointToContainerPoint(r),a=D(this.options.autoPanPadding),o=D(this.options.autoPanPaddingTopLeft||a),l=D(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),u=0,h=0;s.x+i+l.x>c.x&&(u=s.x+i-c.x+l.x),s.x-u-o.x<0&&(u=s.x-o.x),s.y+n+l.y>c.y&&(h=s.y+n-c.y+l.y),s.y-h-o.y<0&&(h=s.y-o.y),(u||h)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([u,h]))}},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ni=function(t,e){return new Li(t,e)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(t,e,n){return this._initOverlay(Li,t,e,n).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),Xn.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Li,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Yn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){Ze(t);var e=t.layer||t.target;this._popup._source!==e||e instanceof ii?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var ki=Ri.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Ri.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Ri.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Ri.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fe("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,r=this._container,s=i.latLngToContainerPoint(i.getCenter()),a=i.layerPointToContainerPoint(t),o=this.options.direction,l=r.offsetWidth,c=r.offsetHeight,u=D(this.options.offset),h=this._getAnchor();"top"===o?(e=l/2,n=c):"bottom"===o?(e=l/2,n=0):"center"===o?(e=l/2,n=c/2):"right"===o?(e=0,n=c/2):"left"===o?(e=l,n=c/2):a.x<s.x?(o="right",e=0,n=c/2):(o="left",e=l+2*(u.x+h.x),n=c/2),t=t.subtract(D(e,n,!0)).add(u).add(h),_e(r,"leaflet-tooltip-right"),_e(r,"leaflet-tooltip-left"),_e(r,"leaflet-tooltip-top"),_e(r,"leaflet-tooltip-bottom"),xe(r,"leaflet-tooltip-"+o),Ae(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Se(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Oi=function(t,e){return new ki(t,e)};nn.include({openTooltip:function(t,e,n){return this._initOverlay(ki,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Xn.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ki,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Yn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e="function"===typeof t.getElement&&t.getElement();e&&(ze(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),ze(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e="function"===typeof t.getElement&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)})}else this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Di=Jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(me(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=D(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ii(t){return new Di(t)}Jn.Default=$n;var zi=Xn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:It.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),pe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ge(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ve(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof k?t:new k(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,s=n.length;r<s;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!It.ielt9){Se(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var s=Math.min(1,(t-r.loaded)/200);Se(r.el,s),s<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(T(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=fe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(pe(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=fe("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),c(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)pe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),s=Math.floor(e/2),a=n-1,o=new k(+r,+s);o.z=+a;var l=this._tileCoordsToKey(o),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>i&&this._retainParent(r,s,a,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var s=2*e;s<2*e+2;s++){var a=new k(r,s);a.z=n+1;var o=this._tileCoordsToKey(a),l=this._tiles[o];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,s,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var s=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!s||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();It.any3d?Te(t.el,r,i):Ae(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*i);return new I(r.subtract(s),r.add(s))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),s=r.getCenter(),a=[],o=this.options.keepBuffer,l=new I(r.getBottomLeft().subtract([o,-o]),r.getTopRight().add([o,-o]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new k(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var f=new k(d,h);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:a.push(f)}}if(a.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return U(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new j(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new k(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(pe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){xe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,It.ielt9&&this.options.opacity<1&&Se(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&E(r(this._tileReady,this,t,null,s)),Ae(s,n),this._tiles[i]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(Se(n.el,0),T(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(xe(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),It.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new k(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new I(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function ji(t){return new zi(t)}var Ui=zi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&It.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"===typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return ze(n,"load",r(this._tileOnLoad,this,e,n)),ze(n,"error",r(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:It.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){It.ielt9?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,!e.complete)){e.src=x;var n=this._tiles[t].coords;pe(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",x),zi.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==x))return zi.prototype._tileReady.call(this,t,e,n)}});function Fi(t,e){return new Ui(t,e)}var Bi=Ui.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var r in e)r in this.options||(i[r]=e[r]);var s=(e=f(this,e)).detectRetina&&It.retina?2:1,a=this.getTileSize();i.width=a.x*s,i.height=a.y*s,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Ui.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=z(n.project(e[0]),n.project(e[1])),r=i.min,s=i.max,a=(this._wmsVersion>=1.3&&this._crs===Wn?[r.y,r.x,s.y,s.x]:[r.x,r.y,s.x,s.y]).join(","),o=Ui.prototype.getTileUrl.call(this,t);return o+p(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function Hi(t,e){return new Bi(t,e)}Ui.WMS=Bi,Fi.wms=Hi;var Vi=Xn.extend({options:{padding:.1},initialize:function(t){f(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),s=i.multiplyBy(-n).add(r).subtract(this._map._getNewPixelOrigin(t,e));It.any3d?Te(this._container,s,n):Ae(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new I(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wi=Vi.extend({options:{tolerance:0},getEvents:function(){var t=Vi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ze(t,"mousemove",this._onMouseMove,this),ze(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,pe(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vi.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=It.retina?2:1;Ae(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",It.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Vi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"===typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,s,a=t._parts,o=a.length,l=this._ctx;if(o){for(l.beginPath(),n=0;n<o;n++){for(i=0,r=a[n].length;i<r;i++)s=a[n][i],l[i?"lineTo":"moveTo"](s.x,s.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(n=e);this._fireEvent(!!n&&[n],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(_e(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,s=this._drawFirst;s;s=s.next)(n=s.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(xe(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Gi(t){return It.canvas?new Wi(t):null}var Xi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qi={_initContainer:function(){this._container=fe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Xi("shape");xe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Xi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;pe(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=Xi("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=Xi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ge(t._container)},_bringToBack:function(t){ve(t._container)}},Zi=It.vml?Xi:K,Yi=Vi.extend({_initContainer:function(){this._container=Zi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Zi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pe(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),Ae(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Zi("path");t.options.className&&xe(e,t.options.className),t.options.interactive&&xe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){pe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,J(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ge(t._path)},_bringToBack:function(t){ve(t._path)}});function Ki(t){return It.svg||It.vml?new Yi(t):null}It.vml&&Yi.include(qi),nn.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Gi(t)||Ki(t)}});var Ji=ui.extend({initialize:function(t,e){ui.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=U(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Qi(t,e){return new Ji(t,e)}Yi.create=Zi,Yi.pointsToPath=J,di.geometryToLayer=fi,di.coordsToLatLng=mi,di.coordsToLatLngs=gi,di.latLngToCoords=vi,di.latLngsToCoords=yi,di.getFeature=xi,di.asFeature=_i,nn.mergeOptions({boxZoom:!0});var $i=gn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),ie(),Re(),this._startPoint=this._map.mouseEventToContainerPoint(t),ze(document,{contextmenu:Ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=fe("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new I(this._point,this._startPoint),n=e.getSize();Ae(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(pe(this._box),_e(this._container,"leaflet-crosshair")),re(),Le(),Ue(document,{contextmenu:Ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",$i),nn.mergeOptions({doubleClickZoom:!0});var tr=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});nn.addInitHook("addHandler","doubleClickZoom",tr),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var er=gn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new xn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_e(this._map._container,"leaflet-grab"),_e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=U(this._map.options.maxBounds);this._offsetLimit=z(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,s=(i+e+n)%t-e-n,a=Math.abs(r+n)<Math.abs(s+n)?r:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,o=r.multiplyBy(a/s),l=o.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=o.multiplyBy(c/l),h=c/(n.inertiaDeceleration*a),d=u.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),E(function(){e.panBy(d,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});nn.addInitHook("addHandler","dragging",er),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nr=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ze(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(e=this._panKeys[n],t.shiftKey&&(e=D(e).multiplyBy(3)),i.options.maxBounds&&(e=i._limitOffset(D(e),i.options.maxBounds)),i.options.worldCopyJump){var r=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(e)));i.panTo(r)}else i.panBy(e)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Ze(t)}}});nn.addInitHook("addHandler","keyboard",nr),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ir=gn.extend({addHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Qe(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Ze(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,s=n?Math.ceil(r/n)*n:r,a=t._limitZoom(e+(this._delta>0?s:-s))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});nn.addInitHook("addHandler","scrollWheelZoom",ir);var rr=600;nn.mergeOptions({tapHold:It.touchNative&&It.safari&&It.mobile,tapTolerance:15});var sr=gn.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new k(e.clientX,e.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(ze(document,"touchend",qe),ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),rr),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ue(document,"touchend",qe),Ue(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new k(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",sr),nn.mergeOptions({touchZoom:It.touch,bounceAtZoomLimits:!0});var ar=gn.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),qe(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),s=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&s>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var o=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(o,this,!0),qe(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",ar),nn.BoxZoom=$i,nn.DoubleClickZoom=tr,nn.Drag=er,nn.Keyboard=nr,nn.ScrollWheelZoom=ir,nn.TapHold=sr,nn.TouchZoom=ar,t.Bounds=I,t.Browser=It,t.CRS=H,t.Canvas=Wi,t.Circle=ai,t.CircleMarker=ri,t.Class=C,t.Control=sn,t.DivIcon=Di,t.DivOverlay=Ri,t.DomEvent=tn,t.DomUtil=Ie,t.Draggable=xn,t.Evented=N,t.FeatureGroup=Yn,t.GeoJSON=di,t.GridLayer=zi,t.Handler=gn,t.Icon=Jn,t.ImageOverlay=Mi,t.LatLng=F,t.LatLngBounds=j,t.Layer=Xn,t.LayerGroup=qn,t.LineUtil=Un,t.Map=nn,t.Marker=ei,t.Mixin=vn,t.Path=ii,t.Point=k,t.PolyUtil=Mn,t.Polygon=ui,t.Polyline=li,t.Popup=Li,t.PosAnimation=en,t.Projection=Hn,t.Rectangle=Ji,t.Renderer=Vi,t.SVG=Yi,t.SVGOverlay=Ci,t.TileLayer=Ui,t.Tooltip=ki,t.Transformation=X,t.Util=A,t.VideoOverlay=Ti,t.bind=r,t.bounds=z,t.canvas=Gi,t.circle=oi,t.circleMarker=si,t.control=an,t.divIcon=Ii,t.extend=n,t.featureGroup=Kn,t.geoJSON=wi,t.geoJson=Si,t.gridLayer=ji,t.icon=Qn,t.imageOverlay=Ei,t.latLng=B,t.latLngBounds=U,t.layerGroup=Zn,t.map=rn,t.marker=ni,t.point=D,t.polygon=hi,t.polyline=ci,t.popup=Ni,t.rectangle=Qi,t.setOptions=f,t.stamp=a,t.svg=Ki,t.svgOverlay=Pi,t.tileLayer=Fi,t.tooltip=Oi,t.transformation=q,t.version=e,t.videoOverlay=Ai;var or=window.L;t.noConflict=function(){return window.L=or,this},window.L=t}(e)},234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=t[o],c=o+1,u=t[c];if(0>s(l,n))c<r&&0>s(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function b(t){if(g=!1,_(t),!m)if(null!==i(c))m=!0,k(w);else{var e=i(u);null!==e&&O(b,e.startTime-t)}}function w(t,n){m=!1,g&&(g=!1,y(T),T=-1),p=!0;var s=f;try{for(_(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!P());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&r(c),_(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&O(b,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,E=null,T=-1,A=5,C=-1;function P(){return!(e.unstable_now()-C<A)}function R(){if(null!==E){var t=e.unstable_now();C=t;var n=!0;try{n=E(!0,t)}finally{n?S():(M=!1,E=null)}}else M=!1}if("function"===typeof x)S=function(){x(R)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,N=L.port2;L.port1.onmessage=R,S=function(){N.postMessage(null)}}else S=function(){v(R,0)};function k(t){E=t,M||(M=!0,S())}function O(t,n){T=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,k(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(t.sortIndex=s,n(u,t),null===i(c)&&t===i(u)&&(g?(y(T),T=-1):g=!0,O(b,s-a))):(t.sortIndex=o,n(c,t),m||p||(m=!0,k(w))),t},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},249:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg=="},302:(t,e)=>{"use strict";e.ConcurrentRoot=1,e.ContinuousEventPriority=4,e.DefaultEventPriority=16,e.DiscreteEventPriority=1},309:(t,e,n)=>{"use strict";n.d(e,{E:()=>_});var i=n(379),r=n(45),s=n(168),a=n(43),o=n(391),l=n(408),c=n(918);const u=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],h=new l.Vector3,d=new l.Vector3,f=new l.Vector3;function p(t,e,n){const i=h.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,s=n.height/2;return[i.x*r+r,-i.y*s+s]}const m=t=>Math.abs(t)<1e-10?0:t;function g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i="matrix3d(";for(let r=0;16!==r;r++)i+=m(e[r]*t.elements[r])+(15!==r?",":")");return n+i}const v=(y=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],t=>g(t,y));var y;const x=(t,e)=>{return g(t,[1/(n=e),1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)");var n};const _=a.forwardRef((t,e)=>{let{children:n,eps:g=.001,style:y,className:_,prepend:b,center:w,fullscreen:S,portal:M,distanceFactor:E,sprite:T=!1,transform:A=!1,occlude:C,onOcclude:P,castShadow:R,receiveShadow:L,material:N,geometry:k,zIndexRange:O=[16777271,0],calculatePosition:D=p,as:I="div",wrapperClass:z,pointerEvents:j="auto"}=t,U=(0,r.A)(t,u);const{gl:F,camera:B,scene:H,size:V,raycaster:W,events:G,viewport:X}=(0,c.A)(),[q]=a.useState(()=>document.createElement(I)),Z=a.useRef(),Y=a.useRef(null),K=a.useRef(0),J=a.useRef([0,0]),Q=a.useRef(null),$=a.useRef(null),tt=(null==M?void 0:M.current)||G.connected||F.domElement.parentNode,et=a.useRef(null),nt=a.useRef(!1),it=a.useMemo(()=>C&&"blending"!==C||Array.isArray(C)&&C.length&&function(t){return t&&"object"===typeof t&&"current"in t}(C[0]),[C]);a.useLayoutEffect(()=>{const t=F.domElement;C&&"blending"===C?(t.style.zIndex="".concat(Math.floor(O[0]/2)),t.style.position="absolute",t.style.pointerEvents="none"):(t.style.zIndex=null,t.style.position=null,t.style.pointerEvents=null)},[C]),a.useLayoutEffect(()=>{if(Y.current){const t=Z.current=o.createRoot(q);if(H.updateMatrixWorld(),A)q.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const t=D(Y.current,B,V);q.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(t[0],"px,").concat(t[1],"px,0);transform-origin:0 0;")}return tt&&(b?tt.prepend(q):tt.appendChild(q)),()=>{tt&&tt.removeChild(q),t.unmount()}}},[tt,A]),a.useLayoutEffect(()=>{z&&(q.className=z)},[z]);const rt=a.useMemo(()=>A?{position:"absolute",top:0,left:0,width:V.width,height:V.height,transformStyle:"preserve-3d",pointerEvents:"none"}:(0,i.A)((0,i.A)({position:"absolute",transform:w?"translate3d(-50%,-50%,0)":"none"},S&&{top:-V.height/2,left:-V.width/2,width:V.width,height:V.height}),y),[y,w,S,V,A]),st=a.useMemo(()=>({position:"absolute",pointerEvents:j}),[j]);a.useLayoutEffect(()=>{var t,i;(nt.current=!1,A)?null==(t=Z.current)||t.render(a.createElement("div",{ref:Q,style:rt},a.createElement("div",{ref:$,style:st},a.createElement("div",{ref:e,className:_,style:y,children:n})))):null==(i=Z.current)||i.render(a.createElement("div",{ref:e,style:rt,className:_,children:n}))});const at=a.useRef(!0);(0,c.C)(t=>{if(Y.current){B.updateMatrixWorld(),Y.current.updateWorldMatrix(!0,!1);const t=A?J.current:D(Y.current,B,V);if(A||Math.abs(K.current-B.zoom)>g||Math.abs(J.current[0]-t[0])>g||Math.abs(J.current[1]-t[1])>g){const e=function(t,e){const n=h.setFromMatrixPosition(t.matrixWorld),i=d.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),s=e.getWorldDirection(f);return r.angleTo(s)>Math.PI/2}(Y.current,B);let n=!1;it&&(Array.isArray(C)?n=C.map(t=>t.current):"blending"!==C&&(n=[H]));const i=at.current;if(n){const t=function(t,e,n,i){const r=h.setFromMatrixPosition(t.matrixWorld),s=r.clone();s.project(e),n.setFromCamera(s,e);const a=n.intersectObjects(i,!0);if(a.length){const t=a[0].distance;return r.distanceTo(n.ray.origin)<t}return!0}(Y.current,B,W,n);at.current=t&&!e}else at.current=!e;i!==at.current&&(P?P(!at.current):q.style.display=at.current?"block":"none");const r=Math.floor(O[0]/2),s=C?it?[O[0],r]:[r-1,0]:O;if(q.style.zIndex="".concat(function(t,e,n){if(e instanceof l.PerspectiveCamera||e instanceof l.OrthographicCamera){const i=h.setFromMatrixPosition(t.matrixWorld),r=d.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),a=(n[1]-n[0])/(e.far-e.near),o=n[1]-a*e.far;return Math.round(a*s+o)}}(Y.current,B,s)),A){const[t,e]=[V.width/2,V.height/2],n=B.projectionMatrix.elements[5]*e,{isOrthographicCamera:i,top:r,left:s,bottom:a,right:o}=B,l=v(B.matrixWorldInverse),c=i?"scale(".concat(n,")translate(").concat(m(-(o+s)/2),"px,").concat(m((r+a)/2),"px)"):"translateZ(".concat(n,"px)");let u=Y.current.matrixWorld;T&&(u=B.matrixWorldInverse.clone().transpose().copyPosition(u).scale(Y.current.scale),u.elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),q.style.width=V.width+"px",q.style.height=V.height+"px",q.style.perspective=i?"":"".concat(n,"px"),Q.current&&$.current&&(Q.current.style.transform="".concat(c).concat(l,"translate(").concat(t,"px,").concat(e,"px)"),$.current.style.transform=x(u,1/((E||10)/400)))}else{const e=void 0===E?1:function(t,e){if(e instanceof l.OrthographicCamera)return e.zoom;if(e instanceof l.PerspectiveCamera){const n=h.setFromMatrixPosition(t.matrixWorld),i=d.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=n.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}return 1}(Y.current,B)*E;q.style.transform="translate3d(".concat(t[0],"px,").concat(t[1],"px,0) scale(").concat(e,")")}J.current=t,K.current=B.zoom}}if(!it&&et.current&&!nt.current)if(A){if(Q.current){const t=Q.current.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const{isOrthographicCamera:e}=B;if(e||k)U.scale&&(Array.isArray(U.scale)?U.scale instanceof l.Vector3?et.current.scale.copy(U.scale.clone().divideScalar(1)):et.current.scale.set(1/U.scale[0],1/U.scale[1],1/U.scale[2]):et.current.scale.setScalar(1/U.scale));else{const e=(E||10)/400,n=t.clientWidth*e,i=t.clientHeight*e;et.current.scale.set(n,i,1)}nt.current=!0}}}else{const e=q.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const t=1/X.factor,n=e.clientWidth*t,i=e.clientHeight*t;et.current.scale.set(n,i,1),nt.current=!0}et.current.lookAt(t.camera.position)}});const ot=a.useMemo(()=>({vertexShader:A?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom" \n            is false. \n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n            \n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "}),[A]);return a.createElement("group",(0,s.A)({},U,{ref:Y}),C&&!it&&a.createElement("mesh",{castShadow:R,receiveShadow:L,ref:et},k||a.createElement("planeGeometry",null),N||a.createElement("shaderMaterial",{side:l.DoubleSide,vertexShader:ot.vertexShader,fragmentShader:ot.fragmentShader})))})},351:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(43)),r=o(n(173)),s=n(475),a=["children","onClick","replace","to","state","activeClassName","className","activeStyle","style","isActive"];function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var f=function(t){var e=t.children,n=t.onClick,r=t.replace,o=void 0!==r&&r,l=t.to,u=t.state,f=t.activeClassName,p=void 0===f?"active":f,m=t.className,g=t.activeStyle,v=t.style,y=t.isActive,x=d(t,a),_="object"===h(l)?l.pathname||"":l,b=(0,s.useNavigate)(),w=(0,s.useHref)("string"===typeof l?{pathname:l}:l),S=(0,s.useMatch)(_),M=(0,s.useLocation)(),E=i.default.Children.only(e),T=!!(y?"function"===typeof y?y(S,M):y:S);return i.default.cloneElement(E,c(c({},x),{},{className:[m,E.props.className,T?p:null].join(" ").trim(),style:T?c(c({},v),g):v,href:w,onClick:function(t){e.props.onClick&&e.props.onClick(t),n&&n(t),t.defaultPrevented||0!==t.button||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),b(l,{replace:o,state:u}))}}))};f.propTypes={children:r.default.element.isRequired,onClick:r.default.func,replace:r.default.bool,to:r.default.oneOfType([r.default.string,r.default.object]).isRequired,state:r.default.object,className:r.default.string,activeClassName:r.default.string,style:r.default.objectOf(r.default.oneOfType([r.default.string,r.default.number])),activeStyle:r.default.objectOf(r.default.oneOfType([r.default.string,r.default.number])),isActive:r.default.oneOfType([r.default.func,r.default.bool])};var p=f;e.default=p},379:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(705);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){(0,i.A)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}},387:(t,e,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(this,arguments)}var r;n.d(e,{AO:()=>f,B6:()=>O,G3:()=>ut,Gh:()=>B,HC:()=>$,HS:()=>H,HW:()=>ct,Oi:()=>c,Pq:()=>X,RO:()=>D,Rr:()=>p,Sk:()=>Q,TM:()=>l,V2:()=>J,VV:()=>tt,aE:()=>pt,o1:()=>z,pX:()=>et,pb:()=>I,rc:()=>r,ro:()=>b,sC:()=>a,tH:()=>q,tW:()=>k,ue:()=>x,v6:()=>K,yD:()=>F,zR:()=>o}),function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(r||(r={}));const s="popstate";function a(t){void 0===t&&(t={});let e,{initialEntries:n=["/"],initialIndex:i,v5Compat:s=!1}=t;e=n.map((t,e)=>m(t,"string"===typeof t?null:t.state,0===e?"default":void 0));let a=c(null==i?e.length-1:i),o=r.Pop,l=null;function c(t){return Math.min(Math.max(t,0),e.length-1)}function h(){return e[a]}function m(t,n,i){void 0===n&&(n=null);let r=d(e?h().pathname:"/",t,n,i);return u("/"===r.pathname.charAt(0),"relative pathnames are not supported in memory history: "+JSON.stringify(t)),r}function g(t){return"string"===typeof t?t:f(t)}return{get index(){return a},get action(){return o},get location(){return h()},createHref:g,createURL:t=>new URL(g(t),"http://localhost"),encodeLocation(t){let e="string"===typeof t?p(t):t;return{pathname:e.pathname||"",search:e.search||"",hash:e.hash||""}},push(t,n){o=r.Push;let i=m(t,n);a+=1,e.splice(a,e.length,i),s&&l&&l({action:o,location:i,delta:1})},replace(t,n){o=r.Replace;let i=m(t,n);e[a]=i,s&&l&&l({action:o,location:i,delta:0})},go(t){o=r.Pop;let n=c(a+t),i=e[n];a=n,l&&l({action:o,location:i,delta:t})},listen:t=>(l=t,()=>{l=null})}}function o(t){return void 0===t&&(t={}),m(function(t,e){let{pathname:n,search:i,hash:r}=t.location;return d("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")},function(t,e){return"string"===typeof e?e:f(e)},null,t)}function l(t){return void 0===t&&(t={}),m(function(t,e){let{pathname:n="/",search:i="",hash:r=""}=p(t.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),d("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")},function(t,e){let n=t.document.querySelector("base"),i="";if(n&&n.getAttribute("href")){let e=t.location.href,n=e.indexOf("#");i=-1===n?e:e.slice(0,n)}return i+"#"+("string"===typeof e?e:f(e))},function(t,e){u("/"===t.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(e)+")")},t)}function c(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function u(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function h(t,e){return{usr:t.state,key:t.key,idx:e}}function d(t,e,n,r){return void 0===n&&(n=null),i({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?p(e):e,{state:n,key:e&&e.key||r||Math.random().toString(36).substr(2,8)})}function f(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function p(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function m(t,e,n,a){void 0===a&&(a={});let{window:o=document.defaultView,v5Compat:l=!1}=a,u=o.history,p=r.Pop,m=null,g=v();function v(){return(u.state||{idx:null}).idx}function y(){p=r.Pop;let t=v(),e=null==t?null:t-g;g=t,m&&m({action:p,location:_.location,delta:e})}function x(t){let e="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof t?t:f(t);return n=n.replace(/ $/,"%20"),c(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==g&&(g=0,u.replaceState(i({},u.state,{idx:g}),""));let _={get action(){return p},get location(){return t(o,u)},listen(t){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(s,y),m=t,()=>{o.removeEventListener(s,y),m=null}},createHref:t=>e(o,t),createURL:x,encodeLocation(t){let e=x(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){p=r.Push;let i=d(_.location,t,e);n&&n(i,t),g=v()+1;let s=h(i,g),a=_.createHref(i);try{u.pushState(s,"",a)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;o.location.assign(a)}l&&m&&m({action:p,location:_.location,delta:1})},replace:function(t,e){p=r.Replace;let i=d(_.location,t,e);n&&n(i,t),g=v();let s=h(i,g),a=_.createHref(i);u.replaceState(s,"",a),l&&m&&m({action:p,location:_.location,delta:0})},go:t=>u.go(t)};return _}var g;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(g||(g={}));const v=new Set(["lazy","caseSensitive","path","id","index","children"]);function y(t,e,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),t.map((t,s)=>{let a=[...n,String(s)],o="string"===typeof t.id?t.id:a.join("-");if(c(!0!==t.index||!t.children,"Cannot specify children on an index route"),c(!r[o],'Found a route id collision on id "'+o+"\".  Route id's must be globally unique within Data Router usages"),function(t){return!0===t.index}(t)){let n=i({},t,e(t),{id:o});return r[o]=n,n}{let n=i({},t,e(t),{id:o,children:void 0});return r[o]=n,t.children&&(n.children=y(t.children,e,a,r)),n}})}function x(t,e,n){return void 0===n&&(n="/"),_(t,e,n,!1)}function _(t,e,n,i){let r=I(("string"===typeof e?p(e):e).pathname||"/",n);if(null==r)return null;let s=w(t);!function(t){t.sort((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every((t,n)=>t===e[n]);return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map(t=>t.childrenIndex),e.routesMeta.map(t=>t.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let t=D(r);a=N(s[o],t,i)}return a}function b(t,e){let{route:n,pathname:i,params:r}=t;return{id:n.id,pathname:i,params:r,data:e[n.id],handle:n.handle}}function w(t,e,n,i){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(t,r,s)=>{let a={relativePath:void 0===s?t.path||"":s,caseSensitive:!0===t.caseSensitive,childrenIndex:r,route:t};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(i),'Absolute route path "'+a.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(i.length));let o=H([i,a.relativePath]),l=n.concat(a);t.children&&t.children.length>0&&(c(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(t.children,e,l,o)),(null!=t.path||t.index)&&e.push({path:o,score:L(o,t.index),routesMeta:l})};return t.forEach((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let i of S(t.path))r(t,e,i);else r(t,e)}),e}function S(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let a=S(i.join("/")),o=[];return o.push(...a.map(t=>""===t?s:[s,t].join("/"))),r&&o.push(...a),o.map(e=>t.startsWith("/")&&""===e?"/":e)}const M=/^:[\w-]+$/,E=3,T=2,A=1,C=10,P=-2,R=t=>"*"===t;function L(t,e){let n=t.split("/"),i=n.length;return n.some(R)&&(i+=P),e&&(i+=T),n.filter(t=>!R(t)).reduce((t,e)=>t+(M.test(e)?E:""===e?A:C),i)}function N(t,e,n){void 0===n&&(n=!1);let{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let t=i[o],l=o===i.length-1,c="/"===s?e:e.slice(s.length)||"/",u=O({path:t.relativePath,caseSensitive:t.caseSensitive,end:l},c),h=t.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=O({path:t.relativePath,caseSensitive:t.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),a.push({params:r,pathname:H([s,u.pathname]),pathnameBase:V(H([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=H([s,u.pathnameBase]))}return a}function k(t,e){void 0===e&&(e={});let n=t;n.endsWith("*")&&"*"!==n&&!n.endsWith("/*")&&(u(!1,'Route path "'+n+'" will be treated as if it were "'+n.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+n.replace(/\*$/,"/*")+'".'),n=n.replace(/\*$/,"/*"));const i=n.startsWith("/")?"/":"",r=t=>null==t?"":"string"===typeof t?t:String(t);return i+n.split(/\/+/).map((t,n,i)=>{if(n===i.length-1&&"*"===t){return r(e["*"])}const s=t.match(/^:([\w-]+)(\??)$/);if(s){const[,t,n]=s;let i=e[t];return c("?"===n||null!=i,'Missing ":'+t+'" param'),r(i)}return t.replace(/\?$/g,"")}).filter(t=>!!t).join("/")}function O(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);u("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));t.endsWith("*")?(i.push({paramName:"*"}),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,e?void 0:"i");return[s,i]}(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((t,e,n)=>{let{paramName:i,isOptional:r}=e;if("*"===i){let t=o[n]||"";a=s.slice(0,s.length-t.length).replace(/(.)\/+$/,"$1")}const l=o[n];return t[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),t},{}),pathname:s,pathnameBase:a,pattern:t}}function D(t){try{return t.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(e){return u(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function I(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function z(t,e){void 0===e&&(e="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof t?p(t):t,s=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)}),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:s,search:W(i),hash:G(r)}}function j(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function U(t){return t.filter((t,e)=>0===e||t.route.path&&t.route.path.length>0)}function F(t,e){let n=U(t);return e?n.map((t,e)=>e===n.length-1?t.pathname:t.pathnameBase):n.map(t=>t.pathnameBase)}function B(t,e,n,r){let s;void 0===r&&(r=!1),"string"===typeof t?s=p(t):(s=i({},t),c(!s.pathname||!s.pathname.includes("?"),j("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),j("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),j("#","search","hash",s)));let a,o=""===t||""===s.pathname,l=o?"/":s.pathname;if(null==l)a=n;else{let t=e.length-1;if(!r&&l.startsWith("..")){let e=l.split("/");for(;".."===e[0];)e.shift(),t-=1;s.pathname=e.join("/")}a=t>=0?e[t]:"/"}let u=z(s,a),h=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const H=t=>t.join("/").replace(/\/\/+/g,"/"),V=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),W=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",G=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"",X=function(t,e){void 0===e&&(e={});let n="number"===typeof e?{status:e}:e,r=new Headers(n.headers);return r.has("Content-Type")||r.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),i({},n,{headers:r}))};class q extends Error{}class Z{constructor(t,e){let n;this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],c(t&&"object"===typeof t&&!Array.isArray(t),"defer() only accepts plain objects"),this.abortPromise=new Promise((t,e)=>n=e),this.controller=new AbortController;let i=()=>n(new q("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(t).reduce((t,e)=>{let[n,i]=e;return Object.assign(t,{[n]:this.trackPromise(n,i)})},{}),this.done&&this.unlistenAbortSignal(),this.init=e}trackPromise(t,e){if(!(e instanceof Promise))return e;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let n=Promise.race([e,this.abortPromise]).then(e=>this.onSettle(n,t,void 0,e),e=>this.onSettle(n,t,e));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,e,n,i){if(this.controller.signal.aborted&&n instanceof q)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n);if(this.pendingKeysSet.delete(e),this.done&&this.unlistenAbortSignal(),void 0===n&&void 0===i){let n=new Error('Deferred data for key "'+e+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(t,"_error",{get:()=>n}),this.emit(!1,e),Promise.reject(n)}return void 0===i?(Object.defineProperty(t,"_error",{get:()=>n}),this.emit(!1,e),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>i}),this.emit(!1,e),i)}emit(t,e){this.subscribers.forEach(n=>n(t,e))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,e)=>this.pendingKeysSet.delete(e)),this.emit(!0)}async resolveData(t){let e=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),e=await new Promise(e=>{this.subscribe(i=>{t.removeEventListener("abort",n),(i||this.done)&&e(i)})})}return e}get done(){return 0===this.pendingKeysSet.size}get unwrappedData(){return c(null!==this.data&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,e)=>{let[n,i]=e;return Object.assign(t,{[n]:Y(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function Y(t){if(!function(t){return t instanceof Promise&&!0===t._tracked}(t))return t;if(t._error)throw t._error;return t._data}const K=function(t,e){return void 0===e&&(e={}),new Z(t,"number"===typeof e?{status:e}:e)},J=function(t,e){void 0===e&&(e=302);let n=e;"number"===typeof n?n={status:n}:"undefined"===typeof n.status&&(n.status=302);let r=new Headers(n.headers);return r.set("Location",t),new Response(null,i({},n,{headers:r}))},Q=(t,e)=>{let n=J(t,e);return n.headers.set("X-Remix-Reload-Document","true"),n},$=(t,e)=>{let n=J(t,e);return n.headers.set("X-Remix-Replace","true"),n};class tt{constructor(t,e,n,i){void 0===i&&(i=!1),this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function et(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const nt=["post","put","patch","delete"],it=new Set(nt),rt=["get",...nt],st=new Set(rt),at=new Set([301,302,303,307,308]),ot=new Set([307,308]),lt={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ct={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ut={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ht=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dt=t=>({hasErrorBoundary:Boolean(t.hasErrorBoundary)}),ft="remix-router-transitions";function pt(t){const e=t.window?t.window:"undefined"!==typeof window?window:void 0,n="undefined"!==typeof e&&"undefined"!==typeof e.document&&"undefined"!==typeof e.document.createElement,s=!n;let a;if(c(t.routes.length>0,"You must provide a non-empty routes array to createRouter"),t.mapRouteProperties)a=t.mapRouteProperties;else if(t.detectErrorBoundary){let e=t.detectErrorBoundary;a=t=>({hasErrorBoundary:e(t)})}else a=dt;let o,l,h,f={},p=y(t.routes,a,void 0,f),m=t.basename||"/",v=t.dataStrategy||Mt,w=t.patchRoutesOnNavigation,S=i({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),M=null,E=new Set,T=null,A=null,C=null,P=null!=t.hydrationData,R=x(p,t.history.location,m),L=!1,N=null;if(null==R&&!w){let e=jt(404,{pathname:t.history.location.pathname}),{matches:n,route:i}=zt(p);R=n,N={[i.id]:e}}if(R&&!t.hydrationData){ue(R,p,t.history.location.pathname).active&&(R=null)}if(R)if(R.some(t=>t.route.lazy))l=!1;else if(R.some(t=>t.route.loader))if(S.v7_partialHydration){let e=t.hydrationData?t.hydrationData.loaderData:null,n=t.hydrationData?t.hydrationData.errors:null;if(n){let t=R.findIndex(t=>void 0!==n[t.route.id]);l=R.slice(0,t+1).every(t=>!xt(t.route,e,n))}else l=R.every(t=>!xt(t.route,e,n))}else l=null!=t.hydrationData;else l=!0;else if(l=!1,R=[],S.v7_partialHydration){let e=ue(null,p,t.history.location.pathname);e.active&&e.matches&&(L=!0,R=e.matches)}let k,O,D={historyAction:t.history.action,location:t.history.location,matches:R,initialized:l,navigation:lt,restoreScrollPosition:null==t.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||N,fetchers:new Map,blockers:new Map},z=r.Pop,j=!1,U=!1,F=new Map,B=null,H=!1,V=!1,W=[],G=new Set,X=new Map,q=0,Z=-1,Y=new Map,K=new Set,J=new Map,Q=new Map,$=new Set,tt=new Map,nt=new Map;function it(t,e){void 0===e&&(e={}),D=i({},D,t);let n=[],r=[];S.v7_fetcherPersist&&D.fetchers.forEach((t,e)=>{"idle"===t.state&&($.has(e)?r.push(e):n.push(e))}),$.forEach(t=>{D.fetchers.has(t)||X.has(t)||r.push(t)}),[...E].forEach(t=>t(D,{deletedFetchers:r,viewTransitionOpts:e.viewTransitionOpts,flushSync:!0===e.flushSync})),S.v7_fetcherPersist?(n.forEach(t=>D.fetchers.delete(t)),r.forEach(t=>Nt(t))):r.forEach(t=>$.delete(t))}function rt(e,n,s){var a,l;let c,{flushSync:u}=void 0===s?{}:s,h=null!=D.actionData&&null!=D.navigation.formMethod&&Zt(D.navigation.formMethod)&&"loading"===D.navigation.state&&!0!==(null==(a=e.state)?void 0:a._isRedirect);c=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:h?D.actionData:null;let d=n.loaderData?Ot(D.loaderData,n.loaderData,n.matches||[],n.errors):D.loaderData,f=D.blockers;f.size>0&&(f=new Map(f),f.forEach((t,e)=>f.set(e,ut)));let m,g=!0===j||null!=D.navigation.formMethod&&Zt(D.navigation.formMethod)&&!0!==(null==(l=e.state)?void 0:l._isRedirect);if(o&&(p=o,o=void 0),H||z===r.Pop||(z===r.Push?t.history.push(e,e.state):z===r.Replace&&t.history.replace(e,e.state)),z===r.Pop){let t=F.get(D.location.pathname);t&&t.has(e.pathname)?m={currentLocation:D.location,nextLocation:e}:F.has(e.pathname)&&(m={currentLocation:e,nextLocation:D.location})}else if(U){let t=F.get(D.location.pathname);t?t.add(e.pathname):(t=new Set([e.pathname]),F.set(D.location.pathname,t)),m={currentLocation:D.location,nextLocation:e}}it(i({},n,{actionData:c,loaderData:d,historyAction:z,location:e,initialized:!0,navigation:lt,revalidation:"idle",restoreScrollPosition:ce(e,n.matches||D.matches),preventScrollReset:g,blockers:f}),{viewTransitionOpts:m,flushSync:!0===u}),z=r.Pop,j=!1,U=!1,H=!1,V=!1,W=[]}async function st(e,n,s){k&&k.abort(),k=null,z=e,H=!0===(s&&s.startUninterruptedRevalidation),function(t,e){if(T&&C){let n=le(t,e);T[n]=C()}}(D.location,D.matches),j=!0===(s&&s.preventScrollReset),U=!0===(s&&s.enableViewTransition);let a=o||p,l=s&&s.overrideNavigation,c=null!=s&&s.initialHydration&&D.matches&&D.matches.length>0&&!L?D.matches:x(a,n,m),u=!0===(s&&s.flushSync);if(c&&D.initialized&&!V&&function(t,e){if(t.pathname!==e.pathname||t.search!==e.search)return!1;if(""===t.hash)return""!==e.hash;if(t.hash===e.hash)return!0;if(""!==e.hash)return!0;return!1}(D.location,n)&&!(s&&s.submission&&Zt(s.submission.formMethod)))return void rt(n,{matches:c},{flushSync:u});let h=ue(c,a,n.pathname);if(h.active&&h.matches&&(c=h.matches),!c){let{error:t,notFoundMatches:e,route:i}=ae(n.pathname);return void rt(n,{matches:e,loaderData:{},errors:{[i.id]:t}},{flushSync:u})}k=new AbortController;let d,f=Pt(t.history,n,k.signal,s&&s.submission);if(s&&s.pendingError)d=[It(c).route.id,{type:g.error,error:s.pendingError}];else if(s&&s.submission&&Zt(s.submission.formMethod)){let e=await async function(t,e,n,i,s,a){void 0===a&&(a={});bt();let o,l=function(t,e){let n={state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text};return n}(e,n);if(it({navigation:l},{flushSync:!0===a.flushSync}),s){let n=await he(i,e.pathname,t.signal);if("aborted"===n.type)return{shortCircuited:!0};if("error"===n.type){let t=It(n.partialMatches).route.id;return{matches:n.partialMatches,pendingActionResult:[t,{type:g.error,error:n.error}]}}if(!n.matches){let{notFoundMatches:t,error:n,route:i}=ae(e.pathname);return{matches:t,pendingActionResult:[i.id,{type:g.error,error:n}]}}i=n.matches}let c=$t(i,e);if(c.route.action||c.route.lazy){if(o=(await vt("action",D,t,[c],i,null))[c.route.id],t.signal.aborted)return{shortCircuited:!0}}else o={type:g.error,error:jt(405,{method:t.method,pathname:e.pathname,routeId:c.route.id})};if(Wt(o)){let e;if(a&&null!=a.replace)e=a.replace;else{e=Ct(o.response.headers.get("Location"),new URL(t.url),m)===D.location.pathname+D.location.search}return await pt(t,o,!0,{submission:n,replace:e}),{shortCircuited:!0}}if(Ht(o))throw jt(400,{type:"defer-action"});if(Vt(o)){let t=It(i,c.route.id);return!0!==(a&&a.replace)&&(z=r.Push),{matches:i,pendingActionResult:[t.route.id,o]}}return{matches:i,pendingActionResult:[c.route.id,o]}}(f,n,s.submission,c,h.active,{replace:s.replace,flushSync:u});if(e.shortCircuited)return;if(e.pendingActionResult){let[t,i]=e.pendingActionResult;if(Vt(i)&&et(i.error)&&404===i.error.status)return k=null,void rt(n,{matches:e.matches,loaderData:{},errors:{[t]:i.error}})}c=e.matches||c,d=e.pendingActionResult,l=ee(n,s.submission),u=!1,h.active=!1,f=Pt(t.history,f.url,f.signal)}let{shortCircuited:v,matches:y,loaderData:_,errors:b}=await async function(e,n,r,s,a,l,c,u,h,d,f){let g=a||ee(n,l),v=l||c||te(g),y=!H&&(!S.v7_partialHydration||!h);if(s){if(y){let t=at(f);it(i({navigation:g},void 0!==t?{actionData:t}:{}),{flushSync:d})}let t=await he(r,n.pathname,e.signal);if("aborted"===t.type)return{shortCircuited:!0};if("error"===t.type){let e=It(t.partialMatches).route.id;return{matches:t.partialMatches,loaderData:{},errors:{[e]:t.error}}}if(!t.matches){let{error:t,notFoundMatches:e,route:i}=ae(n.pathname);return{matches:e,loaderData:{},errors:{[i.id]:t}}}r=t.matches}let x=o||p,[_,b]=yt(t.history,D,r,v,n,S.v7_partialHydration&&!0===h,S.v7_skipActionErrorRevalidation,V,W,G,$,J,K,x,m,f);if(oe(t=>!(r&&r.some(e=>e.route.id===t))||_&&_.some(e=>e.route.id===t)),Z=++q,0===_.length&&0===b.length){let t=Xt();return rt(n,i({matches:r,loaderData:{},errors:f&&Vt(f[1])?{[f[0]]:f[1].error}:null},Dt(f),t?{fetchers:new Map(D.fetchers)}:{}),{flushSync:d}),{shortCircuited:!0}}if(y){let t={};if(!s){t.navigation=g;let e=at(f);void 0!==e&&(t.actionData=e)}b.length>0&&(t.fetchers=function(t){return t.forEach(t=>{let e=D.fetchers.get(t.key),n=ne(void 0,e?e.data:void 0);D.fetchers.set(t.key,n)}),new Map(D.fetchers)}(b)),it(t,{flushSync:d})}b.forEach(t=>{Ft(t.key),t.controller&&X.set(t.key,t.controller)});let w=()=>b.forEach(t=>Ft(t.key));k&&k.signal.addEventListener("abort",w);let{loaderResults:M,fetcherResults:E}=await _t(D,r,_,b,e);if(e.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",w);b.forEach(t=>X.delete(t.key));let T=Ut(M);if(T)return await pt(e,T.result,!0,{replace:u}),{shortCircuited:!0};if(T=Ut(E),T)return K.add(T.key),await pt(e,T.result,!0,{replace:u}),{shortCircuited:!0};let{loaderData:A,errors:C}=kt(D,r,M,f,b,E,tt);tt.forEach((t,e)=>{t.subscribe(n=>{(n||t.done)&&tt.delete(e)})}),S.v7_partialHydration&&h&&D.errors&&(C=i({},D.errors,C));let P=Xt(),R=qt(Z),L=P||R||b.length>0;return i({matches:r,loaderData:A,errors:C},L?{fetchers:new Map(D.fetchers)}:{})}(f,n,c,h.active,l,s&&s.submission,s&&s.fetcherSubmission,s&&s.replace,s&&!0===s.initialHydration,u,d);v||(k=null,rt(n,i({matches:y||c},Dt(d),{loaderData:_,errors:b})))}function at(t){return t&&!Vt(t[1])?{[t[0]]:t[1].data}:D.actionData?0===Object.keys(D.actionData).length?null:D.actionData:void 0}async function pt(s,a,o,l){let{submission:u,fetcherSubmission:h,preventScrollReset:f,replace:p}=void 0===l?{}:l;a.response.headers.has("X-Remix-Revalidate")&&(V=!0);let g=a.response.headers.get("Location");c(g,"Expected a Location header on the redirect Response"),g=Ct(g,new URL(s.url),m);let v=d(D.location,g,{_isRedirect:!0});if(n){let n=!1;if(a.response.headers.has("X-Remix-Reload-Document"))n=!0;else if(ht.test(g)){const i=t.history.createURL(g);n=i.origin!==e.location.origin||null==I(i.pathname,m)}if(n)return void(p?e.location.replace(g):e.location.assign(g))}k=null;let y=!0===p||a.response.headers.has("X-Remix-Replace")?r.Replace:r.Push,{formMethod:x,formAction:_,formEncType:b}=D.navigation;!u&&!h&&x&&_&&b&&(u=te(D.navigation));let w=u||h;if(ot.has(a.response.status)&&w&&Zt(w.formMethod))await st(y,v,{submission:i({},w,{formAction:g}),preventScrollReset:f||j,enableViewTransition:o?U:void 0});else{let t=ee(v,u);await st(y,v,{overrideNavigation:t,fetcherSubmission:h,preventScrollReset:f||j,enableViewTransition:o?U:void 0})}}async function vt(t,e,n,i,r,s){let o,l={};try{o=await Et(v,t,e,n,i,r,s,f,a)}catch(c){return i.forEach(t=>{l[t.route.id]={type:g.error,error:c}}),l}for(let[a,u]of Object.entries(o))if(Bt(u)){let t=u.result;l[a]={type:g.redirect,response:At(t,n,a,r,m,S.v7_relativeSplatPath)}}else l[a]=await Tt(u);return l}async function _t(e,n,i,r,s){let a=e.matches,o=vt("loader",e,s,i,n,null),l=Promise.all(r.map(async n=>{if(n.matches&&n.match&&n.controller){let i=(await vt("loader",e,Pt(t.history,n.path,n.controller.signal),[n.match],n.matches,n.key))[n.match.route.id];return{[n.key]:i}}return Promise.resolve({[n.key]:{type:g.error,error:jt(404,{pathname:n.path})}})})),c=await o,u=(await l).reduce((t,e)=>Object.assign(t,e),{});return await Promise.all([Yt(n,c,s.signal,a,e.loaderData),Kt(n,u,r)]),{loaderResults:c,fetcherResults:u}}function bt(){V=!0,W.push(...oe()),J.forEach((t,e)=>{X.has(e)&&G.add(e),Ft(e)})}function St(t,e,n){void 0===n&&(n={}),D.fetchers.set(t,e),it({fetchers:new Map(D.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function Rt(t,e,n,i){void 0===i&&(i={});let r=It(D.matches,e);Nt(t),it({errors:{[r.route.id]:n},fetchers:new Map(D.fetchers)},{flushSync:!0===(i&&i.flushSync)})}function Lt(t){return Q.set(t,(Q.get(t)||0)+1),$.has(t)&&$.delete(t),D.fetchers.get(t)||ct}function Nt(t){let e=D.fetchers.get(t);!X.has(t)||e&&"loading"===e.state&&Y.has(t)||Ft(t),J.delete(t),Y.delete(t),K.delete(t),S.v7_fetcherPersist&&$.delete(t),G.delete(t),D.fetchers.delete(t)}function Ft(t){let e=X.get(t);e&&(e.abort(),X.delete(t))}function Gt(t){for(let e of t){let t=ie(Lt(e).data);D.fetchers.set(e,t)}}function Xt(){let t=[],e=!1;for(let n of K){let i=D.fetchers.get(n);c(i,"Expected fetcher: "+n),"loading"===i.state&&(K.delete(n),t.push(n),e=!0)}return Gt(t),e}function qt(t){let e=[];for(let[n,i]of Y)if(i<t){let t=D.fetchers.get(n);c(t,"Expected fetcher: "+n),"loading"===t.state&&(Ft(n),Y.delete(n),e.push(n))}return Gt(e),e.length>0}function Qt(t){D.blockers.delete(t),nt.delete(t)}function re(t,e){let n=D.blockers.get(t)||ut;c("unblocked"===n.state&&"blocked"===e.state||"blocked"===n.state&&"blocked"===e.state||"blocked"===n.state&&"proceeding"===e.state||"blocked"===n.state&&"unblocked"===e.state||"proceeding"===n.state&&"unblocked"===e.state,"Invalid blocker state transition: "+n.state+" -> "+e.state);let i=new Map(D.blockers);i.set(t,e),it({blockers:i})}function se(t){let{currentLocation:e,nextLocation:n,historyAction:i}=t;if(0===nt.size)return;nt.size>1&&u(!1,"A router only supports one blocker at a time");let r=Array.from(nt.entries()),[s,a]=r[r.length-1],o=D.blockers.get(s);return o&&"proceeding"===o.state?void 0:a({currentLocation:e,nextLocation:n,historyAction:i})?s:void 0}function ae(t){let e=jt(404,{pathname:t}),n=o||p,{matches:i,route:r}=zt(n);return oe(),{notFoundMatches:i,route:r,error:e}}function oe(t){let e=[];return tt.forEach((n,i)=>{t&&!t(i)||(n.cancel(),e.push(i),tt.delete(i))}),e}function le(t,e){if(A){return A(t,e.map(t=>b(t,D.loaderData)))||t.key}return t.key}function ce(t,e){if(T){let n=le(t,e),i=T[n];if("number"===typeof i)return i}return null}function ue(t,e,n){if(w){if(!t){return{active:!0,matches:_(e,n,m,!0)||[]}}if(Object.keys(t[0].params).length>0){return{active:!0,matches:_(e,n,m,!0)}}}return{active:!1,matches:null}}async function he(t,e,n,i){if(!w)return{type:"success",matches:t};let r=t;for(;;){let t=null==o,l=o||p,c=f;try{await w({signal:n,path:e,matches:r,fetcherKey:i,patch:(t,e)=>{n.aborted||wt(t,e,l,c,a)}})}catch(s){return{type:"error",error:s,partialMatches:r}}finally{t&&!n.aborted&&(p=[...p])}if(n.aborted)return{type:"aborted"};let u=x(l,e,m);if(u)return{type:"success",matches:u};let h=_(l,e,m,!0);if(!h||r.length===h.length&&r.every((t,e)=>t.route.id===h[e].route.id))return{type:"success",matches:null};r=h}}return h={get basename(){return m},get future(){return S},get state(){return D},get routes(){return p},get window(){return e},initialize:function(){if(M=t.history.listen(e=>{let{action:n,location:i,delta:r}=e;if(O)return O(),void(O=void 0);u(0===nt.size||null!=r,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let s=se({currentLocation:D.location,nextLocation:i,historyAction:n});if(s&&null!=r){let e=new Promise(t=>{O=t});return t.history.go(-1*r),void re(s,{state:"blocked",location:i,proceed(){re(s,{state:"proceeding",proceed:void 0,reset:void 0,location:i}),e.then(()=>t.history.go(r))},reset(){let t=new Map(D.blockers);t.set(s,ut),it({blockers:t})}})}return st(n,i)}),n){!function(t,e){try{let n=t.sessionStorage.getItem(ft);if(n){let t=JSON.parse(n);for(let[n,i]of Object.entries(t||{}))i&&Array.isArray(i)&&e.set(n,new Set(i||[]))}}catch(n){}}(e,F);let t=()=>function(t,e){if(e.size>0){let i={};for(let[t,n]of e)i[t]=[...n];try{t.sessionStorage.setItem(ft,JSON.stringify(i))}catch(n){u(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}(e,F);e.addEventListener("pagehide",t),B=()=>e.removeEventListener("pagehide",t)}return D.initialized||st(r.Pop,D.location,{initialHydration:!0}),h},subscribe:function(t){return E.add(t),()=>E.delete(t)},enableScrollRestoration:function(t,e,n){if(T=t,C=e,A=n||null,!P&&D.navigation===lt){P=!0;let t=ce(D.location,D.matches);null!=t&&it({restoreScrollPosition:t})}return()=>{T=null,C=null,A=null}},navigate:async function e(n,s){if("number"===typeof n)return void t.history.go(n);let a=mt(D.location,D.matches,m,S.v7_prependBasename,n,S.v7_relativeSplatPath,null==s?void 0:s.fromRouteId,null==s?void 0:s.relative),{path:o,submission:l,error:c}=gt(S.v7_normalizeFormMethod,!1,a,s),u=D.location,h=d(D.location,o,s&&s.state);h=i({},h,t.history.encodeLocation(h));let f=s&&null!=s.replace?s.replace:void 0,p=r.Push;!0===f?p=r.Replace:!1===f||null!=l&&Zt(l.formMethod)&&l.formAction===D.location.pathname+D.location.search&&(p=r.Replace);let g=s&&"preventScrollReset"in s?!0===s.preventScrollReset:void 0,v=!0===(s&&s.flushSync),y=se({currentLocation:u,nextLocation:h,historyAction:p});if(!y)return await st(p,h,{submission:l,pendingError:c,preventScrollReset:g,replace:s&&s.replace,enableViewTransition:s&&s.viewTransition,flushSync:v});re(y,{state:"blocked",location:h,proceed(){re(y,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),e(n,s)},reset(){let t=new Map(D.blockers);t.set(y,ut),it({blockers:t})}})},fetch:function(e,n,i,r){if(s)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ft(e);let a=!0===(r&&r.flushSync),l=o||p,u=mt(D.location,D.matches,m,S.v7_prependBasename,i,S.v7_relativeSplatPath,n,null==r?void 0:r.relative),h=x(l,u,m),d=ue(h,l,u);if(d.active&&d.matches&&(h=d.matches),!h)return void Rt(e,n,jt(404,{pathname:u}),{flushSync:a});let{path:f,submission:g,error:v}=gt(S.v7_normalizeFormMethod,!0,u,r);if(v)return void Rt(e,n,v,{flushSync:a});let y=$t(h,f),_=!0===(r&&r.preventScrollReset);g&&Zt(g.formMethod)?async function(e,n,i,r,s,a,l,u,h){function d(t){if(!t.route.action&&!t.route.lazy){let t=jt(405,{method:h.formMethod,pathname:i,routeId:n});return Rt(e,n,t,{flushSync:l}),!0}return!1}if(bt(),J.delete(e),!a&&d(r))return;let f=D.fetchers.get(e);St(e,function(t,e){let n={state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0};return n}(h,f),{flushSync:l});let g=new AbortController,v=Pt(t.history,i,g.signal,h);if(a){let t=await he(s,new URL(v.url).pathname,v.signal,e);if("aborted"===t.type)return;if("error"===t.type)return void Rt(e,n,t.error,{flushSync:l});if(!t.matches)return void Rt(e,n,jt(404,{pathname:i}),{flushSync:l});if(d(r=$t(s=t.matches,i)))return}X.set(e,g);let y=q,_=await vt("action",D,v,[r],s,e),b=_[r.route.id];if(v.signal.aborted)return void(X.get(e)===g&&X.delete(e));if(S.v7_fetcherPersist&&$.has(e)){if(Wt(b)||Vt(b))return void St(e,ie(void 0))}else{if(Wt(b))return X.delete(e),Z>y?void St(e,ie(void 0)):(K.add(e),St(e,ne(h)),pt(v,b,!1,{fetcherSubmission:h,preventScrollReset:u}));if(Vt(b))return void Rt(e,n,b.error)}if(Ht(b))throw jt(400,{type:"defer-action"});let w=D.navigation.location||D.location,M=Pt(t.history,w,g.signal),E=o||p,T="idle"!==D.navigation.state?x(E,D.navigation.location,m):D.matches;c(T,"Didn't find any matches after fetcher action");let A=++q;Y.set(e,A);let C=ne(h,b.data);D.fetchers.set(e,C);let[P,R]=yt(t.history,D,T,h,w,!1,S.v7_skipActionErrorRevalidation,V,W,G,$,J,K,E,m,[r.route.id,b]);R.filter(t=>t.key!==e).forEach(t=>{let e=t.key,n=D.fetchers.get(e),i=ne(void 0,n?n.data:void 0);D.fetchers.set(e,i),Ft(e),t.controller&&X.set(e,t.controller)}),it({fetchers:new Map(D.fetchers)});let L=()=>R.forEach(t=>Ft(t.key));g.signal.addEventListener("abort",L);let{loaderResults:N,fetcherResults:O}=await _t(D,T,P,R,M);if(g.signal.aborted)return;g.signal.removeEventListener("abort",L),Y.delete(e),X.delete(e),R.forEach(t=>X.delete(t.key));let I=Ut(N);if(I)return pt(M,I.result,!1,{preventScrollReset:u});if(I=Ut(O),I)return K.add(I.key),pt(M,I.result,!1,{preventScrollReset:u});let{loaderData:j,errors:U}=kt(D,T,N,void 0,R,O,tt);if(D.fetchers.has(e)){let t=ie(b.data);D.fetchers.set(e,t)}qt(A),"loading"===D.navigation.state&&A>Z?(c(z,"Expected pending action"),k&&k.abort(),rt(D.navigation.location,{matches:T,loaderData:j,errors:U,fetchers:new Map(D.fetchers)})):(it({errors:U,loaderData:Ot(D.loaderData,j,T,U),fetchers:new Map(D.fetchers)}),V=!1)}(e,n,f,y,h,d.active,a,_,g):(J.set(e,{routeId:n,path:f}),async function(e,n,i,r,s,a,o,l,u){let h=D.fetchers.get(e);St(e,ne(u,h?h.data:void 0),{flushSync:o});let d=new AbortController,f=Pt(t.history,i,d.signal);if(a){let t=await he(s,new URL(f.url).pathname,f.signal,e);if("aborted"===t.type)return;if("error"===t.type)return void Rt(e,n,t.error,{flushSync:o});if(!t.matches)return void Rt(e,n,jt(404,{pathname:i}),{flushSync:o});r=$t(s=t.matches,i)}X.set(e,d);let p=q,m=await vt("loader",D,f,[r],s,e),g=m[r.route.id];Ht(g)&&(g=await Jt(g,f.signal,!0)||g);X.get(e)===d&&X.delete(e);if(f.signal.aborted)return;if($.has(e))return void St(e,ie(void 0));if(Wt(g))return Z>p?void St(e,ie(void 0)):(K.add(e),void await pt(f,g,!1,{preventScrollReset:l}));if(Vt(g))return void Rt(e,n,g.error);c(!Ht(g),"Unhandled fetcher deferred data"),St(e,ie(g.data))}(e,n,f,y,h,d.active,a,_,g))},revalidate:function(){bt(),it({revalidation:"loading"}),"submitting"!==D.navigation.state&&("idle"!==D.navigation.state?st(z||D.historyAction,D.navigation.location,{overrideNavigation:D.navigation,enableViewTransition:!0===U}):st(D.historyAction,D.location,{startUninterruptedRevalidation:!0}))},createHref:e=>t.history.createHref(e),encodeLocation:e=>t.history.encodeLocation(e),getFetcher:Lt,deleteFetcher:function(t){let e=(Q.get(t)||0)-1;e<=0?(Q.delete(t),$.add(t),S.v7_fetcherPersist||Nt(t)):Q.set(t,e),it({fetchers:new Map(D.fetchers)})},dispose:function(){M&&M(),B&&B(),E.clear(),k&&k.abort(),D.fetchers.forEach((t,e)=>Nt(e)),D.blockers.forEach((t,e)=>Qt(e))},getBlocker:function(t,e){let n=D.blockers.get(t)||ut;return nt.get(t)!==e&&nt.set(t,e),n},deleteBlocker:Qt,patchRoutes:function(t,e){let n=null==o;wt(t,e,o||p,f,a),n&&(p=[...p],it({}))},_internalFetchControllers:X,_internalActiveDeferreds:tt,_internalSetRoutes:function(t){f={},o=y(t,a,void 0,f)}},h}Symbol("deferred");function mt(t,e,n,i,r,s,a,o){let l,c;if(a){l=[];for(let t of e)if(l.push(t),t.route.id===a){c=t;break}}else l=e,c=e[e.length-1];let u=B(r||".",F(l,s),I(t.pathname,n)||t.pathname,"path"===o);if(null==r&&(u.search=t.search,u.hash=t.hash),(null==r||""===r||"."===r)&&c){let t=Qt(u.search);if(c.route.index&&!t)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&t){let t=new URLSearchParams(u.search),e=t.getAll("index");t.delete("index"),e.filter(t=>t).forEach(e=>t.append("index",e));let n=t.toString();u.search=n?"?"+n:""}}return i&&"/"!==n&&(u.pathname="/"===u.pathname?n:H([n,u.pathname])),f(u)}function gt(t,e,n,i){if(!i||!function(t){return null!=t&&("formData"in t&&null!=t.formData||"body"in t&&void 0!==t.body)}(i))return{path:n};if(i.formMethod&&!qt(i.formMethod))return{path:n,error:jt(405,{method:i.formMethod})};let r,s,a=()=>({path:n,error:jt(400,{type:"invalid-body"})}),o=i.formMethod||"get",l=t?o.toUpperCase():o.toLowerCase(),u=Ft(n);if(void 0!==i.body){if("text/plain"===i.formEncType){if(!Zt(l))return a();let t="string"===typeof i.body?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((t,e)=>{let[n,i]=e;return""+t+n+"="+i+"\n"},""):String(i.body);return{path:n,submission:{formMethod:l,formAction:u,formEncType:i.formEncType,formData:void 0,json:void 0,text:t}}}if("application/json"===i.formEncType){if(!Zt(l))return a();try{let t="string"===typeof i.body?JSON.parse(i.body):i.body;return{path:n,submission:{formMethod:l,formAction:u,formEncType:i.formEncType,formData:void 0,json:t,text:void 0}}}catch(m){return a()}}}if(c("function"===typeof FormData,"FormData is not available in this environment"),i.formData)r=Rt(i.formData),s=i.formData;else if(i.body instanceof FormData)r=Rt(i.body),s=i.body;else if(i.body instanceof URLSearchParams)r=i.body,s=Lt(r);else if(null==i.body)r=new URLSearchParams,s=new FormData;else try{r=new URLSearchParams(i.body),s=Lt(r)}catch(m){return a()}let h={formMethod:l,formAction:u,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(Zt(h.formMethod))return{path:n,submission:h};let d=p(n);return e&&d.search&&Qt(d.search)&&r.append("index",""),d.search="?"+r,{path:f(d),submission:h}}function vt(t,e,n){void 0===n&&(n=!1);let i=t.findIndex(t=>t.route.id===e);return i>=0?t.slice(0,n?i+1:i):t}function yt(t,e,n,r,s,a,o,l,c,u,h,d,f,p,m,g){let v=g?Vt(g[1])?g[1].error:g[1].data:void 0,y=t.createURL(e.location),_=t.createURL(s),b=n;a&&e.errors?b=vt(n,Object.keys(e.errors)[0],!0):g&&Vt(g[1])&&(b=vt(n,g[0]));let w=g?g[1].statusCode:void 0,S=o&&w&&w>=400,M=b.filter((t,n)=>{let{route:s}=t;if(s.lazy)return!0;if(null==s.loader)return!1;if(a)return xt(s,e.loaderData,e.errors);if(function(t,e,n){let i=!e||n.route.id!==e.route.id,r=void 0===t[n.route.id];return i||r}(e.loaderData,e.matches[n],t)||c.some(e=>e===t.route.id))return!0;let o=e.matches[n],u=t;return bt(t,i({currentUrl:y,currentParams:o.params,nextUrl:_,nextParams:u.params},r,{actionResult:v,actionStatus:w,defaultShouldRevalidate:!S&&(l||y.pathname+y.search===_.pathname+_.search||y.search!==_.search||_t(o,u))}))}),E=[];return d.forEach((t,s)=>{if(a||!n.some(e=>e.route.id===t.routeId)||h.has(s))return;let o=x(p,t.path,m);if(!o)return void E.push({key:s,routeId:t.routeId,path:t.path,matches:null,match:null,controller:null});let c=e.fetchers.get(s),d=$t(o,t.path),g=!1;f.has(s)?g=!1:u.has(s)?(u.delete(s),g=!0):g=c&&"idle"!==c.state&&void 0===c.data?l:bt(d,i({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:v,actionStatus:w,defaultShouldRevalidate:!S&&l})),g&&E.push({key:s,routeId:t.routeId,path:t.path,matches:o,match:d,controller:new AbortController})}),[M,E]}function xt(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let i=null!=e&&void 0!==e[t.id],r=null!=n&&void 0!==n[t.id];return!(!i&&r)&&("function"===typeof t.loader&&!0===t.loader.hydrate||!i&&!r)}function _t(t,e){let n=t.route.path;return t.pathname!==e.pathname||null!=n&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function bt(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if("boolean"===typeof n)return n}return e.defaultShouldRevalidate}function wt(t,e,n,i,r){var s;let a;if(t){let e=i[t];c(e,"No route found to patch children into: routeId = "+t),e.children||(e.children=[]),a=e.children}else a=n;let o=y(e.filter(t=>!a.some(e=>St(t,e))),r,[t||"_","patch",String((null==(s=a)?void 0:s.length)||"0")],i);a.push(...o)}function St(t,e){return"id"in t&&"id"in e&&t.id===e.id||t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive&&(!(t.children&&0!==t.children.length||e.children&&0!==e.children.length)||t.children.every((t,n)=>{var i;return null==(i=e.children)?void 0:i.some(e=>St(t,e))}))}async function Mt(t){let{matches:e}=t,n=e.filter(t=>t.shouldLoad);return(await Promise.all(n.map(t=>t.resolve()))).reduce((t,e,i)=>Object.assign(t,{[n[i].route.id]:e}),{})}async function Et(t,e,n,r,s,a,o,l,h,d){let f=a.map(t=>t.route.lazy?async function(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=n[t.id];c(s,"No route found in manifest");let a={};for(let i in r){let t=void 0!==s[i]&&"hasErrorBoundary"!==i;u(!t,'Route "'+s.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+i+'" will be ignored.'),t||v.has(i)||(a[i]=r[i])}Object.assign(s,a),Object.assign(s,i({},e(s),{lazy:void 0}))}(t.route,h,l):void 0),p=a.map((t,n)=>{let a=f[n],o=s.some(e=>e.route.id===t.route.id);return i({},t,{shouldLoad:o,resolve:async n=>(n&&"GET"===r.method&&(t.route.lazy||t.route.loader)&&(o=!0),o?async function(t,e,n,i,r,s){let a,o,l=i=>{let a,l=new Promise((t,e)=>a=e);o=()=>a(),e.signal.addEventListener("abort",o);let c=r=>"function"!==typeof i?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+t+'" [routeId: '+n.route.id+"]")):i({request:e,params:n.params,context:s},...void 0!==r?[r]:[]),u=(async()=>{try{return{type:"data",result:await(r?r(t=>c(t)):c())}}catch(t){return{type:"error",result:t}}})();return Promise.race([u,l])};try{let r=n.route[t];if(i)if(r){let t,[e]=await Promise.all([l(r).catch(e=>{t=e}),i]);if(void 0!==t)throw t;a=e}else{if(await i,r=n.route[t],!r){if("action"===t){let t=new URL(e.url),i=t.pathname+t.search;throw jt(405,{method:e.method,pathname:i,routeId:n.route.id})}return{type:g.data,result:void 0}}a=await l(r)}else{if(!r){let t=new URL(e.url);throw jt(404,{pathname:t.pathname+t.search})}a=await l(r)}c(void 0!==a.result,"You defined "+("action"===t?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`.")}catch(u){return{type:g.error,result:u}}finally{o&&e.signal.removeEventListener("abort",o)}return a}(e,r,t,a,n,d):Promise.resolve({type:g.data,result:void 0}))})}),m=await t({matches:p,request:r,params:a[0].params,fetcherKey:o,context:d});try{await Promise.all(f)}catch(y){}return m}async function Tt(t){let{result:e,type:n}=t;if(Xt(e)){let t;try{let n=e.headers.get("Content-Type");t=n&&/\bapplication\/json\b/.test(n)?null==e.body?null:await e.json():await e.text()}catch(h){return{type:g.error,error:h}}return n===g.error?{type:g.error,error:new tt(e.status,e.statusText,t),statusCode:e.status,headers:e.headers}:{type:g.data,data:t,statusCode:e.status,headers:e.headers}}var i,r,s,a,o,l,c,u;return n===g.error?Gt(e)?e.data instanceof Error?{type:g.error,error:e.data,statusCode:null==(s=e.init)?void 0:s.status,headers:null!=(a=e.init)&&a.headers?new Headers(e.init.headers):void 0}:{type:g.error,error:new tt((null==(i=e.init)?void 0:i.status)||500,void 0,e.data),statusCode:et(e)?e.status:void 0,headers:null!=(r=e.init)&&r.headers?new Headers(e.init.headers):void 0}:{type:g.error,error:e,statusCode:et(e)?e.status:void 0}:function(t){let e=t;return e&&"object"===typeof e&&"object"===typeof e.data&&"function"===typeof e.subscribe&&"function"===typeof e.cancel&&"function"===typeof e.resolveData}(e)?{type:g.deferred,deferredData:e,statusCode:null==(o=e.init)?void 0:o.status,headers:(null==(l=e.init)?void 0:l.headers)&&new Headers(e.init.headers)}:Gt(e)?{type:g.data,data:e.data,statusCode:null==(c=e.init)?void 0:c.status,headers:null!=(u=e.init)&&u.headers?new Headers(e.init.headers):void 0}:{type:g.data,data:e}}function At(t,e,n,i,r,s){let a=t.headers.get("Location");if(c(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!ht.test(a)){let o=i.slice(0,i.findIndex(t=>t.route.id===n)+1);a=mt(new URL(e.url),o,r,!0,a,s),t.headers.set("Location",a)}return t}function Ct(t,e,n){if(ht.test(t)){let i=t,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),s=null!=I(r.pathname,n);if(r.origin===e.origin&&s)return r.pathname+r.search+r.hash}return t}function Pt(t,e,n,i){let r=t.createURL(Ft(e)).toString(),s={signal:n};if(i&&Zt(i.formMethod)){let{formMethod:t,formEncType:e}=i;s.method=t.toUpperCase(),"application/json"===e?(s.headers=new Headers({"Content-Type":e}),s.body=JSON.stringify(i.json)):"text/plain"===e?s.body=i.text:"application/x-www-form-urlencoded"===e&&i.formData?s.body=Rt(i.formData):s.body=i.formData}return new Request(r,s)}function Rt(t){let e=new URLSearchParams;for(let[n,i]of t.entries())e.append(n,"string"===typeof i?i:i.name);return e}function Lt(t){let e=new FormData;for(let[n,i]of t.entries())e.append(n,i);return e}function Nt(t,e,n,i,r){let s,a={},o=null,l=!1,u={},h=n&&Vt(n[1])?n[1].error:void 0;return t.forEach(n=>{if(!(n.route.id in e))return;let d=n.route.id,f=e[d];if(c(!Wt(f),"Cannot handle redirect results in processLoaderData"),Vt(f)){let e=f.error;if(void 0!==h&&(e=h,h=void 0),o=o||{},r)o[d]=e;else{let n=It(t,d);null==o[n.route.id]&&(o[n.route.id]=e)}a[d]=void 0,l||(l=!0,s=et(f.error)?f.error.status:500),f.headers&&(u[d]=f.headers)}else Ht(f)?(i.set(d,f.deferredData),a[d]=f.deferredData.data,null==f.statusCode||200===f.statusCode||l||(s=f.statusCode),f.headers&&(u[d]=f.headers)):(a[d]=f.data,f.statusCode&&200!==f.statusCode&&!l&&(s=f.statusCode),f.headers&&(u[d]=f.headers))}),void 0!==h&&n&&(o={[n[0]]:h},a[n[0]]=void 0),{loaderData:a,errors:o,statusCode:s||200,loaderHeaders:u}}function kt(t,e,n,r,s,a,o){let{loaderData:l,errors:u}=Nt(e,n,r,o,!1);return s.forEach(e=>{let{key:n,match:r,controller:s}=e,o=a[n];if(c(o,"Did not find corresponding fetcher result"),!s||!s.signal.aborted)if(Vt(o)){let e=It(t.matches,null==r?void 0:r.route.id);u&&u[e.route.id]||(u=i({},u,{[e.route.id]:o.error})),t.fetchers.delete(n)}else if(Wt(o))c(!1,"Unhandled fetcher revalidation redirect");else if(Ht(o))c(!1,"Unhandled fetcher deferred data");else{let e=ie(o.data);t.fetchers.set(n,e)}}),{loaderData:l,errors:u}}function Ot(t,e,n,r){let s=i({},e);for(let i of n){let n=i.route.id;if(e.hasOwnProperty(n)?void 0!==e[n]&&(s[n]=e[n]):void 0!==t[n]&&i.route.loader&&(s[n]=t[n]),r&&r.hasOwnProperty(n))break}return s}function Dt(t){return t?Vt(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function It(t,e){return(e?t.slice(0,t.findIndex(t=>t.route.id===e)+1):[...t]).reverse().find(t=>!0===t.route.hasErrorBoundary)||t[0]}function zt(t){let e=1===t.length?t[0]:t.find(t=>t.index||!t.path||"/"===t.path)||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function jt(t,e){let{pathname:n,routeId:i,method:r,type:s,message:a}=void 0===e?{}:e,o="Unknown Server Error",l="Unknown @remix-run/router error";return 400===t?(o="Bad Request",r&&n&&i?l="You made a "+r+' request to "'+n+'" but did not provide a `loader` for route "'+i+'", so there is no way to handle the request.':"defer-action"===s?l="defer() is not supported in actions":"invalid-body"===s&&(l="Unable to encode submission body")):403===t?(o="Forbidden",l='Route "'+i+'" does not match URL "'+n+'"'):404===t?(o="Not Found",l='No route matches URL "'+n+'"'):405===t&&(o="Method Not Allowed",r&&n&&i?l="You made a "+r.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+i+'", so there is no way to handle the request.':r&&(l='Invalid request method "'+r.toUpperCase()+'"')),new tt(t||500,o,new Error(l),!0)}function Ut(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[t,i]=e[n];if(Wt(i))return{key:t,result:i}}}function Ft(t){return f(i({},"string"===typeof t?p(t):t,{hash:""}))}function Bt(t){return Xt(t.result)&&at.has(t.result.status)}function Ht(t){return t.type===g.deferred}function Vt(t){return t.type===g.error}function Wt(t){return(t&&t.type)===g.redirect}function Gt(t){return"object"===typeof t&&null!=t&&"type"in t&&"data"in t&&"init"in t&&"DataWithResponseInit"===t.type}function Xt(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"object"===typeof t.headers&&"undefined"!==typeof t.body}function qt(t){return st.has(t.toLowerCase())}function Zt(t){return it.has(t.toLowerCase())}async function Yt(t,e,n,i,r){let s=Object.entries(e);for(let a=0;a<s.length;a++){let[o,l]=s[a],c=t.find(t=>(null==t?void 0:t.route.id)===o);if(!c)continue;let u=i.find(t=>t.route.id===c.route.id),h=null!=u&&!_t(u,c)&&void 0!==(r&&r[c.route.id]);Ht(l)&&h&&await Jt(l,n,!1).then(t=>{t&&(e[o]=t)})}}async function Kt(t,e,n){for(let i=0;i<n.length;i++){let{key:r,routeId:s,controller:a}=n[i],o=e[r];t.find(t=>(null==t?void 0:t.route.id)===s)&&(Ht(o)&&(c(a,"Expected an AbortController for revalidating fetcher deferred result"),await Jt(o,a.signal,!0).then(t=>{t&&(e[r]=t)})))}}async function Jt(t,e,n){if(void 0===n&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:g.data,data:t.deferredData.unwrappedData}}catch(i){return{type:g.error,error:i}}return{type:g.data,data:t.deferredData.data}}}function Qt(t){return new URLSearchParams(t).getAll("index").some(t=>""===t)}function $t(t,e){let n="string"===typeof e?p(e).search:e.search;if(t[t.length-1].route.index&&Qt(n||""))return t[t.length-1];let i=U(t);return i[i.length-1]}function te(t){let{formMethod:e,formAction:n,formEncType:i,text:r,formData:s,json:a}=t;if(e&&n&&i)return null!=r?{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:void 0,text:r}:null!=s?{formMethod:e,formAction:n,formEncType:i,formData:s,json:void 0,text:void 0}:void 0!==a?{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:a,text:void 0}:void 0}function ee(t,e){if(e){return{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}return{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ne(t,e){if(t){return{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ie(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}},391:(t,e,n)=>{"use strict";var i=n(950);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},408:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ACESFilmicToneMapping:()=>at,AddEquation:()=>E,AddOperation:()=>et,AdditiveAnimationBlendMode:()=>Fe,AdditiveBlending:()=>b,AgXToneMapping:()=>lt,AlphaFormat:()=>Bt,AlwaysCompare:()=>Pn,AlwaysDepth:()=>X,AlwaysStencilFunc:()=>bn,AmbientLight:()=>uf,AnimationAction:()=>$f,AnimationClip:()=>kd,AnimationLoader:()=>Hd,AnimationMixer:()=>ep,AnimationObjectGroup:()=>Qf,AnimationUtils:()=>_d,ArcCurve:()=>ju,ArrayCamera:()=>Gl,ArrowHelper:()=>Xp,AttachedBindMode:()=>ct,Audio:()=>zf,AudioAnalyser:()=>Vf,AudioContext:()=>Mf,AudioListener:()=>If,AudioLoader:()=>Ef,AxesHelper:()=>qp,BackSide:()=>g,BasicDepthPacking:()=>Xe,BasicShadowMap:()=>h,BatchedMesh:()=>hu,Bone:()=>Dc,BooleanKeyframeTrack:()=>Td,Box2:()=>fp,Box3:()=>Fi,Box3Helper:()=>Bp,BoxGeometry:()=>Js,BoxHelper:()=>Fp,BufferAttribute:()=>fs,BufferGeometry:()=>Ls,BufferGeometryLoader:()=>vf,ByteType:()=>Lt,Cache:()=>Dd,Camera:()=>ia,CameraHelper:()=>zp,CanvasTexture:()=>Du,CapsuleGeometry:()=>sh,CatmullRomCurve3:()=>Wu,CineonToneMapping:()=>st,CircleGeometry:()=>ah,ClampToEdgeWrapping:()=>yt,Clock:()=>Rf,Color:()=>es,ColorKeyframeTrack:()=>Ad,ColorManagement:()=>yi,CompressedArrayTexture:()=>ku,CompressedCubeTexture:()=>Ou,CompressedTexture:()=>Nu,CompressedTextureLoader:()=>Vd,ConeGeometry:()=>lh,ConstantAlphaFactor:()=>V,ConstantColorFactor:()=>B,CubeCamera:()=>aa,CubeReflectionMapping:()=>dt,CubeRefractionMapping:()=>ft,CubeTexture:()=>oa,CubeTextureLoader:()=>Gd,CubeUVReflectionMapping:()=>gt,CubicBezierCurve:()=>Zu,CubicBezierCurve3:()=>Yu,CubicInterpolant:()=>wd,CullFaceBack:()=>l,CullFaceFront:()=>c,CullFaceFrontBack:()=>u,CullFaceNone:()=>o,Curve:()=>Iu,CurvePath:()=>nh,CustomBlending:()=>M,CustomToneMapping:()=>ot,CylinderGeometry:()=>oh,Cylindrical:()=>hp,Data3DTexture:()=>ki,DataArrayTexture:()=>Li,DataTexture:()=>Ic,DataTextureLoader:()=>Xd,DataUtils:()=>us,DecrementStencilOp:()=>un,DecrementWrapStencilOp:()=>dn,DefaultLoadingManager:()=>zd,DepthFormat:()=>Gt,DepthStencilFormat:()=>Xt,DepthTexture:()=>to,DetachedBindMode:()=>ut,DirectionalLight:()=>cf,DirectionalLightHelper:()=>Op,DiscreteInterpolant:()=>Md,DisplayP3ColorSpace:()=>$e,DodecahedronGeometry:()=>uh,DoubleSide:()=>v,DstAlphaFactor:()=>I,DstColorFactor:()=>j,DynamicCopyUsage:()=>zn,DynamicDrawUsage:()=>Ln,DynamicReadUsage:()=>On,EdgesGeometry:()=>mh,EllipseCurve:()=>zu,EqualCompare:()=>Mn,EqualDepth:()=>Y,EqualStencilFunc:()=>gn,EquirectangularReflectionMapping:()=>pt,EquirectangularRefractionMapping:()=>mt,Euler:()=>Sr,EventDispatcher:()=>Wn,ExtrudeGeometry:()=>Gh,FileLoader:()=>Bd,Float16BufferAttribute:()=>bs,Float32BufferAttribute:()=>ws,Float64BufferAttribute:()=>Ss,FloatType:()=>It,Fog:()=>ec,FogExp2:()=>tc,FramebufferTexture:()=>Lu,FrontSide:()=>m,Frustum:()=>ma,GLBufferAttribute:()=>ap,GLSL1:()=>Un,GLSL3:()=>Fn,GreaterCompare:()=>Tn,GreaterDepth:()=>J,GreaterEqualCompare:()=>Cn,GreaterEqualDepth:()=>K,GreaterEqualStencilFunc:()=>_n,GreaterStencilFunc:()=>yn,GridHelper:()=>Pp,Group:()=>Xl,HalfFloatType:()=>zt,HemisphereLight:()=>Yd,HemisphereLightHelper:()=>Cp,IcosahedronGeometry:()=>qh,ImageBitmapLoader:()=>wf,ImageLoader:()=>Wd,ImageUtils:()=>wi,IncrementStencilOp:()=>cn,IncrementWrapStencilOp:()=>hn,InstancedBufferAttribute:()=>Fc,InstancedBufferGeometry:()=>gf,InstancedInterleavedBuffer:()=>sp,InstancedMesh:()=>Zc,Int16BufferAttribute:()=>vs,Int32BufferAttribute:()=>xs,Int8BufferAttribute:()=>ps,IntType:()=>Ot,InterleavedBuffer:()=>ic,InterleavedBufferAttribute:()=>sc,Interpolant:()=>bd,InterpolateDiscrete:()=>ke,InterpolateLinear:()=>Oe,InterpolateSmooth:()=>De,InvertStencilOp:()=>fn,KeepStencilOp:()=>on,KeyframeTrack:()=>Ed,LOD:()=>Mc,LatheGeometry:()=>rh,Layers:()=>Mr,LessCompare:()=>Sn,LessDepth:()=>q,LessEqualCompare:()=>En,LessEqualDepth:()=>Z,LessEqualStencilFunc:()=>vn,LessStencilFunc:()=>mn,Light:()=>Zd,LightProbe:()=>ff,Line:()=>yu,Line3:()=>gp,LineBasicMaterial:()=>du,LineCurve:()=>Ku,LineCurve3:()=>Ju,LineDashedMaterial:()=>pd,LineLoop:()=>wu,LineSegments:()=>bu,LinearDisplayP3ColorSpace:()=>tn,LinearEncoding:()=>We,LinearFilter:()=>Et,LinearInterpolant:()=>Sd,LinearMipMapLinearFilter:()=>Pt,LinearMipMapNearestFilter:()=>At,LinearMipmapLinearFilter:()=>Ct,LinearMipmapNearestFilter:()=>Tt,LinearSRGBColorSpace:()=>Qe,LinearToneMapping:()=>it,LinearTransfer:()=>en,Loader:()=>jd,LoaderUtils:()=>mf,LoadingManager:()=>Id,LoopOnce:()=>Re,LoopPingPong:()=>Ne,LoopRepeat:()=>Le,LuminanceAlphaFormat:()=>Wt,LuminanceFormat:()=>Vt,MOUSE:()=>s,Material:()=>rs,MaterialLoader:()=>pf,MathUtils:()=>ii,Matrix3:()=>si,Matrix4:()=>fr,MaxEquation:()=>P,Mesh:()=>Ys,MeshBasicMaterial:()=>ss,MeshDepthMaterial:()=>Ul,MeshDistanceMaterial:()=>Fl,MeshLambertMaterial:()=>dd,MeshMatcapMaterial:()=>fd,MeshNormalMaterial:()=>hd,MeshPhongMaterial:()=>cd,MeshPhysicalMaterial:()=>ld,MeshStandardMaterial:()=>od,MeshToonMaterial:()=>ud,MinEquation:()=>C,MirroredRepeatWrapping:()=>xt,MixOperation:()=>tt,MultiplyBlending:()=>S,MultiplyOperation:()=>$,NearestFilter:()=>_t,NearestMipMapLinearFilter:()=>Mt,NearestMipMapNearestFilter:()=>wt,NearestMipmapLinearFilter:()=>St,NearestMipmapNearestFilter:()=>bt,NeverCompare:()=>wn,NeverDepth:()=>G,NeverStencilFunc:()=>pn,NoBlending:()=>x,NoColorSpace:()=>Ke,NoToneMapping:()=>nt,NormalAnimationBlendMode:()=>Ue,NormalBlending:()=>_,NotEqualCompare:()=>An,NotEqualDepth:()=>Q,NotEqualStencilFunc:()=>xn,NumberKeyframeTrack:()=>Cd,Object3D:()=>jr,ObjectLoader:()=>yf,ObjectSpaceNormalMap:()=>Ye,OctahedronGeometry:()=>Zh,OneFactor:()=>L,OneMinusConstantAlphaFactor:()=>W,OneMinusConstantColorFactor:()=>H,OneMinusDstAlphaFactor:()=>z,OneMinusDstColorFactor:()=>U,OneMinusSrcAlphaFactor:()=>D,OneMinusSrcColorFactor:()=>k,OrthographicCamera:()=>Pa,P3Primaries:()=>sn,PCFShadowMap:()=>d,PCFSoftShadowMap:()=>f,PMREMGenerator:()=>Fa,Path:()=>ih,PerspectiveCamera:()=>ra,Plane:()=>da,PlaneGeometry:()=>ya,PlaneHelper:()=>Hp,PointLight:()=>of,PointLightHelper:()=>Mp,Points:()=>Cu,PointsMaterial:()=>Su,PolarGridHelper:()=>Rp,PolyhedronGeometry:()=>ch,PositionalAudio:()=>Hf,PropertyBinding:()=>Jf,PropertyMixer:()=>Wf,QuadraticBezierCurve:()=>Qu,QuadraticBezierCurve3:()=>$u,Quaternion:()=>Ii,QuaternionKeyframeTrack:()=>Rd,QuaternionLinearInterpolant:()=>Pd,RED_GREEN_RGTC2_Format:()=>Ce,RED_RGTC1_Format:()=>Te,REVISION:()=>r,RGBADepthPacking:()=>qe,RGBAFormat:()=>Ht,RGBAIntegerFormat:()=>Jt,RGBA_ASTC_10x10_Format:()=>_e,RGBA_ASTC_10x5_Format:()=>ve,RGBA_ASTC_10x6_Format:()=>ye,RGBA_ASTC_10x8_Format:()=>xe,RGBA_ASTC_12x10_Format:()=>be,RGBA_ASTC_12x12_Format:()=>we,RGBA_ASTC_4x4_Format:()=>ce,RGBA_ASTC_5x4_Format:()=>ue,RGBA_ASTC_5x5_Format:()=>he,RGBA_ASTC_6x5_Format:()=>de,RGBA_ASTC_6x6_Format:()=>fe,RGBA_ASTC_8x5_Format:()=>pe,RGBA_ASTC_8x6_Format:()=>me,RGBA_ASTC_8x8_Format:()=>ge,RGBA_BPTC_Format:()=>Se,RGBA_ETC2_EAC_Format:()=>le,RGBA_PVRTC_2BPPV1_Format:()=>se,RGBA_PVRTC_4BPPV1_Format:()=>re,RGBA_S3TC_DXT1_Format:()=>$t,RGBA_S3TC_DXT3_Format:()=>te,RGBA_S3TC_DXT5_Format:()=>ee,RGB_BPTC_SIGNED_Format:()=>Me,RGB_BPTC_UNSIGNED_Format:()=>Ee,RGB_ETC1_Format:()=>ae,RGB_ETC2_Format:()=>oe,RGB_PVRTC_2BPPV1_Format:()=>ie,RGB_PVRTC_4BPPV1_Format:()=>ne,RGB_S3TC_DXT1_Format:()=>Qt,RGFormat:()=>Yt,RGIntegerFormat:()=>Kt,RawShaderMaterial:()=>ad,Ray:()=>dr,Raycaster:()=>op,Rec709Primaries:()=>rn,RectAreaLight:()=>hf,RedFormat:()=>qt,RedIntegerFormat:()=>Zt,ReinhardToneMapping:()=>rt,RenderTarget:()=>Pi,RepeatWrapping:()=>vt,ReplaceStencilOp:()=>ln,ReverseSubtractEquation:()=>A,RingGeometry:()=>Yh,SIGNED_RED_GREEN_RGTC2_Format:()=>Pe,SIGNED_RED_RGTC1_Format:()=>Ae,SRGBColorSpace:()=>Je,SRGBTransfer:()=>nn,Scene:()=>nc,ShaderChunk:()=>xa,ShaderLib:()=>ba,ShaderMaterial:()=>na,ShadowMaterial:()=>sd,Shape:()=>gh,ShapeGeometry:()=>Kh,ShapePath:()=>Zp,ShapeUtils:()=>Hh,ShortType:()=>Nt,Skeleton:()=>Uc,SkeletonHelper:()=>wp,SkinnedMesh:()=>Oc,Source:()=>Mi,Sphere:()=>rr,SphereGeometry:()=>Jh,Spherical:()=>up,SphericalHarmonics3:()=>df,SplineCurve:()=>th,SpotLight:()=>ef,SpotLightHelper:()=>yp,Sprite:()=>_c,SpriteMaterial:()=>ac,SrcAlphaFactor:()=>O,SrcAlphaSaturateFactor:()=>F,SrcColorFactor:()=>N,StaticCopyUsage:()=>In,StaticDrawUsage:()=>Rn,StaticReadUsage:()=>kn,StereoCamera:()=>Pf,StreamCopyUsage:()=>jn,StreamDrawUsage:()=>Nn,StreamReadUsage:()=>Dn,StringKeyframeTrack:()=>Ld,SubtractEquation:()=>T,SubtractiveBlending:()=>w,TOUCH:()=>a,TangentSpaceNormalMap:()=>Ze,TetrahedronGeometry:()=>Qh,Texture:()=>Ai,TextureLoader:()=>qd,TorusGeometry:()=>$h,TorusKnotGeometry:()=>td,Triangle:()=>Kr,TriangleFanDrawMode:()=>Ve,TriangleStripDrawMode:()=>He,TrianglesDrawMode:()=>Be,TubeGeometry:()=>ed,TwoPassDoubleSide:()=>y,UVMapping:()=>ht,Uint16BufferAttribute:()=>ys,Uint32BufferAttribute:()=>_s,Uint8BufferAttribute:()=>ms,Uint8ClampedBufferAttribute:()=>gs,Uniform:()=>np,UniformsGroup:()=>rp,UniformsLib:()=>_a,UniformsUtils:()=>ea,UnsignedByteType:()=>Rt,UnsignedInt248Type:()=>Ft,UnsignedIntType:()=>Dt,UnsignedShort4444Type:()=>jt,UnsignedShort5551Type:()=>Ut,UnsignedShortType:()=>kt,VSMShadowMap:()=>p,Vector2:()=>ri,Vector3:()=>zi,Vector4:()=>Ci,VectorKeyframeTrack:()=>Nd,VideoTexture:()=>Ru,WebGL1Renderer:()=>$l,WebGL3DRenderTarget:()=>Oi,WebGLArrayRenderTarget:()=>Ni,WebGLCoordinateSystem:()=>Hn,WebGLCubeRenderTarget:()=>la,WebGLMultipleRenderTargets:()=>Di,WebGLRenderTarget:()=>Ri,WebGLRenderer:()=>Ql,WebGLUtils:()=>Wl,WebGPUCoordinateSystem:()=>Vn,WireframeGeometry:()=>nd,WrapAroundEnding:()=>je,ZeroCurvatureEnding:()=>Ie,ZeroFactor:()=>R,ZeroSlopeEnding:()=>ze,ZeroStencilOp:()=>an,_SRGBAFormat:()=>Bn,createCanvasElement:()=>hi,sRGBEncoding:()=>Ge});var i=n(379);const r="160",s={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},a={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=0,l=1,c=2,u=3,h=0,d=1,f=2,p=3,m=0,g=1,v=2,y=2,x=0,_=1,b=2,w=3,S=4,M=5,E=100,T=101,A=102,C=103,P=104,R=200,L=201,N=202,k=203,O=204,D=205,I=206,z=207,j=208,U=209,F=210,B=211,H=212,V=213,W=214,G=0,X=1,q=2,Z=3,Y=4,K=5,J=6,Q=7,$=0,tt=1,et=2,nt=0,it=1,rt=2,st=3,at=4,ot=5,lt=6,ct="attached",ut="detached",ht=300,dt=301,ft=302,pt=303,mt=304,gt=306,vt=1e3,yt=1001,xt=1002,_t=1003,bt=1004,wt=1004,St=1005,Mt=1005,Et=1006,Tt=1007,At=1007,Ct=1008,Pt=1008,Rt=1009,Lt=1010,Nt=1011,kt=1012,Ot=1013,Dt=1014,It=1015,zt=1016,jt=1017,Ut=1018,Ft=1020,Bt=1021,Ht=1023,Vt=1024,Wt=1025,Gt=1026,Xt=1027,qt=1028,Zt=1029,Yt=1030,Kt=1031,Jt=1033,Qt=33776,$t=33777,te=33778,ee=33779,ne=35840,ie=35841,re=35842,se=35843,ae=36196,oe=37492,le=37496,ce=37808,ue=37809,he=37810,de=37811,fe=37812,pe=37813,me=37814,ge=37815,ve=37816,ye=37817,xe=37818,_e=37819,be=37820,we=37821,Se=36492,Me=36494,Ee=36495,Te=36283,Ae=36284,Ce=36285,Pe=36286,Re=2200,Le=2201,Ne=2202,ke=2300,Oe=2301,De=2302,Ie=2400,ze=2401,je=2402,Ue=2500,Fe=2501,Be=0,He=1,Ve=2,We=3e3,Ge=3001,Xe=3200,qe=3201,Ze=0,Ye=1,Ke="",Je="srgb",Qe="srgb-linear",$e="display-p3",tn="display-p3-linear",en="linear",nn="srgb",rn="rec709",sn="p3",an=0,on=7680,ln=7681,cn=7682,un=7683,hn=34055,dn=34056,fn=5386,pn=512,mn=513,gn=514,vn=515,yn=516,xn=517,_n=518,bn=519,wn=512,Sn=513,Mn=514,En=515,Tn=516,An=517,Cn=518,Pn=519,Rn=35044,Ln=35048,Nn=35040,kn=35045,On=35049,Dn=35041,In=35046,zn=35050,jn=35042,Un="100",Fn="300 es",Bn=1035,Hn=2e3,Vn=2001;class Wn{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}const Gn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Xn=1234567;const qn=Math.PI/180,Zn=180/Math.PI;function Yn(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Gn[255&t]+Gn[t>>8&255]+Gn[t>>16&255]+Gn[t>>24&255]+"-"+Gn[255&e]+Gn[e>>8&255]+"-"+Gn[e>>16&15|64]+Gn[e>>24&255]+"-"+Gn[63&n|128]+Gn[n>>8&255]+"-"+Gn[n>>16&255]+Gn[n>>24&255]+Gn[255&i]+Gn[i>>8&255]+Gn[i>>16&255]+Gn[i>>24&255]).toLowerCase()}function Kn(t,e,n){return Math.max(e,Math.min(n,t))}function Jn(t,e){return(t%e+e)%e}function Qn(t,e,n){return(1-n)*t+n*e}function $n(t){return 0===(t&t-1)&&0!==t}function ti(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function ei(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ni(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const ii={DEG2RAD:qn,RAD2DEG:Zn,generateUUID:Yn,clamp:Kn,euclideanModulo:Jn,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:Qn,damp:function(t,e,n,i){return Qn(t,e,1-Math.exp(-n*i))},pingpong:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(Jn(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Xn=t);let e=Xn+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*qn},radToDeg:function(t){return t*Zn},isPowerOfTwo:$n,ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:ti,setQuaternionFromProperEuler:function(t,e,n,i,r){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((e+i)/2),u=a((e+i)/2),h=s((e-i)/2),d=a((e-i)/2),f=s((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":t.set(o*u,l*h,l*d,o*c);break;case"YZY":t.set(l*d,o*u,l*h,o*c);break;case"ZXZ":t.set(l*h,l*d,o*u,o*c);break;case"XZX":t.set(o*u,l*p,l*f,o*c);break;case"YXY":t.set(l*f,o*u,l*p,o*c);break;case"ZYZ":t.set(l*p,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:ni,denormalize:ei};class ri{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ri.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Kn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class si{constructor(t,e,n,i,r,s,a,o,l){si.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,s,a,o,l)}set(t,e,n,i,r,s,a,o,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],_=i[2],b=i[5],w=i[8];return r[0]=s*p+a*v+o*_,r[3]=s*m+a*y+o*b,r[6]=s*g+a*x+o*w,r[1]=l*p+c*v+u*_,r[4]=l*m+c*y+u*b,r[7]=l*g+c*x+u*w,r[2]=h*p+d*v+f*_,r[5]=h*m+d*y+f*b,r[8]=h*g+d*x+f*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8];return e*s*c-e*a*l-n*r*c+n*a*o+i*r*l-i*s*o}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],u=c*s-a*l,h=a*o-c*r,d=l*r-s*o,f=e*u+n*h+i*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=u*p,t[1]=(i*l-c*n)*p,t[2]=(a*n-i*s)*p,t[3]=h*p,t[4]=(c*e-i*o)*p,t[5]=(i*r-a*e)*p,t[6]=d*p,t[7]=(n*o-l*e)*p,t[8]=(s*e-n*r)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*s+l*a)+s+t,-i*l,i*o,-i*(-l*s+o*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(ai.makeScale(t,e)),this}rotate(t){return this.premultiply(ai.makeRotation(-t)),this}translate(t,e){return this.premultiply(ai.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const ai=new si;function oi(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const li={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ci(t,e){return new li[t](e)}function ui(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function hi(){const t=ui("canvas");return t.style.display="block",t}const di={};function fi(t){t in di||(di[t]=!0,console.warn(t))}const pi=(new si).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),mi=(new si).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),gi={[Qe]:{transfer:en,primaries:rn,toReference:t=>t,fromReference:t=>t},[Je]:{transfer:nn,primaries:rn,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[tn]:{transfer:en,primaries:sn,toReference:t=>t.applyMatrix3(mi),fromReference:t=>t.applyMatrix3(pi)},[$e]:{transfer:nn,primaries:sn,toReference:t=>t.convertSRGBToLinear().applyMatrix3(mi),fromReference:t=>t.applyMatrix3(pi).convertLinearToSRGB()}},vi=new Set([Qe,tn]),yi={enabled:!0,_workingColorSpace:Qe,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!vi.has(t))throw new Error('Unsupported working color space, "'.concat(t,'".'));this._workingColorSpace=t},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const i=gi[e].toReference;return(0,gi[n].fromReference)(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return gi[t].primaries},getTransfer:function(t){return t===Ke?en:gi[t].transfer}};function xi(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function _i(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let bi;class wi{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"===typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===bi&&(bi=ui("canvas")),bi.width=t.width,bi.height=t.height;const n=bi.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=bi}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const e=ui("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let t=0;t<r.length;t++)r[t]=255*xi(r[t]/255);return n.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*xi(e[t]/255)):e[t]=xi(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Si=0;class Mi{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Si++}),this.uuid=Yn(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(Ei(i[e].image)):t.push(Ei(i[e]))}else t=Ei(i);n.url=t}return e||(t.images[this.uuid]=n),n}}function Ei(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?wi.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ti=0;class Ai extends Wn{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ai.DEFAULT_IMAGE,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ai.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yt,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yt,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Et,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ct,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ht,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Rt,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Ai.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ke;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ti++}),this.uuid=Yn(),this.name="",this.source=new Mi(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new ri(0,0),this.repeat=new ri(1,1),this.center=new ri(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new si,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof c?this.colorSpace=c:(fi("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Ge?Je:Ke),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){void 0===t&&(t=null),this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==ht)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case vt:t.x=t.x-Math.floor(t.x);break;case yt:t.x=t.x<0?0:1;break;case xt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case vt:t.y=t.y-Math.floor(t.y);break;case yt:t.y=t.y<0?0:1;break;case xt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return fi("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Je?Ge:We}set encoding(t){fi("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Ge?Je:Ke}}Ai.DEFAULT_IMAGE=null,Ai.DEFAULT_MAPPING=ht,Ai.DEFAULT_ANISOTROPY=1;class Ci{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Ci.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const s=.01,a=.1,o=t.elements,l=o[0],c=o[4],u=o[8],h=o[1],d=o[5],f=o[9],p=o[2],m=o[6],g=o[10];if(Math.abs(c-h)<s&&Math.abs(u-p)<s&&Math.abs(f-m)<s){if(Math.abs(c+h)<a&&Math.abs(u+p)<a&&Math.abs(f+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,o=(d+1)/2,v=(g+1)/2,y=(c+h)/4,x=(u+p)/4,_=(f+m)/4;return t>o&&t>v?t<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=y/n,r=x/n):o>v?o<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=y/i,r=_/i):v<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=x/r,i=_/r),this.set(n,i,r,e),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Pi extends Wn{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Ci(0,0,t,e),this.scissorTest=!1,this.viewport=new Ci(0,0,t,e);const i={width:t,height:e,depth:1};void 0!==n.encoding&&(fi("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Ge?Je:Ke),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Et,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new Ai(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Mi(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ri extends Pi{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class Li extends Ai{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=_t,this.minFilter=_t,this.wrapR=yt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ni extends Ri{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Li(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class ki extends Ai{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=_t,this.minFilter=_t,this.wrapR=yt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Oi extends Ri{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new ki(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Di extends Ri{constructor(){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLMultipleRenderTargets=!0;const e=this.texture;this.texture=[];for(let n=0;n<t;n++)this.texture[n]=e.clone(),this.texture[n].isRenderTargetTexture=!0}setSize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}}class Ii{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,s,a){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[s+0],d=r[s+1],f=r[s+2],p=r[s+3];if(0===a)return t[e+0]=o,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===a)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(u!==p||o!==h||l!==d||c!==f){let t=1-a;const e=o*h+l*d+c*f+u*p,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,e*n);t=Math.sin(t*s)/r,a=Math.sin(a*s)/r}const r=a*n;if(o=o*t+h*r,l=l*t+d*r,c=c*t+f*r,u=u*t+p*r,t===1-a){const t=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=t,l*=t,c*=t,u*=t}}t[e]=o,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,r,s){const a=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[s],h=r[s+1],d=r[s+2],f=r[s+3];return t[e]=a*f+c*u+o*d-l*h,t[e+1]=o*f+c*h+l*u-a*d,t[e+2]=l*f+c*d+a*h-o*u,t[e+3]=c*f-a*u-o*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=t._x,i=t._y,r=t._z,s=t._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=o(n/2),d=o(i/2),f=o(r/2);switch(s){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],a=e[5],o=e[9],l=e[2],c=e[6],u=e[10],h=n+a+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-o)*t,this._y=(r-l)*t,this._z=(s-i)*t}else if(n>a&&n>u){const t=2*Math.sqrt(1+n-a-u);this._w=(c-o)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(r+l)/t}else if(a>u){const t=2*Math.sqrt(1+a-n-u);this._w=(r-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(o+c)/t}else{const t=2*Math.sqrt(1+u-n-a);this._w=(s-i)/t,this._x=(r+l)/t,this._y=(o+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Kn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,s=t._w,a=e._x,o=e._y,l=e._z,c=e._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,s=this._w;let a=s*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=s*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class zi{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;zi.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Ui.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Ui.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,a=t.z,o=t.w,l=2*(s*i-a*n),c=2*(a*e-r*i),u=2*(r*n-s*e);return this.x=e+o*l+s*u-a*c,this.y=n+o*c+a*l-r*u,this.z=i+o*u+r*c-s*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,s=e.x,a=e.y,o=e.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return ji.copy(this).projectOnVector(t),this.sub(ji)}reflect(t){return this.sub(ji.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Kn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ji=new zi,Ui=new Ii;class Fi{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi(1/0,1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Hi.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Hi.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Hi.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===e&&void 0!==i&&!0!==t.isInstancedMesh)for(let e=0,n=i.count;e<n;e++)!0===t.isMesh?t.getVertexPosition(e,Hi):Hi.fromBufferAttribute(i,e),Hi.applyMatrix4(t.matrixWorld),this.expandByPoint(Hi);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),Vi.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Vi.copy(n.boundingBox)),Vi.applyMatrix4(t.matrixWorld),this.union(Vi)}const i=t.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Hi),Hi.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Ki),Ji.subVectors(this.max,Ki),Wi.subVectors(t.a,Ki),Gi.subVectors(t.b,Ki),Xi.subVectors(t.c,Ki),qi.subVectors(Gi,Wi),Zi.subVectors(Xi,Gi),Yi.subVectors(Wi,Xi);let e=[0,-qi.z,qi.y,0,-Zi.z,Zi.y,0,-Yi.z,Yi.y,qi.z,0,-qi.x,Zi.z,0,-Zi.x,Yi.z,0,-Yi.x,-qi.y,qi.x,0,-Zi.y,Zi.x,0,-Yi.y,Yi.x,0];return!!tr(e,Wi,Gi,Xi,Ji)&&(e=[1,0,0,0,1,0,0,0,1],!!tr(e,Wi,Gi,Xi,Ji)&&(Qi.crossVectors(qi,Zi),e=[Qi.x,Qi.y,Qi.z],tr(e,Wi,Gi,Xi,Ji)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Hi).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Hi).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Bi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Bi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Bi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Bi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Bi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Bi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Bi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Bi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Bi)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Bi=[new zi,new zi,new zi,new zi,new zi,new zi,new zi,new zi],Hi=new zi,Vi=new Fi,Wi=new zi,Gi=new zi,Xi=new zi,qi=new zi,Zi=new zi,Yi=new zi,Ki=new zi,Ji=new zi,Qi=new zi,$i=new zi;function tr(t,e,n,i,r){for(let s=0,a=t.length-3;s<=a;s+=3){$i.fromArray(t,s);const a=r.x*Math.abs($i.x)+r.y*Math.abs($i.y)+r.z*Math.abs($i.z),o=e.dot($i),l=n.dot($i),c=i.dot($i);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const er=new Fi,nr=new zi,ir=new zi;class rr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):er.setFromPoints(t).getCenter(n);let i=0;for(let r=0,s=t.length;r<s;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;nr.subVectors(t,this.center);const e=nr.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(nr,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(ir.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(nr.copy(t.center).add(ir)),this.expandByPoint(nr.copy(t.center).sub(ir))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const sr=new zi,ar=new zi,or=new zi,lr=new zi,cr=new zi,ur=new zi,hr=new zi;class dr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi(0,0,-1);this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,sr)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=sr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(sr.copy(this.origin).addScaledVector(this.direction,e),sr.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){ar.copy(t).add(e).multiplyScalar(.5),or.copy(e).sub(t).normalize(),lr.copy(this.origin).sub(ar);const r=.5*t.distanceTo(e),s=-this.direction.dot(or),a=lr.dot(this.direction),o=-lr.dot(or),l=lr.lengthSq(),c=Math.abs(1-s*s);let u,h,d,f;if(c>0)if(u=s*o-a,h=s*a-o,f=r*c,u>=0)if(h>=-f)if(h<=f){const t=1/c;u*=t,h*=t,d=u*(u+s*h+2*a)+h*(s*u+h+2*o)+l}else h=r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;else h=-r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;else h<=-f?(u=Math.max(0,-(-s*r+a)),h=u>0?-r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l):h<=f?(u=0,h=Math.min(Math.max(-r,-o),r),d=h*(h+2*o)+l):(u=Math.max(0,-(s*r+a)),h=u>0?r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l);else h=s>0?-r:r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(ar).addScaledVector(or,h),d}intersectSphere(t,e){sr.subVectors(t.center,this.origin);const n=sr.dot(this.direction),i=sr.dot(sr)-n*n,r=t.radius*t.radius;if(i>r)return null;const s=Math.sqrt(r-i),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,s=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,s=(t.min.y-h.y)*c),n>s||r>i?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),u>=0?(a=(t.min.z-h.z)*u,o=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,o=(t.min.z-h.z)*u),n>o||a>i?null:((a>n||n!==n)&&(n=a),(o<i||i!==i)&&(i=o),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,sr)}intersectTriangle(t,e,n,i,r){cr.subVectors(e,t),ur.subVectors(n,t),hr.crossVectors(cr,ur);let s,a=this.direction.dot(hr);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}lr.subVectors(this.origin,t);const o=s*this.direction.dot(ur.crossVectors(lr,ur));if(o<0)return null;const l=s*this.direction.dot(cr.cross(lr));if(l<0)return null;if(o+l>a)return null;const c=-s*lr.dot(hr);return c<0?null:this.at(c/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class fr{constructor(t,e,n,i,r,s,a,o,l,c,u,h,d,f,p,m){fr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,s,a,o,l,c,u,h,d,f,p,m)}set(t,e,n,i,r,s,a,o,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new fr).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/pr.setFromMatrixColumn(t,0).length(),r=1/pr.setFromMatrixColumn(t,1).length(),s=1/pr.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const t=s*c,n=s*u,i=a*c,r=a*u;e[0]=o*c,e[4]=-o*u,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-a*o,e[2]=r-t*l,e[6]=i+n*l,e[10]=s*o}else if("YXZ"===t.order){const t=o*c,n=o*u,i=l*c,r=l*u;e[0]=t+r*a,e[4]=i*a-n,e[8]=s*l,e[1]=s*u,e[5]=s*c,e[9]=-a,e[2]=n*a-i,e[6]=r+t*a,e[10]=s*o}else if("ZXY"===t.order){const t=o*c,n=o*u,i=l*c,r=l*u;e[0]=t-r*a,e[4]=-s*u,e[8]=i+n*a,e[1]=n+i*a,e[5]=s*c,e[9]=r-t*a,e[2]=-s*l,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){const t=s*c,n=s*u,i=a*c,r=a*u;e[0]=o*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=o*u,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){const t=s*o,n=s*l,i=a*o,r=a*l;e[0]=o*c,e[4]=r-t*u,e[8]=i*u+n,e[1]=u,e[5]=s*c,e[9]=-a*c,e[2]=-l*c,e[6]=n*u+i,e[10]=t-r*u}else if("XZY"===t.order){const t=s*o,n=s*l,i=a*o,r=a*l;e[0]=o*c,e[4]=-u,e[8]=l*c,e[1]=t*u+r,e[5]=s*c,e[9]=n*u-i,e[2]=i*u-n,e[6]=a*c,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(gr,t,vr)}lookAt(t,e,n){const i=this.elements;return _r.subVectors(t,e),0===_r.lengthSq()&&(_r.z=1),_r.normalize(),yr.crossVectors(n,_r),0===yr.lengthSq()&&(1===Math.abs(n.z)?_r.x+=1e-4:_r.z+=1e-4,_r.normalize(),yr.crossVectors(n,_r)),yr.normalize(),xr.crossVectors(_r,yr),i[0]=yr.x,i[4]=xr.x,i[8]=_r.x,i[1]=yr.y,i[5]=xr.y,i[9]=_r.y,i[2]=yr.z,i[6]=xr.z,i[10]=_r.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],_=n[15],b=i[0],w=i[4],S=i[8],M=i[12],E=i[1],T=i[5],A=i[9],C=i[13],P=i[2],R=i[6],L=i[10],N=i[14],k=i[3],O=i[7],D=i[11],I=i[15];return r[0]=s*b+a*E+o*P+l*k,r[4]=s*w+a*T+o*R+l*O,r[8]=s*S+a*A+o*L+l*D,r[12]=s*M+a*C+o*N+l*I,r[1]=c*b+u*E+h*P+d*k,r[5]=c*w+u*T+h*R+d*O,r[9]=c*S+u*A+h*L+d*D,r[13]=c*M+u*C+h*N+d*I,r[2]=f*b+p*E+m*P+g*k,r[6]=f*w+p*T+m*R+g*O,r[10]=f*S+p*A+m*L+g*D,r[14]=f*M+p*C+m*N+g*I,r[3]=v*b+y*E+x*P+_*k,r[7]=v*w+y*T+x*R+_*O,r[11]=v*S+y*A+x*L+_*D,r[15]=v*M+y*C+x*N+_*I,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],a=t[5],o=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+r*o*u-i*l*u-r*a*h+n*l*h+i*a*d-n*o*d)+t[7]*(+e*o*d-e*l*h+r*s*h-i*s*d+i*l*c-r*o*c)+t[11]*(+e*l*u-e*a*d-r*s*u+n*s*d+r*a*c-n*l*c)+t[15]*(-i*a*c-e*o*u+e*a*h+i*s*u-n*s*h+n*o*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],v=u*m*l-p*h*l+p*o*d-a*m*d-u*o*g+a*h*g,y=f*h*l-c*m*l-f*o*d+s*m*d+c*o*g-s*h*g,x=c*p*l-f*u*l+f*a*d-s*p*d-c*a*g+s*u*g,_=f*u*o-c*p*o-f*a*h+s*p*h+c*a*m-s*u*m,b=e*v+n*y+i*x+r*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return t[0]=v*w,t[1]=(p*h*r-u*m*r-p*i*d+n*m*d+u*i*g-n*h*g)*w,t[2]=(a*m*r-p*o*r+p*i*l-n*m*l-a*i*g+n*o*g)*w,t[3]=(u*o*r-a*h*r-u*i*l+n*h*l+a*i*d-n*o*d)*w,t[4]=y*w,t[5]=(c*m*r-f*h*r+f*i*d-e*m*d-c*i*g+e*h*g)*w,t[6]=(f*o*r-s*m*r-f*i*l+e*m*l+s*i*g-e*o*g)*w,t[7]=(s*h*r-c*o*r+c*i*l-e*h*l-s*i*d+e*o*d)*w,t[8]=x*w,t[9]=(f*u*r-c*p*r-f*n*d+e*p*d+c*n*g-e*u*g)*w,t[10]=(s*p*r-f*a*r+f*n*l-e*p*l-s*n*g+e*a*g)*w,t[11]=(c*a*r-s*u*r-c*n*l+e*u*l+s*n*d-e*a*d)*w,t[12]=_*w,t[13]=(c*p*i-f*u*i+f*n*h-e*p*h-c*n*m+e*u*m)*w,t[14]=(f*a*i-s*p*i-f*n*o+e*p*o+s*n*m-e*a*m)*w,t[15]=(s*u*i-c*a*i+c*n*o-e*u*o-s*n*h+e*a*h)*w,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,a=t.y,o=t.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,s=e._y,a=e._z,o=e._w,l=r+r,c=s+s,u=a+a,h=r*l,d=r*c,f=r*u,p=s*c,m=s*u,g=a*u,v=o*l,y=o*c,x=o*u,_=n.x,b=n.y,w=n.z;return i[0]=(1-(p+g))*_,i[1]=(d+x)*_,i[2]=(f-y)*_,i[3]=0,i[4]=(d-x)*b,i[5]=(1-(h+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(f+y)*w,i[9]=(m-v)*w,i[10]=(1-(h+p))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=pr.set(i[0],i[1],i[2]).length();const s=pr.set(i[4],i[5],i[6]).length(),a=pr.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],mr.copy(this);const o=1/r,l=1/s,c=1/a;return mr.elements[0]*=o,mr.elements[1]*=o,mr.elements[2]*=o,mr.elements[4]*=l,mr.elements[5]*=l,mr.elements[6]*=l,mr.elements[8]*=c,mr.elements[9]*=c,mr.elements[10]*=c,e.setFromRotationMatrix(mr),n.x=r,n.y=s,n.z=a,this}makePerspective(t,e,n,i,r,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hn;const o=this.elements,l=2*r/(e-t),c=2*r/(n-i),u=(e+t)/(e-t),h=(n+i)/(n-i);let d,f;if(a===Hn)d=-(s+r)/(s-r),f=-2*s*r/(s-r);else{if(a!==Vn)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);d=-s/(s-r),f=-s*r/(s-r)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hn;const o=this.elements,l=1/(e-t),c=1/(n-i),u=1/(s-r),h=(e+t)*l,d=(n+i)*c;let f,p;if(a===Hn)f=(s+r)*u,p=-2*u;else{if(a!==Vn)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);f=r*u,p=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=p,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const pr=new zi,mr=new fr,gr=new zi(0,0,0),vr=new zi(1,1,1),yr=new zi,xr=new zi,_r=new zi,br=new fr,wr=new Ii;class Sr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sr.DEFAULT_ORDER;this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=t.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(Kn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Kn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Kn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-Kn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Kn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Kn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return br.makeRotationFromQuaternion(t),this.setFromRotationMatrix(br,e,n)}setFromVector3(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}reorder(t){return wr.setFromEuler(this),this.setFromQuaternion(wr,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Sr.DEFAULT_ORDER="XYZ";class Mr{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&1<<t)}}let Er=0;const Tr=new zi,Ar=new Ii,Cr=new fr,Pr=new zi,Rr=new zi,Lr=new zi,Nr=new Ii,kr=new zi(1,0,0),Or=new zi(0,1,0),Dr=new zi(0,0,1),Ir={type:"added"},zr={type:"removed"};class jr extends Wn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Er++}),this.uuid=Yn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=jr.DEFAULT_UP.clone();const t=new zi,e=new Sr,n=new Ii,i=new zi(1,1,1);e._onChange(function(){n.setFromEuler(e,!1)}),n._onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new fr},normalMatrix:{value:new si}}),this.matrix=new fr,this.matrixWorld=new fr,this.matrixAutoUpdate=jr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=jr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Mr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ar.setFromAxisAngle(t,e),this.quaternion.multiply(Ar),this}rotateOnWorldAxis(t,e){return Ar.setFromAxisAngle(t,e),this.quaternion.premultiply(Ar),this}rotateX(t){return this.rotateOnAxis(kr,t)}rotateY(t){return this.rotateOnAxis(Or,t)}rotateZ(t){return this.rotateOnAxis(Dr,t)}translateOnAxis(t,e){return Tr.copy(t).applyQuaternion(this.quaternion),this.position.add(Tr.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(kr,t)}translateY(t){return this.translateOnAxis(Or,t)}translateZ(t){return this.translateOnAxis(Dr,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Cr.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Pr.copy(t):Pr.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Rr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cr.lookAt(Rr,Pr,this.up):Cr.lookAt(Pr,Rr,this.up),this.quaternion.setFromRotationMatrix(Cr),i&&(Cr.extractRotation(i.matrixWorld),Ar.setFromRotationMatrix(Cr),this.quaternion.premultiply(Ar.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Ir)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(zr)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Cr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Cr.multiply(t.parent.matrixWorld)),t.applyMatrix4(Cr),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[t]===e&&n.push(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rr,t,Lr),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rr,Nr,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++){const i=e[n];!0!==i.matrixWorldAutoUpdate&&!0!==t||i.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(t),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=s(t.geometries),i=s(t.materials),r=s(t.textures),a=s(t.images),o=s(t.shapes),l=s(t.skeletons),c=s(t.animations),u=s(t.nodes);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function s(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}jr.DEFAULT_UP=new zi(0,1,0),jr.DEFAULT_MATRIX_AUTO_UPDATE=!0,jr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ur=new zi,Fr=new zi,Br=new zi,Hr=new zi,Vr=new zi,Wr=new zi,Gr=new zi,Xr=new zi,qr=new zi,Zr=new zi;let Yr=!1;class Kr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zi;this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Ur.subVectors(t,e),i.cross(Ur);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){Ur.subVectors(i,e),Fr.subVectors(n,e),Br.subVectors(t,e);const s=Ur.dot(Ur),a=Ur.dot(Fr),o=Ur.dot(Br),l=Fr.dot(Fr),c=Fr.dot(Br),u=s*l-a*a;if(0===u)return r.set(0,0,0),null;const h=1/u,d=(l*o-a*c)*h,f=(s*c-a*o)*h;return r.set(1-d-f,f,d)}static containsPoint(t,e,n,i){return null!==this.getBarycoord(t,e,n,i,Hr)&&(Hr.x>=0&&Hr.y>=0&&Hr.x+Hr.y<=1)}static getUV(t,e,n,i,r,s,a,o){return!1===Yr&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Yr=!0),this.getInterpolation(t,e,n,i,r,s,a,o)}static getInterpolation(t,e,n,i,r,s,a,o){return null===this.getBarycoord(t,e,n,i,Hr)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(r,Hr.x),o.addScaledVector(s,Hr.y),o.addScaledVector(a,Hr.z),o)}static isFrontFacing(t,e,n,i){return Ur.subVectors(n,e),Fr.subVectors(t,e),Ur.cross(Fr).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ur.subVectors(this.c,this.b),Fr.subVectors(this.a,this.b),.5*Ur.cross(Fr).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Kr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Kr.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return!1===Yr&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Yr=!0),Kr.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}getInterpolation(t,e,n,i,r){return Kr.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Kr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Kr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let s,a;Vr.subVectors(i,n),Wr.subVectors(r,n),Xr.subVectors(t,n);const o=Vr.dot(Xr),l=Wr.dot(Xr);if(o<=0&&l<=0)return e.copy(n);qr.subVectors(t,i);const c=Vr.dot(qr),u=Wr.dot(qr);if(c>=0&&u<=c)return e.copy(i);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return s=o/(o-c),e.copy(n).addScaledVector(Vr,s);Zr.subVectors(t,r);const d=Vr.dot(Zr),f=Wr.dot(Zr);if(f>=0&&d<=f)return e.copy(r);const p=d*l-o*f;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),e.copy(n).addScaledVector(Wr,a);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return Gr.subVectors(r,i),a=(u-c)/(u-c+(d-f)),e.copy(i).addScaledVector(Gr,a);const g=1/(m+p+h);return s=p*g,a=h*g,e.copy(n).addScaledVector(Vr,s).addScaledVector(Wr,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Jr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qr={h:0,s:0,l:0},$r={h:0,s:0,l:0};function ts(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class es{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,yi.toWorkingColorSpace(this,e),this}setRGB(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yi.workingColorSpace;return this.r=t,this.g=e,this.b=n,yi.toWorkingColorSpace(this,i),this}setHSL(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yi.workingColorSpace;if(t=Jn(t,1),e=Kn(e,0,1),n=Kn(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=ts(r,i,t+1/3),this.g=ts(r,i,t),this.b=ts(r,i,t-1/3)}return yi.toWorkingColorSpace(this,i),this}setStyle(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;function i(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}if(e=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const s=e[1],a=e[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(e=/^\#([A-Fa-f\d]+)$/.exec(t)){const i=e[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(6===r)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;const n=Jr[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=xi(t.r),this.g=xi(t.g),this.b=xi(t.b),this}copyLinearToSRGB(t){return this.r=_i(t.r),this.g=_i(t.g),this.b=_i(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je;return yi.fromWorkingColorSpace(ns.copy(this),t),65536*Math.round(Kn(255*ns.r,0,255))+256*Math.round(Kn(255*ns.g,0,255))+Math.round(Kn(255*ns.b,0,255))}getHexString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je;return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yi.workingColorSpace;yi.fromWorkingColorSpace(ns.copy(this),e);const n=ns.r,i=ns.g,r=ns.b,s=Math.max(n,i,r),a=Math.min(n,i,r);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const t=s-a;switch(l=c<=.5?t/(s+a):t/(2-s-a),s){case n:o=(i-r)/t+(i<r?6:0);break;case i:o=(r-n)/t+2;break;case r:o=(n-i)/t+4}o/=6}return t.h=o,t.s=l,t.l=c,t}getRGB(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yi.workingColorSpace;return yi.fromWorkingColorSpace(ns.copy(this),e),t.r=ns.r,t.g=ns.g,t.b=ns.b,t}getStyle(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je;yi.fromWorkingColorSpace(ns.copy(this),t);const e=ns.r,n=ns.g,i=ns.b;return t!==Je?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*e),",").concat(Math.round(255*n),",").concat(Math.round(255*i),")")}offsetHSL(t,e,n){return this.getHSL(Qr),this.setHSL(Qr.h+t,Qr.s+e,Qr.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Qr),t.getHSL($r);const n=Qn(Qr.h,$r.h,e),i=Qn(Qr.s,$r.s,e),r=Qn(Qr.l,$r.l,e);return this.setHSL(n,i,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,i=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*i,this.g=r[1]*e+r[4]*n+r[7]*i,this.b=r[2]*e+r[5]*n+r[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ns=new es;es.NAMES=Jr;let is=0;class rs extends Wn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:is++}),this.uuid=Yn(),this.name="",this.type="Material",this.blending=_,this.side=m,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=O,this.blendDst=D,this.blendEquation=E,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new es(0,0,0),this.blendAlpha=0,this.depthFunc=Z,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=on,this.stencilZFail=on,this.stencilZPass=on,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: parameter '".concat(e,"' has value of undefined."));continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE.Material: '".concat(e,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_&&(n.blending=this.blending),this.side!==m&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==O&&(n.blendSrc=this.blendSrc),this.blendDst!==D&&(n.blendDst=this.blendDst),this.blendEquation!==E&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Z&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bn&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==on&&(n.stencilFail=this.stencilFail),this.stencilZFail!==on&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==on&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class ss extends rs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new es(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const as=os();function os(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const t=l-127;t<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):t<-14?(i[l]=1024>>-t-14,i[256|l]=1024>>-t-14|32768,r[l]=-t-1,r[256|l]=-t-1):t<=15?(i[l]=t+15<<10,i[256|l]=t+15<<10|32768,r[l]=13,r[256|l]=13):t<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let t=l<<13,e=0;for(;0===(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,s[l]=t|e}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function ls(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Kn(t,-65504,65504),as.floatView[0]=t;const e=as.uint32View[0],n=e>>23&511;return as.baseTable[n]+((8388607&e)>>as.shiftTable[n])}function cs(t){const e=t>>10;return as.uint32View[0]=as.mantissaTable[as.offsetTable[e]+(1023&t)]+as.exponentTable[e],as.floatView[0]}const us={toHalfFloat:ls,fromHalfFloat:cs},hs=new zi,ds=new ri;class fs{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=Rn,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=It,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)ds.fromBufferAttribute(this,e),ds.applyMatrix3(t),this.setXY(e,ds.x,ds.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)hs.fromBufferAttribute(this,e),hs.applyMatrix3(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)hs.fromBufferAttribute(this,e),hs.applyMatrix4(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)hs.fromBufferAttribute(this,e),hs.applyNormalMatrix(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)hs.fromBufferAttribute(this,e),hs.transformDirection(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=ei(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=ni(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=ei(e,this.array)),e}setX(t,e){return this.normalized&&(e=ni(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=ei(e,this.array)),e}setY(t,e){return this.normalized&&(e=ni(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=ei(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ni(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=ei(e,this.array)),e}setW(t,e){return this.normalized&&(e=ni(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=ni(e,this.array),n=ni(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=ni(e,this.array),n=ni(n,this.array),i=ni(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=ni(e,this.array),n=ni(n,this.array),i=ni(i,this.array),r=ni(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Rn&&(t.usage=this.usage),t}}class ps extends fs{constructor(t,e,n){super(new Int8Array(t),e,n)}}class ms extends fs{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class gs extends fs{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class vs extends fs{constructor(t,e,n){super(new Int16Array(t),e,n)}}class ys extends fs{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class xs extends fs{constructor(t,e,n){super(new Int32Array(t),e,n)}}class _s extends fs{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class bs extends fs{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=cs(this.array[t*this.itemSize]);return this.normalized&&(e=ei(e,this.array)),e}setX(t,e){return this.normalized&&(e=ni(e,this.array)),this.array[t*this.itemSize]=ls(e),this}getY(t){let e=cs(this.array[t*this.itemSize+1]);return this.normalized&&(e=ei(e,this.array)),e}setY(t,e){return this.normalized&&(e=ni(e,this.array)),this.array[t*this.itemSize+1]=ls(e),this}getZ(t){let e=cs(this.array[t*this.itemSize+2]);return this.normalized&&(e=ei(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ni(e,this.array)),this.array[t*this.itemSize+2]=ls(e),this}getW(t){let e=cs(this.array[t*this.itemSize+3]);return this.normalized&&(e=ei(e,this.array)),e}setW(t,e){return this.normalized&&(e=ni(e,this.array)),this.array[t*this.itemSize+3]=ls(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=ni(e,this.array),n=ni(n,this.array)),this.array[t+0]=ls(e),this.array[t+1]=ls(n),this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=ni(e,this.array),n=ni(n,this.array),i=ni(i,this.array)),this.array[t+0]=ls(e),this.array[t+1]=ls(n),this.array[t+2]=ls(i),this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=ni(e,this.array),n=ni(n,this.array),i=ni(i,this.array),r=ni(r,this.array)),this.array[t+0]=ls(e),this.array[t+1]=ls(n),this.array[t+2]=ls(i),this.array[t+3]=ls(r),this}}class ws extends fs{constructor(t,e,n){super(new Float32Array(t),e,n)}}class Ss extends fs{constructor(t,e,n){super(new Float64Array(t),e,n)}}let Ms=0;const Es=new fr,Ts=new jr,As=new zi,Cs=new Fi,Ps=new Fi,Rs=new zi;class Ls extends Wn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ms++}),this.uuid=Yn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(oi(t)?_s:ys)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new si).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Es.makeRotationFromQuaternion(t),this.applyMatrix4(Es),this}rotateX(t){return Es.makeRotationX(t),this.applyMatrix4(Es),this}rotateY(t){return Es.makeRotationY(t),this.applyMatrix4(Es),this}rotateZ(t){return Es.makeRotationZ(t),this.applyMatrix4(Es),this}translate(t,e,n){return Es.makeTranslation(t,e,n),this.applyMatrix4(Es),this}scale(t,e,n){return Es.makeScale(t,e,n),this.applyMatrix4(Es),this}lookAt(t){return Ts.lookAt(t),Ts.updateMatrix(),this.applyMatrix4(Ts.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(As).negate(),this.translate(As.x,As.y,As.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new ws(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Fi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new zi(-1/0,-1/0,-1/0),new zi(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const t=e[n];Cs.setFromBufferAttribute(t),this.morphTargetsRelative?(Rs.addVectors(this.boundingBox.min,Cs.min),this.boundingBox.expandByPoint(Rs),Rs.addVectors(this.boundingBox.max,Cs.max),this.boundingBox.expandByPoint(Rs)):(this.boundingBox.expandByPoint(Cs.min),this.boundingBox.expandByPoint(Cs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new zi,1/0);if(t){const n=this.boundingSphere.center;if(Cs.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const n=e[t];Ps.setFromBufferAttribute(n),this.morphTargetsRelative?(Rs.addVectors(Cs.min,Ps.min),Cs.expandByPoint(Rs),Rs.addVectors(Cs.max,Ps.max),Cs.expandByPoint(Rs)):(Cs.expandByPoint(Ps.min),Cs.expandByPoint(Ps.max))}Cs.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)Rs.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(Rs));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],a=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)Rs.fromBufferAttribute(s,e),a&&(As.fromBufferAttribute(t,e),Rs.add(As)),i=Math.max(i,n.distanceToSquared(Rs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,s=e.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new fs(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let E=0;E<a;E++)l[E]=new zi,c[E]=new zi;const u=new zi,h=new zi,d=new zi,f=new ri,p=new ri,m=new ri,g=new zi,v=new zi;function y(t,e,n){u.fromArray(i,3*t),h.fromArray(i,3*e),d.fromArray(i,3*n),f.fromArray(s,2*t),p.fromArray(s,2*e),m.fromArray(s,2*n),h.sub(u),d.sub(u),p.sub(f),m.sub(f);const r=1/(p.x*m.y-m.x*p.y);isFinite(r)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(r),v.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(r),l[t].add(g),l[e].add(g),l[n].add(g),c[t].add(v),c[e].add(v),c[n].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let E=0,T=x.length;E<T;++E){const t=x[E],e=t.start;for(let i=e,r=e+t.count;i<r;i+=3)y(n[i+0],n[i+1],n[i+2])}const _=new zi,b=new zi,w=new zi,S=new zi;function M(t){w.fromArray(r,3*t),S.copy(w);const e=l[t];_.copy(e),_.sub(w.multiplyScalar(w.dot(e))).normalize(),b.crossVectors(S,e);const n=b.dot(c[t])<0?-1:1;o[4*t]=_.x,o[4*t+1]=_.y,o[4*t+2]=_.z,o[4*t+3]=n}for(let E=0,T=x.length;E<T;++E){const t=x[E],e=t.start;for(let i=e,r=e+t.count;i<r;i+=3)M(n[i+0]),M(n[i+1]),M(n[i+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new fs(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new zi,r=new zi,s=new zi,a=new zi,o=new zi,l=new zi,c=new zi,u=new zi;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),f=t.getX(h+1),p=t.getX(h+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,f),s.fromBufferAttribute(e,p),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,d),o.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),a.add(c),o.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,h=e.count;t<h;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Rs.fromBufferAttribute(t,e),Rs.normalize(),t.setXYZ(e,Rs.x,Rs.y,Rs.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,s=new n.constructor(e.length*i);let a=0,o=0;for(let l=0,c=e.length;l<c;l++){a=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*i;for(let t=0;t<i;t++)s[o++]=n[a++]}return new fs(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ls,n=this.index.array,i=this.attributes;for(const a in i){const r=t(i[a],n);e.setAttribute(a,r)}const r=this.morphAttributes;for(const a in r){const i=[],s=r[a];for(let e=0,r=s.length;e<r;e++){const r=t(s[e],n);i.push(r)}e.morphAttributes[a]=i}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,o=s.length;a<o;a++){const t=s[a];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const o in n){const e=n[o];t.data.attributes[o]=e.toJSON(t.data)}const i={};let r=!1;for(const o in this.morphAttributes){const e=this.morphAttributes[o],n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];n.push(r.toJSON(t.data))}n.length>0&&(i[o]=n,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const l in i){const t=i[l];this.setAttribute(l,t.clone(e))}const r=t.morphAttributes;for(const l in r){const t=[],n=r[l];for(let i=0,r=n.length;i<r;i++)t.push(n[i].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let l=0,c=s.length;l<c;l++){const t=s[l];this.addGroup(t.start,t.count,t.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ns=new fr,ks=new dr,Os=new rr,Ds=new zi,Is=new zi,zs=new zi,js=new zi,Us=new zi,Fs=new zi,Bs=new ri,Hs=new ri,Vs=new ri,Ws=new zi,Gs=new zi,Xs=new zi,qs=new zi,Zs=new zi;class Ys extends jr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ls,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ss;super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;e.fromBufferAttribute(i,t);const a=this.morphTargetInfluences;if(r&&a){Fs.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],o=r[n];0!==i&&(Us.fromBufferAttribute(o,t),s?Fs.addScaledVector(Us,i):Fs.addScaledVector(Us.sub(e),i))}e.add(Fs)}return e}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),Os.copy(n.boundingSphere),Os.applyMatrix4(r),ks.copy(t.ray).recast(t.near),!1===Os.containsPoint(ks.origin)){if(null===ks.intersectSphere(Os,Ds))return;if(ks.origin.distanceToSquared(Ds)>(t.far-t.near)**2)return}Ns.copy(r).invert(),ks.copy(t.ray).applyMatrix4(Ns),null!==n.boundingBox&&!1===ks.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,ks)}}_computeIntersections(t,e,n){let i;const r=this.geometry,s=this.material,a=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,h=r.groups,d=r.drawRange;if(null!==a)if(Array.isArray(s))for(let f=0,p=h.length;f<p;f++){const r=h[f],o=s[r.materialIndex];for(let s=Math.max(r.start,d.start),h=Math.min(a.count,Math.min(r.start+r.count,d.start+d.count));s<h;s+=3){i=Ks(this,o,t,n,l,c,u,a.getX(s),a.getX(s+1),a.getX(s+2)),i&&(i.faceIndex=Math.floor(s/3),i.face.materialIndex=r.materialIndex,e.push(i))}}else{for(let r=Math.max(0,d.start),o=Math.min(a.count,d.start+d.count);r<o;r+=3){i=Ks(this,s,t,n,l,c,u,a.getX(r),a.getX(r+1),a.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}else if(void 0!==o)if(Array.isArray(s))for(let f=0,p=h.length;f<p;f++){const r=h[f],a=s[r.materialIndex];for(let s=Math.max(r.start,d.start),h=Math.min(o.count,Math.min(r.start+r.count,d.start+d.count));s<h;s+=3){i=Ks(this,a,t,n,l,c,u,s,s+1,s+2),i&&(i.faceIndex=Math.floor(s/3),i.face.materialIndex=r.materialIndex,e.push(i))}}else{for(let r=Math.max(0,d.start),a=Math.min(o.count,d.start+d.count);r<a;r+=3){i=Ks(this,s,t,n,l,c,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}}}function Ks(t,e,n,i,r,s,a,o,l,c){t.getVertexPosition(o,Is),t.getVertexPosition(l,zs),t.getVertexPosition(c,js);const u=function(t,e,n,i,r,s,a,o){let l;if(l=e.side===g?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,e.side===m,o),null===l)return null;Zs.copy(o),Zs.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Zs);return c<n.near||c>n.far?null:{distance:c,point:Zs.clone(),object:t}}(t,e,n,i,Is,zs,js,qs);if(u){r&&(Bs.fromBufferAttribute(r,o),Hs.fromBufferAttribute(r,l),Vs.fromBufferAttribute(r,c),u.uv=Kr.getInterpolation(qs,Is,zs,js,Bs,Hs,Vs,new ri)),s&&(Bs.fromBufferAttribute(s,o),Hs.fromBufferAttribute(s,l),Vs.fromBufferAttribute(s,c),u.uv1=Kr.getInterpolation(qs,Is,zs,js,Bs,Hs,Vs,new ri),u.uv2=u.uv1),a&&(Ws.fromBufferAttribute(a,o),Gs.fromBufferAttribute(a,l),Xs.fromBufferAttribute(a,c),u.normal=Kr.getInterpolation(qs,Is,zs,js,Ws,Gs,Xs,new zi),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const t={a:o,b:l,c:c,normal:new zi,materialIndex:0};Kr.getNormal(Is,zs,js,t.normal),u.face=t}return u}class Js extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const a=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],c=[],u=[];let h=0,d=0;function f(t,e,n,i,r,s,f,p,m,g,v){const y=s/m,x=f/g,_=s/2,b=f/2,w=p/2,S=m+1,M=g+1;let E=0,T=0;const A=new zi;for(let a=0;a<M;a++){const s=a*x-b;for(let o=0;o<S;o++){const h=o*y-_;A[t]=h*i,A[e]=s*r,A[n]=w,l.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=p>0?1:-1,c.push(A.x,A.y,A.z),u.push(o/m),u.push(1-a/g),E+=1}}for(let a=0;a<g;a++)for(let t=0;t<m;t++){const e=h+t+S*a,n=h+t+S*(a+1),i=h+(t+1)+S*(a+1),r=h+(t+1)+S*a;o.push(e,n,r),o.push(n,i,r),T+=6}a.addGroup(d,T,v),d+=T,h+=E}f("z","y","x",-1,-1,n,e,t,s,r,0),f("z","y","x",1,-1,n,e,-t,s,r,1),f("x","z","y",1,1,t,n,e,i,s,2),f("x","z","y",1,-1,t,n,-e,i,s,3),f("x","y","z",1,-1,t,e,n,i,r,4),f("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new ws(l,3)),this.setAttribute("normal",new ws(c,3)),this.setAttribute("uv",new ws(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Js(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Qs(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function $s(t){const e={};for(let n=0;n<t.length;n++){const i=Qs(t[n]);for(const t in i)e[t]=i[t]}return e}function ta(t){return null===t.getRenderTarget()?t.outputColorSpace:yi.workingColorSpace}const ea={clone:Qs,merge:$s};class na extends rs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Qs(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class ia extends jr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new fr,this.projectionMatrix=new fr,this.projectionMatrixInverse=new fr,this.coordinateSystem=Hn}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ra extends ia{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Zn*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*qn*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Zn*Math.atan(Math.tan(.5*qn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*qn*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/t,e-=s.offsetY*n/a,i*=s.width/t,n*=s.height/a}const a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const sa=-90;class aa extends jr{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ra(sa,1,t,e);i.layers=this.layers,this.add(i);const r=new ra(sa,1,t,e);r.layers=this.layers,this.add(r);const s=new ra(sa,1,t,e);s.layers=this.layers,this.add(s);const a=new ra(sa,1,t,e);a.layers=this.layers,this.add(a);const o=new ra(sa,1,t,e);o.layers=this.layers,this.add(o);const l=new ra(sa,1,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,i,r,s,a,o]=e;for(const l of e)this.remove(l);if(t===Hn)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(t!==Vn)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of e)this.add(l),l.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,s,a,o,l,c]=this.children,u=t.getRenderTarget(),h=t.getActiveCubeFace(),d=t.getActiveMipmapLevel(),f=t.xr.enabled;t.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,i),t.render(e,r),t.setRenderTarget(n,1,i),t.render(e,s),t.setRenderTarget(n,2,i),t.render(e,a),t.setRenderTarget(n,3,i),t.render(e,o),t.setRenderTarget(n,4,i),t.render(e,l),n.texture.generateMipmaps=p,t.setRenderTarget(n,5,i),t.render(e,c),t.setRenderTarget(u,h,d),t.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class oa extends Ai{constructor(t,e,n,i,r,s,a,o,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:dt,n,i,r,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class la extends Ri{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];void 0!==e.encoding&&(fi("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),e.colorSpace=e.encoding===Ge?Je:Ke),this.texture=new oa(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Et}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new Js(5,5,5),a=new na({name:"CubemapFromEquirect",uniforms:Qs(n),vertexShader:i,fragmentShader:r,side:g,blending:x});a.uniforms.tEquirect.value=e;const o=new Ys(s,a),l=e.minFilter;e.minFilter===Ct&&(e.minFilter=Et);return new aa(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,i);t.setRenderTarget(r)}}const ca=new zi,ua=new zi,ha=new si;class da{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi(1,0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=ca.subVectors(n,e).cross(ua.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(ca),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||ha.getNormalMatrix(t),i=this.coplanarPoint(ca).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const fa=new rr,pa=new zi;class ma{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new da,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new da,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new da,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new da,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new da,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new da;this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn;const n=this.planes,i=t.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],m=i[11],g=i[12],v=i[13],y=i[14],x=i[15];if(n[0].setComponents(o-r,h-l,m-d,x-g).normalize(),n[1].setComponents(o+r,h+l,m+d,x+g).normalize(),n[2].setComponents(o+s,h+c,m+f,x+v).normalize(),n[3].setComponents(o-s,h-c,m-f,x-v).normalize(),n[4].setComponents(o-a,h-u,m-p,x-y).normalize(),e===Hn)n[5].setComponents(o+a,h+u,m+p,x+y).normalize();else{if(e!==Vn)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(a,u,p,y).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),fa.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),fa.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(fa)}intersectsSprite(t){return fa.center.set(0,0,0),fa.radius=.7071067811865476,fa.applyMatrix4(t.matrixWorld),this.intersectsSphere(fa)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(pa.x=i.normal.x>0?t.max.x:t.min.x,pa.y=i.normal.y>0?t.max.y:t.min.y,pa.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(pa)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function ga(){let t=null,e=!1,n=null,i=null;function r(e,s){n(e,s),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function va(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=i.get(e);if(void 0===s)i.set(e,function(e,i){const r=e.array,s=e.usage,a=r.byteLength,o=t.createBuffer();let l;if(t.bindBuffer(i,o),t.bufferData(i,r,s),e.onUploadCallback(),r instanceof Float32Array)l=t.FLOAT;else if(r instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");l=t.HALF_FLOAT}else l=t.UNSIGNED_SHORT;else if(r instanceof Int16Array)l=t.SHORT;else if(r instanceof Uint32Array)l=t.UNSIGNED_INT;else if(r instanceof Int32Array)l=t.INT;else if(r instanceof Int8Array)l=t.BYTE;else if(r instanceof Uint8Array)l=t.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);l=t.UNSIGNED_BYTE}return{buffer:o,type:l,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version,size:a}}(e,r));else if(s.version<e.version){if(s.size!==e.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(e,i,r){const s=i.array,a=i._updateRange,o=i.updateRanges;if(t.bindBuffer(r,e),-1===a.count&&0===o.length&&t.bufferSubData(r,0,s),0!==o.length){for(let e=0,i=o.length;e<i;e++){const i=o[e];n?t.bufferSubData(r,i.start*s.BYTES_PER_ELEMENT,s,i.start,i.count):t.bufferSubData(r,i.start*s.BYTES_PER_ELEMENT,s.subarray(i.start,i.start+i.count))}i.clearUpdateRanges()}-1!==a.count&&(n?t.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):t.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),i.onUploadCallback()}(s.buffer,e,r),s.version=e.version}}}}class ya extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,s=e/2,a=Math.floor(n),o=Math.floor(i),l=a+1,c=o+1,u=t/a,h=e/o,d=[],f=[],p=[],m=[];for(let g=0;g<c;g++){const t=g*h-s;for(let e=0;e<l;e++){const n=e*u-r;f.push(n,-t,0),p.push(0,0,1),m.push(e/a),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let t=0;t<a;t++){const e=t+l*g,n=t+l*(g+1),i=t+1+l*(g+1),r=t+1+l*g;d.push(e,n,r),d.push(n,i,r)}this.setIndex(d),this.setAttribute("position",new ws(f,3)),this.setAttribute("normal",new ws(p,3)),this.setAttribute("uv",new ws(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ya(t.width,t.height,t.widthSegments,t.heightSegments)}}const xa={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},_a={common:{diffuse:{value:new es(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new si},alphaMap:{value:null},alphaMapTransform:{value:new si},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new si}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new si}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new si}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new si},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new si},normalScale:{value:new ri(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new si},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new si}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new si}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new si}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new es(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new es(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new si},alphaTest:{value:0},uvTransform:{value:new si}},sprite:{diffuse:{value:new es(16777215)},opacity:{value:1},center:{value:new ri(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new si},alphaMap:{value:null},alphaMapTransform:{value:new si},alphaTest:{value:0}}},ba={basic:{uniforms:$s([_a.common,_a.specularmap,_a.envmap,_a.aomap,_a.lightmap,_a.fog]),vertexShader:xa.meshbasic_vert,fragmentShader:xa.meshbasic_frag},lambert:{uniforms:$s([_a.common,_a.specularmap,_a.envmap,_a.aomap,_a.lightmap,_a.emissivemap,_a.bumpmap,_a.normalmap,_a.displacementmap,_a.fog,_a.lights,{emissive:{value:new es(0)}}]),vertexShader:xa.meshlambert_vert,fragmentShader:xa.meshlambert_frag},phong:{uniforms:$s([_a.common,_a.specularmap,_a.envmap,_a.aomap,_a.lightmap,_a.emissivemap,_a.bumpmap,_a.normalmap,_a.displacementmap,_a.fog,_a.lights,{emissive:{value:new es(0)},specular:{value:new es(1118481)},shininess:{value:30}}]),vertexShader:xa.meshphong_vert,fragmentShader:xa.meshphong_frag},standard:{uniforms:$s([_a.common,_a.envmap,_a.aomap,_a.lightmap,_a.emissivemap,_a.bumpmap,_a.normalmap,_a.displacementmap,_a.roughnessmap,_a.metalnessmap,_a.fog,_a.lights,{emissive:{value:new es(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xa.meshphysical_vert,fragmentShader:xa.meshphysical_frag},toon:{uniforms:$s([_a.common,_a.aomap,_a.lightmap,_a.emissivemap,_a.bumpmap,_a.normalmap,_a.displacementmap,_a.gradientmap,_a.fog,_a.lights,{emissive:{value:new es(0)}}]),vertexShader:xa.meshtoon_vert,fragmentShader:xa.meshtoon_frag},matcap:{uniforms:$s([_a.common,_a.bumpmap,_a.normalmap,_a.displacementmap,_a.fog,{matcap:{value:null}}]),vertexShader:xa.meshmatcap_vert,fragmentShader:xa.meshmatcap_frag},points:{uniforms:$s([_a.points,_a.fog]),vertexShader:xa.points_vert,fragmentShader:xa.points_frag},dashed:{uniforms:$s([_a.common,_a.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xa.linedashed_vert,fragmentShader:xa.linedashed_frag},depth:{uniforms:$s([_a.common,_a.displacementmap]),vertexShader:xa.depth_vert,fragmentShader:xa.depth_frag},normal:{uniforms:$s([_a.common,_a.bumpmap,_a.normalmap,_a.displacementmap,{opacity:{value:1}}]),vertexShader:xa.meshnormal_vert,fragmentShader:xa.meshnormal_frag},sprite:{uniforms:$s([_a.sprite,_a.fog]),vertexShader:xa.sprite_vert,fragmentShader:xa.sprite_frag},background:{uniforms:{uvTransform:{value:new si},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xa.background_vert,fragmentShader:xa.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xa.backgroundCube_vert,fragmentShader:xa.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xa.cube_vert,fragmentShader:xa.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xa.equirect_vert,fragmentShader:xa.equirect_frag},distanceRGBA:{uniforms:$s([_a.common,_a.displacementmap,{referencePosition:{value:new zi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xa.distanceRGBA_vert,fragmentShader:xa.distanceRGBA_frag},shadow:{uniforms:$s([_a.lights,_a.fog,{color:{value:new es(0)},opacity:{value:1}}]),vertexShader:xa.shadow_vert,fragmentShader:xa.shadow_frag}};ba.physical={uniforms:$s([ba.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new si},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new si},clearcoatNormalScale:{value:new ri(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new si},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new si},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new si},sheen:{value:0},sheenColor:{value:new es(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new si},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new si},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new si},transmissionSamplerSize:{value:new ri},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new si},attenuationDistance:{value:0},attenuationColor:{value:new es(0)},specularColor:{value:new es(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new si},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new si},anisotropyVector:{value:new ri},anisotropyMap:{value:null},anisotropyMapTransform:{value:new si}}]),vertexShader:xa.meshphysical_vert,fragmentShader:xa.meshphysical_frag};const wa={r:0,b:0,g:0};function Sa(t,e,n,i,r,s,a){const o=new es(0);let l,c,u=!0===s?0:1,h=null,d=0,f=null;function p(e,n){e.getRGB(wa,ta(t)),i.buffers.color.setClear(wa.r,wa.g,wa.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(t),u=e,p(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,p(o,u)},render:function(s,v){let y=!1,x=!0===v.isScene?v.background:null;if(x&&x.isTexture){x=(v.backgroundBlurriness>0?n:e).get(x)}null===x?p(o,u):x&&x.isColor&&(p(x,1),y=!0);const _=t.xr.getEnvironmentBlendMode();"additive"===_?i.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===_&&i.buffers.color.setClear(0,0,0,0,a),(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),x&&(x.isCubeTexture||x.mapping===gt)?(void 0===c&&(c=new Ys(new Js(1,1,1),new na({name:"BackgroundCubeMaterial",uniforms:Qs(ba.backgroundCube.uniforms),vertexShader:ba.backgroundCube.vertexShader,fragmentShader:ba.backgroundCube.fragmentShader,side:g,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=x,c.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=yi.getTransfer(x.colorSpace)!==nn,h===x&&d===x.version&&f===t.toneMapping||(c.material.needsUpdate=!0,h=x,d=x.version,f=t.toneMapping),c.layers.enableAll(),s.unshift(c,c.geometry,c.material,0,0,null)):x&&x.isTexture&&(void 0===l&&(l=new Ys(new ya(2,2),new na({name:"BackgroundMaterial",uniforms:Qs(ba.background.uniforms),vertexShader:ba.background.vertexShader,fragmentShader:ba.background.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=x,l.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,l.material.toneMapped=yi.getTransfer(x.colorSpace)!==nn,!0===x.matrixAutoUpdate&&x.updateMatrix(),l.material.uniforms.uvTransform.value.copy(x.matrix),h===x&&d===x.version&&f===t.toneMapping||(l.material.needsUpdate=!0,h=x,d=x.version,f=t.toneMapping),l.layers.enableAll(),s.unshift(l,l.geometry,l.material,0,0,null))}}}function Ma(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||null!==s,o={},l=f(null);let c=l,u=!1;function h(e){return i.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function d(e){return i.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function f(t){const e=[],n=[],i=[];for(let s=0;s<r;s++)e[s]=0,n[s]=0,i[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function p(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function m(t){g(t,0)}function g(n,r){const s=c.newAttributes,a=c.enabledAttributes,o=c.attributeDivisors;if(s[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),o[n]!==r){(i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r}}function v(){const e=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function y(e,n,i,r,s,a,o){!0===o?t.vertexAttribIPointer(e,n,i,s,a):t.vertexAttribPointer(e,n,i,r,s,a)}function x(){_(),u=!0,c!==l&&(c=l,h(c.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,x,_){let b=!1;if(a){const e=function(e,n,r){const a=!0===r.wireframe;let l=o[e.id];void 0===l&&(l={},o[e.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];void 0===u&&(u=f(i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),c[a]=u);return u}(x,d,l);c!==e&&(c=e,h(c.object)),b=function(t,e,n,i){const r=c.attributes,s=e.attributes;let a=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){const e=r[l];let n=s[l];if(void 0===n&&("instanceMatrix"===l&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;a++}}return c.attributesNum!==a||c.index!==i}(r,x,d,_),b&&function(t,e,n,i){const r={},s=e.attributes;let a=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){let e=s[l];void 0===e&&("instanceMatrix"===l&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),r[l]=n,a++}}c.attributes=r,c.attributesNum=a,c.index=i}(r,x,d,_)}else{const t=!0===l.wireframe;c.geometry===x.id&&c.program===d.id&&c.wireframe===t||(c.geometry=x.id,c.program=d.id,c.wireframe=t,b=!0)}null!==_&&n.update(_,t.ELEMENT_ARRAY_BUFFER),(b||u)&&(u=!1,function(r,s,a,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const l=o.attributes,c=a.getAttributes(),u=s.defaultAttributeValues;for(const e in c){const s=c[e];if(s.location>=0){let a=l[e];if(void 0===a&&("instanceMatrix"===e&&r.instanceMatrix&&(a=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(a=r.instanceColor)),void 0!==a){const e=a.normalized,l=a.itemSize,c=n.get(a);if(void 0===c)continue;const u=c.buffer,h=c.type,d=c.bytesPerElement,f=!0===i.isWebGL2&&(h===t.INT||h===t.UNSIGNED_INT||a.gpuType===Ot);if(a.isInterleavedBufferAttribute){const n=a.data,i=n.stride,c=a.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<s.locationSize;t++)g(s.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<s.locationSize;t++)m(s.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<s.locationSize;t++)y(s.location+t,l/s.locationSize,h,e,i*d,(c+l/s.locationSize*t)*d,f)}else{if(a.isInstancedBufferAttribute){for(let t=0;t<s.locationSize;t++)g(s.location+t,a.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let t=0;t<s.locationSize;t++)m(s.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<s.locationSize;t++)y(s.location+t,l/s.locationSize,h,e,l*d,l/s.locationSize*t*d,f)}}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(s.location,n);break;case 3:t.vertexAttrib3fv(s.location,n);break;case 4:t.vertexAttrib4fv(s.location,n);break;default:t.vertexAttrib1fv(s.location,n)}}}}v()}(r,l,d,x),null!==_&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(_).buffer))},reset:x,resetDefaultState:_,dispose:function(){x();for(const t in o){const e=o[t];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const n in e){const t=e[n];for(const e in t)d(t[e].object),delete t[e];delete e[n]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const n=o[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)d(i[t].object),delete i[t];delete n[t.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function Ea(t,e,n,i){const r=i.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,i){t.drawArrays(s,e,i),n.update(i,s,1)},this.renderInstances=function(i,a,o){if(0===o)return;let l,c;if(r)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,i,a,o),n.update(a,s,o)},this.renderMultiDraw=function(t,i,r){if(0===r)return;const a=e.get("WEBGL_multi_draw");if(null===a)for(let e=0;e<r;e++)this.render(t[e],i[e]);else{a.multiDrawArraysWEBGL(s,t,0,i,0,r);let e=0;for(let t=0;t<r;t++)e+=i[t];n.update(e,s,1)}}}function Ta(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=s||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_TEXTURE_SIZE),f=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),m=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),v=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,x=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:s?t.getParameter(t.MAX_SAMPLES):0}}function Aa(t){const e=this;let n=null,i=0,r=!1,s=!1;const a=new da,o=new si,l={value:null,needsUpdate:!1};function c(t,n,i,r){const s=null!==t?t.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const e=i+4*s,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let n=0,l=i;n!==s;++n,l+=4)a.copy(t[n]).applyMatrix4(r,o),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==i||r;return r=e,i=t.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(t,e){n=c(t,e,0)},this.setState=function(a,o,u){const h=a.clippingPlanes,d=a.clipIntersection,f=a.clipShadows,p=t.get(a);if(!r||null===h||0===h.length||s&&!f)s?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);e.numPlanes=i,e.numIntersection=0}();else{const t=s?0:i,e=4*t;let r=p.clippingState||null;l.value=r,r=c(h,o,e,u);for(let i=0;i!==e;++i)r[i]=n[i];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Ca(t){let e=new WeakMap;function n(t,e){return e===pt?t.mapping=dt:e===mt&&(t.mapping=ft),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping;if(s===pt||s===mt){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const a=new la(s.height/2);return a.fromEquirectangularTexture(t,r),e.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}class Pa extends ia{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,s=n+t,a=i+e,o=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,a-=e*this.view.offsetY,o=a-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const Ra=[.125,.215,.35,.446,.526,.582],La=20,Na=new Pa,ka=new es;let Oa=null,Da=0,Ia=0;const za=(1+Math.sqrt(5))/2,ja=1/za,Ua=[new zi(1,1,1),new zi(-1,1,1),new zi(1,1,-1),new zi(-1,1,-1),new zi(0,za,ja),new zi(0,za,-ja),new zi(ja,0,za),new zi(-ja,0,za),new zi(za,ja,0),new zi(-za,ja,0)];class Fa{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Oa=this._renderer.getRenderTarget(),Da=this._renderer.getActiveCubeFace(),Ia=this._renderer.getActiveMipmapLevel(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}fromCubemap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Wa(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Va(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Oa,Da,Ia),t.scissorTest=!1,Ha(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===dt||t.mapping===ft?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Oa=this._renderer.getRenderTarget(),Da=this._renderer.getActiveCubeFace(),Ia=this._renderer.getActiveMipmapLevel();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Et,minFilter:Et,generateMipmaps:!1,type:zt,format:Ht,colorSpace:Qe,depthBuffer:!1},i=Ba(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Ba(t,e,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],i=[];let r=t;const s=t-4+1+Ra.length;for(let a=0;a<s;a++){const s=Math.pow(2,r);n.push(s);let o=1/s;a>t-4?o=Ra[a-t+4-1]:0===a&&(o=0),i.push(o);const l=1/(s-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*d),y=new Float32Array(m*f*d),x=new Float32Array(g*f*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];v.set(i,p*f*t),y.set(h,m*f*t);const r=[t,t,t,t,t,t];x.set(r,g*f*t)}const _=new Ls;_.setAttribute("position",new fs(v,p)),_.setAttribute("uv",new fs(y,m)),_.setAttribute("faceIndex",new fs(x,g)),e.push(_),r>4&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(t,e,n){const i=new Float32Array(La),r=new zi(0,1,0),s=new na({name:"SphericalGaussianBlur",defines:{n:La,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(t,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:x,depthTest:!1,depthWrite:!1});return s}(i,t,e)}return i}_compileMaterial(t){const e=new Ys(this._lodPlanes[0],t);this._renderer.compile(e,Na)}_sceneToCubeUV(t,e,n,i){const r=new ra(90,1,e,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(ka),o.toneMapping=nt,o.autoClear=!1;const u=new ss({name:"PMREM.Background",side:g,depthWrite:!1,depthTest:!1}),h=new Ys(new Js,u);let d=!1;const f=t.background;f?f.isColor&&(u.color.copy(f),t.background=null,d=!0):(u.color.copy(ka),d=!0);for(let p=0;p<6;p++){const e=p%3;0===e?(r.up.set(0,s[p],0),r.lookAt(a[p],0,0)):1===e?(r.up.set(0,0,s[p]),r.lookAt(0,a[p],0)):(r.up.set(0,s[p],0),r.lookAt(0,0,a[p]));const n=this._cubeSize;Ha(i,e*n,p>2?n:0,n,n),o.setRenderTarget(i),d&&o.render(h,r),o.render(t,r)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=c,o.autoClear=l,t.background=f}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===dt||t.mapping===ft;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Wa()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Va());const r=i?this._cubemapMaterial:this._equirectMaterial,s=new Ys(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const a=this._cubeSize;Ha(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(s,Na)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const e=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=Ua[(i-1)%Ua.length];this._blur(t,i-1,i,e,n)}e.autoClear=n}_blur(t,e,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Ys(this._lodPlanes[i],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,f=r/d,p=isFinite(r)?1+Math.floor(3*f):La;p>La&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(La));const m=[];let g=0;for(let x=0;x<La;++x){const t=x/f,e=Math.exp(-t*t/2);m.push(e),0===x?g+=e:x<p&&(g+=2*e)}for(let x=0;x<m.length;x++)m[x]=m[x]/g;u.envMap.value=t.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[i];Ha(e,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(e),o.render(c,Na)}}function Ba(t,e,n){const i=new Ri(t,e,n);return i.texture.mapping=gt,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Ha(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Va(){return new na({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:x,depthTest:!1,depthWrite:!1})}function Wa(){return new na({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:x,depthTest:!1,depthWrite:!1})}function Ga(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,a=s===pt||s===mt,o=s===dt||s===ft;if(a||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new Fa(t)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||o&&s&&function(t){let e=0;const n=6;for(let i=0;i<n;i++)void 0!==t[i]&&e++;return e===n}(s)){null===n&&(n=new Fa(t));const s=a?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,s),r.addEventListener("dispose",i),s.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Xa(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function qa(t,e,n,i){const r={},s=new WeakMap;function a(t){const o=t.target;null!==o.index&&e.remove(o.index);for(const n in o.attributes)e.remove(o.attributes[n]);for(const n in o.morphAttributes){const t=o.morphAttributes[n];for(let n=0,i=t.length;n<i;n++)e.remove(t[n])}o.removeEventListener("dispose",a),delete r[o.id];const l=s.get(o);l&&(e.remove(l),s.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(t){const n=[],i=t.index,r=t.attributes.position;let a=0;if(null!==i){const t=i.array;a=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],s=t[e+2];n.push(i,r,r,s,s,i)}}else{if(void 0===r)return;{const t=r.array;a=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}}const o=new(oi(n)?_s:ys)(n,1);o.version=a;const l=s.get(t);l&&e.remove(l),s.set(t,o)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",a),r[e.id]=!0,n.memory.geometries++),e},update:function(n){const i=n.attributes;for(const s in i)e.update(i[s],t.ARRAY_BUFFER);const r=n.morphAttributes;for(const s in r){const n=r[s];for(let i=0,r=n.length;i<r;i++)e.update(n[i],t.ARRAY_BUFFER)}},getWireframeAttribute:function(t){const e=s.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return s.get(t)}}}function Za(t,e,n,i){const r=i.isWebGL2;let s,a,o;this.setMode=function(t){s=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(s,i,a,e*o),n.update(i,s,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,h;if(r)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](s,l,a,i*o,c),n.update(l,s,c)},this.renderMultiDraw=function(t,i,r){if(0===r)return;const l=e.get("WEBGL_multi_draw");if(null===l)for(let e=0;e<r;e++)this.render(t[e]/o,i[e]);else{l.multiDrawElementsWEBGL(s,i,0,a,t,0,r);let e=0;for(let t=0;t<r;t++)e+=i[t];n.update(e,s,1)}}}function Ya(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,i,r){switch(e.calls++,i){case t.TRIANGLES:e.triangles+=r*(n/3);break;case t.LINES:e.lines+=r*(n/2);break;case t.LINE_STRIP:e.lines+=r*(n-1);break;case t.LINE_LOOP:e.lines+=r*n;break;case t.POINTS:e.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function Ka(t,e){return t[0]-e[0]}function Ja(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Qa(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,a=new Ci,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,u){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=void 0!==d?d.length:0;let p=s.get(c);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();const v=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,_=c.morphAttributes.position||[],b=c.morphAttributes.normal||[],w=c.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===y&&(S=2),!0===x&&(S=3);let M=c.attributes.position.count*S,E=1;M>e.maxTextureSize&&(E=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const T=new Float32Array(M*E*4*f),A=new Li(T,M,E,f);A.type=It,A.needsUpdate=!0;const C=4*S;for(let R=0;R<f;R++){const L=_[R],N=b[R],k=w[R],O=M*E*4*R;for(let D=0;D<L.count;D++){const I=D*C;!0===v&&(a.fromBufferAttribute(L,D),T[O+I+0]=a.x,T[O+I+1]=a.y,T[O+I+2]=a.z,T[O+I+3]=0),!0===y&&(a.fromBufferAttribute(N,D),T[O+I+4]=a.x,T[O+I+5]=a.y,T[O+I+6]=a.z,T[O+I+7]=0),!0===x&&(a.fromBufferAttribute(k,D),T[O+I+8]=a.x,T[O+I+9]=a.y,T[O+I+10]=a.z,T[O+I+11]=4===k.itemSize?a.w:1)}}function P(){A.dispose(),s.delete(c),c.removeEventListener("dispose",P)}p={count:f,texture:A,size:new ri(M,E)},s.set(c,p),c.addEventListener("dispose",P)}let m=0;for(let z=0;z<h.length;z++)m+=h[z];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(t,"morphTargetBaseInfluence",g),u.getUniforms().setValue(t,"morphTargetInfluences",h),u.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}else{const j=void 0===h?0:h.length;let U=i[c.id];if(void 0===U||U.length!==j){U=[];for(let W=0;W<j;W++)U[W]=[W,0];i[c.id]=U}for(let G=0;G<j;G++){const X=U[G];X[0]=G,X[1]=h[G]}U.sort(Ja);for(let q=0;q<8;q++)q<j&&U[q][1]?(o[q][0]=U[q][0],o[q][1]=U[q][1]):(o[q][0]=Number.MAX_SAFE_INTEGER,o[q][1]=0);o.sort(Ka);const F=c.morphAttributes.position,B=c.morphAttributes.normal;let H=0;for(let Z=0;Z<8;Z++){const Y=o[Z],K=Y[0],J=Y[1];K!==Number.MAX_SAFE_INTEGER&&J?(F&&c.getAttribute("morphTarget"+Z)!==F[K]&&c.setAttribute("morphTarget"+Z,F[K]),B&&c.getAttribute("morphNormal"+Z)!==B[K]&&c.setAttribute("morphNormal"+Z,B[K]),r[Z]=J,H+=J):(F&&!0===c.hasAttribute("morphTarget"+Z)&&c.deleteAttribute("morphTarget"+Z),B&&!0===c.hasAttribute("morphNormal"+Z)&&c.deleteAttribute("morphNormal"+Z),r[Z]=0)}const V=c.morphTargetsRelative?1:1-H;u.getUniforms().setValue(t,"morphTargetBaseInfluence",V),u.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function $a(t,e,n,i){let r=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(a){const o=i.render.frame,l=a.geometry,c=e.get(a,l);if(r.get(c)!==o&&(e.update(c),r.set(c,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",s)&&a.addEventListener("dispose",s),r.get(a)!==o&&(n.update(a.instanceMatrix,t.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,t.ARRAY_BUFFER),r.set(a,o))),a.isSkinnedMesh){const t=a.skeleton;r.get(t)!==o&&(t.update(),r.set(t,o))}return c},dispose:function(){r=new WeakMap}}}class to extends Ai{constructor(t,e,n,i,r,s,a,o,l,c){if((c=void 0!==c?c:Gt)!==Gt&&c!==Xt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Gt&&(n=Dt),void 0===n&&c===Xt&&(n=Ft),super(null,i,r,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:_t,this.minFilter=void 0!==o?o:_t,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}const eo=new Ai,no=new to(1,1);no.compareFunction=En;const io=new Li,ro=new ki,so=new oa,ao=[],oo=[],lo=new Float32Array(16),co=new Float32Array(9),uo=new Float32Array(4);function ho(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=ao[r];if(void 0===s&&(s=new Float32Array(r),ao[r]=s),0!==e){i.toArray(s,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(s,r)}return s}function fo(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function po(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function mo(t,e){let n=oo[e];void 0===n&&(n=new Int32Array(e),oo[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function go(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function vo(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(fo(n,e))return;t.uniform2fv(this.addr,e),po(n,e)}}function yo(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(fo(n,e))return;t.uniform3fv(this.addr,e),po(n,e)}}function xo(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(fo(n,e))return;t.uniform4fv(this.addr,e),po(n,e)}}function _o(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(fo(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),po(n,e)}else{if(fo(n,i))return;uo.set(i),t.uniformMatrix2fv(this.addr,!1,uo),po(n,i)}}function bo(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(fo(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),po(n,e)}else{if(fo(n,i))return;co.set(i),t.uniformMatrix3fv(this.addr,!1,co),po(n,i)}}function wo(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(fo(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),po(n,e)}else{if(fo(n,i))return;lo.set(i),t.uniformMatrix4fv(this.addr,!1,lo),po(n,i)}}function So(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Mo(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(fo(n,e))return;t.uniform2iv(this.addr,e),po(n,e)}}function Eo(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(fo(n,e))return;t.uniform3iv(this.addr,e),po(n,e)}}function To(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(fo(n,e))return;t.uniform4iv(this.addr,e),po(n,e)}}function Ao(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Co(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(fo(n,e))return;t.uniform2uiv(this.addr,e),po(n,e)}}function Po(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(fo(n,e))return;t.uniform3uiv(this.addr,e),po(n,e)}}function Ro(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(fo(n,e))return;t.uniform4uiv(this.addr,e),po(n,e)}}function Lo(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);const s=this.type===t.SAMPLER_2D_SHADOW?no:eo;n.setTexture2D(e||s,r)}function No(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||ro,r)}function ko(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||so,r)}function Oo(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||io,r)}function Do(t,e){t.uniform1fv(this.addr,e)}function Io(t,e){const n=ho(e,this.size,2);t.uniform2fv(this.addr,n)}function zo(t,e){const n=ho(e,this.size,3);t.uniform3fv(this.addr,n)}function jo(t,e){const n=ho(e,this.size,4);t.uniform4fv(this.addr,n)}function Uo(t,e){const n=ho(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Fo(t,e){const n=ho(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Bo(t,e){const n=ho(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Ho(t,e){t.uniform1iv(this.addr,e)}function Vo(t,e){t.uniform2iv(this.addr,e)}function Wo(t,e){t.uniform3iv(this.addr,e)}function Go(t,e){t.uniform4iv(this.addr,e)}function Xo(t,e){t.uniform1uiv(this.addr,e)}function qo(t,e){t.uniform2uiv(this.addr,e)}function Zo(t,e){t.uniform3uiv(this.addr,e)}function Yo(t,e){t.uniform4uiv(this.addr,e)}function Ko(t,e,n){const i=this.cache,r=e.length,s=mo(n,r);fo(i,s)||(t.uniform1iv(this.addr,s),po(i,s));for(let a=0;a!==r;++a)n.setTexture2D(e[a]||eo,s[a])}function Jo(t,e,n){const i=this.cache,r=e.length,s=mo(n,r);fo(i,s)||(t.uniform1iv(this.addr,s),po(i,s));for(let a=0;a!==r;++a)n.setTexture3D(e[a]||ro,s[a])}function Qo(t,e,n){const i=this.cache,r=e.length,s=mo(n,r);fo(i,s)||(t.uniform1iv(this.addr,s),po(i,s));for(let a=0;a!==r;++a)n.setTextureCube(e[a]||so,s[a])}function $o(t,e,n){const i=this.cache,r=e.length,s=mo(n,r);fo(i,s)||(t.uniform1iv(this.addr,s),po(i,s));for(let a=0;a!==r;++a)n.setTexture2DArray(e[a]||io,s[a])}class tl{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function(t){switch(t){case 5126:return go;case 35664:return vo;case 35665:return yo;case 35666:return xo;case 35674:return _o;case 35675:return bo;case 35676:return wo;case 5124:case 35670:return So;case 35667:case 35671:return Mo;case 35668:case 35672:return Eo;case 35669:case 35673:return To;case 5125:return Ao;case 36294:return Co;case 36295:return Po;case 36296:return Ro;case 35678:case 36198:case 36298:case 36306:case 35682:return Lo;case 35679:case 36299:case 36307:return No;case 35680:case 36300:case 36308:case 36293:return ko;case 36289:case 36303:case 36311:case 36292:return Oo}}(e.type)}}class el{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Do;case 35664:return Io;case 35665:return zo;case 35666:return jo;case 35674:return Uo;case 35675:return Fo;case 35676:return Bo;case 5124:case 35670:return Ho;case 35667:case 35671:return Vo;case 35668:case 35672:return Wo;case 35669:case 35673:return Go;case 5125:return Xo;case 36294:return qo;case 36295:return Zo;case 36296:return Yo;case 35678:case 36198:case 36298:case 36306:case 35682:return Ko;case 35679:case 36299:case 36307:return Jo;case 35680:case 36300:case 36308:case 36293:return Qo;case 36289:case 36303:case 36311:case 36292:return $o}}(e.type)}}class nl{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(t,e[s.id],n)}}}const il=/(\w+)(\])?(\[|\.)?/g;function rl(t,e){t.seq.push(e),t.map[e.id]=e}function sl(t,e,n){const i=t.name,r=i.length;for(il.lastIndex=0;;){const s=il.exec(i),a=il.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===r){rl(n,void 0===c?new tl(o,t,e):new el(o,t,e));break}{let t=n.map[o];void 0===t&&(t=new nl(o),rl(n,t)),n=t}}}class al{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);sl(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)}setOptional(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){const s=e[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,i)}}static seqWithValue(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n}}function ol(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let ll=0;function cl(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const n=t.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=r;a<s;a++){const t=a+1;i.push("".concat(t===e?">":" "," ").concat(t,": ").concat(n[a]))}return i.join("\n")}(t.getShaderSource(e),i)}return r}function ul(t,e){const n=function(t){const e=yi.getPrimaries(yi.workingColorSpace),n=yi.getPrimaries(t);let i;switch(e===n?i="":e===sn&&n===rn?i="LinearDisplayP3ToLinearSRGB":e===rn&&n===sn&&(i="LinearSRGBToLinearDisplayP3"),t){case Qe:case tn:return[i,"LinearTransferOETF"];case Je:case $e:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[i,"LinearTransferOETF"]}}(e);return"vec4 ".concat(t,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function hl(t,e){let n;switch(e){case it:n="Linear";break;case rt:n="Reinhard";break;case st:n="OptimizedCineon";break;case at:n="ACESFilmic";break;case lt:n="AgX";break;case ot:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function dl(t){return""!==t}function fl(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function pl(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ml=/^[ \t]*#include +<([\w\d./]+)>/gm;function gl(t){return t.replace(ml,yl)}const vl=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function yl(t,e){let n=xa[e];if(void 0===n){const t=vl.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=xa[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t)}return gl(n)}const xl=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _l(t){return t.replace(xl,bl)}function bl(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function wl(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Sl(t,e,n,i){const r=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===d?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===f?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===p&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case dt:case ft:e="ENVMAP_TYPE_CUBE";break;case gt:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===ft&&(e="ENVMAP_MODE_REFRACTION");return e}(n),h=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case $:e="ENVMAP_BLENDING_MULTIPLY";break;case tt:e="ENVMAP_BLENDING_MIX";break;case et:e="ENVMAP_BLENDING_ADD"}return e}(n),m=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),g=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(dl).join("\n")}(n),v=function(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(dl).join("\n")}(n),y=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(s),x=r.createProgram();let _,b,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(dl).join("\n"),_.length>0&&(_+="\n"),b=[g,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(dl).join("\n"),b.length>0&&(b+="\n")):(_=[wl(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(dl).join("\n"),b=[g,wl(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==nt?"#define TONE_MAPPING":"",n.toneMapping!==nt?xa.tonemapping_pars_fragment:"",n.toneMapping!==nt?hl("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",xa.colorspace_pars_fragment,ul("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(dl).join("\n")),a=gl(a),a=fl(a,n),a=pl(a,n),o=gl(o),o=fl(o,n),o=pl(o,n),a=_l(a),o=_l(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",_=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,b=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===Fn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Fn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const S=w+_+a,M=w+b+o,E=ol(r,r.VERTEX_SHADER,S),T=ol(r,r.FRAGMENT_SHADER,M);function A(e){if(t.debug.checkShaderErrors){const n=r.getProgramInfoLog(x).trim(),i=r.getShaderInfoLog(E).trim(),s=r.getShaderInfoLog(T).trim();let a=!0,o=!0;if(!1===r.getProgramParameter(x,r.LINK_STATUS))if(a=!1,"function"===typeof t.debug.onShaderError)t.debug.onShaderError(r,x,E,T);else{const t=cl(r,E,"vertex"),e=cl(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+t+"\n"+e)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==s||(o=!1);o&&(e.diagnostics={runnable:a,programLog:n,vertexShader:{log:i,prefix:_},fragmentShader:{log:s,prefix:b}})}r.deleteShader(E),r.deleteShader(T),C=new al(r,x),P=function(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),s=i.name;let a=1;i.type===t.FLOAT_MAT2&&(a=2),i.type===t.FLOAT_MAT3&&(a=3),i.type===t.FLOAT_MAT4&&(a=4),n[s]={type:i.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}(r,x)}let C,P;r.attachShader(x,E),r.attachShader(x,T),void 0!==n.index0AttributeName?r.bindAttribLocation(x,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x),this.getUniforms=function(){return void 0===C&&A(this),C},this.getAttributes=function(){return void 0===P&&A(this),P};let R=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===R&&(R=r.getProgramParameter(x,37297)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=ll++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=E,this.fragmentShader=T,this}let Ml=0;class El{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new Tl(t),e.set(t,n)),n}}class Tl{constructor(t){this.id=Ml++,this.code=t,this.usedTimes=0}}function Al(t,e,n,i,r,s,a){const o=new Mr,l=new El,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(t){return 0===t?"uv":"uv".concat(t)}return{getParameters:function(s,o,c,y,x){const b=y.fog,w=x.geometry,S=s.isMeshStandardMaterial?y.environment:null,M=(s.isMeshStandardMaterial?n:e).get(s.envMap||S),E=M&&M.mapping===gt?M.image.height:null,T=p[s.type];null!==s.precision&&(f=r.getMaxPrecision(s.precision),f!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",f,"instead."));const A=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,C=void 0!==A?A.length:0;let P,R,L,N,k=0;if(void 0!==w.morphAttributes.position&&(k=1),void 0!==w.morphAttributes.normal&&(k=2),void 0!==w.morphAttributes.color&&(k=3),T){const t=ba[T];P=t.vertexShader,R=t.fragmentShader}else P=s.vertexShader,R=s.fragmentShader,l.update(s),L=l.getVertexShaderID(s),N=l.getFragmentShaderID(s);const O=t.getRenderTarget(),D=!0===x.isInstancedMesh,I=!0===x.isBatchedMesh,z=!!s.map,j=!!s.matcap,U=!!M,F=!!s.aoMap,B=!!s.lightMap,H=!!s.bumpMap,V=!!s.normalMap,W=!!s.displacementMap,G=!!s.emissiveMap,X=!!s.metalnessMap,q=!!s.roughnessMap,Z=s.anisotropy>0,Y=s.clearcoat>0,K=s.iridescence>0,J=s.sheen>0,Q=s.transmission>0,$=Z&&!!s.anisotropyMap,tt=Y&&!!s.clearcoatMap,et=Y&&!!s.clearcoatNormalMap,it=Y&&!!s.clearcoatRoughnessMap,rt=K&&!!s.iridescenceMap,st=K&&!!s.iridescenceThicknessMap,at=J&&!!s.sheenColorMap,ot=J&&!!s.sheenRoughnessMap,lt=!!s.specularMap,ct=!!s.specularColorMap,ut=!!s.specularIntensityMap,ht=Q&&!!s.transmissionMap,dt=Q&&!!s.thicknessMap,ft=!!s.gradientMap,pt=!!s.alphaMap,mt=s.alphaTest>0,vt=!!s.alphaHash,yt=!!s.extensions,xt=!!w.attributes.uv1,_t=!!w.attributes.uv2,bt=!!w.attributes.uv3;let wt=nt;return s.toneMapped&&(null!==O&&!0!==O.isXRRenderTarget||(wt=t.toneMapping)),{isWebGL2:u,shaderID:T,shaderType:s.type,shaderName:s.name,vertexShader:P,fragmentShader:R,defines:s.defines,customVertexShaderID:L,customFragmentShaderID:N,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:f,batching:I,instancing:D,instancingColor:D&&null!==x.instanceColor,supportsVertexTextures:d,outputColorSpace:null===O?t.outputColorSpace:!0===O.isXRRenderTarget?O.texture.colorSpace:Qe,map:z,matcap:j,envMap:U,envMapMode:U&&M.mapping,envMapCubeUVHeight:E,aoMap:F,lightMap:B,bumpMap:H,normalMap:V,displacementMap:d&&W,emissiveMap:G,normalMapObjectSpace:V&&s.normalMapType===Ye,normalMapTangentSpace:V&&s.normalMapType===Ze,metalnessMap:X,roughnessMap:q,anisotropy:Z,anisotropyMap:$,clearcoat:Y,clearcoatMap:tt,clearcoatNormalMap:et,clearcoatRoughnessMap:it,iridescence:K,iridescenceMap:rt,iridescenceThicknessMap:st,sheen:J,sheenColorMap:at,sheenRoughnessMap:ot,specularMap:lt,specularColorMap:ct,specularIntensityMap:ut,transmission:Q,transmissionMap:ht,thicknessMap:dt,gradientMap:ft,opaque:!1===s.transparent&&s.blending===_,alphaMap:pt,alphaTest:mt,alphaHash:vt,combine:s.combine,mapUv:z&&m(s.map.channel),aoMapUv:F&&m(s.aoMap.channel),lightMapUv:B&&m(s.lightMap.channel),bumpMapUv:H&&m(s.bumpMap.channel),normalMapUv:V&&m(s.normalMap.channel),displacementMapUv:W&&m(s.displacementMap.channel),emissiveMapUv:G&&m(s.emissiveMap.channel),metalnessMapUv:X&&m(s.metalnessMap.channel),roughnessMapUv:q&&m(s.roughnessMap.channel),anisotropyMapUv:$&&m(s.anisotropyMap.channel),clearcoatMapUv:tt&&m(s.clearcoatMap.channel),clearcoatNormalMapUv:et&&m(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:it&&m(s.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&m(s.iridescenceMap.channel),iridescenceThicknessMapUv:st&&m(s.iridescenceThicknessMap.channel),sheenColorMapUv:at&&m(s.sheenColorMap.channel),sheenRoughnessMapUv:ot&&m(s.sheenRoughnessMap.channel),specularMapUv:lt&&m(s.specularMap.channel),specularColorMapUv:ct&&m(s.specularColorMap.channel),specularIntensityMapUv:ut&&m(s.specularIntensityMap.channel),transmissionMapUv:ht&&m(s.transmissionMap.channel),thicknessMapUv:dt&&m(s.thicknessMap.channel),alphaMapUv:pt&&m(s.alphaMap.channel),vertexTangents:!!w.attributes.tangent&&(V||Z),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!w.attributes.color&&4===w.attributes.color.itemSize,vertexUv1s:xt,vertexUv2s:_t,vertexUv3s:bt,pointsUvs:!0===x.isPoints&&!!w.attributes.uv&&(z||pt),fog:!!b,useFog:!0===s.fog,fogExp2:b&&b.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===x.isSkinnedMesh,morphTargets:void 0!==w.morphAttributes.position,morphNormals:void 0!==w.morphAttributes.normal,morphColors:void 0!==w.morphAttributes.color,morphTargetsCount:C,morphTextureStride:k,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:wt,useLegacyLights:t._useLegacyLights,decodeVideoTexture:z&&!0===s.map.isVideoTexture&&yi.getTransfer(s.map.colorSpace)===nn,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===v,flipSided:s.side===g,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:yt&&!0===s.extensions.derivatives,extensionFragDepth:yt&&!0===s.extensions.fragDepth,extensionDrawBuffers:yt&&!0===s.extensions.drawBuffers,extensionShaderTextureLOD:yt&&!0===s.extensions.shaderTextureLOD,extensionClipCullDistance:yt&&s.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.numLightProbes),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){o.disableAll(),e.isWebGL2&&o.enable(0);e.supportsVertexTextures&&o.enable(1);e.instancing&&o.enable(2);e.instancingColor&&o.enable(3);e.matcap&&o.enable(4);e.envMap&&o.enable(5);e.normalMapObjectSpace&&o.enable(6);e.normalMapTangentSpace&&o.enable(7);e.clearcoat&&o.enable(8);e.iridescence&&o.enable(9);e.alphaTest&&o.enable(10);e.vertexColors&&o.enable(11);e.vertexAlphas&&o.enable(12);e.vertexUv1s&&o.enable(13);e.vertexUv2s&&o.enable(14);e.vertexUv3s&&o.enable(15);e.vertexTangents&&o.enable(16);e.anisotropy&&o.enable(17);e.alphaHash&&o.enable(18);e.batching&&o.enable(19);t.push(o.mask),o.disableAll(),e.fog&&o.enable(0);e.useFog&&o.enable(1);e.flatShading&&o.enable(2);e.logarithmicDepthBuffer&&o.enable(3);e.skinning&&o.enable(4);e.morphTargets&&o.enable(5);e.morphNormals&&o.enable(6);e.morphColors&&o.enable(7);e.premultipliedAlpha&&o.enable(8);e.shadowMapEnabled&&o.enable(9);e.useLegacyLights&&o.enable(10);e.doubleSided&&o.enable(11);e.flipSided&&o.enable(12);e.useDepthPacking&&o.enable(13);e.dithering&&o.enable(14);e.transmission&&o.enable(15);e.sheen&&o.enable(16);e.opaque&&o.enable(17);e.pointsUvs&&o.enable(18);e.decodeVideoTexture&&o.enable(19);t.push(o.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=p[t.type];let n;if(e){const t=ba[e];n=ea.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,r=c.length;t<r;t++){const e=c[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Sl(t,n,e,s),c.push(i)),i},releaseProgram:function(t){if(0===--t.usedTimes){const e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:c,dispose:function(){l.dispose()}}}function Cl(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Pl(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Rl(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ll(){const t=[];let e=0;const n=[],i=[],r=[];function s(n,i,r,s,a,o){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,a,o,l,c){const u=s(t,e,a,o,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)},unshift:function(t,e,a,o,l,c){const u=s(t,e,a,o,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=e,i=t.length;n<i;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Pl),i.length>1&&i.sort(e||Rl),r.length>1&&r.sort(e||Rl)}}}function Nl(){let t=new WeakMap;return{get:function(e,n){const i=t.get(e);let r;return void 0===i?(r=new Ll,t.set(e,[r])):n>=i.length?(r=new Ll,i.push(r)):r=i[n],r},dispose:function(){t=new WeakMap}}}function kl(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new zi,color:new es};break;case"SpotLight":n={position:new zi,direction:new zi,color:new es,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new zi,color:new es,distance:0,decay:0};break;case"HemisphereLight":n={direction:new zi,skyColor:new es,groundColor:new es};break;case"RectAreaLight":n={color:new es,position:new zi,halfWidth:new zi,halfHeight:new zi}}return t[e.id]=n,n}}}let Ol=0;function Dl(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Il(t,e){const n=new kl,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ri};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ri,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)r.probe.push(new zi);const s=new zi,a=new fr,o=new fr;return{setup:function(s,a){let o=0,l=0,c=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,y=0,x=0,_=0;s.sort(Dl);const b=!0===a?Math.PI:1;for(let t=0,e=s.length;t<e;t++){const e=s[t],a=e.color,w=e.intensity,S=e.distance,M=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)o+=a.r*w*b,l+=a.g*w*b,c+=a.b*w*b;else if(e.isLightProbe){for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],w);_++}else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*b),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=M,r.directionalShadowMatrix[u]=e.shadow.matrix,m++}r.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(w*b),t.distance=S,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,r.spot[d]=t;const s=e.shadow;if(e.map&&(r.spotLightMap[y]=e.map,y++,s.updateMatrices(e),e.castShadow&&x++),r.spotLightMatrix[d]=s.matrix,e.castShadow){const t=i.get(e);t.shadowBias=s.bias,t.shadowNormalBias=s.normalBias,t.shadowRadius=s.radius,t.shadowMapSize=s.mapSize,r.spotShadow[d]=t,r.spotShadowMap[d]=M,v++}d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(a).multiplyScalar(w),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[f]=t,f++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*b),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[h]=n,r.pointShadowMap[h]=M,r.pointShadowMatrix[h]=e.shadow.matrix,g++}r.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(w*b),t.groundColor.copy(e.groundColor).multiplyScalar(w*b),r.hemi[p]=t,p++}}f>0&&(e.isWebGL2?!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=_a.LTC_FLOAT_1,r.rectAreaLTC2=_a.LTC_FLOAT_2):(r.rectAreaLTC1=_a.LTC_HALF_1,r.rectAreaLTC2=_a.LTC_HALF_2):!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=_a.LTC_FLOAT_1,r.rectAreaLTC2=_a.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=_a.LTC_HALF_1,r.rectAreaLTC2=_a.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const w=r.hash;w.directionalLength===u&&w.pointLength===h&&w.spotLength===d&&w.rectAreaLength===f&&w.hemiLength===p&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===v&&w.numSpotMaps===y&&w.numLightProbes===_||(r.directional.length=u,r.spot.length=d,r.rectArea.length=f,r.point.length=h,r.hemi.length=p,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+y-x,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=x,r.numLightProbes=_,w.directionalLength=u,w.pointLength=h,w.spotLength=d,w.rectAreaLength=f,w.hemiLength=p,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=y,w.numLightProbes=_,r.version=Ol++)},setupView:function(t,e){let n=0,i=0,l=0,c=0,u=0;const h=e.matrixWorldInverse;for(let d=0,f=t.length;d<f;d++){const e=t[d];if(e.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),s.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),s.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(h),l++}else if(e.isRectAreaLight){const t=r.rectArea[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),o.identity(),a.copy(e.matrixWorld),a.premultiply(h),o.extractRotation(a),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),c++}else if(e.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),i++}else if(e.isHemisphereLight){const t=r.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),u++}}},state:r}}function zl(t,e){const n=new Il(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function jl(t,e){let n=new WeakMap;return{get:function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=n.get(i);let a;return void 0===s?(a=new zl(t,e),n.set(i,[a])):r>=s.length?(a=new zl(t,e),s.push(a)):a=s[r],a},dispose:function(){n=new WeakMap}}}class Ul extends rs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Xe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Fl extends rs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Bl(t,e,n){let i=new ma;const r=new ri,s=new ri,a=new Ci,o=new Ul({depthPacking:qe}),l=new Fl,c={},u=n.maxTextureSize,h={[m]:g,[g]:m,[v]:v},f=new na({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ri},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=f.clone();y.defines.HORIZONTAL_PASS=1;const _=new Ls;_.setAttribute("position",new fs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Ys(_,f),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=d;let S=this.type;function M(n,i){const s=e.update(b);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,y.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,y.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Ri(r.x,r.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,s,f,b,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,s,y,b,null)}function E(e,n,i,r){let s=null;const a=!0===i.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==a)s=a;else if(s=!0===i.isPointLight?l:o,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=s.uuid,e=n.uuid;let i=c[t];void 0===i&&(i={},c[t]=i);let r=i[e];void 0===r&&(r=s.clone(),i[e]=r,n.addEventListener("dispose",A)),s=r}if(s.visible=n.visible,s.wireframe=n.wireframe,s.side=r===p?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===i.isPointLight&&!0===s.isMeshDistanceMaterial){t.properties.get(s).light=i}return s}function T(n,r,s,a,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===p)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=e.update(n),l=n.material;if(Array.isArray(l)){const e=i.groups;for(let c=0,u=e.length;c<u;c++){const u=e[c],h=l[u.materialIndex];if(h&&h.visible){const e=E(n,h,a,o);n.onBeforeShadow(t,n,r,s,i,e,u),t.renderBufferDirect(s,null,i,e,n,u),n.onAfterShadow(t,n,r,s,i,e,u)}}}else if(l.visible){const e=E(n,l,a,o);n.onBeforeShadow(t,n,r,s,i,e,null),t.renderBufferDirect(s,null,i,e,n,null),n.onAfterShadow(t,n,r,s,i,e,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)T(l[t],r,s,a,o)}function A(t){t.target.removeEventListener("dispose",A);for(const e in c){const n=c[e],i=t.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(e,n,o){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(x),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const f=S!==p&&this.type===p,m=S===p&&this.type!==p;for(let g=0,v=e.length;g<v;g++){const l=e[g],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const h=c.getFrameExtents();if(r.multiply(h),s.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/h.x),r.x=s.x*h.x,c.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/h.y),r.y=s.y*h.y,c.mapSize.y=s.y)),null===c.map||!0===f||!0===m){const t=this.type!==p?{minFilter:_t,magFilter:_t}:{};null!==c.map&&c.map.dispose(),c.map=new Ri(r.x,r.y,t),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const v=c.getViewportCount();for(let t=0;t<v;t++){const e=c.getViewport(t);a.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),d.viewport(a),c.updateMatrices(l,t),i=c.getFrustum(),T(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===p&&M(c,o),c.needsUpdate=!1}S=this.type,w.needsUpdate=!1,t.setRenderTarget(l,c,h)}}function Hl(t,e,n){const i=n.isWebGL2;const r=new function(){let e=!1;const n=new Ci;let i=null;const r=new Ci(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,s,a,o){!0===o&&(e*=a,i*=a,s*=a),n.set(e,i,s,a),!1===r.equals(n)&&(t.clearColor(e,i,s,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(e){e?At(t.DEPTH_TEST):Ct(t.DEPTH_TEST)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){switch(e){case G:t.depthFunc(t.NEVER);break;case X:t.depthFunc(t.ALWAYS);break;case q:t.depthFunc(t.LESS);break;case Z:t.depthFunc(t.LEQUAL);break;case Y:t.depthFunc(t.EQUAL);break;case K:t.depthFunc(t.GEQUAL);break;case J:t.depthFunc(t.GREATER);break;case Q:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},a=new function(){let e=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(n){e||(n?At(t.STENCIL_TEST):Ct(t.STENCIL_TEST))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&s===a||(t.stencilFunc(e,n,a),i=e,r=n,s=a)},setOp:function(e,n,i){a===e&&o===n&&l===i||(t.stencilOp(e,n,i),a=e,o=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null}}},u=new WeakMap,h=new WeakMap;let d={},f={},p=new WeakMap,m=[],y=null,$=!1,tt=null,et=null,nt=null,it=null,rt=null,st=null,at=null,ot=new es(0,0,0),lt=0,ct=!1,ut=null,ht=null,dt=null,ft=null,pt=null;const mt=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let gt=!1,vt=0;const yt=t.getParameter(t.VERSION);-1!==yt.indexOf("WebGL")?(vt=parseFloat(/^WebGL (\d)/.exec(yt)[1]),gt=vt>=1):-1!==yt.indexOf("OpenGL ES")&&(vt=parseFloat(/^OpenGL ES (\d)/.exec(yt)[1]),gt=vt>=2);let xt=null,_t={};const bt=t.getParameter(t.SCISSOR_BOX),wt=t.getParameter(t.VIEWPORT),St=(new Ci).fromArray(bt),Mt=(new Ci).fromArray(wt);function Et(e,n,r,s){const a=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let l=0;l<r;l++)!i||e!==t.TEXTURE_3D&&e!==t.TEXTURE_2D_ARRAY?t.texImage2D(n+l,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a):t.texImage3D(n,0,t.RGBA,1,1,s,0,t.RGBA,t.UNSIGNED_BYTE,a);return o}const Tt={};function At(e){!0!==d[e]&&(t.enable(e),d[e]=!0)}function Ct(e){!1!==d[e]&&(t.disable(e),d[e]=!1)}Tt[t.TEXTURE_2D]=Et(t.TEXTURE_2D,t.TEXTURE_2D,1),Tt[t.TEXTURE_CUBE_MAP]=Et(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Tt[t.TEXTURE_2D_ARRAY]=Et(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Tt[t.TEXTURE_3D]=Et(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),At(t.DEPTH_TEST),s.setFunc(Z),Nt(!1),kt(l),At(t.CULL_FACE),Lt(x);const Pt={[E]:t.FUNC_ADD,[T]:t.FUNC_SUBTRACT,[A]:t.FUNC_REVERSE_SUBTRACT};if(i)Pt[C]=t.MIN,Pt[P]=t.MAX;else{const t=e.get("EXT_blend_minmax");null!==t&&(Pt[C]=t.MIN_EXT,Pt[P]=t.MAX_EXT)}const Rt={[R]:t.ZERO,[L]:t.ONE,[N]:t.SRC_COLOR,[O]:t.SRC_ALPHA,[F]:t.SRC_ALPHA_SATURATE,[j]:t.DST_COLOR,[I]:t.DST_ALPHA,[k]:t.ONE_MINUS_SRC_COLOR,[D]:t.ONE_MINUS_SRC_ALPHA,[U]:t.ONE_MINUS_DST_COLOR,[z]:t.ONE_MINUS_DST_ALPHA,[B]:t.CONSTANT_COLOR,[H]:t.ONE_MINUS_CONSTANT_COLOR,[V]:t.CONSTANT_ALPHA,[W]:t.ONE_MINUS_CONSTANT_ALPHA};function Lt(e,n,i,r,s,a,o,l,c,u){if(e!==x){if(!1===$&&(At(t.BLEND),$=!0),e===M)s=s||n,a=a||i,o=o||r,n===et&&s===rt||(t.blendEquationSeparate(Pt[n],Pt[s]),et=n,rt=s),i===nt&&r===it&&a===st&&o===at||(t.blendFuncSeparate(Rt[i],Rt[r],Rt[a],Rt[o]),nt=i,it=r,st=a,at=o),!1!==l.equals(ot)&&c===lt||(t.blendColor(l.r,l.g,l.b,c),ot.copy(l),lt=c),tt=e,ct=!1;else if(e!==tt||u!==ct){if(et===E&&rt===E||(t.blendEquation(t.FUNC_ADD),et=E,rt=E),u)switch(e){case _:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case b:t.blendFunc(t.ONE,t.ONE);break;case w:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case S:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case _:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case b:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case w:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case S:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}nt=null,it=null,st=null,at=null,ot.set(0,0,0),lt=0,tt=e,ct=u}}else!0===$&&(Ct(t.BLEND),$=!1)}function Nt(e){ut!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),ut=e)}function kt(e){e!==o?(At(t.CULL_FACE),e!==ht&&(e===l?t.cullFace(t.BACK):e===c?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ct(t.CULL_FACE),ht=e}function Ot(e,n,i){e?(At(t.POLYGON_OFFSET_FILL),ft===n&&pt===i||(t.polygonOffset(n,i),ft=n,pt=i)):Ct(t.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:s,stencil:a},enable:At,disable:Ct,bindFramebuffer:function(e,n){return f[e]!==n&&(t.bindFramebuffer(e,n),f[e]=n,i&&(e===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,r){let s=m,a=!1;if(i)if(s=p.get(r),void 0===s&&(s=[],p.set(r,s)),i.isWebGLMultipleRenderTargets){const e=i.texture;if(s.length!==e.length||s[0]!==t.COLOR_ATTACHMENT0){for(let n=0,i=e.length;n<i;n++)s[n]=t.COLOR_ATTACHMENT0+n;s.length=e.length,a=!0}}else s[0]!==t.COLOR_ATTACHMENT0&&(s[0]=t.COLOR_ATTACHMENT0,a=!0);else s[0]!==t.BACK&&(s[0]=t.BACK,a=!0);a&&(n.isWebGL2?t.drawBuffers(s):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(e){return y!==e&&(t.useProgram(e),y=e,!0)},setBlending:Lt,setMaterial:function(e,n){e.side===v?Ct(t.CULL_FACE):At(t.CULL_FACE);let i=e.side===g;n&&(i=!i),Nt(i),e.blending===_&&!1===e.transparent?Lt(x):Lt(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.blendColor,e.blendAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),r.setMask(e.colorWrite);const o=e.stencilWrite;a.setTest(o),o&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ot(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?At(t.SAMPLE_ALPHA_TO_COVERAGE):Ct(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Nt,setCullFace:kt,setLineWidth:function(e){e!==dt&&(gt&&t.lineWidth(e),dt=e)},setPolygonOffset:Ot,setScissorTest:function(e){e?At(t.SCISSOR_TEST):Ct(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+mt-1),xt!==e&&(t.activeTexture(e),xt=e)},bindTexture:function(e,n,i){void 0===i&&(i=null===xt?t.TEXTURE0+mt-1:xt);let r=_t[i];void 0===r&&(r={type:void 0,texture:void 0},_t[i]=r),r.type===e&&r.texture===n||(xt!==i&&(t.activeTexture(i),xt=i),t.bindTexture(e,n||Tt[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=_t[xt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(e,n){let i=h.get(n);void 0===i&&(i=new WeakMap,h.set(n,i));let r=i.get(e);void 0===r&&(r=t.getUniformBlockIndex(n,e.name),i.set(e,r))},uniformBlockBinding:function(e,n){const i=h.get(n).get(e);u.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),u.set(n,i))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===St.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),St.copy(e))},viewport:function(e){!1===Mt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),Mt.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),!0===i&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},xt=null,_t={},f={},p=new WeakMap,m=[],y=null,$=!1,tt=null,et=null,nt=null,it=null,rt=null,st=null,at=null,ot=new es(0,0,0),lt=0,ct=!1,ut=null,ht=null,dt=null,ft=null,pt=null,St.set(0,0,t.canvas.width,t.canvas.height),Mt.set(0,0,t.canvas.width,t.canvas.height),r.reset(),s.reset(),a.reset()}}}function Vl(t,e,n,i,r,s,a){const o=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function p(t,e){return f?new OffscreenCanvas(t,e):ui("canvas")}function m(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?ti:Math.floor,s=i(r*t.width),a=i(r*t.height);void 0===h&&(h=p(s,a));const o=n?p(s,a):h;o.width=s,o.height=a;return o.getContext("2d").drawImage(t,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+s+"x"+a+")."),o}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function g(t){return $n(t.width)&&$n(t.height)}function v(t,e){return t.generateMipmaps&&e&&t.minFilter!==_t&&t.minFilter!==Et}function y(e){t.generateMipmap(e)}function x(n,i,r,s){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===o)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;if(i===t.RED&&(r===t.FLOAT&&(l=t.R32F),r===t.HALF_FLOAT&&(l=t.R16F),r===t.UNSIGNED_BYTE&&(l=t.R8)),i===t.RED_INTEGER&&(r===t.UNSIGNED_BYTE&&(l=t.R8UI),r===t.UNSIGNED_SHORT&&(l=t.R16UI),r===t.UNSIGNED_INT&&(l=t.R32UI),r===t.BYTE&&(l=t.R8I),r===t.SHORT&&(l=t.R16I),r===t.INT&&(l=t.R32I)),i===t.RG&&(r===t.FLOAT&&(l=t.RG32F),r===t.HALF_FLOAT&&(l=t.RG16F),r===t.UNSIGNED_BYTE&&(l=t.RG8)),i===t.RGBA){const e=a?en:yi.getTransfer(s);r===t.FLOAT&&(l=t.RGBA32F),r===t.HALF_FLOAT&&(l=t.RGBA16F),r===t.UNSIGNED_BYTE&&(l=e===nn?t.SRGB8_ALPHA8:t.RGBA8),r===t.UNSIGNED_SHORT_4_4_4_4&&(l=t.RGBA4),r===t.UNSIGNED_SHORT_5_5_5_1&&(l=t.RGB5_A1)}return l!==t.R16F&&l!==t.R32F&&l!==t.RG16F&&l!==t.RG32F&&l!==t.RGBA16F&&l!==t.RGBA32F||e.get("EXT_color_buffer_float"),l}function _(t,e,n){return!0===v(t,n)||t.isFramebufferTexture&&t.minFilter!==_t&&t.minFilter!==Et?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function b(e){return e===_t||e===bt||e===St?t.NEAREST:t.LINEAR}function w(t){const e=t.target;e.removeEventListener("dispose",w),function(t){const e=i.get(t);if(void 0===e.__webglInit)return;const n=t.source,r=d.get(n);if(r){const i=r[e.__cacheKey];i.usedTimes--,0===i.usedTimes&&M(t),0===Object.keys(r).length&&d.delete(n)}i.remove(t)}(e),e.isVideoTexture&&u.delete(e)}function S(e){const n=e.target;n.removeEventListener("dispose",S),function(e){const n=e.texture,r=i.get(e),s=i.get(n);void 0!==s.__webglTexture&&(t.deleteTexture(s.__webglTexture),a.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(r.__webglFramebuffer[i]))for(let e=0;e<r.__webglFramebuffer[i].length;e++)t.deleteFramebuffer(r.__webglFramebuffer[i][e]);else t.deleteFramebuffer(r.__webglFramebuffer[i]);r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[i])}else{if(Array.isArray(r.__webglFramebuffer))for(let e=0;e<r.__webglFramebuffer.length;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]);else t.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let e=0;e<r.__webglColorRenderbuffer.length;e++)r.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(r.__webglColorRenderbuffer[e]);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const e=i.get(n[o]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),a.memory.textures--),i.remove(n[o])}i.remove(n),i.remove(e)}(n)}function M(e){const n=i.get(e);t.deleteTexture(n.__webglTexture);const r=e.source;delete d.get(r)[n.__cacheKey],a.memory.textures--}let E=0;function T(e,r){const s=i.get(e);if(e.isVideoTexture&&function(t){const e=a.render.frame;u.get(t)!==e&&(u.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&s.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void N(s,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,s.__webglTexture,t.TEXTURE0+r)}const A={[vt]:t.REPEAT,[yt]:t.CLAMP_TO_EDGE,[xt]:t.MIRRORED_REPEAT},C={[_t]:t.NEAREST,[bt]:t.NEAREST_MIPMAP_NEAREST,[St]:t.NEAREST_MIPMAP_LINEAR,[Et]:t.LINEAR,[Tt]:t.LINEAR_MIPMAP_NEAREST,[Ct]:t.LINEAR_MIPMAP_LINEAR},P={[wn]:t.NEVER,[Pn]:t.ALWAYS,[Sn]:t.LESS,[En]:t.LEQUAL,[Mn]:t.EQUAL,[Cn]:t.GEQUAL,[Tn]:t.GREATER,[An]:t.NOTEQUAL};function R(n,s,a){if(a?(t.texParameteri(n,t.TEXTURE_WRAP_S,A[s.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,A[s.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,A[s.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,C[s.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,C[s.minFilter])):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),s.wrapS===yt&&s.wrapT===yt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,b(s.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,b(s.minFilter)),s.minFilter!==_t&&s.minFilter!==Et&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),s.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,P[s.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(s.magFilter===_t)return;if(s.minFilter!==St&&s.minFilter!==Ct)return;if(s.type===It&&!1===e.has("OES_texture_float_linear"))return;if(!1===o&&s.type===zt&&!1===e.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function L(e,n){let i=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",w));const r=n.source;let s=d.get(r);void 0===s&&(s={},d.set(r,s));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(o!==e.__cacheKey){void 0===s[o]&&(s[o]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,i=!0),s[o].usedTimes++;const r=s[e.__cacheKey];void 0!==r&&(s[e.__cacheKey].usedTimes--,0===r.usedTimes&&M(n)),e.__cacheKey=o,e.__webglTexture=s[o].texture}return i}function N(e,a,l){let c=t.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(c=t.TEXTURE_2D_ARRAY),a.isData3DTexture&&(c=t.TEXTURE_3D);const u=L(e,a),h=a.source;n.bindTexture(c,e.__webglTexture,t.TEXTURE0+l);const d=i.get(h);if(h.version!==d.__version||!0===u){n.activeTexture(t.TEXTURE0+l);const e=yi.getPrimaries(yi.workingColorSpace),i=a.colorSpace===Ke?null:yi.getPrimaries(a.colorSpace),f=a.colorSpace===Ke||e===i?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,a.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,f);const p=function(t){return!o&&(t.wrapS!==yt||t.wrapT!==yt||t.minFilter!==_t&&t.minFilter!==Et)}(a)&&!1===g(a.image);let b=m(a.image,p,!1,r.maxTextureSize);b=j(a,b);const w=g(b)||o,S=s.convert(a.format,a.colorSpace);let M,E=s.convert(a.type),T=x(a.internalFormat,S,E,a.colorSpace,a.isVideoTexture);R(c,a,w);const A=a.mipmaps,C=o&&!0!==a.isVideoTexture&&T!==ae,P=void 0===d.__version||!0===u,L=_(a,b,w);if(a.isDepthTexture)T=t.DEPTH_COMPONENT,o?T=a.type===It?t.DEPTH_COMPONENT32F:a.type===Dt?t.DEPTH_COMPONENT24:a.type===Ft?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:a.type===It&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),a.format===Gt&&T===t.DEPTH_COMPONENT&&a.type!==kt&&a.type!==Dt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),a.type=Dt,E=s.convert(a.type)),a.format===Xt&&T===t.DEPTH_COMPONENT&&(T=t.DEPTH_STENCIL,a.type!==Ft&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),a.type=Ft,E=s.convert(a.type))),P&&(C?n.texStorage2D(t.TEXTURE_2D,1,T,b.width,b.height):n.texImage2D(t.TEXTURE_2D,0,T,b.width,b.height,0,S,E,null));else if(a.isDataTexture)if(A.length>0&&w){C&&P&&n.texStorage2D(t.TEXTURE_2D,L,T,A[0].width,A[0].height);for(let e=0,i=A.length;e<i;e++)M=A[e],C?n.texSubImage2D(t.TEXTURE_2D,e,0,0,M.width,M.height,S,E,M.data):n.texImage2D(t.TEXTURE_2D,e,T,M.width,M.height,0,S,E,M.data);a.generateMipmaps=!1}else C?(P&&n.texStorage2D(t.TEXTURE_2D,L,T,b.width,b.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,b.width,b.height,S,E,b.data)):n.texImage2D(t.TEXTURE_2D,0,T,b.width,b.height,0,S,E,b.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){C&&P&&n.texStorage3D(t.TEXTURE_2D_ARRAY,L,T,A[0].width,A[0].height,b.depth);for(let e=0,i=A.length;e<i;e++)M=A[e],a.format!==Ht?null!==S?C?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,M.width,M.height,b.depth,S,M.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,T,M.width,M.height,b.depth,0,M.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,M.width,M.height,b.depth,S,E,M.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,T,M.width,M.height,b.depth,0,S,E,M.data)}else{C&&P&&n.texStorage2D(t.TEXTURE_2D,L,T,A[0].width,A[0].height);for(let e=0,i=A.length;e<i;e++)M=A[e],a.format!==Ht?null!==S?C?n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,M.width,M.height,S,M.data):n.compressedTexImage2D(t.TEXTURE_2D,e,T,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage2D(t.TEXTURE_2D,e,0,0,M.width,M.height,S,E,M.data):n.texImage2D(t.TEXTURE_2D,e,T,M.width,M.height,0,S,E,M.data)}else if(a.isDataArrayTexture)C?(P&&n.texStorage3D(t.TEXTURE_2D_ARRAY,L,T,b.width,b.height,b.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,b.width,b.height,b.depth,S,E,b.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,T,b.width,b.height,b.depth,0,S,E,b.data);else if(a.isData3DTexture)C?(P&&n.texStorage3D(t.TEXTURE_3D,L,T,b.width,b.height,b.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,b.width,b.height,b.depth,S,E,b.data)):n.texImage3D(t.TEXTURE_3D,0,T,b.width,b.height,b.depth,0,S,E,b.data);else if(a.isFramebufferTexture){if(P)if(C)n.texStorage2D(t.TEXTURE_2D,L,T,b.width,b.height);else{let e=b.width,i=b.height;for(let r=0;r<L;r++)n.texImage2D(t.TEXTURE_2D,r,T,e,i,0,S,E,null),e>>=1,i>>=1}}else if(A.length>0&&w){C&&P&&n.texStorage2D(t.TEXTURE_2D,L,T,A[0].width,A[0].height);for(let e=0,i=A.length;e<i;e++)M=A[e],C?n.texSubImage2D(t.TEXTURE_2D,e,0,0,S,E,M):n.texImage2D(t.TEXTURE_2D,e,T,S,E,M);a.generateMipmaps=!1}else C?(P&&n.texStorage2D(t.TEXTURE_2D,L,T,b.width,b.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,S,E,b)):n.texImage2D(t.TEXTURE_2D,0,T,S,E,b);v(a,w)&&y(c),d.__version=h.version,a.onUpdate&&a.onUpdate(a)}e.__version=a.version}function k(e,r,a,o,c,u){const h=s.convert(a.format,a.colorSpace),d=s.convert(a.type),f=x(a.internalFormat,h,d,a.colorSpace);if(!i.get(r).__hasExternalTextures){const e=Math.max(1,r.width>>u),i=Math.max(1,r.height>>u);c===t.TEXTURE_3D||c===t.TEXTURE_2D_ARRAY?n.texImage3D(c,u,f,e,i,r.depth,0,h,d,null):n.texImage2D(c,u,f,e,i,0,h,d,null)}n.bindFramebuffer(t.FRAMEBUFFER,e),z(r)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,o,c,i.get(a).__webglTexture,0,I(r)):(c===t.TEXTURE_2D||c>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,o,c,i.get(a).__webglTexture,u),n.bindFramebuffer(t.FRAMEBUFFER,null)}function O(e,n,i){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){let r=!0===o?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(i||z(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===It?r=t.DEPTH_COMPONENT32F:e.type===Dt&&(r=t.DEPTH_COMPONENT24));const i=I(n);z(n)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,i,r,n.width,n.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,i,r,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,r,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){const r=I(n);i&&!1===z(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,r,t.DEPTH24_STENCIL8,n.width,n.height):z(n)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,r,t.DEPTH24_STENCIL8,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<e.length;r++){const a=e[r],o=s.convert(a.format,a.colorSpace),c=s.convert(a.type),u=x(a.internalFormat,o,c,a.colorSpace),h=I(n);i&&!1===z(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,h,u,n.width,n.height):z(n)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,h,u,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,u,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function D(e){const r=i.get(e),s=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),T(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,a=I(r);if(r.depthTexture.format===Gt)z(r)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0);else{if(r.depthTexture.format!==Xt)throw new Error("Unknown depthTexture format");z(r)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0)}}(r.__webglFramebuffer,e)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),O(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),O(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function I(t){return Math.min(r.maxSamples,t.samples)}function z(t){const n=i.get(t);return o&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function j(t,n){const i=t.colorSpace,r=t.format,s=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===Bn||i!==Qe&&i!==Ke&&(yi.getTransfer(i)===nn?!1===o?!0===e.has("EXT_sRGB")&&r===Ht?(t.format=Bn,t.minFilter=Et,t.generateMipmaps=!1):n=wi.sRGBToLinear(n):r===Ht&&s===Rt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=function(){const t=E;return t>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+r.maxTextures),E+=1,t},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(e,r){const s=i.get(e);e.version>0&&s.__version!==e.version?N(s,e,r):n.bindTexture(t.TEXTURE_2D_ARRAY,s.__webglTexture,t.TEXTURE0+r)},this.setTexture3D=function(e,r){const s=i.get(e);e.version>0&&s.__version!==e.version?N(s,e,r):n.bindTexture(t.TEXTURE_3D,s.__webglTexture,t.TEXTURE0+r)},this.setTextureCube=function(e,a){const l=i.get(e);e.version>0&&l.__version!==e.version?function(e,a,l){if(6!==a.image.length)return;const c=L(e,a),u=a.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+l);const h=i.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(t.TEXTURE0+l);const e=yi.getPrimaries(yi.workingColorSpace),i=a.colorSpace===Ke?null:yi.getPrimaries(a.colorSpace),d=a.colorSpace===Ke||e===i?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,a.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);const f=a.isCompressedTexture||a.image[0].isCompressedTexture,p=a.image[0]&&a.image[0].isDataTexture,b=[];for(let t=0;t<6;t++)b[t]=f||p?p?a.image[t].image:a.image[t]:m(a.image[t],!1,!0,r.maxCubemapSize),b[t]=j(a,b[t]);const w=b[0],S=g(w)||o,M=s.convert(a.format,a.colorSpace),E=s.convert(a.type),T=x(a.internalFormat,M,E,a.colorSpace),A=o&&!0!==a.isVideoTexture,C=void 0===h.__version||!0===c;let P,L=_(a,w,S);if(R(t.TEXTURE_CUBE_MAP,a,S),f){A&&C&&n.texStorage2D(t.TEXTURE_CUBE_MAP,L,T,w.width,w.height);for(let e=0;e<6;e++){P=b[e].mipmaps;for(let i=0;i<P.length;i++){const r=P[i];a.format!==Ht?null!==M?A?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,r.width,r.height,M,r.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,T,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):A?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,r.width,r.height,M,E,r.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,T,r.width,r.height,0,M,E,r.data)}}}else{P=a.mipmaps,A&&C&&(P.length>0&&L++,n.texStorage2D(t.TEXTURE_CUBE_MAP,L,T,b[0].width,b[0].height));for(let e=0;e<6;e++)if(p){A?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,b[e].width,b[e].height,M,E,b[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,T,b[e].width,b[e].height,0,M,E,b[e].data);for(let i=0;i<P.length;i++){const r=P[i].image[e].image;A?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,r.width,r.height,M,E,r.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,T,r.width,r.height,0,M,E,r.data)}}else{A?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,M,E,b[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,T,M,E,b[e]);for(let i=0;i<P.length;i++){const r=P[i];A?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,M,E,r.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,T,M,E,r.image[e])}}}v(a,S)&&y(t.TEXTURE_CUBE_MAP),h.__version=u.version,a.onUpdate&&a.onUpdate(a)}e.__version=a.version}(l,e,a):n.bindTexture(t.TEXTURE_CUBE_MAP,l.__webglTexture,t.TEXTURE0+a)},this.rebindTextures=function(e,n,r){const s=i.get(e);void 0!==n&&k(s.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==r&&D(e)},this.setupRenderTarget=function(e){const l=e.texture,c=i.get(e),u=i.get(l);e.addEventListener("dispose",S),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=l.version,a.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,f=g(e)||o;if(h){c.__webglFramebuffer=[];for(let e=0;e<6;e++)if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[e]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[e][n]=t.createFramebuffer()}else c.__webglFramebuffer[e]=t.createFramebuffer()}else{if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let e=0;e<l.mipmaps.length;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else c.__webglFramebuffer=t.createFramebuffer();if(d)if(r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&e.samples>0&&!1===z(e)){const i=d?l:[l];c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const a=s.convert(r.format,r.colorSpace),o=s.convert(r.type),l=x(r.internalFormat,a,o,r.colorSpace,!0===e.isXRRenderTarget),u=I(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,u,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,c.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),O(c.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(h){n.bindTexture(t.TEXTURE_CUBE_MAP,u.__webglTexture),R(t.TEXTURE_CUBE_MAP,l,f);for(let n=0;n<6;n++)if(o&&l.mipmaps&&l.mipmaps.length>0)for(let i=0;i<l.mipmaps.length;i++)k(c.__webglFramebuffer[n][i],e,l,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else k(c.__webglFramebuffer[n],e,l,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(l,f)&&y(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){const r=e.texture;for(let s=0,a=r.length;s<a;s++){const a=r[s],o=i.get(a);n.bindTexture(t.TEXTURE_2D,o.__webglTexture),R(t.TEXTURE_2D,a,f),k(c.__webglFramebuffer,e,a,t.COLOR_ATTACHMENT0+s,t.TEXTURE_2D,0),v(a,f)&&y(t.TEXTURE_2D)}n.unbindTexture()}else{let i=t.TEXTURE_2D;if((e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(o?i=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,u.__webglTexture),R(i,l,f),o&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)k(c.__webglFramebuffer[n],e,l,t.COLOR_ATTACHMENT0,i,n);else k(c.__webglFramebuffer,e,l,t.COLOR_ATTACHMENT0,i,0);v(l,f)&&y(i),n.unbindTexture()}e.depthBuffer&&D(e)},this.updateRenderTargetMipmap=function(e){const r=g(e)||o,s=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let a=0,o=s.length;a<o;a++){const o=s[a];if(v(o,r)){const r=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,s=i.get(o).__webglTexture;n.bindTexture(r,s),y(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(o&&e.samples>0&&!1===z(e)){const r=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],s=e.width,a=e.height;let o=t.COLOR_BUFFER_BIT;const l=[],u=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,h=i.get(e),d=!0===e.isWebGLMultipleRenderTargets;if(d)for(let e=0;e<r.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,h.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,h.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,h.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,h.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&l.push(u);const f=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===f&&(e.depthBuffer&&(o|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(o|=t.STENCIL_BUFFER_BIT)),d&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,h.__webglColorRenderbuffer[n]),!0===f&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[u]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[u])),d){const e=i.get(r[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,s,a,0,0,s,a,o,t.NEAREST),c&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),d)for(let e=0;e<r.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,h.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,h.__webglColorRenderbuffer[e]);const s=i.get(r[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,h.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,s,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,h.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=D,this.setupFrameBufferTexture=k,this.useMultisampledRTT=z}function Wl(t,e,n){const i=n.isWebGL2;return{convert:function(n){let r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ke;const a=yi.getTransfer(s);if(n===Rt)return t.UNSIGNED_BYTE;if(n===jt)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Ut)return t.UNSIGNED_SHORT_5_5_5_1;if(n===Lt)return t.BYTE;if(n===Nt)return t.SHORT;if(n===kt)return t.UNSIGNED_SHORT;if(n===Ot)return t.INT;if(n===Dt)return t.UNSIGNED_INT;if(n===It)return t.FLOAT;if(n===zt)return i?t.HALF_FLOAT:(r=e.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(n===Bt)return t.ALPHA;if(n===Ht)return t.RGBA;if(n===Vt)return t.LUMINANCE;if(n===Wt)return t.LUMINANCE_ALPHA;if(n===Gt)return t.DEPTH_COMPONENT;if(n===Xt)return t.DEPTH_STENCIL;if(n===Bn)return r=e.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(n===qt)return t.RED;if(n===Zt)return t.RED_INTEGER;if(n===Yt)return t.RG;if(n===Kt)return t.RG_INTEGER;if(n===Jt)return t.RGBA_INTEGER;if(n===Qt||n===$t||n===te||n===ee)if(a===nn){if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Qt)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===$t)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===te)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ee)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=e.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Qt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===$t)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===te)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ee)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===ne||n===ie||n===re||n===se){if(r=e.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===ne)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===ie)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===re)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===se)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ae)return r=e.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===oe||n===le){if(r=e.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===oe)return a===nn?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===le)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===ce||n===ue||n===he||n===de||n===fe||n===pe||n===me||n===ge||n===ve||n===ye||n===xe||n===_e||n===be||n===we){if(r=e.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===ce)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===ue)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===he)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===de)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===fe)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===pe)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===me)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ge)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ve)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ye)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===xe)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===_e)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===be)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===we)return a===nn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Se||n===Me||n===Ee){if(r=e.get("EXT_texture_compression_bptc"),null===r)return null;if(n===Se)return a===nn?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Me)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Ee)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Te||n===Ae||n===Ce||n===Pe){if(r=e.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===Se)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Ae)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Ce)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Pe)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Ft?i?t.UNSIGNED_INT_24_8:(r=e.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class Gl extends ra{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=t}}class Xl extends jr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ql={type:"move"};class Zl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Xl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Xl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new zi,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new zi),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Xl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new zi,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new zi),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){s=!0;for(const s of t.hand.values()){const t=e.getJointPose(s,n),i=this._getHandJoint(l,s);null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=t.radius),i.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(i=e.getPose(t.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ql)))}return null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new Xl;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class Yl extends Wn{constructor(t,e){super();const n=this;let i=null,r=1,s=null,a="local-floor",o=1,l=null,c=null,u=null,h=null,d=null,f=null;const p=e.getContextAttributes();let m=null,g=null;const v=[],y=[],x=new ri;let _=null;const b=new ra;b.layers.enable(1),b.viewport=new Ci;const w=new ra;w.layers.enable(2),w.viewport=new Ci;const S=[b,w],M=new Gl;M.layers.enable(1),M.layers.enable(2);let E=null,T=null;function A(t){const e=y.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&(n.update(t.inputSource,t.frame,l||s),n.dispatchEvent({type:t.type,data:t.inputSource}))}function C(){i.removeEventListener("select",A),i.removeEventListener("selectstart",A),i.removeEventListener("selectend",A),i.removeEventListener("squeeze",A),i.removeEventListener("squeezestart",A),i.removeEventListener("squeezeend",A),i.removeEventListener("end",C),i.removeEventListener("inputsourceschange",P);for(let t=0;t<v.length;t++){const e=y[t];null!==e&&(y[t]=null,v[t].disconnect(e))}E=null,T=null,t.setRenderTarget(m),d=null,h=null,u=null,i=null,g=null,O.stop(),n.isPresenting=!1,t.setPixelRatio(_),t.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}function P(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=y.indexOf(n);i>=0&&(y[i]=null,v[i].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let i=y.indexOf(n);if(-1===i){for(let t=0;t<v.length;t++){if(t>=y.length){y.push(n),i=t;break}if(null===y[t]){y[t]=n,i=t;break}}if(-1===i)break}const r=v[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=v[t];return void 0===e&&(e=new Zl,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new Zl,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new Zl,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(m=t.getRenderTarget(),i.addEventListener("select",A),i.addEventListener("selectstart",A),i.addEventListener("selectend",A),i.addEventListener("squeeze",A),i.addEventListener("squeezestart",A),i.addEventListener("squeezeend",A),i.addEventListener("end",C),i.addEventListener("inputsourceschange",P),!0!==p.xrCompatible&&await e.makeXRCompatible(),_=t.getPixelRatio(),t.getSize(x),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,e,n),i.updateRenderState({baseLayer:d}),t.setPixelRatio(1),t.setSize(d.framebufferWidth,d.framebufferHeight,!1),g=new Ri(d.framebufferWidth,d.framebufferHeight,{format:Ht,type:Rt,colorSpace:t.outputColorSpace,stencilBuffer:p.stencil})}else{let n=null,s=null,a=null;p.depth&&(a=p.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=p.stencil?Xt:Gt,s=p.stencil?Ft:Dt);const o={colorFormat:e.RGBA8,depthFormat:a,scaleFactor:r};u=new XRWebGLBinding(i,e),h=u.createProjectionLayer(o),i.updateRenderState({layers:[h]}),t.setPixelRatio(1),t.setSize(h.textureWidth,h.textureHeight,!1),g=new Ri(h.textureWidth,h.textureHeight,{format:Ht,type:Rt,depthTexture:new to(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,colorSpace:t.outputColorSpace,samples:p.antialias?4:0});t.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await i.requestReferenceSpace(a),O.setContext(i),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const R=new zi,L=new zi;function N(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;M.near=w.near=b.near=t.near,M.far=w.far=b.far=t.far,E===M.near&&T===M.far||(i.updateRenderState({depthNear:M.near,depthFar:M.far}),E=M.near,T=M.far);const e=t.parent,n=M.cameras;N(M,e);for(let i=0;i<n.length;i++)N(n[i],e);2===n.length?function(t,e,n){R.setFromMatrixPosition(e.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);const i=R.distanceTo(L),r=e.projectionMatrix.elements,s=n.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(s[8]+1)/s[0],d=a*u,f=a*h,p=i/(-u+h),m=p*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+p,v=o+p,y=d-m,x=f+(i-m),_=l*o/v*g,b=c*o/v*g;t.projectionMatrix.makePerspective(y,x,_,b,g,v),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(M,b,w):M.projectionMatrix.copy(b.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld));t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*Zn*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,M,e)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==h||null!==d)return o},this.setFoveation=function(t){o=t,null!==h&&(h.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)};let k=null;const O=new ga;O.setAnimationLoop(function(e,i){if(c=i.getViewerPose(l||s),f=i,null!==c){const e=c.views;null!==d&&(t.setRenderTargetFramebuffer(g,d.framebuffer),t.setRenderTarget(g));let n=!1;e.length!==M.cameras.length&&(M.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let s=null;if(null!==d)s=d.getViewport(r);else{const e=u.getViewSubImage(h,r);s=e.viewport,0===i&&(t.setRenderTargetTextures(g,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(g))}let a=S[i];void 0===a&&(a=new ra,a.layers.enable(i),a.viewport=new Ci,S[i]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(s.x,s.y,s.width,s.height),0===i&&(M.matrix.copy(a.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),!0===n&&M.cameras.push(a)}}for(let t=0;t<v.length;t++){const e=y[t],n=v[t];null!==e&&void 0!==n&&n.update(e,i,l||s)}k&&k(e,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),f=null}),this.setAnimationLoop=function(t){k=t},this.dispose=function(){}}}function Kl(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,r.side===g&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),r.side===g&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const s=e.get(r).envMap;if(s&&(i.envMap.value=s,i.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const e=!0===t._useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*e,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,ta(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,r,s,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(t,r):r.isMeshToonMaterial?(i(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(i(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(i(t,r),function(t,i){t.metalness.value=i.metalness,i.metalnessMap&&(t.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,t.metalnessMapTransform));t.roughness.value=i.roughness,i.roughnessMap&&(t.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,t.roughnessMapTransform));const r=e.get(i).envMap;r&&(t.envMapIntensity.value=i.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,i){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform)));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===g&&t.clearcoatNormalScale.value.negate()));e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform)));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform)));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform));e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,r,o)):r.isMeshMatcapMaterial?(i(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?i(t,r):r.isMeshDistanceMaterial?(i(t,r),function(t,n){const i=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(i.matrixWorld),t.nearDistance.value=i.shadow.camera.near,t.farDistance.value=i.shadow.camera.far}(t,r)):r.isMeshNormalMaterial?i(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,i,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*r,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r,s,a):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Jl(t,e,n,i){let r={},s={},a=[];const o=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(t,e,n,i){const r=t.value,s=e+"_"+n;if(void 0===i[s])return i[s]="number"===typeof r||"boolean"===typeof r?r:r.clone(),!0;{const t=i[s];if("number"===typeof r||"boolean"===typeof r){if(t!==r)return i[s]=r,!0}else if(!1===t.equals(r))return t.copy(r),!0}return!1}function c(t){const e={boundary:0,storage:0};return"number"===typeof t||"boolean"===typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function u(e){const n=e.target;n.removeEventListener("dispose",u);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),t.deleteBuffer(r[n.id]),delete r[n.id],delete s[n.id]}return{bind:function(t,e){const n=e.program;i.uniformBlockBinding(t,n)},update:function(n,h){let d=r[n.id];void 0===d&&(!function(t){const e=t.uniforms;let n=0;const i=16;for(let s=0,a=e.length;s<a;s++){const t=Array.isArray(e[s])?e[s]:[e[s]];for(let e=0,r=t.length;e<r;e++){const r=t[e],s=Array.isArray(r.value)?r.value:[r.value];for(let t=0,e=s.length;t<e;t++){const e=c(s[t]),a=n%i;0!==a&&i-a<e.boundary&&(n+=i-a),r.__data=new Float32Array(e.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,n+=e.storage}}}const r=n%i;r>0&&(n+=i-r);t.__size=n,t.__cache={}}(n),d=function(e){const n=function(){for(let t=0;t<o;t++)if(-1===a.indexOf(t))return a.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const i=t.createBuffer(),r=e.__size,s=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,r,s),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",u));const f=h.program;i.updateUBOMapping(n,f);const p=e.render.frame;s[n.id]!==p&&(!function(e){const n=r[e.id],i=e.uniforms,s=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let r=0,a=i.length;r<a;r++){const e=Array.isArray(i[r])?i[r]:[i[r]];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!0===l(i,r,n,s)){const e=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let s=0;s<n.length;s++){const a=n[s],o=c(a);"number"===typeof a||"boolean"===typeof a?(i.__data[0]=a,t.bufferSubData(t.UNIFORM_BUFFER,e+r,i.__data)):a.isMatrix3?(i.__data[0]=a.elements[0],i.__data[1]=a.elements[1],i.__data[2]=a.elements[2],i.__data[3]=0,i.__data[4]=a.elements[3],i.__data[5]=a.elements[4],i.__data[6]=a.elements[5],i.__data[7]=0,i.__data[8]=a.elements[6],i.__data[9]=a.elements[7],i.__data[10]=a.elements[8],i.__data[11]=0):(a.toArray(i.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,i.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),s[n.id]=p)},dispose:function(){for(const e in r)t.deleteBuffer(r[e]);a=[],r={},s={}}}}class Ql{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:e=hi(),context:n=null,depth:i=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=t;let d;this.isWebGLRenderer=!0,d=null!==n?n.getContextAttributes().alpha:a;const f=new Uint32Array(4),p=new Int32Array(4);let y=null,x=null;const _=[],b=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Je,this._useLegacyLights=!1,this.toneMapping=nt,this.toneMappingExposure=1;const w=this;let S=!1,M=0,E=0,T=null,A=-1,C=null;const P=new Ci,R=new Ci;let L=null;const N=new es(0);let k=0,O=e.width,D=e.height,I=1,z=null,j=null;const U=new Ci(0,0,O,D),F=new Ci(0,0,O,D);let B=!1;const H=new ma;let V=!1,W=!1,G=null;const X=new fr,q=new ri,Z=new zi,Y={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function K(){return null===T?I:1}let J,Q,$,tt,et,it,rt,st,at,ot,lt,ct,ut,ht,dt,ft,pt,mt,gt,vt,yt,xt,_t,bt,wt=n;function St(t,n){for(let i=0;i<t.length;i++){const r=t[i],s=e.getContext(r,n);if(null!==s)return s}return null}try{const t={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r".concat(r)),e.addEventListener("webglcontextlost",Tt,!1),e.addEventListener("webglcontextrestored",At,!1),e.addEventListener("webglcontextcreationerror",Pt,!1),null===wt){const e=["webgl2","webgl","experimental-webgl"];if(!0===w.isWebGL1Renderer&&e.shift(),wt=St(e,t),null===wt)throw St(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&wt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===wt.getShaderPrecisionFormat&&(wt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}function Mt(){J=new Xa(wt),Q=new Ta(wt,J,t),J.init(Q),xt=new Wl(wt,J,Q),$=new Hl(wt,J,Q),tt=new Ya(wt),et=new Cl,it=new Vl(wt,J,$,et,Q,xt,tt),rt=new Ca(w),st=new Ga(w),at=new va(wt,Q),_t=new Ma(wt,J,at,Q),ot=new qa(wt,at,tt,_t),lt=new $a(wt,ot,at,tt),gt=new Qa(wt,Q,it),ft=new Aa(et),ct=new Al(w,rt,st,J,Q,_t,ft),ut=new Kl(w,et),ht=new Nl,dt=new jl(J,Q),mt=new Sa(w,rt,st,$,lt,d,l),pt=new Bl(w,lt,Q),bt=new Jl(wt,tt,Q,$),vt=new Ea(wt,J,tt,Q),yt=new Za(wt,J,tt,Q),tt.programs=ct.programs,w.capabilities=Q,w.extensions=J,w.properties=et,w.renderLists=ht,w.shadowMap=pt,w.state=$,w.info=tt}Mt();const Et=new Yl(w,wt);function Tt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function At(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const t=tt.autoReset,e=pt.enabled,n=pt.autoUpdate,i=pt.needsUpdate,r=pt.type;Mt(),tt.autoReset=t,pt.enabled=e,pt.autoUpdate=n,pt.needsUpdate=i,pt.type=r}function Pt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Lt(t){const e=t.target;e.removeEventListener("dispose",Lt),function(t){(function(t){const e=et.get(t).programs;void 0!==e&&(e.forEach(function(t){ct.releaseProgram(t)}),t.isShaderMaterial&&ct.releaseShaderCache(t))})(t),et.remove(t)}(e)}function Nt(t,e,n){!0===t.transparent&&t.side===v&&!1===t.forceSinglePass?(t.side=g,t.needsUpdate=!0,Qt(t,e,n),t.side=m,t.needsUpdate=!0,Qt(t,e,n),t.side=v):Qt(t,e,n)}this.xr=Et,this.getContext=function(){return wt},this.getContextAttributes=function(){return wt.getContextAttributes()},this.forceContextLoss=function(){const t=J.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=J.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(t){void 0!==t&&(I=t,this.setSize(O,D,!1))},this.getSize=function(t){return t.set(O,D)},this.setSize=function(t,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Et.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(O=t,D=n,e.width=Math.floor(t*I),e.height=Math.floor(n*I),!0===i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(O*I,D*I).floor()},this.setDrawingBufferSize=function(t,n,i){O=t,D=n,I=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(P)},this.getViewport=function(t){return t.copy(U)},this.setViewport=function(t,e,n,i){t.isVector4?U.set(t.x,t.y,t.z,t.w):U.set(t,e,n,i),$.viewport(P.copy(U).multiplyScalar(I).floor())},this.getScissor=function(t){return t.copy(F)},this.setScissor=function(t,e,n,i){t.isVector4?F.set(t.x,t.y,t.z,t.w):F.set(t,e,n,i),$.scissor(R.copy(F).multiplyScalar(I).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(t){$.setScissorTest(B=t)},this.setOpaqueSort=function(t){z=t},this.setTransparentSort=function(t){j=t},this.getClearColor=function(t){return t.copy(mt.getClearColor())},this.setClearColor=function(){mt.setClearColor.apply(mt,arguments)},this.getClearAlpha=function(){return mt.getClearAlpha()},this.setClearAlpha=function(){mt.setClearAlpha.apply(mt,arguments)},this.clear=function(){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let t=!1;if(null!==T){const e=T.texture.format;t=e===Jt||e===Kt||e===Zt}if(t){const t=T.texture.type,e=t===Rt||t===Dt||t===kt||t===Ft||t===jt||t===Ut,n=mt.getClearColor(),i=mt.getClearAlpha(),r=n.r,s=n.g,a=n.b;e?(f[0]=r,f[1]=s,f[2]=a,f[3]=i,wt.clearBufferuiv(wt.COLOR,0,f)):(p[0]=r,p[1]=s,p[2]=a,p[3]=i,wt.clearBufferiv(wt.COLOR,0,p))}else n|=wt.COLOR_BUFFER_BIT}t&&(n|=wt.DEPTH_BUFFER_BIT),e&&(n|=wt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),wt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Tt,!1),e.removeEventListener("webglcontextrestored",At,!1),e.removeEventListener("webglcontextcreationerror",Pt,!1),ht.dispose(),dt.dispose(),et.dispose(),rt.dispose(),st.dispose(),lt.dispose(),_t.dispose(),bt.dispose(),ct.dispose(),Et.dispose(),Et.removeEventListener("sessionstart",Bt),Et.removeEventListener("sessionend",Vt),G&&(G.dispose(),G=null),Wt.stop()},this.renderBufferDirect=function(t,e,n,i,r,s){null===e&&(e=Y);const a=r.isMesh&&r.matrixWorld.determinant()<0,o=function(t,e,n,i,r){!0!==e.isScene&&(e=Y);it.resetTextureUnits();const s=e.fog,a=i.isMeshStandardMaterial?e.environment:null,o=null===T?w.outputColorSpace:!0===T.isXRRenderTarget?T.texture.colorSpace:Qe,l=(i.isMeshStandardMaterial?st:rt).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color;let p=nt;i.toneMapped&&(null!==T&&!0!==T.isXRRenderTarget||(p=w.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,v=et.get(i),y=x.state.lights;if(!0===V&&(!0===W||t!==C)){const e=t===C&&i.id===A;ft.setState(i,t,e)}let _=!1;i.version===v.__version?v.needsLights&&v.lightsStateVersion!==y.state.version||v.outputColorSpace!==o||r.isBatchedMesh&&!1===v.batching?_=!0:r.isBatchedMesh||!0!==v.batching?r.isInstancedMesh&&!1===v.instancing?_=!0:r.isInstancedMesh||!0!==v.instancing?r.isSkinnedMesh&&!1===v.skinning?_=!0:r.isSkinnedMesh||!0!==v.skinning?r.isInstancedMesh&&!0===v.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===v.instancingColor&&null!==r.instanceColor||v.envMap!==l||!0===i.fog&&v.fog!==s?_=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===ft.numPlanes&&v.numIntersection===ft.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==u||v.morphTargets!==h||v.morphNormals!==d||v.morphColors!==f||v.toneMapping!==p||!0===Q.isWebGL2&&v.morphTargetsCount!==g)&&(_=!0):_=!0:_=!0:_=!0:_=!0:(_=!0,v.__version=i.version);let b=v.currentProgram;!0===_&&(b=Qt(i,e,r));let S=!1,M=!1,E=!1;const P=b.getUniforms(),R=v.uniforms;$.useProgram(b.program)&&(S=!0,M=!0,E=!0);i.id!==A&&(A=i.id,M=!0);if(S||C!==t){P.setValue(wt,"projectionMatrix",t.projectionMatrix),P.setValue(wt,"viewMatrix",t.matrixWorldInverse);const e=P.map.cameraPosition;void 0!==e&&e.setValue(wt,Z.setFromMatrixPosition(t.matrixWorld)),Q.logarithmicDepthBuffer&&P.setValue(wt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&P.setValue(wt,"isOrthographic",!0===t.isOrthographicCamera),C!==t&&(C=t,M=!0,E=!0)}if(r.isSkinnedMesh){P.setOptional(wt,r,"bindMatrix"),P.setOptional(wt,r,"bindMatrixInverse");const t=r.skeleton;t&&(Q.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),P.setValue(wt,"boneTexture",t.boneTexture,it)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}r.isBatchedMesh&&(P.setOptional(wt,r,"batchingTexture"),P.setValue(wt,"batchingTexture",r._matricesTexture,it));const L=n.morphAttributes;(void 0!==L.position||void 0!==L.normal||void 0!==L.color&&!0===Q.isWebGL2)&&gt.update(r,n,b);(M||v.receiveShadow!==r.receiveShadow)&&(v.receiveShadow=r.receiveShadow,P.setValue(wt,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);M&&(P.setValue(wt,"toneMappingExposure",w.toneMappingExposure),v.needsLights&&(k=E,(N=R).ambientLightColor.needsUpdate=k,N.lightProbe.needsUpdate=k,N.directionalLights.needsUpdate=k,N.directionalLightShadows.needsUpdate=k,N.pointLights.needsUpdate=k,N.pointLightShadows.needsUpdate=k,N.spotLights.needsUpdate=k,N.spotLightShadows.needsUpdate=k,N.rectAreaLights.needsUpdate=k,N.hemisphereLights.needsUpdate=k),s&&!0===i.fog&&ut.refreshFogUniforms(R,s),ut.refreshMaterialUniforms(R,i,I,D,G),al.upload(wt,$t(v),R,it));var N,k;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(al.upload(wt,$t(v),R,it),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&P.setValue(wt,"center",r.center);if(P.setValue(wt,"modelViewMatrix",r.modelViewMatrix),P.setValue(wt,"normalMatrix",r.normalMatrix),P.setValue(wt,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const t=i.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(Q.isWebGL2){const n=t[e];bt.update(n,b),bt.bind(n,b)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return b}(t,e,n,i,r);$.setMaterial(i,a);let l=n.index,c=1;if(!0===i.wireframe){if(l=ot.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,h=n.attributes.position;let d=u.start*c,f=(u.start+u.count)*c;null!==s&&(d=Math.max(d,s.start*c),f=Math.min(f,(s.start+s.count)*c)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),f=Math.min(f,h.count));const p=f-d;if(p<0||p===1/0)return;let m;_t.setup(r,i,o,n,l);let g=vt;if(null!==l&&(m=at.get(l),g=yt,g.setIndex(m)),r.isMesh)!0===i.wireframe?($.setLineWidth(i.wireframeLinewidth*K()),g.setMode(wt.LINES)):g.setMode(wt.TRIANGLES);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),$.setLineWidth(t*K()),r.isLineSegments?g.setMode(wt.LINES):r.isLineLoop?g.setMode(wt.LINE_LOOP):g.setMode(wt.LINE_STRIP)}else r.isPoints?g.setMode(wt.POINTS):r.isSprite&&g.setMode(wt.TRIANGLES);if(r.isBatchedMesh)g.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else if(r.isInstancedMesh)g.renderInstances(d,p,r.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);g.renderInstances(d,p,e)}else g.render(d,p)},this.compile=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=t),x=dt.get(n),x.init(),b.push(x),n.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(x.pushLight(t),t.castShadow&&x.pushShadow(t))}),t!==n&&t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(x.pushLight(t),t.castShadow&&x.pushShadow(t))}),x.setupLights(w._useLegacyLights);const i=new Set;return t.traverse(function(t){const e=t.material;if(e)if(Array.isArray(e))for(let r=0;r<e.length;r++){const s=e[r];Nt(s,n,t),i.add(s)}else Nt(e,n,t),i.add(e)}),b.pop(),x=null,i},this.compileAsync=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=this.compile(t,e,n);return new Promise(e=>{function n(){i.forEach(function(t){et.get(t).currentProgram.isReady()&&i.delete(t)}),0!==i.size?setTimeout(n,10):e(t)}null!==J.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Ot=null;function Bt(){Wt.stop()}function Vt(){Wt.start()}const Wt=new ga;function Gt(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)x.pushLight(t),t.castShadow&&x.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||H.intersectsSprite(t)){i&&Z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(X);const e=lt.update(t),r=t.material;r.visible&&y.push(t,e,r,n,Z.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||H.intersectsObject(t))){const e=lt.update(t),r=t.material;if(i&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),Z.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),Z.copy(e.boundingSphere.center)),Z.applyMatrix4(t.matrixWorld).applyMatrix4(X)),Array.isArray(r)){const i=e.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=r[a.materialIndex];o&&o.visible&&y.push(t,e,o,n,Z.z,a)}}else r.visible&&y.push(t,e,r,n,Z.z,null)}const r=t.children;for(let s=0,a=r.length;s<a;s++)Gt(r[s],e,n,i)}function Xt(t,e,n,i){const r=t.opaque,s=t.transmissive,a=t.transparent;x.setupLightsView(n),!0===V&&ft.setGlobalState(w.clippingPlanes,n),s.length>0&&function(t,e,n,i){const r=!0===n.isScene?n.overrideMaterial:null;if(null!==r)return;const s=Q.isWebGL2;null===G&&(G=new Ri(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?zt:Rt,minFilter:Ct,samples:s?4:0}));w.getDrawingBufferSize(q),s?G.setSize(q.x,q.y):G.setSize(ti(q.x),ti(q.y));const a=w.getRenderTarget();w.setRenderTarget(G),w.getClearColor(N),k=w.getClearAlpha(),k<1&&w.setClearColor(16777215,.5);w.clear();const o=w.toneMapping;w.toneMapping=nt,qt(t,n,i),it.updateMultisampleRenderTarget(G),it.updateRenderTargetMipmap(G);let l=!1;for(let c=0,u=e.length;c<u;c++){const t=e[c],r=t.object,s=t.geometry,a=t.material,o=t.group;if(a.side===v&&r.layers.test(i.layers)){const t=a.side;a.side=g,a.needsUpdate=!0,Yt(r,n,i,s,a,o),a.side=t,a.needsUpdate=!0,l=!0}}!0===l&&(it.updateMultisampleRenderTarget(G),it.updateRenderTargetMipmap(G));w.setRenderTarget(a),w.setClearColor(N,k),w.toneMapping=o}(r,s,e,n),i&&$.viewport(P.copy(i)),r.length>0&&qt(r,e,n),s.length>0&&qt(s,e,n),a.length>0&&qt(a,e,n),$.buffers.depth.setTest(!0),$.buffers.depth.setMask(!0),$.buffers.color.setMask(!0),$.setPolygonOffset(!1)}function qt(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,s=t.length;r<s;r++){const s=t[r],a=s.object,o=s.geometry,l=null===i?s.material:i,c=s.group;a.layers.test(n.layers)&&Yt(a,e,n,o,l,c)}}function Yt(t,e,n,i,r,s){t.onBeforeRender(w,e,n,i,r,s),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(w,e,n,i,t,s),!0===r.transparent&&r.side===v&&!1===r.forceSinglePass?(r.side=g,r.needsUpdate=!0,w.renderBufferDirect(n,e,i,r,t,s),r.side=m,r.needsUpdate=!0,w.renderBufferDirect(n,e,i,r,t,s),r.side=v):w.renderBufferDirect(n,e,i,r,t,s),t.onAfterRender(w,e,n,i,r,s)}function Qt(t,e,n){!0!==e.isScene&&(e=Y);const i=et.get(t),r=x.state.lights,s=x.state.shadowsArray,a=r.state.version,o=ct.getParameters(t,r.state,s,e,n),l=ct.getProgramCacheKey(o);let c=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?st:rt).get(t.envMap||i.environment),void 0===c&&(t.addEventListener("dispose",Lt),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return te(t,o),u}else o.uniforms=ct.getUniforms(t),t.onBuild(n,o,w),t.onBeforeCompile(o,w),u=ct.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const h=i.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=ft.uniform),te(t,o),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=a,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function $t(t){if(null===t.uniformsList){const e=t.currentProgram.getUniforms();t.uniformsList=al.seqWithValue(e.seq,t.uniforms)}return t.uniformsList}function te(t,e){const n=et.get(t);n.outputColorSpace=e.outputColorSpace,n.batching=e.batching,n.instancing=e.instancing,n.instancingColor=e.instancingColor,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Wt.setAnimationLoop(function(t){Ot&&Ot(t)}),"undefined"!==typeof self&&Wt.setContext(self),this.setAnimationLoop=function(t){Ot=t,Et.setAnimationLoop(t),null===t?Wt.stop():Wt.start()},Et.addEventListener("sessionstart",Bt),Et.addEventListener("sessionend",Vt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===S)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Et.enabled&&!0===Et.isPresenting&&(!0===Et.cameraAutoUpdate&&Et.updateCamera(e),e=Et.getCamera()),!0===t.isScene&&t.onBeforeRender(w,t,e,T),x=dt.get(t,b.length),x.init(),b.push(x),X.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),H.setFromProjectionMatrix(X),W=this.localClippingEnabled,V=ft.init(this.clippingPlanes,W),y=ht.get(t,_.length),y.init(),_.push(y),Gt(t,e,0,w.sortObjects),y.finish(),!0===w.sortObjects&&y.sort(z,j),this.info.render.frame++,!0===V&&ft.beginShadows();const n=x.state.shadowsArray;if(pt.render(n,t,e),!0===V&&ft.endShadows(),!0===this.info.autoReset&&this.info.reset(),mt.render(y,t),x.setupLights(w._useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];Xt(y,t,i,i.viewport)}}else Xt(y,t,e);null!==T&&(it.updateMultisampleRenderTarget(T),it.updateRenderTargetMipmap(T)),!0===t.isScene&&t.onAfterRender(w,t,e),_t.resetDefaultState(),A=-1,C=null,b.pop(),x=b.length>0?b[b.length-1]:null,_.pop(),y=_.length>0?_[_.length-1]:null},this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(t,e,n){et.get(t.texture).__webglTexture=e,et.get(t.depthTexture).__webglTexture=n;const i=et.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=et.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;T=t,M=e,E=n;let i=!0,r=null,s=!1,a=!1;if(t){const o=et.get(t);void 0!==o.__useDefaultFramebuffer?($.bindFramebuffer(wt.FRAMEBUFFER,null),i=!1):void 0===o.__webglFramebuffer?it.setupRenderTarget(t):o.__hasExternalTextures&&it.rebindTextures(t,et.get(t.texture).__webglTexture,et.get(t.depthTexture).__webglTexture);const l=t.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=et.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=Array.isArray(c[e])?c[e][n]:c[e],s=!0):r=Q.isWebGL2&&t.samples>0&&!1===it.useMultisampledRTT(t)?et.get(t).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,P.copy(t.viewport),R.copy(t.scissor),L=t.scissorTest}else P.copy(U).multiplyScalar(I).floor(),R.copy(F).multiplyScalar(I).floor(),L=B;if($.bindFramebuffer(wt.FRAMEBUFFER,r)&&Q.drawBuffers&&i&&$.drawBuffers(t,r),$.viewport(P),$.scissor(R),$.setScissorTest(L),s){const i=et.get(t.texture);wt.framebufferTexture2D(wt.FRAMEBUFFER,wt.COLOR_ATTACHMENT0,wt.TEXTURE_CUBE_MAP_POSITIVE_X+e,i.__webglTexture,n)}else if(a){const i=et.get(t.texture),r=e||0;wt.framebufferTextureLayer(wt.FRAMEBUFFER,wt.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}A=-1},this.readRenderTargetPixels=function(t,e,n,i,r,s,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=et.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){$.bindFramebuffer(wt.FRAMEBUFFER,o);try{const a=t.texture,o=a.format,l=a.type;if(o!==Ht&&xt.convert(o)!==wt.getParameter(wt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===zt&&(J.has("EXT_color_buffer_half_float")||Q.isWebGL2&&J.has("EXT_color_buffer_float"));if(l!==Rt&&xt.convert(l)!==wt.getParameter(wt.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==It||!(Q.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&wt.readPixels(e,n,i,r,xt.convert(o),xt.convert(l),s)}finally{const t=null!==T?et.get(T).__webglFramebuffer:null;$.bindFramebuffer(wt.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),s=Math.floor(e.image.height*i);it.setTexture2D(e,0),wt.copyTexSubImage2D(wt.TEXTURE_2D,n,0,0,t.x,t.y,r,s),$.unbindTexture()},this.copyTextureToTexture=function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=e.image.width,s=e.image.height,a=xt.convert(n.format),o=xt.convert(n.type);it.setTexture2D(n,0),wt.pixelStorei(wt.UNPACK_FLIP_Y_WEBGL,n.flipY),wt.pixelStorei(wt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),wt.pixelStorei(wt.UNPACK_ALIGNMENT,n.unpackAlignment),e.isDataTexture?wt.texSubImage2D(wt.TEXTURE_2D,i,t.x,t.y,r,s,a,o,e.image.data):e.isCompressedTexture?wt.compressedTexSubImage2D(wt.TEXTURE_2D,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):wt.texSubImage2D(wt.TEXTURE_2D,i,t.x,t.y,a,o,e.image),0===i&&n.generateMipmaps&&wt.generateMipmap(wt.TEXTURE_2D),$.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(w.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,o=t.max.z-t.min.z+1,l=xt.convert(i.format),c=xt.convert(i.type);let u;if(i.isData3DTexture)it.setTexture3D(i,0),u=wt.TEXTURE_3D;else{if(!i.isDataArrayTexture&&!i.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");it.setTexture2DArray(i,0),u=wt.TEXTURE_2D_ARRAY}wt.pixelStorei(wt.UNPACK_FLIP_Y_WEBGL,i.flipY),wt.pixelStorei(wt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),wt.pixelStorei(wt.UNPACK_ALIGNMENT,i.unpackAlignment);const h=wt.getParameter(wt.UNPACK_ROW_LENGTH),d=wt.getParameter(wt.UNPACK_IMAGE_HEIGHT),f=wt.getParameter(wt.UNPACK_SKIP_PIXELS),p=wt.getParameter(wt.UNPACK_SKIP_ROWS),m=wt.getParameter(wt.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[r]:n.image;wt.pixelStorei(wt.UNPACK_ROW_LENGTH,g.width),wt.pixelStorei(wt.UNPACK_IMAGE_HEIGHT,g.height),wt.pixelStorei(wt.UNPACK_SKIP_PIXELS,t.min.x),wt.pixelStorei(wt.UNPACK_SKIP_ROWS,t.min.y),wt.pixelStorei(wt.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isData3DTexture?wt.texSubImage3D(u,r,e.x,e.y,e.z,s,a,o,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),wt.compressedTexSubImage3D(u,r,e.x,e.y,e.z,s,a,o,l,g.data)):wt.texSubImage3D(u,r,e.x,e.y,e.z,s,a,o,l,c,g),wt.pixelStorei(wt.UNPACK_ROW_LENGTH,h),wt.pixelStorei(wt.UNPACK_IMAGE_HEIGHT,d),wt.pixelStorei(wt.UNPACK_SKIP_PIXELS,f),wt.pixelStorei(wt.UNPACK_SKIP_ROWS,p),wt.pixelStorei(wt.UNPACK_SKIP_IMAGES,m),0===r&&i.generateMipmaps&&wt.generateMipmap(u),$.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?it.setTextureCube(t,0):t.isData3DTexture?it.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?it.setTexture2DArray(t,0):it.setTexture2D(t,0),$.unbindTexture()},this.resetState=function(){M=0,E=0,T=null,$.reset(),_t.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Hn}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=t===$e?"display-p3":"srgb",e.unpackColorSpace=yi.workingColorSpace===tn?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Je?Ge:We}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===Ge?Je:Qe}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}class $l extends Ql{}$l.prototype.isWebGL1Renderer=!0;class tc{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new es(t),this.density=e}clone(){return new tc(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ec{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new es(t),this.near=e,this.far=n}clone(){return new ec(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class nc extends jr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}}class ic{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Rn,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Yn()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Yn()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Yn()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const rc=new zi;class sc{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)rc.fromBufferAttribute(this,e),rc.applyMatrix4(t),this.setXYZ(e,rc.x,rc.y,rc.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)rc.fromBufferAttribute(this,e),rc.applyNormalMatrix(t),this.setXYZ(e,rc.x,rc.y,rc.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)rc.fromBufferAttribute(this,e),rc.transformDirection(t),this.setXYZ(e,rc.x,rc.y,rc.z);return this}setX(t,e){return this.normalized&&(e=ni(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=ni(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=ni(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=ni(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=ei(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=ei(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=ei(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=ei(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=ni(e,this.array),n=ni(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=ni(e,this.array),n=ni(n,this.array),i=ni(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=ni(e,this.array),n=ni(n,this.array),i=ni(i,this.array),r=ni(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new fs(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new sc(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ac extends rs{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new es(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let oc;const lc=new zi,cc=new zi,uc=new zi,hc=new ri,dc=new ri,fc=new fr,pc=new zi,mc=new zi,gc=new zi,vc=new ri,yc=new ri,xc=new ri;class _c extends jr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ac;if(super(),this.isSprite=!0,this.type="Sprite",void 0===oc){oc=new Ls;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new ic(t,5);oc.setIndex([0,1,2,0,2,3]),oc.setAttribute("position",new sc(e,3,0,!1)),oc.setAttribute("uv",new sc(e,2,3,!1))}this.geometry=oc,this.material=t,this.center=new ri(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),cc.setFromMatrixScale(this.matrixWorld),fc.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),uc.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&cc.multiplyScalar(-uc.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;bc(pc.set(-.5,-.5,0),uc,s,cc,i,r),bc(mc.set(.5,-.5,0),uc,s,cc,i,r),bc(gc.set(.5,.5,0),uc,s,cc,i,r),vc.set(0,0),yc.set(1,0),xc.set(1,1);let a=t.ray.intersectTriangle(pc,mc,gc,!1,lc);if(null===a&&(bc(mc.set(-.5,.5,0),uc,s,cc,i,r),yc.set(0,1),a=t.ray.intersectTriangle(pc,gc,mc,!1,lc),null===a))return;const o=t.ray.origin.distanceTo(lc);o<t.near||o>t.far||e.push({distance:o,point:lc.clone(),uv:Kr.getInterpolation(lc,pc,mc,gc,vc,yc,xc,new ri),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function bc(t,e,n,i,r,s){hc.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(dc.x=s*hc.x-r*hc.y,dc.y=r*hc.x+s*hc.y):dc.copy(hc),t.copy(e),t.x+=dc.x,t.y+=dc.y,t.applyMatrix4(fc)}const wc=new zi,Sc=new zi;class Mc extends jr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,i=e.length;n<i;n++){const t=e[n];this.addLevel(t.object.clone(),t.distance,t.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e=Math.abs(e);const i=this.levels;let r;for(r=0;r<i.length&&!(e<i[r].distance);r++);return i.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i;n++){let i=e[n].distance;if(e[n].object.visible&&(i-=i*e[n].hysteresis),t<i)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){wc.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(wc);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){wc.setFromMatrixPosition(t.matrixWorld),Sc.setFromMatrixPosition(this.matrixWorld);const n=wc.distanceTo(Sc)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r;i++){let t=e[i].distance;if(e[i].object.visible&&(t-=t*e[i].hysteresis),!(n>=t))break;e[i-1].object.visible=!1,e[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const t=n[i];e.object.levels.push({object:t.object.uuid,distance:t.distance,hysteresis:t.hysteresis})}return e}}const Ec=new zi,Tc=new Ci,Ac=new Ci,Cc=new zi,Pc=new fr,Rc=new zi,Lc=new rr,Nc=new fr,kc=new dr;class Oc extends Ys{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ct,this.bindMatrix=new fr,this.bindMatrixInverse=new fr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Fi),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,Rc),this.boundingBox.expandByPoint(Rc)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new rr),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,Rc),this.boundingSphere.expandByPoint(Rc)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Lc.copy(this.boundingSphere),Lc.applyMatrix4(i),!1!==t.ray.intersectsSphere(Lc)&&(Nc.copy(i).invert(),kc.copy(t.ray).applyMatrix4(Nc),null!==this.boundingBox&&!1===kc.intersectsBox(this.boundingBox)||this._computeIntersections(t,e,kc)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ci,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.fromBufferAttribute(e,n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===ct?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ut?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,i=this.geometry;Tc.fromBufferAttribute(i.attributes.skinIndex,t),Ac.fromBufferAttribute(i.attributes.skinWeight,t),Ec.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const t=Ac.getComponent(r);if(0!==t){const i=Tc.getComponent(r);Pc.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(Cc.copy(Ec).applyMatrix4(Pc),t)}}return e.applyMatrix4(this.bindMatrixInverse)}boneTransform(t,e){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(t,e)}}class Dc extends jr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ic extends Ai{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:_t,arguments.length>9&&void 0!==arguments[9]?arguments[9]:_t,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const zc=new fr,jc=new fr;class Uc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Yn(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new fr)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new fr;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=t.length;r<s;r++){const i=t[r]?t[r].matrixWorld:jc;zc.multiplyMatrices(i,e[r]),zc.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new Uc(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Ic(e,t,t,Ht,It);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const i=t.bones[n];let r=e[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new Dc),this.bones.push(r),this.boneInverses.push((new fr).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const s=n[i];t.boneInverses.push(s.toArray())}return t}}class Fc extends fs{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Bc=new fr,Hc=new fr,Vc=[],Wc=new Fi,Gc=new fr,Xc=new Ys,qc=new rr;class Zc extends Ys{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Fc(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Gc)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new Fi),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Bc),Wc.copy(t.boundingBox).applyMatrix4(Bc),this.boundingBox.union(Wc)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new rr),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Bc),qc.copy(t.boundingSphere).applyMatrix4(Bc),this.boundingSphere.union(qc)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(Xc.geometry=this.geometry,Xc.material=this.material,void 0!==Xc.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),qc.copy(this.boundingSphere),qc.applyMatrix4(n),!1!==t.ray.intersectsSphere(qc)))for(let r=0;r<i;r++){this.getMatrixAt(r,Bc),Hc.multiplyMatrices(n,Bc),Xc.matrixWorld=Hc,Xc.raycast(t,Vc);for(let t=0,n=Vc.length;t<n;t++){const n=Vc[t];n.instanceId=r,n.object=this,e.push(n)}Vc.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Fc(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Yc(t,e){return t.z-e.z}function Kc(t,e){return e.z-t.z}class Jc{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e){const n=this.pool,i=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const r=n[this.index];i.push(r),this.index++,r.start=t.start,r.count=t.count,r.z=e}reset(){this.list.length=0,this.index=0}}const Qc="batchId",$c=new fr,tu=new fr,eu=new fr,nu=new fr,iu=new ma,ru=new Fi,su=new rr,au=new zi,ou=new Jc,lu=new Ys,cu=[];function uu(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let s=0;s<r;s++)for(let r=0;r<i;r++)e.setComponent(s+n,r,t.getComponent(s,r))}else e.array.set(t.array,n*i);e.needsUpdate=!0}class hu extends Ys{get maxGeometryCount(){return this._maxGeometryCount}constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*e,i=arguments.length>3?arguments[3]:void 0;super(new Ls,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let t=Math.sqrt(4*this._maxGeometryCount);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Ic(e,t,t,Ht,It);this._matricesTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,i=this._maxGeometryCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(const i in t.attributes){const r=t.getAttribute(i),{array:s,itemSize:a,normalized:o}=r,l=new s.constructor(n*a),c=new r.constructor(l,a,o);c.setUsage(r.usage),e.setAttribute(i,c)}if(null!==t.getIndex()){const t=n>65536?new Uint32Array(r):new Uint16Array(r);e.setIndex(new fs(t,1))}const s=i>65536?new Uint32Array(n):new Uint16Array(n);e.setAttribute(Qc,new fs(s,1)),this._geometryInitialized=!0}}_validateGeometry(t){if(t.getAttribute(Qc))throw new Error('BatchedMesh: Geometry cannot use attribute "'.concat(Qc,'"'));const e=this.geometry;if(Boolean(t.getIndex())!==Boolean(e.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(n===Qc)continue;if(!t.hasAttribute(n))throw new Error('BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));const i=t.getAttribute(n),r=e.getAttribute(n);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Fi);const t=this._geometryCount,e=this.boundingBox,n=this._active;e.makeEmpty();for(let i=0;i<t;i++)!1!==n[i]&&(this.getMatrixAt(i,$c),this.getBoundingBoxAt(i,ru).applyMatrix4($c),e.union(ru))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rr);const t=this._geometryCount,e=this.boundingSphere,n=this._active;e.makeEmpty();for(let i=0;i<t;i++)!1!==n[i]&&(this.getMatrixAt(i,$c),this.getBoundingSphereAt(i,su).applyMatrix4($c),e.union(su))}addGeometry(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(this._initializeGeometry(t),this._validateGeometry(t),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let r=null;const s=this._reservedRanges,a=this._drawRanges,o=this._bounds;0!==this._geometryCount&&(r=s[s.length-1]),i.vertexCount=-1===e?t.getAttribute("position").count:e,i.vertexStart=null===r?0:r.vertexStart+r.vertexCount;const l=t.getIndex(),c=null!==l;if(c&&(i.indexCount=-1===n?l.count:n,i.indexStart=null===r?0:r.indexStart+r.indexCount),-1!==i.indexStart&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const u=this._visibility,h=this._active,d=this._matricesTexture,f=this._matricesTexture.image.data;u.push(!0),h.push(!0);const p=this._geometryCount;this._geometryCount++,eu.toArray(f,16*p),d.needsUpdate=!0,s.push(i),a.push({start:c?i.indexStart:i.vertexStart,count:-1}),o.push({boxInitialized:!1,box:new Fi,sphereInitialized:!1,sphere:new rr});const m=this.geometry.getAttribute(Qc);for(let g=0;g<i.vertexCount;g++)m.setX(i.vertexStart+g,p);return m.needsUpdate=!0,this.setGeometryAt(p,t),p}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,i=null!==n.getIndex(),r=n.getIndex(),s=e.getIndex(),a=this._reservedRanges[t];if(i&&s.count>a.indexCount||e.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const o=a.vertexStart,l=a.vertexCount;for(const d in n.attributes){if(d===Qc)continue;const t=e.getAttribute(d),i=n.getAttribute(d);uu(t,i,o);const r=t.itemSize;for(let e=t.count,n=l;e<n;e++){const t=o+e;for(let e=0;e<r;e++)i.setComponent(t,e,0)}i.needsUpdate=!0}if(i){const t=a.indexStart;for(let e=0;e<s.count;e++)r.setX(t+e,o+s.getX(e));for(let e=s.count,n=a.indexCount;e<n;e++)r.setX(t+e,o);r.needsUpdate=!0}const c=this._bounds[t];null!==e.boundingBox?(c.box.copy(e.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,null!==e.boundingSphere?(c.sphere.copy(e.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const u=this._drawRanges[t],h=e.getAttribute("position");return u.count=i?s.count:h.count,this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._active;return t>=e.length||!1===e[t]||(e[t]=!1,this._visibilityChanged=!0),this}getBoundingBoxAt(t,e){if(!1===this._active[t])return this;const n=this._bounds[t],i=n.box,r=this.geometry;if(!1===n.boxInitialized){i.makeEmpty();const e=r.index,s=r.attributes.position,a=this._drawRanges[t];for(let t=a.start,n=a.start+a.count;t<n;t++){let n=t;e&&(n=e.getX(n)),i.expandByPoint(au.fromBufferAttribute(s,n))}n.boxInitialized=!0}return e.copy(i),e}getBoundingSphereAt(t,e){if(!1===this._active[t])return this;const n=this._bounds[t],i=n.sphere,r=this.geometry;if(!1===n.sphereInitialized){i.makeEmpty(),this.getBoundingBoxAt(t,ru),ru.getCenter(i.center);const e=r.index,s=r.attributes.position,a=this._drawRanges[t];let o=0;for(let t=a.start,n=a.start+a.count;t<n;t++){let n=t;e&&(n=e.getX(n)),au.fromBufferAttribute(s,n),o=Math.max(o,i.center.distanceToSquared(au))}i.radius=Math.sqrt(o),n.sphereInitialized=!0}return e.copy(i),e}setMatrixAt(t,e){const n=this._active,i=this._matricesTexture,r=this._matricesTexture.image.data;return t>=this._geometryCount||!1===n[t]||(e.toArray(r,16*t),i.needsUpdate=!0),this}getMatrixAt(t,e){const n=this._active,i=this._matricesTexture.image.data;return t>=this._geometryCount||!1===n[t]?null:e.fromArray(i,16*t)}setVisibleAt(t,e){const n=this._visibility,i=this._active;return t>=this._geometryCount||!1===i[t]||n[t]===e||(n[t]=e,this._visibilityChanged=!0),this}getVisibleAt(t){const e=this._visibility,n=this._active;return!(t>=this._geometryCount||!1===n[t])&&e[t]}raycast(t,e){const n=this._visibility,i=this._active,r=this._drawRanges,s=this._geometryCount,a=this.matrixWorld,o=this.geometry;lu.material=this.material,lu.geometry.index=o.index,lu.geometry.attributes=o.attributes,null===lu.geometry.boundingBox&&(lu.geometry.boundingBox=new Fi),null===lu.geometry.boundingSphere&&(lu.geometry.boundingSphere=new rr);for(let l=0;l<s;l++){if(!n[l]||!i[l])continue;const s=r[l];lu.geometry.setDrawRange(s.start,s.count),this.getMatrixAt(l,lu.matrixWorld).premultiply(a),this.getBoundingBoxAt(l,lu.geometry.boundingBox),this.getBoundingSphereAt(l,lu.geometry.boundingSphere),lu.raycast(t,cu);for(let t=0,n=cu.length;t<n;t++){const n=cu[t];n.object=this,n.batchId=l,e.push(n)}cu.length=0}lu.material=null,lu.geometry.index=null,lu.geometry.attributes={},lu.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=null!==t.boundingBox?t.boundingBox.clone():null,this.boundingSphere=null!==t.boundingSphere?t.boundingSphere.clone():null,this._drawRanges=t._drawRanges.map(t=>(0,i.A)({},t)),this._reservedRanges=t._reservedRanges.map(t=>(0,i.A)({},t)),this._visibility=t._visibility.slice(),this._active=t._active.slice(),this._bounds=t._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=t._maxGeometryCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(t,e,n,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),a=null===s?1:s.array.BYTES_PER_ELEMENT,o=this._visibility,l=this._multiDrawStarts,c=this._multiDrawCounts,u=this._drawRanges,h=this.perObjectFrustumCulled;h&&(nu.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),iu.setFromProjectionMatrix(nu,t.isWebGPURenderer?Vn:Hn));let d=0;if(this.sortObjects){tu.copy(this.matrixWorld).invert(),au.setFromMatrixPosition(n.matrixWorld).applyMatrix4(tu);for(let n=0,i=o.length;n<i;n++)if(o[n]){this.getMatrixAt(n,$c),this.getBoundingSphereAt(n,su).applyMatrix4($c);let t=!1;if(h&&(t=!iu.intersectsSphere(su)),!t){const t=au.distanceTo(su.center);ou.push(u[n],t)}}const t=ou.list,e=this.customSort;null===e?t.sort(r.transparent?Kc:Yc):e.call(this,t,n);for(let n=0,i=t.length;n<i;n++){const e=t[n];l[d]=e.start*a,c[d]=e.count,d++}ou.reset()}else for(let f=0,p=o.length;f<p;f++)if(o[f]){let t=!1;if(h&&(this.getMatrixAt(f,$c),this.getBoundingSphereAt(f,su).applyMatrix4($c),t=!iu.intersectsSphere(su)),!t){const t=u[f];l[d]=t.start*a,c[d]=t.count,d++}}this._multiDrawCount=d,this._visibilityChanged=!1}onBeforeShadow(t,e,n,i,r,s){this.onBeforeRender(t,null,i,r,s)}}class du extends rs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new es(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const fu=new zi,pu=new zi,mu=new fr,gu=new dr,vu=new rr;class yu extends jr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ls,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new du;super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)fu.fromBufferAttribute(e,t-1),pu.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=fu.distanceTo(pu);t.setAttribute("lineDistance",new ws(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),vu.copy(n.boundingSphere),vu.applyMatrix4(i),vu.radius+=r,!1===t.ray.intersectsSphere(vu))return;mu.copy(i).invert(),gu.copy(t.ray).applyMatrix4(mu);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new zi,c=new zi,u=new zi,h=new zi,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f){for(let n=Math.max(0,s.start),i=Math.min(f.count,s.start+s.count)-1;n<i;n+=d){const i=f.getX(n),r=f.getX(n+1);l.fromBufferAttribute(p,i),c.fromBufferAttribute(p,r);if(gu.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const s=t.ray.origin.distanceTo(h);s<t.near||s>t.far||e.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,s.start),i=Math.min(p.count,s.start+s.count)-1;n<i;n+=d){l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1);if(gu.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(h);i<t.near||i>t.far||e.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const xu=new zi,_u=new zi;class bu extends yu{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)xu.fromBufferAttribute(e,t),_u.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+xu.distanceTo(_u);t.setAttribute("lineDistance",new ws(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wu extends yu{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Su extends rs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new es(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Mu=new fr,Eu=new dr,Tu=new rr,Au=new zi;class Cu extends jr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ls,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Su;super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Tu.copy(n.boundingSphere),Tu.applyMatrix4(i),Tu.radius+=r,!1===t.ray.intersectsSphere(Tu))return;Mu.copy(i).invert(),Eu.copy(t.ray).applyMatrix4(Mu);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,s.start),r=Math.min(l.count,s.start+s.count);n<r;n++){const r=l.getX(n);Au.fromBufferAttribute(c,r),Pu(Au,r,o,i,t,e,this)}}else{for(let n=Math.max(0,s.start),r=Math.min(c.count,s.start+s.count);n<r;n++)Au.fromBufferAttribute(c,n),Pu(Au,n,o,i,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Pu(t,e,n,i,r,s,a){const o=Eu.distanceSqToPoint(t);if(o<n){const n=new zi;Eu.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:e,face:null,object:a})}}class Ru extends Ai{constructor(t,e,n,i,r,s,a,o,l){super(t,e,n,i,r,s,a,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:Et,this.magFilter=void 0!==r?r:Et,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)})}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Lu extends Ai{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=_t,this.minFilter=_t,this.generateMipmaps=!1,this.needsUpdate=!0}}class Nu extends Ai{constructor(t,e,n,i,r,s,a,o,l,c,u,h){super(null,s,a,o,l,c,i,r,u,h),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class ku extends Nu{constructor(t,e,n,i,r,s){super(t,e,n,r,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=yt}}class Ou extends Nu{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,dt),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class Du extends Ai{constructor(t,e,n,i,r,s,a,o,l){super(t,e,n,i,r,s,a,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Iu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const r=n.length;let s;s=e||t*n[r-1];let a,o=0,l=r-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),a=n[i]-s,a<0)o=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const c=n[i];return(i+(s-c)/(n[i+1]-c))/(r-1)}getTangent(t,e){const n=1e-4;let i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),a=this.getPoint(r),o=e||(s.isVector2?new ri:new zi);return o.copy(a).sub(s).normalize(),o}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new zi,i=[],r=[],s=[],a=new zi,o=new fr;for(let d=0;d<=t;d++){const e=d/t;i[d]=this.getTangentAt(e,new zi)}r[0]=new zi,s[0]=new zi;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),s[0].crossVectors(i[0],r[0]);for(let d=1;d<=t;d++){if(r[d]=r[d-1].clone(),s[d]=s[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(Kn(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(o.makeRotationAxis(a,t))}s[d].crossVectors(i[d],r[d])}if(!0===e){let e=Math.acos(Kn(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(a.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],e*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class zu extends Iu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(t,e){const n=e||new ri,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);const a=this.aStartAngle+t*r;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(o,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class ju extends zu{constructor(t,e,n,i,r,s){super(t,e,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}}function Uu(){let t=0,e=0,n=0,i=0;function r(r,s,a,o){t=r,e=a,n=-3*r+3*s-2*a-o,i=2*r-2*s+a+o}return{initCatmullRom:function(t,e,n,i,s){r(e,n,s*(n-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,s,a,o){let l=(e-t)/s-(n-t)/(s+a)+(n-e)/a,c=(n-e)/a-(i-e)/(a+o)+(i-n)/o;l*=a,c*=a,r(e,n,l,c)},calc:function(r){const s=r*r;return t+e*r+n*s+i*(s*r)}}}const Fu=new zi,Bu=new Uu,Hu=new Uu,Vu=new Uu;class Wu extends Iu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=this.points,i=n.length,r=(i-(this.closed?0:1))*t;let s,a,o=Math.floor(r),l=r-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i:0===l&&o===i-1&&(o=i-2,l=1),this.closed||o>0?s=n[(o-1)%i]:(Fu.subVectors(n[0],n[1]).add(n[0]),s=Fu);const c=n[o%i],u=n[(o+1)%i];if(this.closed||o+2<i?a=n[(o+2)%i]:(Fu.subVectors(n[i-1],n[i-2]).add(n[i-1]),a=Fu),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(c),t),n=Math.pow(c.distanceToSquared(u),t),i=Math.pow(u.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),Bu.initNonuniformCatmullRom(s.x,c.x,u.x,a.x,e,n,i),Hu.initNonuniformCatmullRom(s.y,c.y,u.y,a.y,e,n,i),Vu.initNonuniformCatmullRom(s.z,c.z,u.z,a.z,e,n,i)}else"catmullrom"===this.curveType&&(Bu.initCatmullRom(s.x,c.x,u.x,a.x,this.tension),Hu.initCatmullRom(s.y,c.y,u.y,a.y,this.tension),Vu.initCatmullRom(s.z,c.z,u.z,a.z,this.tension));return e.set(Bu.calc(l),Hu.calc(l),Vu.calc(l)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new zi).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Gu(t,e,n,i,r){const s=.5*(i-e),a=.5*(r-n),o=t*t;return(2*n-2*i+s+a)*(t*o)+(-3*n+3*i-2*s-a)*o+s*t+n}function Xu(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function qu(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}class Zu extends Iu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ri,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ri;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return e.set(qu(t,n.x,i.x,r.x,s.x),qu(t,n.y,i.y,r.y,s.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Yu extends Iu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zi,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new zi;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return e.set(qu(t,n.x,i.x,r.x,s.x),qu(t,n.y,i.y,r.y,s.y),qu(t,n.z,i.z,r.z,s.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Ku extends Iu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri).subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ju extends Iu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi).subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Qu extends Iu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ri;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,n=this.v0,i=this.v1,r=this.v2;return e.set(Xu(t,n.x,i.x,r.x),Xu(t,n.y,i.y,r.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class $u extends Iu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zi;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=this.v0,i=this.v1,r=this.v2;return e.set(Xu(t,n.x,i.x,r.x),Xu(t,n.y,i.y,r.y),Xu(t,n.z,i.z,r.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class th extends Iu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,n=this.points,i=(n.length-1)*t,r=Math.floor(i),s=i-r,a=n[0===r?r:r-1],o=n[r],l=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return e.set(Gu(s,a.x,o.x,l.x,c.x),Gu(s,a.y,o.y,l.y,c.y)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new ri).fromArray(n))}return this}}var eh=Object.freeze({__proto__:null,ArcCurve:ju,CatmullRomCurve3:Wu,CubicBezierCurve:Zu,CubicBezierCurve3:Yu,EllipseCurve:zu,LineCurve:Ku,LineCurve3:Ju,QuadraticBezierCurve:Qu,QuadraticBezierCurve3:$u,SplineCurve:th});class nh extends Iu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=!0===t.isVector2?"LineCurve":"LineCurve3";this.curves.push(new eh[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,s=this.curves[r],a=s.getLength(),o=0===a?0:1-t/a;return s.getPointAt(o,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],a=s.isEllipseCurve?2*t:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,o=s.getPoints(a);for(let t=0;t<o.length;t++){const i=o[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new eh[n.type]).fromJSON(n))}return this}}class ih extends nh{constructor(t){super(),this.type="Path",this.currentPoint=new ri,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Ku(this.currentPoint.clone(),new ri(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new Qu(this.currentPoint.clone(),new ri(t,e),new ri(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,s){const a=new Zu(this.currentPoint.clone(),new ri(t,e),new ri(n,i),new ri(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new th(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+a,e+o,n,i,r,s),this}absarc(t,e,n,i,r,s){return this.absellipse(t,e,n,n,i,r,s),this}ellipse(t,e,n,i,r,s,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,s,a,o),this}absellipse(t,e,n,i,r,s,a,o){const l=new zu(t,e,n,i,r,s,a,o);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class rh extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new ri(0,-.5),new ri(.5,0),new ri(0,.5)],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=Kn(i,0,2*Math.PI);const r=[],s=[],a=[],o=[],l=[],c=1/e,u=new zi,h=new ri,d=new zi,f=new zi,p=new zi;let m=0,g=0;for(let v=0;v<=t.length-1;v++)switch(v){case 0:m=t[v+1].x-t[v].x,g=t[v+1].y-t[v].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case t.length-1:o.push(p.x,p.y,p.z);break;default:m=t[v+1].x-t[v].x,g=t[v+1].y-t[v].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),o.push(d.x,d.y,d.z),p.copy(f)}for(let v=0;v<=e;v++){const r=n+v*c*i,d=Math.sin(r),f=Math.cos(r);for(let n=0;n<=t.length-1;n++){u.x=t[n].x*d,u.y=t[n].y,u.z=t[n].x*f,s.push(u.x,u.y,u.z),h.x=v/e,h.y=n/(t.length-1),a.push(h.x,h.y);const i=o[3*n+0]*d,r=o[3*n+1],c=o[3*n+0]*f;l.push(i,r,c)}}for(let v=0;v<e;v++)for(let e=0;e<t.length-1;e++){const n=e+v*t.length,i=n,s=n+t.length,a=n+t.length+1,o=n+1;r.push(i,s,o),r.push(a,o,s)}this.setIndex(r),this.setAttribute("position",new ws(s,3)),this.setAttribute("uv",new ws(a,2)),this.setAttribute("normal",new ws(l,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new rh(t.points,t.segments,t.phiStart,t.phiLength)}}class sh extends rh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const r=new ih;r.absarc(0,-e/2,t,1.5*Math.PI,0),r.absarc(0,e/2,t,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:n,radialSegments:i}}static fromJSON(t){return new sh(t.radius,t.length,t.capSegments,t.radialSegments)}}class ah extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},e=Math.max(3,e);const r=[],s=[],a=[],o=[],l=new zi,c=new ri;s.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let u=0,h=3;u<=e;u++,h+=3){const r=n+u/e*i;l.x=t*Math.cos(r),l.y=t*Math.sin(r),s.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(s[h]/t+1)/2,c.y=(s[h+1]/t+1)/2,o.push(c.x,c.y)}for(let u=1;u<=e;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new ws(s,3)),this.setAttribute("normal",new ws(a,3)),this.setAttribute("uv",new ws(o,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ah(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class oh extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],h=[],d=[];let f=0;const p=[],m=n/2;let g=0;function v(n){const r=f,s=new ri,p=new zi;let v=0;const y=!0===n?t:e,x=!0===n?1:-1;for(let t=1;t<=i;t++)u.push(0,m*x,0),h.push(0,x,0),d.push(.5,.5),f++;const _=f;for(let t=0;t<=i;t++){const e=t/i*o+a,n=Math.cos(e),r=Math.sin(e);p.x=y*r,p.y=m*x,p.z=y*n,u.push(p.x,p.y,p.z),h.push(0,x,0),s.x=.5*n+.5,s.y=.5*r*x+.5,d.push(s.x,s.y),f++}for(let t=0;t<i;t++){const e=r+t,i=_+t;!0===n?c.push(i,i+1,e):c.push(i+1,i,e),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const s=new zi,v=new zi;let y=0;const x=(e-t)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,y=g*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*o+a,l=Math.sin(r),p=Math.cos(r);v.x=y*l,v.y=-g*n+m,v.z=y*p,u.push(v.x,v.y,v.z),s.set(l,x,p).normalize(),h.push(s.x,s.y,s.z),d.push(e,1-g),c.push(f++)}p.push(c)}for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=p[e][t],i=p[e+1][t],r=p[e+1][t+1],s=p[e][t+1];c.push(n,i,s),c.push(i,r,s),y+=6}l.addGroup(g,y,0),g+=y}(),!1===s&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new ws(u,3)),this.setAttribute("normal",new ws(h,3)),this.setAttribute("uv",new ws(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new oh(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class lh extends oh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,t,e,n,i,r,s,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}static fromJSON(t){return new lh(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class ch extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};const r=[],s=[];function a(t,e,n,i){const r=i+1,s=[];for(let a=0;a<=r;a++){s[a]=[];const i=t.clone().lerp(n,a/r),o=e.clone().lerp(n,a/r),l=r-a;for(let t=0;t<=l;t++)s[a][t]=0===t&&a===r?i:i.clone().lerp(o,t/l)}for(let a=0;a<r;a++)for(let t=0;t<2*(r-a)-1;t++){const e=Math.floor(t/2);t%2===0?(o(s[a][e+1]),o(s[a+1][e]),o(s[a][e])):(o(s[a][e+1]),o(s[a+1][e+1]),o(s[a+1][e]))}}function o(t){r.push(t.x,t.y,t.z)}function l(e,n){const i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function c(t,e,n,i){i<0&&1===t.x&&(s[e]=t.x-1),0===n.x&&0===n.z&&(s[e]=i/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}function h(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}!function(t){const n=new zi,i=new zi,r=new zi;for(let s=0;s<e.length;s+=3)l(e[s+0],n),l(e[s+1],i),l(e[s+2],r),a(n,i,r,t)}(i),function(t){const e=new zi;for(let n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){const t=new zi;for(let e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];const n=u(t)/2/Math.PI+.5,i=h(t)/Math.PI+.5;s.push(n,1-i)}(function(){const t=new zi,e=new zi,n=new zi,i=new zi,a=new ri,o=new ri,l=new ri;for(let h=0,d=0;h<r.length;h+=9,d+=6){t.set(r[h+0],r[h+1],r[h+2]),e.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(s[d+0],s[d+1]),o.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),i.copy(t).add(e).add(n).divideScalar(3);const f=u(i);c(a,d+0,t,f),c(o,d+2,e,f),c(l,d+4,n,f)}})(),function(){for(let t=0;t<s.length;t+=6){const e=s[t+0],n=s[t+2],i=s[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(s[t+0]+=1),n<.2&&(s[t+2]+=1),i<.2&&(s[t+4]+=1))}}()}(),this.setAttribute("position",new ws(r,3)),this.setAttribute("normal",new ws(r.slice(),3)),this.setAttribute("uv",new ws(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ch(t.vertices,t.indices,t.radius,t.details)}}class uh extends ch{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new uh(t.radius,t.detail)}}const hh=new zi,dh=new zi,fh=new zi,ph=new Kr;class mh extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,i=Math.pow(10,n),r=Math.cos(qn*e),s=t.getIndex(),a=t.getAttribute("position"),o=s?s.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let t=0;t<o;t+=3){s?(l[0]=s.getX(t),l[1]=s.getX(t+1),l[2]=s.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const{a:e,b:n,c:o}=ph;if(e.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),o.fromBufferAttribute(a,l[2]),ph.getNormal(fh),u[0]="".concat(Math.round(e.x*i),",").concat(Math.round(e.y*i),",").concat(Math.round(e.z*i)),u[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),u[2]="".concat(Math.round(o.x*i),",").concat(Math.round(o.y*i),",").concat(Math.round(o.z*i)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=u[t],i=u[e],s=ph[c[t]],a=ph[c[e]],o="".concat(n,"_").concat(i),f="".concat(i,"_").concat(n);f in h&&h[f]?(fh.dot(h[f].normal)<=r&&(d.push(s.x,s.y,s.z),d.push(a.x,a.y,a.z)),h[f]=null):o in h||(h[o]={index0:l[t],index1:l[e],normal:fh.clone()})}}for(const t in h)if(h[t]){const{index0:e,index1:n}=h[t];hh.fromBufferAttribute(a,e),dh.fromBufferAttribute(a,n),d.push(hh.x,hh.y,hh.z),d.push(dh.x,dh.y,dh.z)}this.setAttribute("position",new ws(d,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class gh extends ih{constructor(t){super(t),this.uuid=Yn(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new ih).fromJSON(n))}return this}}const vh=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=e&&e.length,r=i?e[0]*n:t.length;let s=yh(t,0,r,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,h,d,f;if(i&&(s=function(t,e,n,i){const r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:t.length,c=yh(t,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Ph(c));for(r.sort(Eh),s=0;s<r.length;s++)n=Th(r[s],n);return n}(t,e,s,n)),t.length>80*n){o=c=t[0],l=u=t[1];for(let e=n;e<r;e+=n)h=t[e],d=t[e+1],h<o&&(o=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-o,u-l),f=0!==f?32767/f:0}return _h(s,a,n,o,l,f,0),a};function yh(t,e,n,i,r){let s,a;if(r===function(t,e,n,i){let r=0;for(let s=e,a=n-i;s<n;s+=i)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}(t,e,n,i)>0)for(s=e;s<n;s+=i)a=Uh(s,t[s],t[s+1],a);else for(s=n-i;s>=e;s-=i)a=Uh(s,t[s],t[s+1],a);return a&&kh(a,a.next)&&(Fh(a),a=a.next),a}function xh(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!kh(i,i.next)&&0!==Nh(i.prev,i,i.next))i=i.next;else{if(Fh(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function _h(t,e,n,i,r,s,a){if(!t)return;!a&&s&&function(t,e,n,i){let r=t;do{0===r.z&&(r.z=Ch(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,s,a,o,l,c=1;do{for(n=t,t=null,s=null,a=0;n;){for(a++,i=n,o=0,e=0;e<c&&(o++,i=i.nextZ,i);e++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(a>1)}(r)}(t,i,r,s);let o,l,c=t;for(;t.prev!==t.next;)if(o=t.prev,l=t.next,s?wh(t,i,r,s):bh(t))e.push(o.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),Fh(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?_h(t=Sh(xh(t),e,n),e,n,i,r,s,2):2===a&&Mh(t,e,n,i,r,s):_h(xh(t),e,n,i,r,s,1);break}}function bh(t){const e=t.prev,n=t,i=t.next;if(Nh(e,n,i)>=0)return!1;const r=e.x,s=n.x,a=i.x,o=e.y,l=n.y,c=i.y,u=r<s?r<a?r:a:s<a?s:a,h=o<l?o<c?o:c:l<c?l:c,d=r>s?r>a?r:a:s>a?s:a,f=o>l?o>c?o:c:l>c?l:c;let p=i.next;for(;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&Rh(r,o,s,l,a,c,p.x,p.y)&&Nh(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function wh(t,e,n,i){const r=t.prev,s=t,a=t.next;if(Nh(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,h=s.y,d=a.y,f=o<l?o<c?o:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,m=o>l?o>c?o:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,v=Ch(f,p,e,n,i),y=Ch(m,g,e,n,i);let x=t.prevZ,_=t.nextZ;for(;x&&x.z>=v&&_&&_.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==a&&Rh(o,u,l,h,c,d,x.x,x.y)&&Nh(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==r&&_!==a&&Rh(o,u,l,h,c,d,_.x,_.y)&&Nh(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==a&&Rh(o,u,l,h,c,d,x.x,x.y)&&Nh(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;_&&_.z<=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==r&&_!==a&&Rh(o,u,l,h,c,d,_.x,_.y)&&Nh(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Sh(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!kh(r,s)&&Oh(r,i,i.next,s)&&zh(r,s)&&zh(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),Fh(i),Fh(i.next),i=t=s),i=i.next}while(i!==t);return xh(i)}function Mh(t,e,n,i,r,s){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&Lh(a,t)){let o=jh(a,t);return a=xh(a,a.next),o=xh(o,o.next),_h(a,e,n,i,r,s,0),void _h(o,e,n,i,r,s,0)}t=t.next}a=a.next}while(a!==t)}function Eh(t,e){return t.x-e.x}function Th(t,e){const n=function(t,e){let n,i=e,r=-1/0;const s=t.x,a=t.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){const t=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=s&&t>r&&(r=t,n=i.x<i.next.x?i:i.next,t===s))return n}i=i.next}while(i!==e);if(!n)return null;const o=n,l=n.x,c=n.y;let u,h=1/0;i=n;do{s>=i.x&&i.x>=l&&s!==i.x&&Rh(a<c?s:r,a,l,c,a<c?r:s,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(s-i.x),zh(i,t)&&(u<h||u===h&&(i.x>n.x||i.x===n.x&&Ah(n,i)))&&(n=i,h=u)),i=i.next}while(i!==o);return n}(t,e);if(!n)return e;const i=jh(n,t);return xh(i,i.next),xh(n,n.next)}function Ah(t,e){return Nh(t.prev,t,e.prev)<0&&Nh(e.next,t,t.next)<0}function Ch(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ph(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Rh(t,e,n,i,r,s,a,o){return(r-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(i-o)>=(n-a)*(e-o)&&(n-a)*(s-o)>=(r-a)*(i-o)}function Lh(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Oh(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(zh(t,e)&&zh(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!==n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(Nh(t.prev,t,e.prev)||Nh(t,e.prev,e))||kh(t,e)&&Nh(t.prev,t,t.next)>0&&Nh(e.prev,e,e.next)>0)}function Nh(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function kh(t,e){return t.x===e.x&&t.y===e.y}function Oh(t,e,n,i){const r=Ih(Nh(t,e,n)),s=Ih(Nh(t,e,i)),a=Ih(Nh(n,i,t)),o=Ih(Nh(n,i,e));return r!==s&&a!==o||(!(0!==r||!Dh(t,n,e))||(!(0!==s||!Dh(t,i,e))||(!(0!==a||!Dh(n,t,i))||!(0!==o||!Dh(n,e,i)))))}function Dh(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ih(t){return t>0?1:t<0?-1:0}function zh(t,e){return Nh(t.prev,t,t.next)<0?Nh(t,e,t.next)>=0&&Nh(t,t.prev,e)>=0:Nh(t,e,t.prev)<0||Nh(t,t.next,e)<0}function jh(t,e){const n=new Bh(t.i,t.x,t.y),i=new Bh(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function Uh(t,e,n,i){const r=new Bh(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Fh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Bh(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Hh{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return Hh.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];Vh(t),Wh(n,t);let s=t.length;e.forEach(Vh);for(let o=0;o<e.length;o++)i.push(s),s+=e[o].length,Wh(n,e[o]);const a=vh(n,i);for(let o=0;o<a.length;o+=3)r.push(a.slice(o,o+3));return r}}function Vh(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Wh(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Gh extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gh([new ri(.5,.5),new ri(-.5,.5),new ri(-.5,-.5),new ri(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let a=0,o=t.length;a<o;a++){s(t[a])}function s(t){const s=[],a=void 0!==e.curveSegments?e.curveSegments:12,o=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:1;let c=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:.2,h=void 0!==e.bevelSize?e.bevelSize:u-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,f=void 0!==e.bevelSegments?e.bevelSegments:3;const p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Xh;let g,v,y,x,_,b=!1;p&&(g=p.getSpacedPoints(o),b=!0,c=!1,v=p.computeFrenetFrames(o,!1),y=new zi,x=new zi,_=new zi),c||(f=0,u=0,h=0,d=0);const w=t.extractPoints(a);let S=w.shape;const M=w.holes;if(!Hh.isClockWise(S)){S=S.reverse();for(let t=0,e=M.length;t<e;t++){const e=M[t];Hh.isClockWise(e)&&(M[t]=e.reverse())}}const E=Hh.triangulateShape(S,M),T=S;for(let e=0,n=M.length;e<n;e++){const t=M[e];S=S.concat(t)}function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,n)}const C=S.length,P=E.length;function R(t,e,n){let i,r,s;const a=t.x-e.x,o=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=a*a+o*o,h=a*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=e.x-o/h,p=e.y+a/h,m=((n.x-c/d-f)*c-(n.y+l/d-p)*l)/(a*c-o*l);i=f+a*m-t.x,r=p+o*m-t.y;const g=i*i+r*r;if(g<=2)return new ri(i,r);s=Math.sqrt(g/2)}else{let t=!1;a>Number.EPSILON?l>Number.EPSILON&&(t=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(c)&&(t=!0),t?(i=-o,r=a,s=Math.sqrt(u)):(i=a,r=o,s=Math.sqrt(u/2))}return new ri(i/s,r/s)}const L=[];for(let e=0,n=T.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),L[e]=R(T[e],T[i],T[r]);const N=[];let k,O=L.concat();for(let e=0,n=M.length;e<n;e++){const t=M[e];k=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),k[e]=R(t[e],t[i],t[r]);N.push(k),O=O.concat(k)}for(let e=0;e<f;e++){const t=e/f,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,r=T.length;e<r;e++){const t=A(T[e],L[e],i);z(t.x,t.y,-n)}for(let e=0,r=M.length;e<r;e++){const t=M[e];k=N[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],k[e],i);z(r.x,r.y,-n)}}}const D=h+d;for(let e=0;e<C;e++){const t=c?A(S[e],O[e],D):S[e];b?(x.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),_.copy(g[0]).add(x).add(y),z(_.x,_.y,_.z)):z(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<C;t++){const n=c?A(S[t],O[t],D):S[t];b?(x.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),_.copy(g[e]).add(x).add(y),z(_.x,_.y,_.z)):z(n.x,n.y,l/o*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,r=T.length;e<r;e++){const t=A(T[e],L[e],i);z(t.x,t.y,l+n)}for(let e=0,r=M.length;e<r;e++){const t=M[e];k=N[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],k[e],i);b?z(r.x,r.y+g[o-1].y,g[o-1].x+n):z(r.x,r.y,l+n)}}}function I(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=o+2*f;t<n;t++){const n=C*t,s=C*(t+1);U(e+i+n,e+r+n,e+r+s,e+i+s)}}}function z(t,e,n){s.push(t),s.push(e),s.push(n)}function j(t,e,r){F(t),F(e),F(r);const s=i.length/3,a=m.generateTopUV(n,i,s-3,s-2,s-1);B(a[0]),B(a[1]),B(a[2])}function U(t,e,r,s){F(t),F(e),F(s),F(e),F(r),F(s);const a=i.length/3,o=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);B(o[0]),B(o[1]),B(o[3]),B(o[1]),B(o[2]),B(o[3])}function F(t){i.push(s[3*t+0]),i.push(s[3*t+1]),i.push(s[3*t+2])}function B(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(c){let t=0,e=C*t;for(let n=0;n<P;n++){const t=E[n];j(t[2]+e,t[1]+e,t[0]+e)}t=o+2*f,e=C*t;for(let n=0;n<P;n++){const t=E[n];j(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<P;t++){const e=E[t];j(e[2],e[1],e[0])}for(let t=0;t<P;t++){const e=E[t];j(e[0]+C*o,e[1]+C*o,e[2]+C*o)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;I(T,e),e+=T.length;for(let n=0,i=M.length;n<i;n++){const t=M[n];I(t,e),e+=t.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new ws(i,3)),this.setAttribute("uv",new ws(r,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const e=t[i];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);n.options=Object.assign({},e),void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let r=0,s=t.shapes.length;r<s;r++){const i=e[t.shapes[r]];n.push(i)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new eh[i.type]).fromJSON(i)),new Gh(n,t.options)}}const Xh={generateTopUV:function(t,e,n,i,r){const s=e[3*n],a=e[3*n+1],o=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new ri(s,a),new ri(o,l),new ri(c,u)]},generateSideWallUV:function(t,e,n,i,r,s){const a=e[3*n],o=e[3*n+1],l=e[3*n+2],c=e[3*i],u=e[3*i+1],h=e[3*i+2],d=e[3*r],f=e[3*r+1],p=e[3*r+2],m=e[3*s],g=e[3*s+1],v=e[3*s+2];return Math.abs(o-u)<Math.abs(a-c)?[new ri(a,1-l),new ri(c,1-h),new ri(d,1-p),new ri(m,1-v)]:[new ri(o,1-l),new ri(u,1-h),new ri(f,1-p),new ri(g,1-v)]}};class qh extends ch{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new qh(t.radius,t.detail)}}class Zh extends ch{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Zh(t.radius,t.detail)}}class Yh extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},n=Math.max(3,n),i=Math.max(1,i);const a=[],o=[],l=[],c=[];let u=t;const h=(e-t)/i,d=new zi,f=new ri;for(let p=0;p<=i;p++){for(let t=0;t<=n;t++){const i=r+t/n*s;d.x=u*Math.cos(i),d.y=u*Math.sin(i),o.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/e+1)/2,f.y=(d.y/e+1)/2,c.push(f.x,f.y)}u+=h}for(let p=0;p<i;p++){const t=p*(n+1);for(let e=0;e<n;e++){const i=e+t,r=i,s=i+n+1,o=i+n+2,l=i+1;a.push(r,s,l),a.push(s,o,l)}}this.setIndex(a),this.setAttribute("position",new ws(o,3)),this.setAttribute("normal",new ws(l,3)),this.setAttribute("uv",new ws(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Yh(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class Kh extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gh([new ri(0,.5),new ri(-.5,-.5),new ri(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],s=[];let a=0,o=0;if(!1===Array.isArray(t))l(t);else for(let c=0;c<t.length;c++)l(t[c]),this.addGroup(a,o,c),a+=o,o=0;function l(t){const a=i.length/3,l=t.extractPoints(e);let c=l.shape;const u=l.holes;!1===Hh.isClockWise(c)&&(c=c.reverse());for(let e=0,n=u.length;e<n;e++){const t=u[e];!0===Hh.isClockWise(t)&&(u[e]=t.reverse())}const h=Hh.triangulateShape(c,u);for(let e=0,n=u.length;e<n;e++){const t=u[e];c=c.concat(t)}for(let e=0,n=c.length;e<n;e++){const t=c[e];i.push(t.x,t.y,0),r.push(0,0,1),s.push(t.x,t.y)}for(let e=0,i=h.length;e<i;e++){const t=h[e],i=t[0]+a,r=t[1]+a,s=t[2]+a;n.push(i,r,s),o+=3}}this.setIndex(n),this.setAttribute("position",new ws(i,3)),this.setAttribute("normal",new ws(r,3)),this.setAttribute("uv",new ws(s,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new Kh(n,t.curveSegments)}}class Jh extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const o=Math.min(s+a,Math.PI);let l=0;const c=[],u=new zi,h=new zi,d=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0===g&&0===s?y=.5/e:g===n&&o===Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const o=n/e;u.x=-t*Math.cos(i+o*r)*Math.sin(s+v*a),u.y=t*Math.cos(s+v*a),u.z=t*Math.sin(i+o*r)*Math.sin(s+v*a),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(o+y,1-v),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=c[g][t+1],i=c[g][t],r=c[g+1][t],a=c[g+1][t+1];(0!==g||s>0)&&d.push(e,i,a),(g!==n-1||o<Math.PI)&&d.push(i,r,a)}this.setIndex(d),this.setAttribute("position",new ws(f,3)),this.setAttribute("normal",new ws(p,3)),this.setAttribute("uv",new ws(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Jh(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Qh extends ch{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Qh(t.radius,t.detail)}}class $h extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const s=[],a=[],o=[],l=[],c=new zi,u=new zi,h=new zi;for(let d=0;d<=n;d++)for(let s=0;s<=i;s++){const f=s/i*r,p=d/n*Math.PI*2;u.x=(t+e*Math.cos(p))*Math.cos(f),u.y=(t+e*Math.cos(p))*Math.sin(f),u.z=e*Math.sin(p),a.push(u.x,u.y,u.z),c.x=t*Math.cos(f),c.y=t*Math.sin(f),h.subVectors(u,c).normalize(),o.push(h.x,h.y,h.z),l.push(s/i),l.push(d/n)}for(let d=1;d<=n;d++)for(let t=1;t<=i;t++){const e=(i+1)*d+t-1,n=(i+1)*(d-1)+t-1,r=(i+1)*(d-1)+t,a=(i+1)*d+t;s.push(e,n,a),s.push(n,r,a)}this.setIndex(s),this.setAttribute("position",new ws(a,3)),this.setAttribute("normal",new ws(o,3)),this.setAttribute("uv",new ws(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new $h(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class td extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);const a=[],o=[],l=[],c=[],u=new zi,h=new zi,d=new zi,f=new zi,p=new zi,m=new zi,g=new zi;for(let y=0;y<=n;++y){const a=y/n*r*Math.PI*2;v(a,r,s,t,d),v(a+.01,r,s,t,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let t=0;t<=i;++t){const r=t/i*Math.PI*2,s=-e*Math.cos(r),a=e*Math.sin(r);u.x=d.x+(s*g.x+a*p.x),u.y=d.y+(s*g.y+a*p.y),u.z=d.z+(s*g.z+a*p.z),o.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(y/n),c.push(t/i)}}for(let y=1;y<=n;y++)for(let t=1;t<=i;t++){const e=(i+1)*(y-1)+(t-1),n=(i+1)*y+(t-1),r=(i+1)*y+t,s=(i+1)*(y-1)+t;a.push(e,n,s),a.push(n,r,s)}function v(t,e,n,i,r){const s=Math.cos(t),a=Math.sin(t),o=n/e*t,l=Math.cos(o);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new ws(o,3)),this.setAttribute("normal",new ws(l,3)),this.setAttribute("uv",new ws(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new td(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class ed extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $u(new zi(-1,-1,0),new zi(-1,1,0),new zi(1,1,0)),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};const s=t.computeFrenetFrames(e,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new zi,o=new zi,l=new ri;let c=new zi;const u=[],h=[],d=[],f=[];function p(r){c=t.getPointAt(r/e,c);const l=s.normals[r],d=s.binormals[r];for(let t=0;t<=i;t++){const e=t/i*Math.PI*2,r=Math.sin(e),s=-Math.cos(e);o.x=s*l.x+r*d.x,o.y=s*l.y+r*d.y,o.z=s*l.z+r*d.z,o.normalize(),h.push(o.x,o.y,o.z),a.x=c.x+n*o.x,a.y=c.y+n*o.y,a.z=c.z+n*o.z,u.push(a.x,a.y,a.z)}}!function(){for(let t=0;t<e;t++)p(t);p(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=i;n++)l.x=t/e,l.y=n/i,d.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),s=(i+1)*t+e,a=(i+1)*(t-1)+e;f.push(n,r,a),f.push(r,s,a)}}()}(),this.setIndex(f),this.setAttribute("position",new ws(u,3)),this.setAttribute("normal",new ws(h,3)),this.setAttribute("uv",new ws(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new ed((new eh[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class nd extends Ls{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,i=new zi,r=new zi;if(null!==t.index){const s=t.attributes.position,a=t.index;let o=t.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,l=o.length;t<l;++t){const l=o[t],c=l.start;for(let t=c,o=c+l.count;t<o;t+=3)for(let l=0;l<3;l++){const o=a.getX(t+l),c=a.getX(t+(l+1)%3);i.fromBufferAttribute(s,o),r.fromBufferAttribute(s,c),!0===id(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const s=t.attributes.position;for(let t=0,a=s.count/3;t<a;t++)for(let o=0;o<3;o++){const a=3*t+o,l=3*t+(o+1)%3;i.fromBufferAttribute(s,a),r.fromBufferAttribute(s,l),!0===id(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new ws(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function id(t,e,n){const i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z),r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var rd=Object.freeze({__proto__:null,BoxGeometry:Js,CapsuleGeometry:sh,CircleGeometry:ah,ConeGeometry:lh,CylinderGeometry:oh,DodecahedronGeometry:uh,EdgesGeometry:mh,ExtrudeGeometry:Gh,IcosahedronGeometry:qh,LatheGeometry:rh,OctahedronGeometry:Zh,PlaneGeometry:ya,PolyhedronGeometry:ch,RingGeometry:Yh,ShapeGeometry:Kh,SphereGeometry:Jh,TetrahedronGeometry:Qh,TorusGeometry:$h,TorusKnotGeometry:td,TubeGeometry:ed,WireframeGeometry:nd});class sd extends rs{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new es(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class ad extends na{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class od extends rs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new es(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new es(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ze,this.normalScale=new ri(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ld extends od{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ri(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Kn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new es(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new es(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new es(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!==t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!==t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!==t>0&&this.version++,this._iridescence=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!==t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!==t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class cd extends rs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new es(16777215),this.specular=new es(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new es(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ze,this.normalScale=new ri(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ud extends rs{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new es(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new es(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ze,this.normalScale=new ri(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class hd extends rs{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ze,this.normalScale=new ri(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class dd extends rs{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new es(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new es(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ze,this.normalScale=new ri(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class fd extends rs{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new es(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ze,this.normalScale=new ri(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class pd extends du{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function md(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function gd(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vd(t){const e=t.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort(function(e,n){return t[e]-t[n]}),n}function yd(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,a=0;a!==i;++s){const i=n[s]*e;for(let n=0;n!==e;++n)r[a++]=t[i+n]}return r}function xd(t,e,n,i){let r=1,s=t[0];for(;void 0!==s&&void 0===s[i];)s=t[r++];if(void 0===s)return;let a=s[i];if(void 0!==a)if(Array.isArray(a))do{a=s[i],void 0!==a&&(e.push(s.time),n.push.apply(n,a)),s=t[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[i],void 0!==a&&(e.push(s.time),a.toArray(n,n.length)),s=t[r++]}while(void 0!==s);else do{a=s[i],void 0!==a&&(e.push(s.time),n.push(a)),s=t[r++]}while(void 0!==s)}const _d={convertArray:md,isTypedArray:gd,getKeyframeOrder:vd,sortedArray:yd,flattenJSON:xd,subclip:function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const s=t.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const t=s.tracks[l],e=t.getValueSize(),o=[],c=[];for(let s=0;s<t.times.length;++s){const a=t.times[s]*r;if(!(a<n||a>=i)){o.push(t.times[s]);for(let n=0;n<e;++n)c.push(t.values[s*e+n])}}0!==o.length&&(t.times=md(o,t.times.constructor),t.values=md(c,t.values.constructor),a.push(t))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let a=0;a<r;++a){const e=n.tracks[a],i=e.ValueTypeName;if("bool"===i||"string"===i)continue;const r=t.tracks.find(function(t){return t.name===e.name&&t.ValueTypeName===i});if(void 0===r)continue;let o=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=e.times.length-1;let d;if(s<=e.times[0]){const t=o,n=l-o;d=e.values.slice(t,n)}else if(s>=e.times[h]){const t=h*l+o,n=t+l-o;d=e.values.slice(t,n)}else{const t=e.createInterpolant(),n=o,i=l-o;t.evaluate(s),d=t.resultBuffer.slice(n,i)}if("quaternion"===i){(new Ii).fromArray(d).normalize().conjugate().toArray(d)}const f=r.times.length;for(let t=0;t<f;++t){const e=t*u+c;if("quaternion"===i)Ii.multiplyQuaternionsFlat(r.values,e,d,0,r.values,e);else{const t=u-2*c;for(let n=0;n<t;++n)r.values[e+n]-=d[n]}}}return t.blendMode=Fe,t}};class bd{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let s;n:{i:if(!(t<i)){for(let s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}s=e.length;break n}if(!(t>=r)){const a=e[1];t<a&&(n=2,r=a);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}s=n,n=0;break n}break t}for(;n<s;){const i=n+s>>>1;t<e[i]?s=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let s=0;s!==i;++s)e[s]=n[r+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class wd extends bd{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ie,endingEnd:Ie}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,s=t+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case ze:r=t,a=2*e-n;break;case je:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case ze:s=t,o=2*n-e;break;case je:s=1,o=n+i[1]-i[0];break;default:s=t-1,o=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-e)/(i-e),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,x=d*m-d*p;for(let _=0;_!==a;++_)r[_]=g*s[c+_]+v*s[l+_]+y*s[o+_]+x*s[u+_];return r}}class Sd extends bd{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,c=(n-e)/(i-e),u=1-c;for(let h=0;h!==a;++h)r[h]=s[l+h]*u+s[o+h]*c;return r}}class Md extends bd{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ed{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=md(e,this.TimeBufferType),this.values=md(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:md(t.times,Array),values:md(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Md(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Sd(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new wd(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case ke:e=this.InterpolantFactoryMethodDiscrete;break;case Oe:e=this.InterpolantFactoryMethodLinear;break;case De:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ke;case this.InterpolantFactoryMethodLinear:return Oe;case this.InterpolantFactoryMethodSmooth:return De}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const t=this.getValueSize();this.times=n.slice(r,s),this.values=this.values.slice(r*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let a=0;a!==r;a++){const e=n[a];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,e),t=!1;break}if(null!==s&&s>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,e,s),t=!1;break}s=e}if(void 0!==i&&gd(i))for(let a=0,o=i.length;a!==o;++a){const e=i[a];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,e),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===De,r=t.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=t[a];if(o!==t[a+1]&&(1!==a||o!==t[0]))if(i)r=!0;else{const t=a*n,i=t-n,s=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[i+a]||n!==e[s+a]){r=!0;break}}}if(r){if(a!==s){t[s]=t[a];const i=a*n,r=s*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++s}}if(r>0){t[s]=t[r];for(let t=r*n,i=s*n,a=0;a!==n;++a)e[i+a]=e[t+a];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}Ed.prototype.TimeBufferType=Float32Array,Ed.prototype.ValueBufferType=Float32Array,Ed.prototype.DefaultInterpolation=Oe;class Td extends Ed{}Td.prototype.ValueTypeName="bool",Td.prototype.ValueBufferType=Array,Td.prototype.DefaultInterpolation=ke,Td.prototype.InterpolantFactoryMethodLinear=void 0,Td.prototype.InterpolantFactoryMethodSmooth=void 0;class Ad extends Ed{}Ad.prototype.ValueTypeName="color";class Cd extends Ed{}Cd.prototype.ValueTypeName="number";class Pd extends bd{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-e)/(i-e);let l=t*a;for(let c=l+a;l!==c;l+=4)Ii.slerpFlat(r,0,s,l-a,s,l,o);return r}}class Rd extends Ed{InterpolantFactoryMethodLinear(t){return new Pd(this.times,this.values,this.getValueSize(),t)}}Rd.prototype.ValueTypeName="quaternion",Rd.prototype.DefaultInterpolation=Oe,Rd.prototype.InterpolantFactoryMethodSmooth=void 0;class Ld extends Ed{}Ld.prototype.ValueTypeName="string",Ld.prototype.ValueBufferType=Array,Ld.prototype.DefaultInterpolation=ke,Ld.prototype.InterpolantFactoryMethodLinear=void 0,Ld.prototype.InterpolantFactoryMethodSmooth=void 0;class Nd extends Ed{}Nd.prototype.ValueTypeName="vector";class kd{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ue;this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=Yn(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let s=0,a=n.length;s!==a;++s)e.push(Od(n[s]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,s=n.length;r!==s;++r)e.push(Ed.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,s=[];for(let a=0;a<r;a++){let t=[],o=[];t.push((a+r-1)%r,a,(a+1)%r),o.push(0,1,0);const l=vd(t);t=yd(t,1,l),o=yd(o,1,l),i||0!==t[0]||(t.push(r),o.push(o[0])),s.push(new Cd(".morphTargetInfluences["+e[a].name+"]",t,o).scale(1/n))}return new this(t,-1,s)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,o=t.length;a<o;a++){const e=t[a],n=e.name.match(r);if(n&&n.length>1){const t=n[1];let r=i[t];r||(i[t]=r=[]),r.push(e)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],e,n));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const s=[],a=[];xd(n,s,a,i),0!==s.length&&r.push(new t(e,s,a))}},i=[],r=t.name||"default",s=t.fps||30,a=t.blendMode;let o=t.length||-1;const l=t.hierarchy||[];for(let c=0;c<l.length;c++){const t=l[c].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let i=0;i<t[n].morphTargets.length;i++)e[t[n].morphTargets[i]]=-1;for(const r in e){const e=[],s=[];for(let i=0;i!==t[n].morphTargets.length;++i){const i=t[n];e.push(i.time),s.push(i.morphTarget===r?1:0)}i.push(new Cd(".morphTargetInfluence["+r+"]",e,s))}o=e.length*s}else{const r=".bones["+e[c].name+"]";n(Nd,r+".position",t,"pos",i),n(Rd,r+".quaternion",t,"rot",i),n(Nd,r+".scale",t,"scl",i)}}if(0===i.length)return null;return new this(r,o,i,a)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Od(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cd;case"vector":case"vector2":case"vector3":case"vector4":return Nd;case"color":return Ad;case"quaternion":return Rd;case"bool":case"boolean":return Td;case"string":return Ld}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];xd(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Dd={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Id{constructor(t,e,n){const i=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===s&&void 0!==i.onStart&&i.onStart(t,a,o),s=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}}const zd=new Id;class jd{constructor(t){this.manager=void 0!==t?t:zd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(i,r){n.load(t,i,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}jd.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ud={};class Fd extends Error{constructor(t,e){super(t),this.response=e}}class Bd extends jd{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Dd.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(void 0!==Ud[t])return void Ud[t].push({onLoad:e,onProgress:n,onError:i});Ud[t]=[],Ud[t].push({onLoad:e,onProgress:n,onError:i});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then(e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=Ud[t],i=e.body.getReader(),r=e.headers.get("Content-Length")||e.headers.get("X-File-Size"),s=r?parseInt(r):0,a=0!==s;let o=0;const l=new ReadableStream({start(t){!function e(){i.read().then(i=>{let{done:r,value:l}=i;if(r)t.close();else{o+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(l),e()}})}()}});return new Response(l)}throw new Fd('fetch for "'.concat(e.url,'" responded with ').concat(e.status,": ").concat(e.statusText),e)}).then(t=>{switch(o){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then(t=>(new DOMParser).parseFromString(t,a));case"json":return t.json();default:if(void 0===a)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(a),n=e&&e[1]?e[1].toLowerCase():void 0,i=new TextDecoder(n);return t.arrayBuffer().then(t=>i.decode(t))}}}).then(e=>{Dd.add(t,e);const n=Ud[t];delete Ud[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}}).catch(e=>{const n=Ud[t];if(void 0===n)throw this.manager.itemError(t),e;delete Ud[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Hd extends jd{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new Bd(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(s){i?i(s):console.error(s),r.manager.itemError(t)}},n,i)}parse(t){const e=[];for(let n=0;n<t.length;n++){const i=kd.parse(t[n]);e.push(i)}return e}}class Vd extends jd{constructor(t){super(t)}load(t,e,n,i){const r=this,s=[],a=new Nu,o=new Bd(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(t[c],function(t){const n=r.parse(t,!0);s[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=Et),a.image=s,a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,i)}if(Array.isArray(t))for(let u=0,h=t.length;u<h;++u)c(u);else o.load(t,function(t){const n=r.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){s[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)s[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),s[e].format=n.format,s[e].width=n.width,s[e].height=n.height}a.image=s}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Et),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,i);return a}}class Wd extends jd{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Dd.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;const a=ui("img");function o(){c(),Dd.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){c(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a}}class Gd extends jd{constructor(t){super(t)}load(t,e,n,i){const r=new oa;r.colorSpace=Je;const s=new Wd(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(n){s.load(t[n],function(t){r.images[n]=t,a++,6===a&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(let l=0;l<t.length;++l)o(l);return r}}class Xd extends jd{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new Ic,a=new Bd(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(t,function(t){let n;try{n=r.parse(t)}catch(a){if(void 0===i)return void console.error(a);i(a)}void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:yt,s.wrapT=void 0!==n.wrapT?n.wrapT:yt,s.magFilter=void 0!==n.magFilter?n.magFilter:Et,s.minFilter=void 0!==n.minFilter?n.minFilter:Et,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?s.colorSpace=n.colorSpace:void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=Ct),1===n.mipmapCount&&(s.minFilter=Et),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,e&&e(s,n)},n,i),s}}class qd extends jd{constructor(t){super(t)}load(t,e,n,i){const r=new Ai,s=new Wd(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r}}class Zd extends jr{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new es(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}class Yd extends Zd{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(jr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new es(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const Kd=new fr,Jd=new zi,Qd=new zi;class $d{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ri(512,512),this.map=null,this.mapPass=null,this.matrix=new fr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ma,this._frameExtents=new ri(1,1),this._viewportCount=1,this._viewports=[new Ci(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Jd.setFromMatrixPosition(t.matrixWorld),e.position.copy(Jd),Qd.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Qd),e.updateMatrixWorld(),Kd.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Kd),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Kd)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class tf extends $d{constructor(){super(new ra(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*Zn*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class ef extends Zd{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(jr.DEFAULT_UP),this.updateMatrix(),this.target=new jr,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new tf}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const nf=new fr,rf=new zi,sf=new zi;class af extends $d{constructor(){super(new ra(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ri(4,2),this._viewportCount=6,this._viewports=[new Ci(2,1,1,1),new Ci(0,1,1,1),new Ci(3,1,1,1),new Ci(1,1,1,1),new Ci(3,0,1,1),new Ci(1,0,1,1)],this._cubeDirections=[new zi(1,0,0),new zi(-1,0,0),new zi(0,0,1),new zi(0,0,-1),new zi(0,1,0),new zi(0,-1,0)],this._cubeUps=[new zi(0,1,0),new zi(0,1,0),new zi(0,1,0),new zi(0,1,0),new zi(0,0,1),new zi(0,0,-1)]}updateMatrices(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),rf.setFromMatrixPosition(t.matrixWorld),n.position.copy(rf),sf.copy(n.position),sf.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(sf),n.updateMatrixWorld(),i.makeTranslation(-rf.x,-rf.y,-rf.z),nf.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nf)}}class of extends Zd{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new af}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class lf extends $d{constructor(){super(new Pa(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class cf extends Zd{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(jr.DEFAULT_UP),this.updateMatrix(),this.target=new jr,this.shadow=new lf}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class uf extends Zd{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class hf extends Zd{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class df{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new zi)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.282095),e.addScaledVector(s[1],.488603*i),e.addScaledVector(s[2],.488603*r),e.addScaledVector(s[3],.488603*n),e.addScaledVector(s[4],n*i*1.092548),e.addScaledVector(s[5],i*r*1.092548),e.addScaledVector(s[6],.315392*(3*r*r-1)),e.addScaledVector(s[7],n*r*1.092548),e.addScaledVector(s[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.886227),e.addScaledVector(s[1],1.023328*i),e.addScaledVector(s[2],1.023328*r),e.addScaledVector(s[3],1.023328*n),e.addScaledVector(s[4],.858086*n*i),e.addScaledVector(s[5],.858086*i*r),e.addScaledVector(s[6],.743125*r*r-.247708),e.addScaledVector(s[7],.858086*n*r),e.addScaledVector(s[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}class ff extends Zd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new df;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class pf extends jd{constructor(t){super(t),this.textures={}}load(t,e,n,i){const r=this,s=new Bd(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(s){i?i(s):console.error(s),r.manager.itemError(t)}},n,i)}parse(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const i=pf.createMaterialFromType(t.type);if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=t.sheen),void 0!==t.sheenColor&&(i.sheenColor=(new es).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(i.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.specularIntensity&&(i.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.iridescence&&(i.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(i.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(i.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.thickness&&(i.thickness=t.thickness),void 0!==t.attenuationDistance&&(i.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(i.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(i.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.shadowSide&&(i.shadowSide=t.shadowSide),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(i.alphaHash=t.alphaHash),void 0!==t.depthFunc&&(i.depthFunc=t.depthFunc),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.blendSrc&&(i.blendSrc=t.blendSrc),void 0!==t.blendDst&&(i.blendDst=t.blendDst),void 0!==t.blendEquation&&(i.blendEquation=t.blendEquation),void 0!==t.blendSrcAlpha&&(i.blendSrcAlpha=t.blendSrcAlpha),void 0!==t.blendDstAlpha&&(i.blendDstAlpha=t.blendDstAlpha),void 0!==t.blendEquationAlpha&&(i.blendEquationAlpha=t.blendEquationAlpha),void 0!==t.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(t.blendColor),void 0!==t.blendAlpha&&(i.blendAlpha=t.blendAlpha),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),void 0!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.alphaToCoverage&&(i.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(i.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(i.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&("number"===typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const r in t.uniforms){const e=t.uniforms[r];switch(i.uniforms[r]={},e.type){case"t":i.uniforms[r].value=n(e.value);break;case"c":i.uniforms[r].value=(new es).setHex(e.value);break;case"v2":i.uniforms[r].value=(new ri).fromArray(e.value);break;case"v3":i.uniforms[r].value=(new zi).fromArray(e.value);break;case"v4":i.uniforms[r].value=(new Ci).fromArray(e.value);break;case"m3":i.uniforms[r].value=(new si).fromArray(e.value);break;case"m4":i.uniforms[r].value=(new fr).fromArray(e.value);break;default:i.uniforms[r].value=e.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(i.glslVersion=t.glslVersion),void 0!==t.extensions)for(const r in t.extensions)i.extensions[r]=t.extensions[r];if(void 0!==t.lights&&(i.lights=t.lights),void 0!==t.clipping&&(i.clipping=t.clipping),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),i.normalScale=(new ri).fromArray(e)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(i.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(i.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new ri).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(i.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(i.thicknessMap=n(t.thicknessMap)),void 0!==t.anisotropyMap&&(i.anisotropyMap=n(t.anisotropyMap)),void 0!==t.sheenColorMap&&(i.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(i.sheenRoughnessMap=n(t.sheenRoughnessMap)),i}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){return new{ShadowMaterial:sd,SpriteMaterial:ac,RawShaderMaterial:ad,ShaderMaterial:na,PointsMaterial:Su,MeshPhysicalMaterial:ld,MeshStandardMaterial:od,MeshPhongMaterial:cd,MeshToonMaterial:ud,MeshNormalMaterial:hd,MeshLambertMaterial:dd,MeshDepthMaterial:Ul,MeshDistanceMaterial:Fl,MeshBasicMaterial:ss,MeshMatcapMaterial:fd,LineDashedMaterial:pd,LineBasicMaterial:du,Material:rs}[t]}}class mf{static decodeText(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(n){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class gf extends Ls{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class vf extends jd{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new Bd(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(s){i?i(s):console.error(s),r.manager.itemError(t)}},n,i)}parse(t){const e={},n={};function i(t,i){if(void 0!==e[i])return e[i];const r=t.interleavedBuffers[i],s=function(t,e){if(void 0!==n[e])return n[e];const i=t.arrayBuffers,r=i[e],s=new Uint32Array(r).buffer;return n[e]=s,s}(t,r.buffer),a=ci(r.type,s),o=new ic(a,r.stride);return o.uuid=r.uuid,e[i]=o,o}const r=t.isInstancedBufferGeometry?new gf:new Ls,s=t.data.index;if(void 0!==s){const t=ci(s.type,s.array);r.setIndex(new fs(t,1))}const a=t.data.attributes;for(const u in a){const e=a[u];let n;if(e.isInterleavedBufferAttribute){const r=i(t.data,e.data);n=new sc(r,e.itemSize,e.offset,e.normalized)}else{const t=ci(e.type,e.array);n=new(e.isInstancedBufferAttribute?Fc:fs)(t,e.itemSize,e.normalized)}void 0!==e.name&&(n.name=e.name),void 0!==e.usage&&n.setUsage(e.usage),r.setAttribute(u,n)}const o=t.data.morphAttributes;if(o)for(const u in o){const e=o[u],n=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];let a;if(s.isInterleavedBufferAttribute){const e=i(t.data,s.data);a=new sc(e,s.itemSize,s.offset,s.normalized)}else{const t=ci(s.type,s.array);a=new fs(t,s.itemSize,s.normalized)}void 0!==s.name&&(a.name=s.name),n.push(a)}r.morphAttributes[u]=n}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const t=l[u];r.addGroup(t.start,t.count,t.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new zi;void 0!==c.center&&t.fromArray(c.center),r.boundingSphere=new rr(t,c.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}class yf extends jd{constructor(t){super(t)}load(t,e,n,i){const r=this,s=""===this.path?mf.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const a=new Bd(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(n){let s=null;try{s=JSON.parse(n)}catch(o){return void 0!==i&&i(o),void console.error("THREE:ObjectLoader: Can't parse "+t+".",o.message)}const a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+t)),void console.error("THREE.ObjectLoader: Can't load "+t);r.parse(s,e)},n,i)}async loadAsync(t,e){const n=""===this.path?mf.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const i=new Bd(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(t,e),s=JSON.parse(r),a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(s)}parse(t,e){const n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),s=this.parseImages(t.images,function(){void 0!==e&&e(l)}),a=this.parseTextures(t.textures,s),o=this.parseMaterials(t.materials,a),l=this.parseObject(t.object,r,o,a,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==e){let t=!1;for(const e in s)if(s[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&e(l)}return l}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),s=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,s),o=this.parseObject(t.object,i,a,s,e),l=this.parseSkeletons(t.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(t){const e={};if(void 0!==t)for(let n=0,i=t.length;n<i;n++){const i=(new gh).fromJSON(t[n]);e[i.uuid]=i}return e}parseSkeletons(t,e){const n={},i={};if(e.traverse(function(t){t.isBone&&(i[t.uuid]=t)}),void 0!==t)for(let r=0,s=t.length;r<s;r++){const e=(new Uc).fromJSON(t[r],i);n[e.uuid]=e}return n}parseGeometries(t,e){const n={};if(void 0!==t){const i=new vf;for(let r=0,s=t.length;r<s;r++){let s;const a=t[r];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(a);break;default:a.type in rd?s=rd[a.type].fromJSON(a,e):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(a.type,'"'))}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}}return n}parseMaterials(t,e){const n={},i={};if(void 0!==t){const r=new pf;r.setTextures(e);for(let e=0,s=t.length;e<s;e++){const s=t[e];void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const i=t[n],r=kd.parse(i);e[r.uuid]=r}return e}parseImages(t,e){const n=this,i={};let r;function s(t){if("string"===typeof t){const e=t;return function(t){return n.manager.itemStart(t),r.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t),n.manager.itemEnd(t)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:ci(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new Id(e);r=new Wd(n),r.setCrossOrigin(this.crossOrigin);for(let e=0,r=t.length;e<r;e++){const n=t[e],r=n.url;if(Array.isArray(r)){const t=[];for(let e=0,n=r.length;e<n;e++){const n=s(r[e]);null!==n&&(n instanceof HTMLImageElement?t.push(n):t.push(new Ic(n.data,n.width,n.height)))}i[n.uuid]=new Mi(t)}else{const t=s(n.url);i[n.uuid]=new Mi(t)}}}return i}async parseImagesAsync(t){const e=this,n={};let i;async function r(t){if("string"===typeof t){const n=t,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:e.resourcePath+n;return await i.loadAsync(r)}return t.data?{data:ci(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){i=new Wd(this.manager),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const i=t[e],s=i.url;if(Array.isArray(s)){const t=[];for(let e=0,n=s.length;e<n;e++){const n=s[e],i=await r(n);null!==i&&(i instanceof HTMLImageElement?t.push(i):t.push(new Ic(i.data,i.width,i.height)))}n[i.uuid]=new Mi(t)}else{const t=await r(i.url);n[i.uuid]=new Mi(t)}}}return n}parseTextures(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const i={};if(void 0!==t)for(let r=0,s=t.length;r<s;r++){const s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const a=e[s.image],o=a.data;let l;Array.isArray(o)?(l=new oa,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new Ic:new Ai,o&&(l.needsUpdate=!0)),l.source=a,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=n(s.mapping,xf)),void 0!==s.channel&&(l.channel=s.channel),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=n(s.wrap[0],_f),l.wrapT=n(s.wrap[1],_f)),void 0!==s.format&&(l.format=s.format),void 0!==s.internalFormat&&(l.internalFormat=s.internalFormat),void 0!==s.type&&(l.type=s.type),void 0!==s.colorSpace&&(l.colorSpace=s.colorSpace),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=n(s.minFilter,bf)),void 0!==s.magFilter&&(l.magFilter=n(s.magFilter,bf)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.generateMipmaps&&(l.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),void 0!==s.compareFunction&&(l.compareFunction=s.compareFunction),void 0!==s.userData&&(l.userData=s.userData),i[s.uuid]=l}return i}parseObject(t,e,n,i,r){let s,a,o;function l(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(n[r])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function u(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),i[t]}switch(t.type){case"Scene":s=new nc,void 0!==t.background&&(Number.isInteger(t.background)?s.background=new es(t.background):s.background=u(t.background)),void 0!==t.environment&&(s.environment=u(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?s.fog=new ec(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(s.fog=new tc(t.fog.color,t.fog.density)),""!==t.fog.name&&(s.fog.name=t.fog.name)),void 0!==t.backgroundBlurriness&&(s.backgroundBlurriness=t.backgroundBlurriness),void 0!==t.backgroundIntensity&&(s.backgroundIntensity=t.backgroundIntensity);break;case"PerspectiveCamera":s=new ra(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(s.focus=t.focus),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.filmGauge&&(s.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(s.filmOffset=t.filmOffset),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"OrthographicCamera":s=new Pa(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"AmbientLight":s=new uf(t.color,t.intensity);break;case"DirectionalLight":s=new cf(t.color,t.intensity);break;case"PointLight":s=new of(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":s=new hf(t.color,t.intensity,t.width,t.height);break;case"SpotLight":s=new ef(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":s=new Yd(t.color,t.groundColor,t.intensity);break;case"LightProbe":s=(new ff).fromJSON(t);break;case"SkinnedMesh":a=l(t.geometry),o=c(t.material),s=new Oc(a,o),void 0!==t.bindMode&&(s.bindMode=t.bindMode),void 0!==t.bindMatrix&&s.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(s.skeleton=t.skeleton);break;case"Mesh":a=l(t.geometry),o=c(t.material),s=new Ys(a,o);break;case"InstancedMesh":a=l(t.geometry),o=c(t.material);const e=t.count,n=t.instanceMatrix,i=t.instanceColor;s=new Zc(a,o,e),s.instanceMatrix=new Fc(new Float32Array(n.array),16),void 0!==i&&(s.instanceColor=new Fc(new Float32Array(i.array),i.itemSize));break;case"BatchedMesh":a=l(t.geometry),o=c(t.material),s=new hu(t.maxGeometryCount,t.maxVertexCount,t.maxIndexCount,o),s.geometry=a,s.perObjectFrustumCulled=t.perObjectFrustumCulled,s.sortObjects=t.sortObjects,s._drawRanges=t.drawRanges,s._reservedRanges=t.reservedRanges,s._visibility=t.visibility,s._active=t.active,s._bounds=t.bounds.map(t=>{const e=new Fi;e.min.fromArray(t.boxMin),e.max.fromArray(t.boxMax);const n=new rr;return n.radius=t.sphereRadius,n.center.fromArray(t.sphereCenter),{boxInitialized:t.boxInitialized,box:e,sphereInitialized:t.sphereInitialized,sphere:n}}),s._maxGeometryCount=t.maxGeometryCount,s._maxVertexCount=t.maxVertexCount,s._maxIndexCount=t.maxIndexCount,s._geometryInitialized=t.geometryInitialized,s._geometryCount=t.geometryCount,s._matricesTexture=u(t.matricesTexture.uuid);break;case"LOD":s=new Mc;break;case"Line":s=new yu(l(t.geometry),c(t.material));break;case"LineLoop":s=new wu(l(t.geometry),c(t.material));break;case"LineSegments":s=new bu(l(t.geometry),c(t.material));break;case"PointCloud":case"Points":s=new Cu(l(t.geometry),c(t.material));break;case"Sprite":s=new _c(c(t.material));break;case"Group":s=new Xl;break;case"Bone":s=new Dc;break;default:s=new jr}if(s.uuid=t.uuid,void 0!==t.name&&(s.name=t.name),void 0!==t.matrix?(s.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(s.matrixAutoUpdate=t.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==t.position&&s.position.fromArray(t.position),void 0!==t.rotation&&s.rotation.fromArray(t.rotation),void 0!==t.quaternion&&s.quaternion.fromArray(t.quaternion),void 0!==t.scale&&s.scale.fromArray(t.scale)),void 0!==t.up&&s.up.fromArray(t.up),void 0!==t.castShadow&&(s.castShadow=t.castShadow),void 0!==t.receiveShadow&&(s.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(s.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(s.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(s.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&s.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(s.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.frustumCulled&&(s.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(s.renderOrder=t.renderOrder),void 0!==t.userData&&(s.userData=t.userData),void 0!==t.layers&&(s.layers.mask=t.layers),void 0!==t.children){const a=t.children;for(let t=0;t<a.length;t++)s.add(this.parseObject(a[t],e,n,i,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];s.animations.push(r[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(s.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],i=s.getObjectByProperty("uuid",n.object);void 0!==i&&s.addLevel(i,n.distance,n.hysteresis)}}return s}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse(function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}})}}const xf={UVMapping:ht,CubeReflectionMapping:dt,CubeRefractionMapping:ft,EquirectangularReflectionMapping:pt,EquirectangularRefractionMapping:mt,CubeUVReflectionMapping:gt},_f={RepeatWrapping:vt,ClampToEdgeWrapping:yt,MirroredRepeatWrapping:xt},bf={NearestFilter:_t,NearestMipmapNearestFilter:bt,NearestMipmapLinearFilter:St,LinearFilter:Et,LinearMipmapNearestFilter:Tt,LinearMipmapLinearFilter:Ct};class wf extends jd{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Dd.get(t);if(void 0!==s)return r.manager.itemStart(t),s.then?void s.then(n=>{e&&e(n),r.manager.itemEnd(t)}).catch(t=>{i&&i(t)}):(setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const o=fetch(t,a).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(n){return Dd.add(t,n),e&&e(n),r.manager.itemEnd(t),n}).catch(function(e){i&&i(e),Dd.remove(t),r.manager.itemError(t),r.manager.itemEnd(t)});Dd.add(t,o),r.manager.itemStart(t)}}let Sf;class Mf{static getContext(){return void 0===Sf&&(Sf=new(window.AudioContext||window.webkitAudioContext)),Sf}static setContext(t){Sf=t}}class Ef extends jd{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new Bd(this.manager);function a(e){i?i(e):console.error(e),r.manager.itemError(t)}s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(t){try{const n=t.slice(0);Mf.getContext().decodeAudioData(n,function(t){e(t)}).catch(a)}catch(n){a(n)}},n,i)}}const Tf=new fr,Af=new fr,Cf=new fr;class Pf{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ra,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ra,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Cf.copy(t.projectionMatrix);const n=e.eyeSep/2,i=n*e.near/e.focus,r=e.near*Math.tan(qn*e.fov*.5)/e.zoom;let s,a;Af.elements[12]=-n,Tf.elements[12]=n,s=-r*e.aspect+i,a=r*e.aspect+i,Cf.elements[0]=2*e.near/(a-s),Cf.elements[8]=(a+s)/(a-s),this.cameraL.projectionMatrix.copy(Cf),s=-r*e.aspect-i,a=r*e.aspect-i,Cf.elements[0]=2*e.near/(a-s),Cf.elements[8]=(a+s)/(a-s),this.cameraR.projectionMatrix.copy(Cf)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Af),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Tf)}}class Rf{constructor(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Lf(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Lf();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Lf(){return("undefined"===typeof performance?Date:performance).now()}const Nf=new zi,kf=new Ii,Of=new zi,Df=new zi;class If extends jr{constructor(){super(),this.type="AudioListener",this.context=Mf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Rf}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Nf,kf,Of),Df.set(0,0,-1).applyQuaternion(kf),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Nf.x,t),e.positionY.linearRampToValueAtTime(Nf.y,t),e.positionZ.linearRampToValueAtTime(Nf.z,t),e.forwardX.linearRampToValueAtTime(Df.x,t),e.forwardY.linearRampToValueAtTime(Df.y,t),e.forwardZ.linearRampToValueAtTime(Df.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(Nf.x,Nf.y,Nf.z),e.setOrientation(Df.x,Df.y,Df.z,n.x,n.y,n.z)}}class zf extends jr{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const jf=new zi,Uf=new Ii,Ff=new zi,Bf=new zi;class Hf extends zf{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(jf,Uf,Ff),Bf.set(0,0,1).applyQuaternion(Uf);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(jf.x,t),e.positionY.linearRampToValueAtTime(jf.y,t),e.positionZ.linearRampToValueAtTime(jf.z,t),e.orientationX.linearRampToValueAtTime(Bf.x,t),e.orientationY.linearRampToValueAtTime(Bf.y,t),e.orientationZ.linearRampToValueAtTime(Bf.z,t)}else e.setPosition(jf.x,jf.y,jf.z),e.setOrientation(Bf.x,Bf.y,Bf.z)}}class Vf{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class Wf{constructor(t,e,n){let i,r,s;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let s=this.cumulativeWeight;if(0===s){for(let t=0;t!==i;++t)n[r+t]=n[t];s=e}else{s+=e;const t=e/s;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=s}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let o=e,l=e+e;o!==l;++o)if(n[o]!==n[o+e]){a.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let r=n,s=i;r!==s;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)t[e+s]=t[n+s]}_slerp(t,e,n,i){Ii.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const s=this._workIndex*r;Ii.multiplyQuaternionsFlat(t,s,t,e,t,n),Ii.slerpFlat(t,e,t,e,t,s,i)}_lerp(t,e,n,i,r){const s=1-i;for(let a=0;a!==r;++a){const r=e+a;t[r]=t[r]*s+t[n+a]*i}}_lerpAdditive(t,e,n,i,r){for(let s=0;s!==r;++s){const r=e+s;t[r]=t[r]+t[n+s]*i}}}const Gf="\\[\\]\\.:\\/",Xf=new RegExp("["+Gf+"]","g"),qf="[^"+Gf+"]",Zf="[^"+Gf.replace("\\.","")+"]",Yf=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",qf)+/(WCOD+)?/.source.replace("WCOD",Zf)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qf)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qf)+"$"),Kf=["material","materials","bones","map"];class Jf{constructor(t,e,n){this.path=e,this.parsedPath=n||Jf.parseTrackName(e),this.node=Jf.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Jf.Composite(t,e,n):new Jf(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Xf,"")}static parseTrackName(t){const e=Yf.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==Kf.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const s=n(r.children);if(s)return s}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=Jf.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const s=t[i];if(void 0===s){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Jf.Composite=class{constructor(t,e,n){const i=n||Jf.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Jf.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Jf.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Jf.prototype.GetterByBindingType=[Jf.prototype._getValue_direct,Jf.prototype._getValue_array,Jf.prototype._getValue_arrayElement,Jf.prototype._getValue_toArray],Jf.prototype.SetterByBindingTypeAndVersioning=[[Jf.prototype._setValue_direct,Jf.prototype._setValue_direct_setNeedsUpdate,Jf.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Jf.prototype._setValue_array,Jf.prototype._setValue_array_setNeedsUpdate,Jf.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Jf.prototype._setValue_arrayElement,Jf.prototype._setValue_arrayElement_setNeedsUpdate,Jf.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Jf.prototype._setValue_fromArray,Jf.prototype._setValue_fromArray_setNeedsUpdate,Jf.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Qf{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Yn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let a,o=t.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=e[h];if(void 0===d){d=o++,e[h]=d,t.push(u);for(let t=0,e=s;t!==e;++t)r[t].push(new Jf(u,n[t],i[t]))}else if(d<l){a=t[d];const o=--l,c=t[o];e[c.uuid]=d,t[d]=c,e[h]=o,t[o]=u;for(let t=0,e=s;t!==e;++t){const e=r[t],s=e[o];let a=e[d];e[d]=s,void 0===a&&(a=new Jf(u,n[t],i[t])),e[o]=a}}else t[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s],o=a.uuid,l=e[o];if(void 0!==l&&l>=r){const s=r++,c=t[s];e[c.uuid]=l,t[l]=c,e[o]=s,t[s]=a;for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[s],r=e[l];e[l]=i,e[s]=r}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,s=t.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,l=e[o];if(void 0!==l)if(delete e[o],l<r){const a=--r,o=t[a],c=--s,u=t[c];e[o.uuid]=l,t[l]=o,e[u.uuid]=a,t[a]=u,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[a],r=e[c];e[l]=i,e[a]=r,e.pop()}}else{const r=--s,a=t[r];r>0&&(e[a.uuid]=l),t[l]=a,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t];e[l]=e[r],e.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const r=this._bindings;if(void 0!==i)return r[i];const s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[t]=i,s.push(t),a.push(e),r.push(u);for(let h=c,d=o.length;h!==d;++h){const n=o[h];u[h]=new Jf(n,t,e)}return u}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];e[t[a]]=n,s[n]=o,s.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}class $f{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.blendMode;this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,s=r.length,a=new Array(s),o={endingStart:Ie,endingEnd:Ie};for(let l=0;l!==s;++l){const t=r[l].createInterpolant(null);a[l]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Le,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,s=n/i;t.warp(1,r,e),this.warp(s,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,o[1]=r+n,l[0]=t/s,l[1]=e/s,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;i<0||0===n?e=0:(this._startTime=null,e=n*i)}e*=this._updateTimeScale(t);const s=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;if(this.blendMode===Fe)for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(s),e[n].accumulateAdditive(a);else for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(s),e[n].accumulate(i,a)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const s=n===Ne;if(0===t)return-1===r?i:s&&1===(1&r)?e-i:i;if(n===Re){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(s&&1===(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=ze,i.endingEnd=ze):(i.endingStart=t?this.zeroSlopeAtStart?ze:Ie:je,i.endingEnd=e?this.zeroSlopeAtEnd?ze:Ie:je)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=r,o[0]=e,a[1]=r+t,o[1]=n,this}}const tp=new Float32Array(1);class ep extends Wn{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,s=t._propertyBindings,a=t._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let u=0;u!==r;++u){const t=i[u],r=t.name;let l=c[r];if(void 0!==l)++l.referenceCount,s[u]=l;else{if(l=s[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,r));continue}const i=e&&e._propertyBindings[u].binding.parsedPath;l=new Wf(Jf.create(n,r,i),t.ValueTypeName,t.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,r),s[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{const e=s.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),s.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),t._byClipCacheIndex=null;delete a.actionByRoot[(t._localRoot||this._root).uuid],0===o.length&&delete s[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const t=e[n];0===--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[e];void 0===s&&(s={},i[e]=s),s[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,a=s[i],o=e[e.length-1],l=t._cacheIndex;o._cacheIndex=l,e[l]=o,e.pop(),delete a[r],0===Object.keys(a).length&&delete s[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Sd(new Float32Array(2),new Float32Array(2),1,tp),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let s="string"===typeof t?kd.findByName(i,t):t;const a=null!==s?s.uuid:t,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:Ue),void 0!==o){const t=o.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=o.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new $f(this,s,e,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(t,e){const n=e||this._root,i=n.uuid,r="string"===typeof t?kd.findByName(n,t):t,s=r?r.uuid:t,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),s=this._accuIndex^=1;for(let l=0;l!==n;++l){e[l]._update(i,t,r,s)}const a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,s=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,s._cacheIndex=r,e[r]=s,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const r in n){const t=n[r].actionByRoot[e];void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const r in i){const t=i[r];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class np{constructor(t){this.value=t}clone(){return new np(void 0===this.value.clone?this.value:this.value.clone())}}let ip=0;class rp extends Wn{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:ip++}),this.name="",this.usage=Rn,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,i=e.length;n<i;n++){const t=Array.isArray(e[n])?e[n]:[e[n]];for(let e=0;e<t.length;e++)this.uniforms.push(t[e].clone())}return this}clone(){return(new this.constructor).copy(this)}}class sp extends ic{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class ap{constructor(t,e,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}class op{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new dr(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new Mr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return cp(t,this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),e.sort(lp),e}intersectObjects(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=t.length;i<r;i++)cp(t[i],this,n,e);return n.sort(lp),n}}function lp(t,e){return t.distance-e.distance}function cp(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)cp(i[t],e,n,!0)}}class up{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Kn(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class hp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=t,this.theta=e,this.y=n,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}}const dp=new ri;class fp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri(1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri(-1/0,-1/0);this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=dp.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,dp).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const pp=new zi,mp=new zi;class gp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi;this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){pp.subVectors(t,this.start),mp.subVectors(this.end,this.start);const n=mp.dot(mp);let i=mp.dot(pp)/n;return e&&(i=Kn(i,0,1)),i}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const vp=new zi;class yp extends jr{constructor(t,e){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new Ls,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){const t=s/o*Math.PI*2,e=a/o*Math.PI*2;i.push(Math.cos(t),Math.sin(t),1,Math.cos(e),Math.sin(e),1)}n.setAttribute("position",new ws(i,3));const r=new du({fog:!1,toneMapped:!1});this.cone=new bu(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),vp.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(vp),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const xp=new zi,_p=new fr,bp=new fr;class wp extends bu{constructor(t){const e=Sp(t),n=new Ls,i=[],r=[],s=new es(0,0,1),a=new es(0,1,0);for(let o=0;o<e.length;o++){const t=e[o];t.parent&&t.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new ws(i,3)),n.setAttribute("color",new ws(r,3));super(n,new du({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");bp.copy(this.root.matrixWorld).invert();for(let r=0,s=0;r<e.length;r++){const t=e[r];t.parent&&t.parent.isBone&&(_p.multiplyMatrices(bp,t.matrixWorld),xp.setFromMatrixPosition(_p),i.setXYZ(s,xp.x,xp.y,xp.z),_p.multiplyMatrices(bp,t.parent.matrixWorld),xp.setFromMatrixPosition(_p),i.setXYZ(s+1,xp.x,xp.y,xp.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Sp(t){const e=[];!0===t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Sp(t.children[n]));return e}class Mp extends Ys{constructor(t,e,n){super(new Jh(e,4,2),new ss({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Ep=new zi,Tp=new es,Ap=new es;class Cp extends jr{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Zh(e);i.rotateY(.5*Math.PI),this.material=new ss({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.setAttribute("color",new fs(s,3)),this.add(new Ys(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Tp.copy(this.light.color),Ap.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const i=t<n/2?Tp:Ap;e.setXYZ(t,i.r,i.g,i.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(Ep.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Pp extends bu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new es(n),i=new es(i);const r=e/2,s=t/e,a=t/2,o=[],l=[];for(let u=0,h=0,d=-a;u<=e;u++,d+=s){o.push(-a,0,d,a,0,d),o.push(d,0,-a,d,0,a);const t=u===r?n:i;t.toArray(l,h),h+=3,t.toArray(l,h),h+=3,t.toArray(l,h),h+=3,t.toArray(l,h),h+=3}const c=new Ls;c.setAttribute("position",new ws(o,3)),c.setAttribute("color",new ws(l,3));super(c,new du({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Rp extends bu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new es(r),s=new es(s);const a=[],o=[];if(e>1)for(let c=0;c<e;c++){const n=c/e*(2*Math.PI),i=Math.sin(n)*t,l=Math.cos(n)*t;a.push(0,0,0),a.push(i,0,l);const u=1&c?r:s;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const e=1&c?r:s,l=t-t/n*c;for(let t=0;t<i;t++){let n=t/i*(2*Math.PI),r=Math.sin(n)*l,s=Math.cos(n)*l;a.push(r,0,s),o.push(e.r,e.g,e.b),n=(t+1)/i*(2*Math.PI),r=Math.sin(n)*l,s=Math.cos(n)*l,a.push(r,0,s),o.push(e.r,e.g,e.b)}}const l=new Ls;l.setAttribute("position",new ws(a,3)),l.setAttribute("color",new ws(o,3));super(l,new du({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Lp=new zi,Np=new zi,kp=new zi;class Op extends jr{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===e&&(e=1);let i=new Ls;i.setAttribute("position",new ws([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new du({fog:!1,toneMapped:!1});this.lightPlane=new yu(i,r),this.add(this.lightPlane),i=new Ls,i.setAttribute("position",new ws([0,0,0,0,0,1],3)),this.targetLine=new yu(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Lp.setFromMatrixPosition(this.light.matrixWorld),Np.setFromMatrixPosition(this.light.target.matrixWorld),kp.subVectors(Np,Lp),this.lightPlane.lookAt(Np),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Np),this.targetLine.scale.z=kp.length()}}const Dp=new zi,Ip=new ia;class zp extends bu{constructor(t){const e=new Ls,n=new du({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={};function a(t,e){o(t),o(e)}function o(t){i.push(0,0,0),r.push(0,0,0),void 0===s[t]&&(s[t]=[]),s[t].push(i.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),e.setAttribute("position",new ws(i,3)),e.setAttribute("color",new ws(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const l=new es(16755200),c=new es(16711680),u=new es(43775),h=new es(16777215),d=new es(3355443);this.setColors(l,c,u,h,d)}setColors(t,e,n,i,r){const s=this.geometry.getAttribute("color");s.setXYZ(0,t.r,t.g,t.b),s.setXYZ(1,t.r,t.g,t.b),s.setXYZ(2,t.r,t.g,t.b),s.setXYZ(3,t.r,t.g,t.b),s.setXYZ(4,t.r,t.g,t.b),s.setXYZ(5,t.r,t.g,t.b),s.setXYZ(6,t.r,t.g,t.b),s.setXYZ(7,t.r,t.g,t.b),s.setXYZ(8,t.r,t.g,t.b),s.setXYZ(9,t.r,t.g,t.b),s.setXYZ(10,t.r,t.g,t.b),s.setXYZ(11,t.r,t.g,t.b),s.setXYZ(12,t.r,t.g,t.b),s.setXYZ(13,t.r,t.g,t.b),s.setXYZ(14,t.r,t.g,t.b),s.setXYZ(15,t.r,t.g,t.b),s.setXYZ(16,t.r,t.g,t.b),s.setXYZ(17,t.r,t.g,t.b),s.setXYZ(18,t.r,t.g,t.b),s.setXYZ(19,t.r,t.g,t.b),s.setXYZ(20,t.r,t.g,t.b),s.setXYZ(21,t.r,t.g,t.b),s.setXYZ(22,t.r,t.g,t.b),s.setXYZ(23,t.r,t.g,t.b),s.setXYZ(24,e.r,e.g,e.b),s.setXYZ(25,e.r,e.g,e.b),s.setXYZ(26,e.r,e.g,e.b),s.setXYZ(27,e.r,e.g,e.b),s.setXYZ(28,e.r,e.g,e.b),s.setXYZ(29,e.r,e.g,e.b),s.setXYZ(30,e.r,e.g,e.b),s.setXYZ(31,e.r,e.g,e.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap;Ip.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),jp("c",e,t,Ip,0,0,-1),jp("t",e,t,Ip,0,0,1),jp("n1",e,t,Ip,-1,-1,-1),jp("n2",e,t,Ip,1,-1,-1),jp("n3",e,t,Ip,-1,1,-1),jp("n4",e,t,Ip,1,1,-1),jp("f1",e,t,Ip,-1,-1,1),jp("f2",e,t,Ip,1,-1,1),jp("f3",e,t,Ip,-1,1,1),jp("f4",e,t,Ip,1,1,1),jp("u1",e,t,Ip,.7,1.1,-1),jp("u2",e,t,Ip,-.7,1.1,-1),jp("u3",e,t,Ip,0,2,-1),jp("cf1",e,t,Ip,-1,0,1),jp("cf2",e,t,Ip,1,0,1),jp("cf3",e,t,Ip,0,-1,1),jp("cf4",e,t,Ip,0,1,1),jp("cn1",e,t,Ip,-1,0,-1),jp("cn2",e,t,Ip,1,0,-1),jp("cn3",e,t,Ip,0,-1,-1),jp("cn4",e,t,Ip,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function jp(t,e,n,i,r,s,a){Dp.set(r,s,a).unproject(i);const o=e[t];if(void 0!==o){const t=n.getAttribute("position");for(let e=0,n=o.length;e<n;e++)t.setXYZ(o[e],Dp.x,Dp.y,Dp.z)}}const Up=new Fi;class Fp extends bu{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Ls;r.setIndex(new fs(n,1)),r.setAttribute("position",new fs(i,3)),super(r,new du({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Up.setFromObject(this.object),Up.isEmpty())return;const e=Up.min,n=Up.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bp extends bu{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Ls;i.setIndex(new fs(n,1)),i.setAttribute("position",new ws([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new du({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Hp extends yu{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,i=new Ls;i.setAttribute("position",new ws([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new du({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const r=new Ls;r.setAttribute("position",new ws([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new Ys(r,new ss({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Vp=new zi;let Wp,Gp;class Xp extends jr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi(0,0,1),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===Wp&&(Wp=new Ls,Wp.setAttribute("position",new ws([0,0,0,0,1,0],3)),Gp=new oh(0,.5,1,5,1),Gp.translate(0,-.5,0)),this.position.copy(e),this.line=new yu(Wp,new du({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ys(Gp,new ss({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,s)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Vp.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Vp,e)}}setLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*e;this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class qp extends bu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Ls;n.setAttribute("position",new ws(e,3)),n.setAttribute("color",new ws([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new du({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const i=new es,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Zp{constructor(){this.type="ShapePath",this.color=new es,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new ih,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this}bezierCurveTo(t,e,n,i,r,s){return this.currentPath.bezierCurveTo(t,e,n,i,r,s),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t,e){const n=e.length;let i=!1;for(let r=n-1,s=0;s<n;r=s++){let n=e[r],a=e[s],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[s],o=-o,a=e[r],l=-l),t.y<n.y||t.y>a.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-o*(t.y-n.y);if(0===e)return!0;if(e<0)continue;i=!i}}else{if(t.y!==n.y)continue;if(a.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=a.x)return!0}}return i}const n=Hh.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,s,a;const o=[];if(1===i.length)return s=i[0],a=new gh,a.curves=s.curves,o.push(a),o;let l=!n(i[0].getPoints());l=t?!l:l;const c=[],u=[];let h,d,f=[],p=0;u[p]=void 0,f[p]=[];for(let m=0,g=i.length;m<g;m++)s=i[m],h=s.getPoints(),r=n(h),r=t?!r:r,r?(!l&&u[p]&&p++,u[p]={s:new gh,p:h},u[p].s.curves=s.curves,l&&p++,f[p]=[]):f[p].push({h:s,p:h[0]});if(!u[0])return function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new gh;r.curves=i.curves,e.push(r)}return e}(i);if(u.length>1){let t=!1,n=0;for(let e=0,i=u.length;e<i;e++)c[e]=[];for(let i=0,r=u.length;i<r;i++){const r=f[i];for(let s=0;s<r.length;s++){const a=r[s];let o=!0;for(let r=0;r<u.length;r++)e(a.p,u[r].p)&&(i!==r&&n++,o?(o=!1,c[r].push(a)):t=!0);o&&c[i].push(a)}}n>0&&!1===t&&(f=c)}for(let m=0,g=u.length;m<g;m++){a=u[m].s,o.push(a),d=f[m];for(let t=0,e=d.length;t<e;t++)a.holes.push(d[t].h)}return o}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},440:t=>{"use strict";var e=function(){};t.exports=e},475:(t,e,n)=>{"use strict";var i,r;n.r(e),n.d(e,{AbortedDeferredError:()=>l.tH,Await:()=>o.jD,BrowserRouter:()=>I,Form:()=>V,HashRouter:()=>z,Link:()=>B,MemoryRouter:()=>o.fS,NavLink:()=>H,Navigate:()=>o.C5,NavigationType:()=>l.rc,Outlet:()=>o.sv,Route:()=>o.qh,Router:()=>o.Ix,RouterProvider:()=>k,Routes:()=>o.BV,ScrollRestoration:()=>W,UNSAFE_DataRouterContext:()=>o.sp,UNSAFE_DataRouterStateContext:()=>o.Rq,UNSAFE_ErrorResponseImpl:()=>l.VV,UNSAFE_FetchersContext:()=>A,UNSAFE_LocationContext:()=>o.yN,UNSAFE_NavigationContext:()=>o.jb,UNSAFE_RouteContext:()=>o.UX,UNSAFE_ViewTransitionContext:()=>T,UNSAFE_useRouteId:()=>o.$3,UNSAFE_useScrollRestoration:()=>st,createBrowserRouter:()=>w,createHashRouter:()=>S,createMemoryRouter:()=>o.bg,createPath:()=>l.AO,createRoutesFromChildren:()=>o.AV,createRoutesFromElements:()=>o.Eu,createSearchParams:()=>p,defer:()=>l.v6,generatePath:()=>l.tW,isRouteErrorResponse:()=>l.pX,json:()=>l.Pq,matchPath:()=>l.B6,matchRoutes:()=>l.ue,parsePath:()=>l.Rr,redirect:()=>l.V2,redirectDocument:()=>l.Sk,renderMatches:()=>o.KT,replace:()=>l.HC,resolvePath:()=>l.o1,unstable_HistoryRouter:()=>j,unstable_usePrompt:()=>ot,useActionData:()=>o.mP,useAsyncError:()=>o.oI,useAsyncValue:()=>o.J8,useBeforeUnload:()=>at,useBlocker:()=>o.KP,useFetcher:()=>et,useFetchers:()=>nt,useFormAction:()=>tt,useHref:()=>o.$P,useInRouterContext:()=>o.Ri,useLinkClickHandler:()=>Y,useLoaderData:()=>o.LG,useLocation:()=>o.zy,useMatch:()=>o.RQ,useMatches:()=>o.FE,useNavigate:()=>o.Zp,useNavigation:()=>o.cq,useNavigationType:()=>o.wQ,useOutlet:()=>o.P1,useOutletContext:()=>o.KC,useParams:()=>o.g,useResolvedPath:()=>o.x$,useRevalidator:()=>o.vL,useRouteError:()=>o.r5,useRouteLoaderData:()=>o.Ew,useRoutes:()=>o.Ye,useSearchParams:()=>K,useSubmit:()=>$,useViewTransitionState:()=>lt});var s=n(43),a=n(950),o=n(216),l=n(387);function c(){return c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},c.apply(this,arguments)}function u(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}const h="get",d="application/x-www-form-urlencoded";function f(t){return null!=t&&"string"===typeof t.tagName}function p(t){return void 0===t&&(t=""),new URLSearchParams("string"===typeof t||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(t=>[n,t]):[[n,i]])},[]))}let m=null;const g=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function v(t){return null==t||g.has(t)?t:null}function y(t,e){let n,i,r,s,a;if(f(o=t)&&"form"===o.tagName.toLowerCase()){let a=t.getAttribute("action");i=a?(0,l.pb)(a,e):null,n=t.getAttribute("method")||h,r=v(t.getAttribute("enctype"))||d,s=new FormData(t)}else if(function(t){return f(t)&&"button"===t.tagName.toLowerCase()}(t)||function(t){return f(t)&&"input"===t.tagName.toLowerCase()}(t)&&("submit"===t.type||"image"===t.type)){let a=t.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=t.getAttribute("formaction")||a.getAttribute("action");if(i=o?(0,l.pb)(o,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||h,r=v(t.getAttribute("formenctype"))||v(a.getAttribute("enctype"))||d,s=new FormData(a,t),!function(){if(null===m)try{new FormData(document.createElement("form"),0),m=!1}catch(t){m=!0}return m}()){let{name:e,type:n,value:i}=t;if("image"===n){let t=e?e+".":"";s.append(t+"x","0"),s.append(t+"y","0")}else e&&s.append(e,i)}}else{if(f(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=h,i=null,r=d,a=t}var o;return s&&"text/plain"===r&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}const x=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],b=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(ct){}function w(t,e){return(0,l.aE)({basename:null==e?void 0:e.basename,future:c({},null==e?void 0:e.future,{v7_prependBasename:!0}),history:(0,l.zR)({window:null==e?void 0:e.window}),hydrationData:(null==e?void 0:e.hydrationData)||M(),routes:t,mapRouteProperties:o.wE,dataStrategy:null==e?void 0:e.dataStrategy,patchRoutesOnNavigation:null==e?void 0:e.patchRoutesOnNavigation,window:null==e?void 0:e.window}).initialize()}function S(t,e){return(0,l.aE)({basename:null==e?void 0:e.basename,future:c({},null==e?void 0:e.future,{v7_prependBasename:!0}),history:(0,l.TM)({window:null==e?void 0:e.window}),hydrationData:(null==e?void 0:e.hydrationData)||M(),routes:t,mapRouteProperties:o.wE,dataStrategy:null==e?void 0:e.dataStrategy,patchRoutesOnNavigation:null==e?void 0:e.patchRoutesOnNavigation,window:null==e?void 0:e.window}).initialize()}function M(){var t;let e=null==(t=window)?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=c({},e,{errors:E(e.errors)})),e}function E(t){if(!t)return null;let e=Object.entries(t),n={};for(let[i,r]of e)if(r&&"RouteErrorResponse"===r.__type)n[i]=new l.VV(r.status,r.statusText,r.data,!0===r.internal);else if(r&&"Error"===r.__type){if(r.__subType){let t=window[r.__subType];if("function"===typeof t)try{let e=new t(r.message);e.stack="",n[i]=e}catch(ct){}}if(null==n[i]){let t=new Error(r.message);t.stack="",n[i]=t}}else n[i]=r;return n}const T=s.createContext({isTransitioning:!1});const A=s.createContext(new Map);const C=(i||(i=n.t(s,2))).startTransition,P=(r||(r=n.t(a,2))).flushSync,R=(i||(i=n.t(s,2))).useId;function L(t){P?P(t):t()}class N{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=e=>{"pending"===this.status&&(this.status="resolved",t(e))},this.reject=t=>{"pending"===this.status&&(this.status="rejected",e(t))}})}}function k(t){let{fallbackElement:e,router:n,future:i}=t,[r,a]=s.useState(n.state),[l,c]=s.useState(),[u,h]=s.useState({isTransitioning:!1}),[d,f]=s.useState(),[p,m]=s.useState(),[g,v]=s.useState(),y=s.useRef(new Map),{v7_startTransition:x}=i||{},_=s.useCallback(t=>{x?function(t){C?C(t):t()}(t):t()},[x]),b=s.useCallback((t,e)=>{let{deletedFetchers:i,flushSync:r,viewTransitionOpts:s}=e;t.fetchers.forEach((t,e)=>{void 0!==t.data&&y.current.set(e,t.data)}),i.forEach(t=>y.current.delete(t));let o=null==n.window||null==n.window.document||"function"!==typeof n.window.document.startViewTransition;if(s&&!o){if(r){L(()=>{p&&(d&&d.resolve(),p.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:s.currentLocation,nextLocation:s.nextLocation})});let e=n.window.document.startViewTransition(()=>{L(()=>a(t))});return e.finished.finally(()=>{L(()=>{f(void 0),m(void 0),c(void 0),h({isTransitioning:!1})})}),void L(()=>m(e))}p?(d&&d.resolve(),p.skipTransition(),v({state:t,currentLocation:s.currentLocation,nextLocation:s.nextLocation})):(c(t),h({isTransitioning:!0,flushSync:!1,currentLocation:s.currentLocation,nextLocation:s.nextLocation}))}else r?L(()=>a(t)):_(()=>a(t))},[n.window,p,d,y,_]);s.useLayoutEffect(()=>n.subscribe(b),[n,b]),s.useEffect(()=>{u.isTransitioning&&!u.flushSync&&f(new N)},[u]),s.useEffect(()=>{if(d&&l&&n.window){let t=l,e=d.promise,i=n.window.document.startViewTransition(async()=>{_(()=>a(t)),await e});i.finished.finally(()=>{f(void 0),m(void 0),c(void 0),h({isTransitioning:!1})}),m(i)}},[_,l,d,n.window]),s.useEffect(()=>{d&&l&&r.location.key===l.location.key&&d.resolve()},[d,p,r.location,l]),s.useEffect(()=>{!u.isTransitioning&&g&&(c(g.state),h({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),v(void 0))},[u.isTransitioning,g]),s.useEffect(()=>{},[]);let w=s.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:t=>n.navigate(t),push:(t,e,i)=>n.navigate(t,{state:e,preventScrollReset:null==i?void 0:i.preventScrollReset}),replace:(t,e,i)=>n.navigate(t,{replace:!0,state:e,preventScrollReset:null==i?void 0:i.preventScrollReset})}),[n]),S=n.basename||"/",M=s.useMemo(()=>({router:n,navigator:w,static:!1,basename:S}),[n,w,S]),E=s.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return s.useEffect(()=>(0,o.V8)(i,n.future),[i,n.future]),s.createElement(s.Fragment,null,s.createElement(o.sp.Provider,{value:M},s.createElement(o.Rq.Provider,{value:r},s.createElement(A.Provider,{value:y.current},s.createElement(T.Provider,{value:u},s.createElement(o.Ix,{basename:S,location:r.location,navigationType:r.historyAction,navigator:w,future:E},r.initialized||n.future.v7_partialHydration?s.createElement(O,{routes:n.routes,future:n.future,state:r}):e))))),null)}const O=s.memo(D);function D(t){let{routes:e,future:n,state:i}=t;return(0,o.ph)(e,void 0,i,n)}function I(t){let{basename:e,children:n,future:i,window:r}=t,a=s.useRef();null==a.current&&(a.current=(0,l.zR)({window:r,v5Compat:!0}));let c=a.current,[u,h]=s.useState({action:c.action,location:c.location}),{v7_startTransition:d}=i||{},f=s.useCallback(t=>{d&&C?C(()=>h(t)):h(t)},[h,d]);return s.useLayoutEffect(()=>c.listen(f),[c,f]),s.useEffect(()=>(0,o.V8)(i),[i]),s.createElement(o.Ix,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:i})}function z(t){let{basename:e,children:n,future:i,window:r}=t,a=s.useRef();null==a.current&&(a.current=(0,l.TM)({window:r,v5Compat:!0}));let c=a.current,[u,h]=s.useState({action:c.action,location:c.location}),{v7_startTransition:d}=i||{},f=s.useCallback(t=>{d&&C?C(()=>h(t)):h(t)},[h,d]);return s.useLayoutEffect(()=>c.listen(f),[c,f]),s.useEffect(()=>(0,o.V8)(i),[i]),s.createElement(o.Ix,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:i})}function j(t){let{basename:e,children:n,future:i,history:r}=t,[a,l]=s.useState({action:r.action,location:r.location}),{v7_startTransition:c}=i||{},u=s.useCallback(t=>{c&&C?C(()=>l(t)):l(t)},[l,c]);return s.useLayoutEffect(()=>r.listen(u),[r,u]),s.useEffect(()=>(0,o.V8)(i),[i]),s.createElement(o.Ix,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:r,future:i})}const U="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,F=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B=s.forwardRef(function(t,e){let n,{onClick:i,relative:r,reloadDocument:a,replace:h,state:d,target:f,to:p,preventScrollReset:m,viewTransition:g}=t,v=u(t,x),{basename:y}=s.useContext(o.jb),_=!1;if("string"===typeof p&&F.test(p)&&(n=p,U))try{let t=new URL(window.location.href),e=p.startsWith("//")?new URL(t.protocol+p):new URL(p),n=(0,l.pb)(e.pathname,y);e.origin===t.origin&&null!=n?p=n+e.search+e.hash:_=!0}catch(ct){}let b=(0,o.$P)(p,{relative:r}),w=Y(p,{replace:h,state:d,target:f,preventScrollReset:m,relative:r,viewTransition:g});return s.createElement("a",c({},v,{href:n||b,onClick:_||a?i:function(t){i&&i(t),t.defaultPrevented||w(t)},ref:e,target:f}))});const H=s.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:i=!1,className:r="",end:a=!1,style:h,to:d,viewTransition:f,children:p}=t,m=u(t,_),g=(0,o.x$)(d,{relative:m.relative}),v=(0,o.zy)(),y=s.useContext(o.Rq),{navigator:x,basename:b}=s.useContext(o.jb),w=null!=y&&lt(g)&&!0===f,S=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,M=v.pathname,E=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(M=M.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&b&&(E=(0,l.pb)(E,b)||E);const T="/"!==S&&S.endsWith("/")?S.length-1:S.length;let A,C=M===S||!a&&M.startsWith(S)&&"/"===M.charAt(T),P=null!=E&&(E===S||!a&&E.startsWith(S)&&"/"===E.charAt(S.length)),R={isActive:C,isPending:P,isTransitioning:w},L=C?n:void 0;A="function"===typeof r?r(R):[r,C?"active":null,P?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let N="function"===typeof h?h(R):h;return s.createElement(B,c({},m,{"aria-current":L,className:A,ref:e,style:N,to:d,viewTransition:f}),"function"===typeof p?p(R):p)});const V=s.forwardRef((t,e)=>{let{fetcherKey:n,navigate:i,reloadDocument:r,replace:a,state:o,method:l=h,action:d,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:g}=t,v=u(t,b),y=$(),x=tt(d,{relative:p}),_="get"===l.toLowerCase()?"get":"post";return s.createElement("form",c({ref:e,method:_,action:x,onSubmit:r?f:t=>{if(f&&f(t),t.defaultPrevented)return;t.preventDefault();let e=t.nativeEvent.submitter,r=(null==e?void 0:e.getAttribute("formmethod"))||l;y(e||t.currentTarget,{fetcherKey:n,method:r,navigate:i,replace:a,state:o,relative:p,preventScrollReset:m,viewTransition:g})}},v))});function W(t){let{getKey:e,storageKey:n}=t;return st({getKey:e,storageKey:n}),null}var G,X;function q(t){let e=s.useContext(o.sp);return e||(0,l.Oi)(!1),e}function Z(t){let e=s.useContext(o.Rq);return e||(0,l.Oi)(!1),e}function Y(t,e){let{target:n,replace:i,state:r,preventScrollReset:a,relative:c,viewTransition:u}=void 0===e?{}:e,h=(0,o.Zp)(),d=(0,o.zy)(),f=(0,o.x$)(t,{relative:c});return s.useCallback(e=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(e,n)){e.preventDefault();let n=void 0!==i?i:(0,l.AO)(d)===(0,l.AO)(f);h(t,{replace:n,state:r,preventScrollReset:a,relative:c,viewTransition:u})}},[d,h,f,i,r,n,t,a,c,u])}function K(t){let e=s.useRef(p(t)),n=s.useRef(!1),i=(0,o.zy)(),r=s.useMemo(()=>function(t,e){let n=p(t);return e&&e.forEach((t,i)=>{n.has(i)||e.getAll(i).forEach(t=>{n.append(i,t)})}),n}(i.search,n.current?null:e.current),[i.search]),a=(0,o.Zp)(),l=s.useCallback((t,e)=>{const i=p("function"===typeof t?t(r):t);n.current=!0,a("?"+i,e)},[a,r]);return[r,l]}(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(G||(G={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(X||(X={}));let J=0,Q=()=>"__"+String(++J)+"__";function $(){let{router:t}=q(G.UseSubmit),{basename:e}=s.useContext(o.jb),n=(0,o.$3)();return s.useCallback(function(i,r){void 0===r&&(r={}),function(){if("undefined"===typeof document)throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}();let{action:s,method:a,encType:o,formData:l,body:c}=y(i,e);if(!1===r.navigate){let e=r.fetcherKey||Q();t.fetch(e,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function tt(t,e){let{relative:n}=void 0===e?{}:e,{basename:i}=s.useContext(o.jb),r=s.useContext(o.UX);r||(0,l.Oi)(!1);let[a]=r.matches.slice(-1),u=c({},(0,o.x$)(t||".",{relative:n})),h=(0,o.zy)();if(null==t){u.search=h.search;let t=new URLSearchParams(u.search),e=t.getAll("index");if(e.some(t=>""===t)){t.delete("index"),e.filter(t=>t).forEach(e=>t.append("index",e));let n=t.toString();u.search=n?"?"+n:""}}return t&&"."!==t||!a.route.index||(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),"/"!==i&&(u.pathname="/"===u.pathname?i:(0,l.HS)([i,u.pathname])),(0,l.AO)(u)}function et(t){var e;let{key:n}=void 0===t?{}:t,{router:i}=q(G.UseFetcher),r=Z(X.UseFetcher),a=s.useContext(A),u=s.useContext(o.UX),h=null==(e=u.matches[u.matches.length-1])?void 0:e.route.id;a||(0,l.Oi)(!1),u||(0,l.Oi)(!1),null==h&&(0,l.Oi)(!1);let d=R?R():"",[f,p]=s.useState(n||d);n&&n!==f?p(n):f||p(Q()),s.useEffect(()=>(i.getFetcher(f),()=>{i.deleteFetcher(f)}),[i,f]);let m=s.useCallback((t,e)=>{h||(0,l.Oi)(!1),i.fetch(f,h,t,e)},[f,h,i]),g=$(),v=s.useCallback((t,e)=>{g(t,c({},e,{navigate:!1,fetcherKey:f}))},[f,g]),y=s.useMemo(()=>s.forwardRef((t,e)=>s.createElement(V,c({},t,{navigate:!1,fetcherKey:f,ref:e}))),[f]),x=r.fetchers.get(f)||l.HW,_=a.get(f);return s.useMemo(()=>c({Form:y,submit:v,load:m},x,{data:_}),[y,v,m,x,_])}function nt(){let t=Z(X.UseFetchers);return Array.from(t.fetchers.entries()).map(t=>{let[e,n]=t;return c({},n,{key:e})})}const it="react-router-scroll-positions";let rt={};function st(t){let{getKey:e,storageKey:n}=void 0===t?{}:t,{router:i}=q(G.UseScrollRestoration),{restoreScrollPosition:r,preventScrollReset:a}=Z(X.UseScrollRestoration),{basename:u}=s.useContext(o.jb),h=(0,o.zy)(),d=(0,o.FE)(),f=(0,o.cq)();s.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),function(t,e){let{capture:n}=e||{};s.useEffect(()=>{let e=null!=n?{capture:n}:void 0;return window.addEventListener("pagehide",t,e),()=>{window.removeEventListener("pagehide",t,e)}},[t,n])}(s.useCallback(()=>{if("idle"===f.state){let t=(e?e(h,d):null)||h.key;rt[t]=window.scrollY}try{sessionStorage.setItem(n||it,JSON.stringify(rt))}catch(t){}window.history.scrollRestoration="auto"},[n,e,f.state,h,d])),"undefined"!==typeof document&&(s.useLayoutEffect(()=>{try{let t=sessionStorage.getItem(n||it);t&&(rt=JSON.parse(t))}catch(ct){}},[n]),s.useLayoutEffect(()=>{let t=e&&"/"!==u?(t,n)=>e(c({},t,{pathname:(0,l.pb)(t.pathname,u)||t.pathname}),n):e,n=null==i?void 0:i.enableScrollRestoration(rt,()=>window.scrollY,t);return()=>n&&n()},[i,u,e]),s.useLayoutEffect(()=>{if(!1!==r)if("number"!==typeof r){if(h.hash){let t=document.getElementById(decodeURIComponent(h.hash.slice(1)));if(t)return void t.scrollIntoView()}!0!==a&&window.scrollTo(0,0)}else window.scrollTo(0,r)},[h,r,a]))}function at(t,e){let{capture:n}=e||{};s.useEffect(()=>{let e=null!=n?{capture:n}:void 0;return window.addEventListener("beforeunload",t,e),()=>{window.removeEventListener("beforeunload",t,e)}},[t,n])}function ot(t){let{when:e,message:n}=t,i=(0,o.KP)(e);s.useEffect(()=>{if("blocked"===i.state){window.confirm(n)?setTimeout(i.proceed,0):i.reset()}},[i,n]),s.useEffect(()=>{"blocked"!==i.state||e||i.reset()},[i,e])}function lt(t,e){void 0===e&&(e={});let n=s.useContext(T);null==n&&(0,l.Oi)(!1);let{basename:i}=q(G.useViewTransitionState),r=(0,o.x$)(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=(0,l.pb)(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=(0,l.pb)(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=(0,l.B6)(r.pathname,c)||null!=(0,l.B6)(r.pathname,a)}},497:(t,e,n)=>{"use strict";var i=n(218);function r(){}function s(){}s.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,s,a){if(a!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s,resetWarningCache:r};return n.PropTypes=n,n}},579:(t,e,n)=>{"use strict";t.exports=n(153)},587:(t,e,n)=>{"use strict";function i(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}n.d(e,{A:()=>i})},612:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=t[o],c=o+1,u=t[c];if(0>s(l,n))c<r&&0>s(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function b(t){if(g=!1,_(t),!m)if(null!==i(c))m=!0,k(w);else{var e=i(u);null!==e&&O(b,e.startTime-t)}}function w(t,n){m=!1,g&&(g=!1,y(T),T=-1),p=!0;var s=f;try{for(_(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!P());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&r(c),_(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&O(b,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,E=null,T=-1,A=5,C=-1;function P(){return!(e.unstable_now()-C<A)}function R(){if(null!==E){var t=e.unstable_now();C=t;var n=!0;try{n=E(!0,t)}finally{n?S():(M=!1,E=null)}}else M=!1}if("function"===typeof x)S=function(){x(R)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,N=L.port2;L.port1.onmessage=R,S=function(){N.postMessage(null)}}else S=function(){v(R,0)};function k(t){E=t,M||(M=!0,S())}function O(t,n){T=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,k(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(t.sortIndex=s,n(u,t),null===i(c)&&t===i(u)&&(g?(y(T),T=-1):g=!0,O(b,s-a))):(t.sortIndex=o,n(c,t),m||p||(m=!0,k(w))),t},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},705:(t,e,n)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function s(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{A:()=>s})},730:(t,e,n)=>{"use strict";var i=n(43),r=n(67);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(o[t]=e,t=0;t<e.length;t++)a.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(t,e,n,i,r,s,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){g[t]=new m(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){g[t]=new m(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){g[t]=new m(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){g[t]=new m(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){g[t]=new m(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function x(t,e,n,i){var r=g.hasOwnProperty(e)?g[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(v,y);g[e]=new m(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(v,y);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(v,y);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)});var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=O&&t[O]||t["@@iterator"])?t:null}var I,z=Object.assign;function j(t){if(void 0===I)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);I=e&&e[1]||""}return"\n"+I+t}var U=!1;function F(t,e){if(!t||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?j(t):""}function B(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=F(t.type,!1);case 11:return t=F(t.type.render,!1);case 1:return t=F(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case E:return"Profiler";case M:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case A:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case L:return null!==(e=t.displayName||null)?e:H(t.type)||"Memo";case N:e=t._payload,t=t._init;try{return H(t(e))}catch(n){}}return null}function V(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(e);case 8:return e===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function W(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function X(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function q(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=G(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function Z(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return z({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=W(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function J(t,e){null!=(e=e.checked)&&x(t,"checked",e,!1)}function Q(t,e){J(t,e);var n=W(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,W(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function $(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Z(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+W(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return z({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:W(n)}}function st(t,e){var n=W(e.value),i=W(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ot(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return ut(t,e)})}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=mt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(ft).forEach(function(t){pt.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]})});var vt=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function xt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,St=null,Mt=null;function Et(t){if(t=xr(t)){if("function"!==typeof wt)throw Error(s(280));var e=t.stateNode;e&&(e=br(e),wt(t.stateNode,t.type,e))}}function Tt(t){St?Mt?Mt.push(t):Mt=[t]:St=t}function At(){if(St){var t=St,e=Mt;if(Mt=St=null,Et(t),e)for(t=0;t<e.length;t++)Et(e[t])}}function Ct(t,e){return t(e)}function Pt(){}var Rt=!1;function Lt(t,e,n){if(Rt)return t(e,n);Rt=!0;try{return Ct(t,e,n)}finally{Rt=!1,(null!==St||null!==Mt)&&(Pt(),At())}}function Nt(t,e){var n=t.stateNode;if(null===n)return null;var i=br(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var kt=!1;if(u)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){kt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(ut){kt=!1}function Dt(t,e,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var It=!1,zt=null,jt=!1,Ut=null,Ft={onError:function(t){It=!0,zt=t}};function Bt(t,e,n,i,r,s,a,o,l){It=!1,zt=null,Dt.apply(Ft,arguments)}function Ht(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Vt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Wt(t){if(Ht(t)!==t)throw Error(s(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ht(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Wt(r),t;if(a===i)return Wt(r),e;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t))?Xt(t):null}function Xt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Xt(t);if(null!==e)return e;t=t.sibling}return null}var qt=r.unstable_scheduleCallback,Zt=r.unstable_cancelCallback,Yt=r.unstable_shouldYield,Kt=r.unstable_requestPaint,Jt=r.unstable_now,Qt=r.unstable_getCurrentPriorityLevel,$t=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,se=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(oe(t)/le|0)|0},oe=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=he(o):0!==(s&=a)&&(i=he(s))}else 0!==(a=n&~r)?i=he(a):0!==s&&(i=he(s));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(s=e&-e)||16===r&&0!==(4194240&s)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-ae(e)),i|=t[n],e&=~r;return i}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ae(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var xe=0;function _e(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var be,we,Se,Me,Ee,Te=!1,Ae=[],Ce=null,Pe=null,Re=null,Le=new Map,Ne=new Map,ke=[],Oe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function De(t,e){switch(t){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":Pe=null;break;case"mouseover":case"mouseout":Re=null;break;case"pointerover":case"pointerout":Le.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ne.delete(e.pointerId)}}function Ie(t,e,n,i,r,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==e&&(null!==(e=xr(e))&&we(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function ze(t){var e=yr(t.target);if(null!==e){var n=Ht(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Vt(n)))return t.blockedOn=e,void Ee(t.priority,function(){Se(n)})}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function je(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=xr(n))&&we(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);_t=i,n.target.dispatchEvent(i),_t=null,e.shift()}return!0}function Ue(t,e,n){je(t)&&n.delete(e)}function Fe(){Te=!1,null!==Ce&&je(Ce)&&(Ce=null),null!==Pe&&je(Pe)&&(Pe=null),null!==Re&&je(Re)&&(Re=null),Le.forEach(Ue),Ne.forEach(Ue)}function Be(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Fe)))}function He(t){function e(e){return Be(e,t)}if(0<Ae.length){Be(Ae[0],t);for(var n=1;n<Ae.length;n++){var i=Ae[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Ce&&Be(Ce,t),null!==Pe&&Be(Pe,t),null!==Re&&Be(Re,t),Le.forEach(e),Ne.forEach(e),n=0;n<ke.length;n++)(i=ke[n]).blockedOn===t&&(i.blockedOn=null);for(;0<ke.length&&null===(n=ke[0]).blockedOn;)ze(n),null===n.blockedOn&&ke.shift()}var Ve=_.ReactCurrentBatchConfig,We=!0;function Ge(t,e,n,i){var r=xe,s=Ve.transition;Ve.transition=null;try{xe=1,qe(t,e,n,i)}finally{xe=r,Ve.transition=s}}function Xe(t,e,n,i){var r=xe,s=Ve.transition;Ve.transition=null;try{xe=4,qe(t,e,n,i)}finally{xe=r,Ve.transition=s}}function qe(t,e,n,i){if(We){var r=Ye(t,e,n,i);if(null===r)Wi(t,e,i,Ze,n),De(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Ce=Ie(Ce,t,e,n,i,r),!0;case"dragenter":return Pe=Ie(Pe,t,e,n,i,r),!0;case"mouseover":return Re=Ie(Re,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Le.set(s,Ie(Le.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ne.set(s,Ie(Ne.get(s)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(De(t,i),4&e&&-1<Oe.indexOf(t)){for(;null!==r;){var s=xr(r);if(null!==s&&be(s),null===(s=Ye(t,e,n,i))&&Wi(t,e,i,Ze,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Wi(t,e,i,null,n)}}var Ze=null;function Ye(t,e,n,i){if(Ze=null,null!==(t=yr(t=bt(i))))if(null===(e=Ht(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Vt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ze=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case $t:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var Je=null,Qe=null,$e=null;function tn(){if($e)return $e;var t,e,n=Qe,i=n.length,r="value"in Je?Je.value:Je.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===r[s-e];e++);return $e=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function sn(t){function e(e,n,i,r,s){for(var a in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=z({},cn,{view:0,detail:0}),dn=sn(hn),fn=z({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,on=t.screenY-ln.screenY):on=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:on}}),pn=sn(fn),mn=sn(z({},fn,{dataTransfer:0})),gn=sn(z({},hn,{relatedTarget:0})),vn=sn(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xn=sn(yn),_n=sn(z({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function En(){return Mn}var Tn=z({},hn,{key:function(t){if(t.key){var e=bn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),An=sn(Tn),Cn=sn(z({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(z({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Rn=sn(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=z({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=sn(Ln),kn=[9,13,27,32],On=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var In=u&&"TextEvent"in window&&!Dn,zn=u&&(!On||Dn&&8<Dn&&11>=Dn),jn=String.fromCharCode(32),Un=!1;function Fn(t,e){switch(t){case"keyup":return-1!==kn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Vn[t.type]:"textarea"===e}function Gn(t,e,n,i){Tt(i),0<(e=Xi(e,"onChange")).length&&(n=new un("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Xn=null,qn=null;function Zn(t){ji(t,0)}function Yn(t){if(q(_r(t)))return t}function Kn(t,e){if("change"===t)return e}var Jn=!1;if(u){var Qn;if(u){var $n="oninput"in document;if(!$n){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),$n="function"===typeof ti.oninput}Qn=$n}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function ei(){Xn&&(Xn.detachEvent("onpropertychange",ni),qn=Xn=null)}function ni(t){if("value"===t.propertyName&&Yn(qn)){var e=[];Gn(e,qn,t,bt(t)),Lt(Zn,e)}}function ii(t,e,n){"focusin"===t?(ei(),qn=n,(Xn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(qn)}function si(t,e){if("click"===t)return Yn(e)}function ai(t,e){if("input"===t||"change"===t)return Yn(e)}var oi="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(oi(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(e,r)||!oi(t[r],e[r]))return!1}return!0}function ci(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ui(t,e){var n,i=ci(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ci(i)}}function hi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function di(){for(var t=window,e=Z();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=Z((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pi(t){var e=di(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var a=ui(n,i);r&&a&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,xi=!1;function _i(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xi||null==gi||gi!==Z(i)||("selectionStart"in(i=gi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Xi(vi,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=gi)))}function bi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},Si={},Mi={};function Ei(t){if(Si[t])return Si[t];if(!wi[t])return t;var e,n=wi[t];for(e in n)if(n.hasOwnProperty(e)&&e in Mi)return Si[t]=n[e];return t}u&&(Mi=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ti=Ei("animationend"),Ai=Ei("animationiteration"),Ci=Ei("animationstart"),Pi=Ei("transitionend"),Ri=new Map,Li="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(t,e){Ri.set(t,e),l(e,[t])}for(var ki=0;ki<Li.length;ki++){var Oi=Li[ki];Ni(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Ni(Ti,"onAnimationEnd"),Ni(Ai,"onAnimationIteration"),Ni(Ci,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(Pi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ii=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function zi(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,a,o,l,c){if(Bt.apply(this,arguments),It){if(!It)throw Error(s(198));var u=zt;It=!1,zt=null,jt||(jt=!0,Ut=u)}}(i,e,void 0,t),t.currentTarget=null}function ji(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break t;zi(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break t;zi(r,o,c),s=l}}}if(jt)throw t=Ut,jt=!1,Ut=null,t}function Ui(t,e){var n=e[mr];void 0===n&&(n=e[mr]=new Set);var i=t+"__bubble";n.has(i)||(Vi(e,t,2,!1),n.add(i))}function Fi(t,e,n){var i=0;e&&(i|=4),Vi(n,t,i,e)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function Hi(t){if(!t[Bi]){t[Bi]=!0,a.forEach(function(e){"selectionchange"!==e&&(Ii.has(e)||Fi(e,!1,t),Fi(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Bi]||(e[Bi]=!0,Fi("selectionchange",!1,e))}}function Vi(t,e,n,i){switch(Ke(e)){case 1:var r=Ge;break;case 4:r=Xe;break;default:r=qe}n=r.bind(null,e,n,t),r=void 0,!kt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Wi(t,e,n,i,r){var s=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=yr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue t}o=o.parentNode}}i=i.return}Lt(function(){var i=s,r=bt(n),a=[];t:{var o=Ri.get(t);if(void 0!==o){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Ti:case Ai:case Ci:l=vn;break;case Pi:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=i;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Nt(p,d))&&u.push(Gi(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||n===_t||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(h=Ht(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:_r(l),f=null==c?o:_r(c),(o=new u(m,p+"leave",l,n,r)).target=h,o.relatedTarget=f,m=null,yr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)t:{for(d=c,p=0,f=u=l;f;f=qi(f))p++;for(f=0,m=d;m;m=qi(m))f++;for(;0<p-f;)u=qi(u),p--;for(;0<f-p;)d=qi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=qi(u),d=qi(d)}u=null}else u=null;null!==l&&Zi(a,o,l,u,!1),null!==c&&null!==h&&Zi(a,h,c,u,!0)}if("select"===(l=(o=i?_r(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Kn;else if(Wn(o))if(Jn)g=ai;else{g=ri;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=si);switch(g&&(g=g(t,i))?Gn(a,g,n,r):(v&&v(t,o,i),"focusout"===t&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&tt(o,"number",o.value)),v=i?_r(i):window,t){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,_i(a,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":_i(a,n,r)}var y;if(On)t:{switch(t){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else Hn?Fn(t,n)&&(x="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(x="onCompositionStart");x&&(zn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Hn&&(y=tn()):(Qe="value"in(Je=r)?Je.value:Je.textContent,Hn=!0)),0<(v=Xi(i,x)).length&&(x=new _n(x,t,null,n,r),a.push({event:x,listeners:v}),y?x.data=y:null!==(y=Bn(n))&&(x.data=y))),(y=In?function(t,e){switch(t){case"compositionend":return Bn(e);case"keypress":return 32!==e.which?null:(Un=!0,jn);case"textInput":return(t=e.data)===jn&&Un?null:t;default:return null}}(t,n):function(t,e){if(Hn)return"compositionend"===t||!On&&Fn(t,e)?(t=tn(),$e=Qe=Je=null,Hn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=Xi(i,"onBeforeInput")).length&&(r=new _n("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}ji(a,e)})}function Gi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Nt(t,n))&&i.unshift(Gi(t,s,r)),null!=(s=Nt(t,e))&&i.push(Gi(t,s,r))),t=t.return}return i}function qi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Zi(t,e,n,i,r){for(var s=e._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Nt(n,s))&&a.unshift(Gi(n,l,o)):r||null!=(l=Nt(n,s))&&a.push(Gi(n,l,o))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Yi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Ji(t){return("string"===typeof t?t:""+t).replace(Yi,"\n").replace(Ki,"")}function Qi(t,e,n){if(e=Ji(e),Ji(t)!==e&&n)throw Error(s(425))}function $i(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(t){return sr.resolve(null).then(t).catch(or)}:ir;function or(t){setTimeout(function(){throw t})}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void He(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);He(e)}function cr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ur(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,mr="__reactEvents$"+hr,gr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(t){var e=t[dr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[dr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ur(t);null!==t;){if(n=t[dr])return n;t=ur(t)}return e}n=(t=n).parentNode}return null}function xr(t){return!(t=t[dr]||t[pr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function _r(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function br(t){return t[fr]||null}var wr=[],Sr=-1;function Mr(t){return{current:t}}function Er(t){0>Sr||(t.current=wr[Sr],wr[Sr]=null,Sr--)}function Tr(t,e){Sr++,wr[Sr]=t.current,t.current=e}var Ar={},Cr=Mr(Ar),Pr=Mr(!1),Rr=Ar;function Lr(t,e){var n=t.type.contextTypes;if(!n)return Ar;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Nr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function kr(){Er(Pr),Er(Cr)}function Or(t,e,n){if(Cr.current!==Ar)throw Error(s(168));Tr(Cr,e),Tr(Pr,n)}function Dr(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(s(108,V(t)||"Unknown",r));return z({},n,i)}function Ir(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ar,Rr=Cr.current,Tr(Cr,t),Tr(Pr,Pr.current),!0}function zr(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=Dr(t,e,Rr),i.__reactInternalMemoizedMergedChildContext=t,Er(Pr),Er(Cr),Tr(Cr,t)):Er(Pr),Tr(Pr,n)}var jr=null,Ur=!1,Fr=!1;function Br(t){null===jr?jr=[t]:jr.push(t)}function Hr(){if(!Fr&&null!==jr){Fr=!0;var t=0,e=xe;try{var n=jr;for(xe=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}jr=null,Ur=!1}catch(r){throw null!==jr&&(jr=jr.slice(t+1)),qt($t,Hr),r}finally{xe=e,Fr=!1}}return null}var Vr=[],Wr=0,Gr=null,Xr=0,qr=[],Zr=0,Yr=null,Kr=1,Jr="";function Qr(t,e){Vr[Wr++]=Xr,Vr[Wr++]=Gr,Gr=t,Xr=e}function $r(t,e,n){qr[Zr++]=Kr,qr[Zr++]=Jr,qr[Zr++]=Yr,Yr=t;var i=Kr;t=Jr;var r=32-ae(i)-1;i&=~(1<<r),n+=1;var s=32-ae(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Kr=1<<32-ae(e)+r|n<<r|i,Jr=s+t}else Kr=1<<s|n<<r|i,Jr=t}function ts(t){null!==t.return&&(Qr(t,1),$r(t,1,0))}function es(t){for(;t===Gr;)Gr=Vr[--Wr],Vr[Wr]=null,Xr=Vr[--Wr],Vr[Wr]=null;for(;t===Yr;)Yr=qr[--Zr],qr[Zr]=null,Jr=qr[--Zr],qr[Zr]=null,Kr=qr[--Zr],qr[Zr]=null}var ns=null,is=null,rs=!1,ss=null;function as(t,e){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function os(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ns=t,is=cr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ns=t,is=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Yr?{id:Kr,overflow:Jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,ns=t,is=null,!0);default:return!1}}function ls(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function cs(t){if(rs){var e=is;if(e){var n=e;if(!os(t,e)){if(ls(t))throw Error(s(418));e=cr(n.nextSibling);var i=ns;e&&os(t,e)?as(i,n):(t.flags=-4097&t.flags|2,rs=!1,ns=t)}}else{if(ls(t))throw Error(s(418));t.flags=-4097&t.flags|2,rs=!1,ns=t}}}function us(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ns=t}function hs(t){if(t!==ns)return!1;if(!rs)return us(t),rs=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=is)){if(ls(t))throw ds(),Error(s(418));for(;e;)as(t,e),e=cr(e.nextSibling)}if(us(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){is=cr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}is=null}}else is=ns?cr(t.stateNode.nextSibling):null;return!0}function ds(){for(var t=is;t;)t=cr(t.nextSibling)}function fs(){is=ns=null,rs=!1}function ps(t){null===ss?ss=[t]:ss.push(t)}var ms=_.ReactCurrentBatchConfig;function gs(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=i,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=r.refs;null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function vs(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ys(t){return(0,t._init)(t._payload)}function xs(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=kc(t,e)).index=0,t.sibling=null,t}function a(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=zc(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var s=n.type;return s===S?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&ys(s)===e.type)?((i=r(e,n.props)).ref=gs(t,e,n),i.return=t,i):((i=Oc(n.type,n.key,n.props,null,t.mode,i)).ref=gs(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=jc(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,s){return null===e||7!==e.tag?((e=Dc(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=zc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case b:return(n=Oc(e.type,e.key,e.props,null,t.mode,n)).ref=gs(t,null,e),n.return=t,n;case w:return(e=jc(e,t.mode,n)).return=t,e;case N:return d(t,(0,e._init)(e._payload),n)}if(et(e)||D(e))return(e=Dc(e,t.mode,n,null)).return=t,e;vs(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?c(t,e,n,i):null;case w:return n.key===r?u(t,e,n,i):null;case N:return f(t,e,(r=n._init)(n._payload),i)}if(et(n)||D(n))return null!==r?null:h(t,e,n,i,null);vs(t,n)}return null}function p(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case w:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case N:return p(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||D(i))return h(e,t=t.get(n)||null,i,r,null);vs(e,i)}return null}function m(r,s,o,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(r,h,o[m],l);if(null===v){null===h&&(h=g);break}t&&h&&null===v.alternate&&e(r,h),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===o.length)return n(r,h),rs&&Qr(r,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(r,o[m],l))&&(s=a(h,s,m),null===u?c=h:u.sibling=h,u=h);return rs&&Qr(r,m),c}for(h=i(r,h);m<o.length;m++)null!==(g=p(h,r,m,o[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return t&&h.forEach(function(t){return e(r,t)}),rs&&Qr(r,m),c}function g(r,o,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var x=f(r,m,y.value,c);if(null===x){null===m&&(m=v);break}t&&m&&null===x.alternate&&e(r,m),o=a(x,o,g),null===h?u=x:h.sibling=x,h=x,m=v}if(y.done)return n(r,m),rs&&Qr(r,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(r,y.value,c))&&(o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return rs&&Qr(r,g),u}for(m=i(r,m);!y.done;g++,y=l.next())null!==(y=p(m,r,g,y.value,c))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return t&&m.forEach(function(t){return e(r,t)}),rs&&Qr(r,g),u}return function t(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:t:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&ys(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=gs(i,u,a),s.return=i,i=s;break t}n(i,u);break}e(i,u),u=u.sibling}a.type===S?((s=Dc(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Oc(a.type,a.key,a.props,null,i.mode,l)).ref=gs(i,s,a),l.return=i,i=l)}return o(i);case w:t:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break t}n(i,s);break}e(i,s),s=s.sibling}(s=jc(a,i.mode,l)).return=i,i=s}return o(i);case N:return t(i,s,(u=a._init)(a._payload),l)}if(et(a))return m(i,s,a,l);if(D(a))return g(i,s,a,l);vs(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=zc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var _s=xs(!0),bs=xs(!1),ws=Mr(null),Ss=null,Ms=null,Es=null;function Ts(){Es=Ms=Ss=null}function As(t){var e=ws.current;Er(ws),t._currentValue=e}function Cs(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ps(t,e){Ss=t,Es=Ms=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(xo=!0),t.firstContext=null)}function Rs(t){var e=t._currentValue;if(Es!==t)if(t={context:t,memoizedValue:e,next:null},null===Ms){if(null===Ss)throw Error(s(308));Ms=t,Ss.dependencies={lanes:0,firstContext:t}}else Ms=Ms.next=t;return e}var Ls=null;function Ns(t){null===Ls?Ls=[t]:Ls.push(t)}function ks(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Ns(e)):(n.next=r.next,r.next=n),e.interleaved=n,Os(t,i)}function Os(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Is(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zs(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function js(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Us(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Cl)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Os(t,n)}return null===(r=i.interleaved)?(e.next=e,Ns(i)):(e.next=r.next,r.next=e),i.interleaved=e,Os(t,n)}function Fs(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}function Bs(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hs(t,e,n,i){var r=t.updateQueue;Ds=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=t.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var p=t,m=o;switch(d=e,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break t;h=z({},h,d);break t;case 2:Ds=!0}}null!==o.callback&&0!==o.lane&&(t.flags|=64,null===(d=r.effects)?r.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(d=o).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(e=r.shared.interleaved)){r=e;do{a|=r.lane,r=r.next}while(r!==e)}else null===s&&(r.shared.lanes=0);Il|=a,t.lanes=a,t.memoizedState=h}}function Vs(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Ws={},Gs=Mr(Ws),Xs=Mr(Ws),qs=Mr(Ws);function Zs(t){if(t===Ws)throw Error(s(174));return t}function Ys(t,e){switch(Tr(qs,e),Tr(Xs,t),Tr(Gs,Ws),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Er(Gs),Tr(Gs,e)}function Ks(){Er(Gs),Er(Xs),Er(qs)}function Js(t){Zs(qs.current);var e=Zs(Gs.current),n=lt(e,t.type);e!==n&&(Tr(Xs,t),Tr(Gs,n))}function Qs(t){Xs.current===t&&(Er(Gs),Er(Xs))}var $s=Mr(0);function ta(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ea=[];function na(){for(var t=0;t<ea.length;t++)ea[t]._workInProgressVersionPrimary=null;ea.length=0}var ia=_.ReactCurrentDispatcher,ra=_.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,ha=0,da=0;function fa(){throw Error(s(321))}function pa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!oi(t[n],e[n]))return!1;return!0}function ma(t,e,n,i,r,a){if(sa=a,aa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=null===t||null===t.memoizedState?Qa:$a,t=n(i,r),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(s(301));a+=1,la=oa=null,e.updateQueue=null,ia.current=to,t=n(i,r)}while(ua)}if(ia.current=Ja,e=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,e)throw Error(s(300));return t}function ga(){var t=0!==ha;return ha=0,t}function va(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=t:la=la.next=t,la}function ya(){if(null===oa){var t=aa.alternate;t=null!==t?t.memoizedState:null}else t=oa.next;var e=null===la?aa.memoizedState:la.next;if(null!==e)la=e,oa=t;else{if(null===t)throw Error(s(310));t={memoizedState:(oa=t).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=t:la=la.next=t}return la}function xa(t,e){return"function"===typeof e?e(t):e}function _a(t){var e=ya(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=oa,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((sa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,aa.lanes|=h,Il|=h}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,oi(i,e.memoizedState)||(xo=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{a=r.lane,aa.lanes|=a,Il|=a,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ba(t){var e=ya(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=t(a,o.action),o=o.next}while(o!==r);oi(a,e.memoizedState)||(xo=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function wa(){}function Sa(t,e){var n=aa,i=ya(),r=e(),a=!oi(i.memoizedState,r);if(a&&(i.memoizedState=r,xo=!0),i=i.queue,Da(Ta.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ra(9,Ea.bind(null,n,i,r,e),void 0,null),null===Pl)throw Error(s(349));0!==(30&sa)||Ma(n,e,r)}return r}function Ma(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=aa.updateQueue)?(e={lastEffect:null,stores:null},aa.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ea(t,e,n,i){e.value=n,e.getSnapshot=i,Aa(e)&&Ca(t)}function Ta(t,e,n){return n(function(){Aa(e)&&Ca(t)})}function Aa(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!oi(t,n)}catch(i){return!0}}function Ca(t){var e=Os(t,1);null!==e&&nc(e,t,1,-1)}function Pa(t){var e=va();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},e.queue=t,t=t.dispatch=qa.bind(null,aa,t),[e.memoizedState,t]}function Ra(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=aa.updateQueue)?(e={lastEffect:null,stores:null},aa.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function La(){return ya().memoizedState}function Na(t,e,n,i){var r=va();aa.flags|=t,r.memoizedState=Ra(1|e,n,void 0,void 0===i?null:i)}function ka(t,e,n,i){var r=ya();i=void 0===i?null:i;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==i&&pa(i,a.deps))return void(r.memoizedState=Ra(e,n,s,i))}aa.flags|=t,r.memoizedState=Ra(1|e,n,s,i)}function Oa(t,e){return Na(8390656,8,t,e)}function Da(t,e){return ka(2048,8,t,e)}function Ia(t,e){return ka(4,2,t,e)}function za(t,e){return ka(4,4,t,e)}function ja(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ua(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ka(4,4,ja.bind(null,e,t),n)}function Fa(){}function Ba(t,e){var n=ya();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&pa(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Ha(t,e){var n=ya();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&pa(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Va(t,e,n){return 0===(21&sa)?(t.baseState&&(t.baseState=!1,xo=!0),t.memoizedState=n):(oi(n,e)||(n=me(),aa.lanes|=n,Il|=n,t.baseState=!0),e)}function Wa(t,e){var n=xe;xe=0!==n&&4>n?n:4,t(!0);var i=ra.transition;ra.transition={};try{t(!1),e()}finally{xe=n,ra.transition=i}}function Ga(){return ya().memoizedState}function Xa(t,e,n){var i=ec(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Za(t))Ya(e,n);else if(null!==(n=ks(t,e,n,i))){nc(n,t,i,tc()),Ka(n,e,i)}}function qa(t,e,n){var i=ec(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Za(t))Ya(e,r);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,a)){var l=e.interleaved;return null===l?(r.next=r,Ns(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(c){}null!==(n=ks(t,e,r,i))&&(nc(n,t,i,r=tc()),Ka(n,e,i))}}function Za(t){var e=t.alternate;return t===aa||null!==e&&e===aa}function Ya(t,e){ua=ca=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ka(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}var Ja={readContext:Rs,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Qa={readContext:Rs,useCallback:function(t,e){return va().memoizedState=[t,void 0===e?null:e],t},useContext:Rs,useEffect:Oa,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Na(4194308,4,ja.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Na(4194308,4,t,e)},useInsertionEffect:function(t,e){return Na(4,2,t,e)},useMemo:function(t,e){var n=va();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=va();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Xa.bind(null,aa,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},va().memoizedState=t},useState:Pa,useDebugValue:Fa,useDeferredValue:function(t){return va().memoizedState=t},useTransition:function(){var t=Pa(!1),e=t[0];return t=Wa.bind(null,t[1]),va().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=aa,r=va();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Pl)throw Error(s(349));0!==(30&sa)||Ma(i,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,Oa(Ta.bind(null,i,a,t),[t]),i.flags|=2048,Ra(9,Ea.bind(null,i,a,n,e),void 0,null),n},useId:function(){var t=va(),e=Pl.identifierPrefix;if(rs){var n=Jr;e=":"+e+"R"+(n=(Kr&~(1<<32-ae(Kr)-1)).toString(32)+n),0<(n=ha++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=da++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$a={readContext:Rs,useCallback:Ba,useContext:Rs,useEffect:Da,useImperativeHandle:Ua,useInsertionEffect:Ia,useLayoutEffect:za,useMemo:Ha,useReducer:_a,useRef:La,useState:function(){return _a(xa)},useDebugValue:Fa,useDeferredValue:function(t){return Va(ya(),oa.memoizedState,t)},useTransition:function(){return[_a(xa)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1},to={readContext:Rs,useCallback:Ba,useContext:Rs,useEffect:Da,useImperativeHandle:Ua,useInsertionEffect:Ia,useLayoutEffect:za,useMemo:Ha,useReducer:ba,useRef:La,useState:function(){return ba(xa)},useDebugValue:Fa,useDeferredValue:function(t){var e=ya();return null===oa?e.memoizedState=t:Va(e,oa.memoizedState,t)},useTransition:function(){return[ba(xa)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1};function eo(t,e){if(t&&t.defaultProps){for(var n in e=z({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function no(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:z({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var io={isMounted:function(t){return!!(t=t._reactInternals)&&Ht(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=tc(),r=ec(t),s=js(i,r);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Us(t,s,r))&&(nc(e,t,r,i),Fs(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=tc(),r=ec(t),s=js(i,r);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Us(t,s,r))&&(nc(e,t,r,i),Fs(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tc(),i=ec(t),r=js(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Us(t,r,i))&&(nc(e,t,i,n),Fs(e,t,i))}};function ro(t,e,n,i,r,s,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,a):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function so(t,e,n){var i=!1,r=Ar,s=e.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(r=Nr(e)?Rr:Cr.current,s=(i=null!==(i=e.contextTypes)&&void 0!==i)?Lr(t,r):Ar),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=io,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function ao(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&io.enqueueReplaceState(e,e.state,null)}function oo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Is(t);var s=e.contextType;"object"===typeof s&&null!==s?r.context=Rs(s):(s=Nr(e)?Rr:Cr.current,r.context=Lr(t,s)),r.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(no(t,e,s,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&io.enqueueReplaceState(r,r.state,null),Hs(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function lo(t,e){try{var n="",i=e;do{n+=B(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:r,digest:null}}function co(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function uo(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(t,e,n){(n=js(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wl||(Wl=!0,Gl=i),uo(0,e)},n}function po(t,e,n){(n=js(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){uo(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,e),"function"!==typeof i&&(null===Xl?Xl=new Set([this]):Xl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function mo(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new ho;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Ec.bind(null,t,e,n),e.then(t,t))}function go(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vo(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=js(-1,1)).tag=2,Us(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var yo=_.ReactCurrentOwner,xo=!1;function _o(t,e,n,i){e.child=null===t?bs(e,null,n,i):_s(e,t.child,n,i)}function bo(t,e,n,i,r){n=n.render;var s=e.ref;return Ps(e,r),i=ma(t,e,n,i,s,r),n=ga(),null===t||xo?(rs&&n&&ts(e),e.flags|=1,_o(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Wo(t,e,r))}function wo(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||Nc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Oc(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,So(t,e,s,i,r))}if(s=t.child,0===(t.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&t.ref===e.ref)return Wo(t,e,r)}return e.flags|=1,(t=kc(s,i)).ref=e.ref,t.return=e,e.child=t}function So(t,e,n,i,r){if(null!==t){var s=t.memoizedProps;if(li(s,i)&&t.ref===e.ref){if(xo=!1,e.pendingProps=i=s,0===(t.lanes&r))return e.lanes=t.lanes,Wo(t,e,r);0!==(131072&t.flags)&&(xo=!0)}}return To(t,e,n,i,r)}function Mo(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(kl,Nl),Nl|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tr(kl,Nl),Nl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(kl,Nl),Nl|=i}else null!==s?(i=s.baseLanes|n,e.memoizedState=null):i=n,Tr(kl,Nl),Nl|=i;return _o(t,e,r,n),e.child}function Eo(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function To(t,e,n,i,r){var s=Nr(n)?Rr:Cr.current;return s=Lr(e,s),Ps(e,r),n=ma(t,e,n,i,s,r),i=ga(),null===t||xo?(rs&&i&&ts(e),e.flags|=1,_o(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Wo(t,e,r))}function Ao(t,e,n,i,r){if(Nr(n)){var s=!0;Ir(e)}else s=!1;if(Ps(e,r),null===e.stateNode)Vo(t,e),so(e,n,i),oo(e,n,i,r),i=!0;else if(null===t){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Lr(e,c=Nr(n)?Rr:Cr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&ao(e,a,i,c),Ds=!1;var d=e.memoizedState;a.state=d,Hs(e,i,a,r),l=e.memoizedState,o!==i||d!==l||Pr.current||Ds?("function"===typeof u&&(no(e,n,u,i),l=e.memoizedState),(o=Ds||ro(e,n,o,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,zs(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:eo(e.type,o),a.props=c,h=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Lr(e,l=Nr(n)?Rr:Cr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ao(e,a,i,l),Ds=!1,d=e.memoizedState,a.state=d,Hs(e,i,a,r);var p=e.memoizedState;o!==h||d!==p||Pr.current||Ds?("function"===typeof f&&(no(e,n,f,i),p=e.memoizedState),(c=Ds||ro(e,n,c,i,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Co(t,e,n,i,s,r)}function Co(t,e,n,i,r,s){Eo(t,e);var a=0!==(128&e.flags);if(!i&&!a)return r&&zr(e,n,!1),Wo(t,e,s);i=e.stateNode,yo.current=e;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&a?(e.child=_s(e,t.child,null,s),e.child=_s(e,null,o,s)):_o(t,e,o,s),e.memoizedState=i.state,r&&zr(e,n,!0),e.child}function Po(t){var e=t.stateNode;e.pendingContext?Or(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Or(0,e.context,!1),Ys(t,e.containerInfo)}function Ro(t,e,n,i,r){return fs(),ps(r),e.flags|=256,_o(t,e,n,i),e.child}var Lo,No,ko,Oo,Do={dehydrated:null,treeContext:null,retryLane:0};function Io(t){return{baseLanes:t,cachePool:null,transitions:null}}function zo(t,e,n){var i,r=e.pendingProps,a=$s.current,o=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&a)),i?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Tr($s,1&a),null===t)return cs(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ic(l,r,0,null),t=Dc(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Io(n),e.memoizedState=Do,t):jo(e,l));if(null!==(a=t.memoizedState)&&null!==(i=a.dehydrated))return function(t,e,n,i,r,a,o){if(n)return 256&e.flags?(e.flags&=-257,Uo(t,e,o,i=co(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=i.fallback,r=e.mode,i=Ic({mode:"visible",children:i.children},r,0,null),(a=Dc(a,r,o,null)).flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,0!==(1&e.mode)&&_s(e,t.child,null,o),e.child.memoizedState=Io(o),e.memoizedState=Do,a);if(0===(1&e.mode))return Uo(t,e,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Uo(t,e,o,i=co(a=Error(s(419)),i,void 0))}if(l=0!==(o&t.childLanes),xo||l){if(null!==(i=Pl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Os(t,r),nc(i,t,r,-1))}return mc(),Uo(t,e,o,i=co(Error(s(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Ac.bind(null,t),r._reactRetry=e,null):(t=a.treeContext,is=cr(r.nextSibling),ns=e,rs=!0,ss=null,null!==t&&(qr[Zr++]=Kr,qr[Zr++]=Jr,qr[Zr++]=Yr,Kr=t.id,Jr=t.overflow,Yr=e),e=jo(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,a,n);if(o){o=r.fallback,l=e.mode,i=(a=t.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==a?((r=e.child).childLanes=0,r.pendingProps=c,e.deletions=null):(r=kc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=kc(i,o):(o=Dc(o,l,n,null)).flags|=2,o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=null===(l=t.child.memoizedState)?Io(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Do,r}return t=(o=t.child).sibling,r=kc(o,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jo(t,e){return(e=Ic({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Uo(t,e,n,i){return null!==i&&ps(i),_s(e,t.child,null,n),(t=jo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Fo(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Cs(t.return,e,n)}function Bo(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ho(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(_o(t,e,i.children,n),0!==(2&(i=$s.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Fo(t,n,e);else if(19===t.tag)Fo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Tr($s,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===ta(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Bo(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===ta(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Bo(e,!0,n,null,s);break;case"together":Bo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vo(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wo(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Il|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=kc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=kc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Go(t,e){if(!rs)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Xo(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function qo(t,e,n){var i=e.pendingProps;switch(es(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(e),null;case 1:case 17:return Nr(e.type)&&kr(),Xo(e),null;case 3:return i=e.stateNode,Ks(),Er(Pr),Er(Cr),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(hs(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==ss&&(ac(ss),ss=null))),No(t,e),Xo(e),null;case 5:Qs(e);var r=Zs(qs.current);if(n=e.type,null!==t&&null!=e.stateNode)ko(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(s(166));return Xo(e),null}if(t=Zs(Gs.current),hs(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[dr]=e,i[fr]=a,t=0!==(1&e.mode),n){case"dialog":Ui("cancel",i),Ui("close",i);break;case"iframe":case"object":case"embed":Ui("load",i);break;case"video":case"audio":for(r=0;r<Di.length;r++)Ui(Di[r],i);break;case"source":Ui("error",i);break;case"img":case"image":case"link":Ui("error",i),Ui("load",i);break;case"details":Ui("toggle",i);break;case"input":K(i,a),Ui("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Ui("invalid",i);break;case"textarea":rt(i,a),Ui("invalid",i)}for(var l in yt(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qi(i.textContent,c,t),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qi(i.textContent,c,t),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ui("scroll",i)}switch(n){case"input":X(i),$(i,a,!0);break;case"textarea":X(i),at(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=$i)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=ot(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[dr]=e,t[fr]=i,Lo(t,e,!1,!1),e.stateNode=t;t:{switch(l=xt(n,i),n){case"dialog":Ui("cancel",t),Ui("close",t),r=i;break;case"iframe":case"object":case"embed":Ui("load",t),r=i;break;case"video":case"audio":for(r=0;r<Di.length;r++)Ui(Di[r],t);r=i;break;case"source":Ui("error",t),r=i;break;case"img":case"image":case"link":Ui("error",t),Ui("load",t),r=i;break;case"details":Ui("toggle",t),r=i;break;case"input":K(t,i),r=Y(t,i),Ui("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=z({},i,{value:void 0}),Ui("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Ui("invalid",t)}for(a in yt(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?gt(t,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ui("scroll",t):null!=u&&x(t,a,u,l))}switch(n){case"input":X(t),$(t,i,!1);break;case"textarea":X(t),at(t);break;case"option":null!=i.value&&t.setAttribute("value",""+W(i.value));break;case"select":t.multiple=!!i.multiple,null!=(a=i.value)?nt(t,!!i.multiple,a,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Xo(e),null;case 6:if(t&&null!=e.stateNode)Oo(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));if(n=Zs(qs.current),Zs(Gs.current),hs(e)){if(i=e.stateNode,n=e.memoizedProps,i[dr]=e,(a=i.nodeValue!==n)&&null!==(t=ns))switch(t.tag){case 3:Qi(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=e,e.stateNode=i}return Xo(e),null;case 13:if(Er($s),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&e.mode)&&0===(128&e.flags))ds(),fs(),e.flags|=98560,a=!1;else if(a=hs(e),null!==i&&null!==i.dehydrated){if(null===t){if(!a)throw Error(s(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(s(317));a[dr]=e}else fs(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Xo(e),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&$s.current)?0===Ol&&(Ol=3):mc())),null!==e.updateQueue&&(e.flags|=4),Xo(e),null);case 4:return Ks(),No(t,e),null===t&&Hi(e.stateNode.containerInfo),Xo(e),null;case 10:return As(e.type._context),Xo(e),null;case 19:if(Er($s),null===(a=e.memoizedState))return Xo(e),null;if(i=0!==(128&e.flags),null===(l=a.rendering))if(i)Go(a,!1);else{if(0!==Ol||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ta(t))){for(e.flags|=128,Go(a,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tr($s,1&$s.current|2),e.child}t=t.sibling}null!==a.tail&&Jt()>Hl&&(e.flags|=128,i=!0,Go(a,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=ta(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return Xo(e),null}else 2*Jt()-a.renderingStartTime>Hl&&1073741824!==n&&(e.flags|=128,i=!0,Go(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Jt(),e.sibling=null,n=$s.current,Tr($s,i?1&n|2:1&n),e):(Xo(e),null);case 22:case 23:return hc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Nl)&&(Xo(e),6&e.subtreeFlags&&(e.flags|=8192)):Xo(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function Zo(t,e){switch(es(e),e.tag){case 1:return Nr(e.type)&&kr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Ks(),Er(Pr),Er(Cr),na(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Qs(e),null;case 13:if(Er($s),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));fs()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Er($s),null;case 4:return Ks(),null;case 10:return As(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Lo=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},No=function(){},ko=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Zs(Gs.current);var s,a=null;switch(n){case"input":r=Y(t,r),i=Y(t,i),a=[];break;case"select":r=z({},r,{value:void 0}),i=z({},i,{value:void 0}),a=[];break;case"textarea":r=it(t,r),i=it(t,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=$i)}for(u in yt(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ui("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}},Oo=function(t,e,n,i){n!==i&&(e.flags|=4)};var Yo=!1,Ko=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function $o(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Mc(t,e,i)}else n.current=null}function tl(t,e,n){try{n()}catch(i){Mc(t,e,i)}}var el=!1;function nl(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,void 0!==s&&tl(e,n,s)}r=r.next}while(r!==i)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function rl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[dr],delete e[fr],delete e[mr],delete e[gr],delete e[vr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ol(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=$i));else if(4!==i&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var ul=null,hl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(re,n)}catch(o){}switch(n.tag){case 5:Ko||$o(n,e);case 6:var i=ul,r=hl;ul=null,dl(t,e,n),hl=r,null!==(ul=i)&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),He(t)):lr(ul,n.stateNode));break;case 4:i=ul,r=hl,ul=n.stateNode.containerInfo,hl=!0,dl(t,e,n),ul=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Ko&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,e,a),r=r.next}while(r!==i)}dl(t,e,n);break;case 1:if(!Ko&&($o(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Mc(n,e,o)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Ko=(i=Ko)||null!==n.memoizedState,dl(t,e,n),Ko=i):dl(t,e,n);break;default:dl(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Jo),e.forEach(function(e){var i=Cc.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))})}}function ml(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=t,o=e,l=o;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Mc(r,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),vl(t),4&i){try{nl(3,t,t.return),il(3,t)}catch(g){Mc(t,t.return,g)}try{nl(5,t,t.return)}catch(g){Mc(t,t.return,g)}}break;case 1:ml(e,t),vl(t),512&i&&null!==n&&$o(n,n.return);break;case 5:if(ml(e,t),vl(t),512&i&&null!==n&&$o(n,n.return),32&t.flags){var r=t.stateNode;try{dt(r,"")}catch(g){Mc(t,t.return,g)}}if(4&i&&null!=(r=t.stateNode)){var a=t.memoizedProps,o=null!==n?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(r,a),xt(l,o);var u=xt(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?gt(r,d):"dangerouslySetInnerHTML"===h?ht(r,d):"children"===h?dt(r,d):x(r,h,d,u)}switch(l){case"input":Q(r,a);break;case"textarea":st(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?nt(r,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?nt(r,!!a.multiple,a.defaultValue,!0):nt(r,!!a.multiple,a.multiple?[]:"",!1))}r[fr]=a}catch(g){Mc(t,t.return,g)}}break;case 6:if(ml(e,t),vl(t),4&i){if(null===t.stateNode)throw Error(s(162));r=t.stateNode,a=t.memoizedProps;try{r.nodeValue=a}catch(g){Mc(t,t.return,g)}}break;case 3:if(ml(e,t),vl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(g){Mc(t,t.return,g)}break;case 4:default:ml(e,t),vl(t);break;case 13:ml(e,t),vl(t),8192&(r=t.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Bl=Jt())),4&i&&pl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Ko=(u=Ko)||h,ml(e,t),Ko=u):ml(e,t),vl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Qo=t,h=t.child;null!==h;){for(d=Qo=h;null!==Qo;){switch(p=(f=Qo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:$o(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){i=f,n=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Mc(i,n,g)}}break;case 5:$o(f,f.return);break;case 22:if(null!==f.memoizedState){bl(d);continue}}null!==p?(p.return=f,Qo=p):bl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=mt("display",o))}catch(g){Mc(t,t.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Mc(t,t.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),vl(t),4&i&&pl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var i=n;break t}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(dt(r,""),i.flags&=-33),cl(t,ol(t),r);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(t,ol(t),a);break;default:throw Error(s(161))}}catch(o){Mc(t,t.return,o)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){Qo=t,xl(t,e,n)}function xl(t,e,n){for(var i=0!==(1&t.mode);null!==Qo;){var r=Qo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Yo;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Ko;o=Yo;var c=Ko;if(Yo=a,(Ko=l)&&!c)for(Qo=r;null!==Qo;)l=(a=Qo).child,22===a.tag&&null!==a.memoizedState?wl(r):null!==l?(l.return=a,Qo=l):wl(r);for(;null!==s;)Qo=s,xl(s,e,n),s=s.sibling;Qo=r,Yo=o,Ko=c}_l(t)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Qo=s):_l(t)}}function _l(t){for(;null!==Qo;){var e=Qo;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ko||il(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Ko)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:eo(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Vs(e,a,i);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Vs(e,o,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&He(d)}}}break;default:throw Error(s(163))}Ko||512&e.flags&&rl(e)}catch(f){Mc(e,e.return,f)}}if(e===t){Qo=null;break}if(null!==(n=e.sibling)){n.return=e.return,Qo=n;break}Qo=e.return}}function bl(t){for(;null!==Qo;){var e=Qo;if(e===t){Qo=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Qo=n;break}Qo=e.return}}function wl(t){for(;null!==Qo;){var e=Qo;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Mc(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Mc(e,r,l)}}var s=e.return;try{rl(e)}catch(l){Mc(e,s,l)}break;case 5:var a=e.return;try{rl(e)}catch(l){Mc(e,a,l)}}}catch(l){Mc(e,e.return,l)}if(e===t){Qo=null;break}var o=e.sibling;if(null!==o){o.return=e.return,Qo=o;break}Qo=e.return}}var Sl,Ml=Math.ceil,El=_.ReactCurrentDispatcher,Tl=_.ReactCurrentOwner,Al=_.ReactCurrentBatchConfig,Cl=0,Pl=null,Rl=null,Ll=0,Nl=0,kl=Mr(0),Ol=0,Dl=null,Il=0,zl=0,jl=0,Ul=null,Fl=null,Bl=0,Hl=1/0,Vl=null,Wl=!1,Gl=null,Xl=null,ql=!1,Zl=null,Yl=0,Kl=0,Jl=null,Ql=-1,$l=0;function tc(){return 0!==(6&Cl)?Jt():-1!==Ql?Ql:Ql=Jt()}function ec(t){return 0===(1&t.mode)?1:0!==(2&Cl)&&0!==Ll?Ll&-Ll:null!==ms.transition?(0===$l&&($l=me()),$l):0!==(t=xe)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function nc(t,e,n,i){if(50<Kl)throw Kl=0,Jl=null,Error(s(185));ve(t,n,i),0!==(2&Cl)&&t===Pl||(t===Pl&&(0===(2&Cl)&&(zl|=n),4===Ol&&oc(t,Ll)),ic(t,i),1===n&&0===Cl&&0===(1&e.mode)&&(Hl=Jt()+500,Ur&&Hr()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ae(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=fe(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}(t,e);var i=de(t,t===Pl?Ll:0);if(0===i)null!==n&&Zt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Zt(n),1===e)0===t.tag?function(t){Ur=!0,Br(t)}(lc.bind(null,t)):Br(lc.bind(null,t)),ar(function(){0===(6&Cl)&&Hr()}),n=null;else{switch(_e(i)){case 1:n=$t;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Pc(n,rc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rc(t,e){if(Ql=-1,$l=0,0!==(6&Cl))throw Error(s(327));var n=t.callbackNode;if(wc()&&t.callbackNode!==n)return null;var i=de(t,t===Pl?Ll:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=gc(t,i);else{e=i;var r=Cl;Cl|=2;var a=pc();for(Pl===t&&Ll===e||(Vl=null,Hl=Jt()+500,dc(t,e));;)try{yc();break}catch(l){fc(t,l)}Ts(),El.current=a,Cl=r,null!==Rl?e=0:(Pl=null,Ll=0,e=Ol)}if(0!==e){if(2===e&&(0!==(r=pe(t))&&(i=r,e=sc(t,r))),1===e)throw n=Dl,dc(t,0),oc(t,i),ic(t,Jt()),n;if(6===e)oc(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!oi(s(),r))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=gc(t,i))&&(0!==(a=pe(t))&&(i=a,e=sc(t,a))),1===e))throw n=Dl,dc(t,0),oc(t,i),ic(t,Jt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(s(345));case 2:case 5:bc(t,Fl,Vl);break;case 3:if(oc(t,i),(130023424&i)===i&&10<(e=Bl+500-Jt())){if(0!==de(t,0))break;if(((r=t.suspendedLanes)&i)!==i){tc(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(bc.bind(null,t,Fl,Vl),e);break}bc(t,Fl,Vl);break;case 4:if(oc(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ae(i);a=1<<o,(o=e[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=Jt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ml(i/1960))-i)){t.timeoutHandle=ir(bc.bind(null,t,Fl,Vl),i);break}bc(t,Fl,Vl);break;default:throw Error(s(329))}}}return ic(t,Jt()),t.callbackNode===n?rc.bind(null,t):null}function sc(t,e){var n=Ul;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=gc(t,e))&&(e=Fl,Fl=n,null!==e&&ac(e)),t}function ac(t){null===Fl?Fl=t:Fl.push.apply(Fl,t)}function oc(t,e){for(e&=~jl,e&=~zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),i=1<<n;t[n]=-1,e&=~i}}function lc(t){if(0!==(6&Cl))throw Error(s(327));wc();var e=de(t,0);if(0===(1&e))return ic(t,Jt()),null;var n=gc(t,e);if(0!==t.tag&&2===n){var i=pe(t);0!==i&&(e=i,n=sc(t,i))}if(1===n)throw n=Dl,dc(t,0),oc(t,e),ic(t,Jt()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bc(t,Fl,Vl),ic(t,Jt()),null}function cc(t,e){var n=Cl;Cl|=1;try{return t(e)}finally{0===(Cl=n)&&(Hl=Jt()+500,Ur&&Hr())}}function uc(t){null!==Zl&&0===Zl.tag&&0===(6&Cl)&&wc();var e=Cl;Cl|=1;var n=Al.transition,i=xe;try{if(Al.transition=null,xe=1,t)return t()}finally{xe=i,Al.transition=n,0===(6&(Cl=e))&&Hr()}}function hc(){Nl=kl.current,Er(kl)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Rl)for(n=Rl.return;null!==n;){var i=n;switch(es(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&kr();break;case 3:Ks(),Er(Pr),Er(Cr),na();break;case 5:Qs(i);break;case 4:Ks();break;case 13:case 19:Er($s);break;case 10:As(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Pl=t,Rl=t=kc(t.current,null),Ll=Nl=e,Ol=0,Dl=null,jl=zl=Il=0,Fl=Ul=null,null!==Ls){for(e=0;e<Ls.length;e++)if(null!==(i=(n=Ls[e]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}Ls=null}return t}function fc(t,e){for(;;){var n=Rl;try{if(Ts(),ia.current=Ja,ca){for(var i=aa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,ha=0,Tl.current=null,null===n||null===n.return){Ol=1,Dl=e,Rl=null;break}t:{var a=t,o=n.return,l=n,c=e;if(e=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,e),1&p.mode&&mo(a,u,e),c=u;var m=(e=p).updateQueue;if(null===m){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break t}if(0===(1&e)){mo(a,u,e),mc();break t}c=Error(s(426))}else if(rs&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,e),ps(lo(c,l));break t}}a=c=lo(c,l),4!==Ol&&(Ol=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Bs(a,fo(0,c,e));break t;case 1:l=c;var y=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xl||!Xl.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e,Bs(a,po(a,l,e));break t}}a=a.return}while(null!==a)}_c(n)}catch(_){e=_,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var t=El.current;return El.current=Ja,null===t?Ja:t}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0===(268435455&Il)&&0===(268435455&zl)||oc(Pl,Ll)}function gc(t,e){var n=Cl;Cl|=2;var i=pc();for(Pl===t&&Ll===e||(Vl=null,dc(t,e));;)try{vc();break}catch(r){fc(t,r)}if(Ts(),Cl=n,El.current=i,null!==Rl)throw Error(s(261));return Pl=null,Ll=0,Ol}function vc(){for(;null!==Rl;)xc(Rl)}function yc(){for(;null!==Rl&&!Yt();)xc(Rl)}function xc(t){var e=Sl(t.alternate,t,Nl);t.memoizedProps=t.pendingProps,null===e?_c(t):Rl=e,Tl.current=null}function _c(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=qo(n,e,Nl)))return void(Rl=n)}else{if(null!==(n=Zo(n,e)))return n.flags&=32767,void(Rl=n);if(null===t)return Ol=6,void(Rl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Rl=e);Rl=e=t}while(null!==e);0===Ol&&(Ol=5)}function bc(t,e,n){var i=xe,r=Al.transition;try{Al.transition=null,xe=1,function(t,e,n,i){do{wc()}while(null!==Zl);if(0!==(6&Cl))throw Error(s(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ae(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}(t,a),t===Pl&&(Rl=Pl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Pc(ee,function(){return wc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Al.transition,Al.transition=null;var o=xe;xe=1;var l=Cl;Cl|=4,Tl.current=null,function(t,e){if(tr=We,fi(t=di())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=o+r),d!==a||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++u===r&&(l=o),f===a&&++h===i&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},We=!1,Qo=e;null!==Qo;)if(t=(e=Qo).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Qo=t;else for(;null!==Qo;){e=Qo;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:eo(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(b){Mc(e,e.return,b)}if(null!==(t=e.sibling)){t.return=e.return,Qo=t;break}Qo=e.return}m=el,el=!1}(t,n),gl(n,t),pi(er),We=!!tr,er=tr=null,t.current=n,yl(n,t,r),Kt(),Cl=l,xe=o,Al.transition=a}else t.current=n;if(ql&&(ql=!1,Zl=t,Yl=r),a=t.pendingLanes,0===a&&(Xl=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,Jt()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,t=Gl,Gl=null,t;0!==(1&Yl)&&0!==t.tag&&wc(),a=t.pendingLanes,0!==(1&a)?t===Jl?Kl++:(Kl=0,Jl=t):Kl=0,Hr()}(t,e,n,i)}finally{Al.transition=r,xe=i}return null}function wc(){if(null!==Zl){var t=_e(Yl),e=Al.transition,n=xe;try{if(Al.transition=null,xe=16>t?16:t,null===Zl)var i=!1;else{if(t=Zl,Zl=null,Yl=0,0!==(6&Cl))throw Error(s(331));var r=Cl;for(Cl|=4,Qo=t.current;null!==Qo;){var a=Qo,o=a.child;if(0!==(16&Qo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qo=u;null!==Qo;){var h=Qo;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Qo=d;else for(;null!==Qo;){var f=(h=Qo).sibling,p=h.return;if(sl(h),h===u){Qo=null;break}if(null!==f){f.return=p,Qo=f;break}Qo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Qo=o;else t:for(;null!==Qo;){if(0!==(2048&(a=Qo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Qo=y;break t}Qo=a.return}}var x=t.current;for(Qo=x;null!==Qo;){var _=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==_)_.return=o,Qo=_;else t:for(o=x;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Mc(l,l.return,w)}if(l===o){Qo=null;break t}var b=l.sibling;if(null!==b){b.return=l.return,Qo=b;break t}Qo=l.return}}if(Cl=r,Hr(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(re,t)}catch(w){}i=!0}return i}finally{xe=n,Al.transition=e}}return!1}function Sc(t,e,n){t=Us(t,e=fo(0,e=lo(n,e),1),1),e=tc(),null!==t&&(ve(t,1,e),ic(t,e))}function Mc(t,e,n){if(3===t.tag)Sc(t,t,n);else for(;null!==e;){if(3===e.tag){Sc(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xl||!Xl.has(i))){e=Us(e,t=po(e,t=lo(n,t),1),1),t=tc(),null!==e&&(ve(e,1,t),ic(e,t));break}}e=e.return}}function Ec(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=tc(),t.pingedLanes|=t.suspendedLanes&n,Pl===t&&(Ll&n)===n&&(4===Ol||3===Ol&&(130023424&Ll)===Ll&&500>Jt()-Bl?dc(t,0):jl|=n),ic(t,e)}function Tc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=tc();null!==(t=Os(t,e))&&(ve(t,e,n),ic(t,n))}function Ac(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Tc(t,n)}function Cc(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(e),Tc(t,n)}function Pc(t,e){return qt(t,e)}function Rc(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(t,e,n,i){return new Rc(t,e,n,i)}function Nc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function kc(t,e){var n=t.alternate;return null===n?((n=Lc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oc(t,e,n,i,r,a){var o=2;if(i=t,"function"===typeof t)Nc(t)&&(o=1);else if("string"===typeof t)o=5;else t:switch(t){case S:return Dc(n.children,r,a,e);case M:o=8,r|=8;break;case E:return(t=Lc(12,n,e,2|r)).elementType=E,t.lanes=a,t;case P:return(t=Lc(13,n,e,r)).elementType=P,t.lanes=a,t;case R:return(t=Lc(19,n,e,r)).elementType=R,t.lanes=a,t;case k:return Ic(n,r,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:o=10;break t;case A:o=9;break t;case C:o=11;break t;case L:o=14;break t;case N:o=16,i=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Lc(o,n,e,r)).elementType=t,e.type=i,e.lanes=a,e}function Dc(t,e,n,i){return(t=Lc(7,t,i,e)).lanes=n,t}function Ic(t,e,n,i){return(t=Lc(22,t,i,e)).elementType=k,t.lanes=n,t.stateNode={isHidden:!1},t}function zc(t,e,n){return(t=Lc(6,t,null,e)).lanes=n,t}function jc(t,e,n){return(e=Lc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uc(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fc(t,e,n,i,r,s,a,o,l){return t=new Uc(t,e,n,o,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Lc(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Is(s),t}function Bc(t){if(!t)return Ar;t:{if(Ht(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Nr(n))return Dr(t,n,e)}return e}function Hc(t,e,n,i,r,s,a,o,l){return(t=Fc(n,i,!0,t,0,s,0,o,l)).context=Bc(null),n=t.current,(s=js(i=tc(),r=ec(n))).callback=void 0!==e&&null!==e?e:null,Us(n,s,r),t.current.lanes=r,ve(t,r,i),ic(t,i),t}function Vc(t,e,n,i){var r=e.current,s=tc(),a=ec(r);return n=Bc(n),null===e.context?e.context=n:e.pendingContext=n,(e=js(s,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Us(r,e,a))&&(nc(t,r,a,s),Fs(t,r,a)),a}function Wc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Gc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xc(t,e){Gc(t,e),(t=t.alternate)&&Gc(t,e)}Sl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Pr.current)xo=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return xo=!1,function(t,e,n){switch(e.tag){case 3:Po(e),fs();break;case 5:Js(e);break;case 1:Nr(e.type)&&Ir(e);break;case 4:Ys(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Tr(ws,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Tr($s,1&$s.current),e.flags|=128,null):0!==(n&e.child.childLanes)?zo(t,e,n):(Tr($s,1&$s.current),null!==(t=Wo(t,e,n))?t.sibling:null);Tr($s,1&$s.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Ho(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr($s,$s.current),i)break;return null;case 22:case 23:return e.lanes=0,Mo(t,e,n)}return Wo(t,e,n)}(t,e,n);xo=0!==(131072&t.flags)}else xo=!1,rs&&0!==(1048576&e.flags)&&$r(e,Xr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Vo(t,e),t=e.pendingProps;var r=Lr(e,Cr.current);Ps(e,n),r=ma(null,e,i,t,r,n);var a=ga();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nr(i)?(a=!0,Ir(e)):a=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Is(e),r.updater=io,e.stateNode=r,r._reactInternals=e,oo(e,i,t,n),e=Co(null,e,i,!0,a,n)):(e.tag=0,rs&&a&&ts(e),_o(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Vo(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Nc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===L)return 14}return 2}(i),t=eo(i,t),r){case 0:e=To(null,e,i,t,n);break t;case 1:e=Ao(null,e,i,t,n);break t;case 11:e=bo(null,e,i,t,n);break t;case 14:e=wo(null,e,i,eo(i.type,t),n);break t}throw Error(s(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,To(t,e,i,r=e.elementType===i?r:eo(i,r),n);case 1:return i=e.type,r=e.pendingProps,Ao(t,e,i,r=e.elementType===i?r:eo(i,r),n);case 3:t:{if(Po(e),null===t)throw Error(s(387));i=e.pendingProps,r=(a=e.memoizedState).element,zs(t,e),Hs(e,i,null,n);var o=e.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Ro(t,e,i,n,r=lo(Error(s(423)),e));break t}if(i!==r){e=Ro(t,e,i,n,r=lo(Error(s(424)),e));break t}for(is=cr(e.stateNode.containerInfo.firstChild),ns=e,rs=!0,ss=null,n=bs(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){e=Wo(t,e,n);break t}_o(t,e,i,n)}e=e.child}return e;case 5:return Js(e),null===t&&cs(e),i=e.type,r=e.pendingProps,a=null!==t?t.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==a&&nr(i,a)&&(e.flags|=32),Eo(t,e),_o(t,e,o,n),e.child;case 6:return null===t&&cs(e),null;case 13:return zo(t,e,n);case 4:return Ys(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=_s(e,null,i,n):_o(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,bo(t,e,i,r=e.elementType===i?r:eo(i,r),n);case 7:return _o(t,e,e.pendingProps,n),e.child;case 8:case 12:return _o(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,a=e.memoizedProps,o=r.value,Tr(ws,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===r.children&&!Pr.current){e=Wo(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=js(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Cs(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cs(o,n,e),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}_o(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ps(e,n),i=i(r=Rs(r)),e.flags|=1,_o(t,e,i,n),e.child;case 14:return r=eo(i=e.type,e.pendingProps),wo(t,e,i,r=eo(i.type,r),n);case 15:return So(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:eo(i,r),Vo(t,e),e.tag=1,Nr(i)?(t=!0,Ir(e)):t=!1,Ps(e,n),so(e,i,r),oo(e,i,r,n),Co(null,e,i,!0,t,n);case 19:return Ho(t,e,n);case 22:return Mo(t,e,n)}throw Error(s(156,e.tag))};var qc="function"===typeof reportError?reportError:function(t){console.error(t)};function Zc(t){this._internalRoot=t}function Yc(t){this._internalRoot=t}function Kc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Qc(){}function $c(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var t=Wc(a);o.call(t)}}Vc(e,a,t,r)}else a=function(t,e,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var t=Wc(a);s.call(t)}}var a=Hc(e,i,t,0,null,!1,0,"",Qc);return t._reactRootContainer=a,t[pr]=a.current,Hi(8===t.nodeType?t.parentNode:t),uc(),a}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var o=i;i=function(){var t=Wc(l);o.call(t)}}var l=Fc(t,0,!1,null,0,!1,0,"",Qc);return t._reactRootContainer=l,t[pr]=l.current,Hi(8===t.nodeType?t.parentNode:t),uc(function(){Vc(e,l,n,i)}),l}(n,e,t,r,i);return Wc(a)}Yc.prototype.render=Zc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));Vc(t,e,null,null)},Yc.prototype.unmount=Zc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uc(function(){Vc(null,t,null,null)}),e[pr]=null}},Yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Me();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ke.length&&0!==e&&e<ke[n].priority;n++);ke.splice(n,0,t),0===n&&ze(t)}},be=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),ic(e,Jt()),0===(6&Cl)&&(Hl=Jt()+500,Hr()))}break;case 13:uc(function(){var e=Os(t,1);if(null!==e){var n=tc();nc(e,t,1,n)}}),Xc(t,1)}},we=function(t){if(13===t.tag){var e=Os(t,134217728);if(null!==e)nc(e,t,134217728,tc());Xc(t,134217728)}},Se=function(t){if(13===t.tag){var e=ec(t),n=Os(t,e);if(null!==n)nc(n,t,e,tc());Xc(t,e)}},Me=function(){return xe},Ee=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}},wt=function(t,e,n){switch(e){case"input":if(Q(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=br(i);if(!r)throw Error(s(90));q(i),Q(i,r)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ct=cc,Pt=uc;var tu={usingClientEntryPoint:!1,Events:[xr,_r,br,Tt,At,cc]},eu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{re=iu.inject(nu),se=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(e))throw Error(s(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Kc(t))throw Error(s(299));var n=!1,i="",r=qc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=Fc(t,1,!1,null,0,n,0,i,r),t[pr]=e.current,Hi(8===t.nodeType?t.parentNode:t),new Zc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return uc(t)},e.hydrate=function(t,e,n){if(!Jc(e))throw Error(s(200));return $c(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Kc(t))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),e=Hc(e,null,t,1,null!=n?n:null,r,0,a,o),t[pr]=e.current,Hi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Yc(e)},e.render=function(t,e,n){if(!Jc(e))throw Error(s(200));return $c(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(s(40));return!!t._reactRootContainer&&(uc(function(){$c(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0)},e.unstable_batchedUpdates=cc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jc(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return $c(t,e,n,!1,i)},e.version="18.3.1-next-f1338f8080-20240426"},740:t=>{"use strict";t.exports=function(t,e,n,i,r,s,a,o){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,r,s,a,o],u=0;(l=new Error(e.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},853:(t,e,n)=>{"use strict";t.exports=n(234)},918:(t,e,n)=>{"use strict";n.d(e,{A:()=>mt,B:()=>k,C:()=>gt,E:()=>O,F:()=>xt,a:()=>L,b:()=>At,c:()=>et,d:()=>Pt,e:()=>M,i:()=>R,u:()=>N});var i=n(379),r=n(45),s=n(408),a=n(43),o=n(205);function l(t){let e;const n=new Set,i=(t,i)=>{const r="function"===typeof t?t(e):t;if(r!==e){const t=e;e=i?r:Object.assign({},e,r),n.forEach(n=>n(e,t))}},r=()=>e,s={setState:i,getState:r,subscribe:(t,i,s)=>i||s?function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=i(e);function o(){const n=i(e);if(!s(a,n)){const e=a;t(a=n,e)}}return n.add(o),()=>n.delete(o)}(t,i,s):(n.add(t),()=>n.delete(t)),destroy:()=>n.clear()};return e=t(i,r,s),s}const c="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?a.useEffect:a.useLayoutEffect;var u=n(16),h=n.n(u),d=n(853);const f=[];function p(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t===e;if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}function m(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===e&&(e=[t]);for(const a of f)if(p(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!n)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const t=f.indexOf(r);-1!==t&&f.splice(t,1)},promise:(s=t,"object"===typeof s&&"function"===typeof s.then?t:t(...e)).then(t=>{r.response=t,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(t=>r.error=t)};var s;if(f.push(r),!n)throw r.promise}const g=(t,e,n)=>m(t,e,!1,n),v=["args","attach"],y=["args","children"],x=["args","children"],_=["children","key","ref"],b=["children","key","ref"],w=["params"];const S={},M=t=>{Object.assign(S,t)};var E,T;const A=t=>"colorSpace"in t||"outputColorSpace"in t,C=()=>{var t;return null!=(t=S.ColorManagement)?t:null},P=t=>t&&t.isOrthographicCamera,R=t=>t&&t.hasOwnProperty("current"),L="undefined"!==typeof window&&(null!=(E=window.document)&&E.createElement||"ReactNative"===(null==(T=window.navigator)?void 0:T.product))?a.useLayoutEffect:a.useEffect;function N(t){const e=a.useRef(t);return L(()=>{e.current=t},[t]),e}function k(t){let{set:e}=t;return L(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class O extends a.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}O.getDerivedStateFromError=()=>({error:!0});const D="__default",I=new Map,z=t=>t&&!!t.memoized&&!!t.changes;function j(t){var e;const n="undefined"!==typeof window?null!=(e=window.devicePixelRatio)?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const U=t=>{var e;return null==(e=t.__r3f)?void 0:e.root.getState()},F={obj:t=>t===Object(t)&&!F.arr(t)&&"function"!==typeof t,fun:t=>"function"===typeof t,str:t=>"string"===typeof t,num:t=>"number"===typeof t,boo:t=>"boolean"===typeof t,und:t=>void 0===t,arr:t=>Array.isArray(t),equ(t,e){let{arrays:n="shallow",objects:i="reference",strict:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof t!==typeof e||!!t!==!!e)return!1;if(F.str(t)||F.num(t))return t===e;const s=F.obj(t);if(s&&"reference"===i)return t===e;const a=F.arr(t);if(a&&"reference"===n)return t===e;if((a||s)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;if(s&&"shallow"===n&&"shallow"===i){for(o in r?e:t)if(!F.equ(t[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:t)if(t[o]!==e[o])return!1;if(F.und(o)){if(a&&0===t.length&&0===e.length)return!0;if(s&&0===Object.keys(t).length&&0===Object.keys(e).length)return!0;if(t!==e)return!1}return!0}};function B(t){const e={nodes:{},materials:{}};return t&&t.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function H(t,e){return t.__r3f=(0,i.A)({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},e),t}function V(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((t,e)=>t[e],t),{target:n,key:r}}return{target:n,key:e}}const W=/-\d+$/;function G(t,e,n){if(F.str(n)){if(W.test(n)){const e=n.replace(W,""),{target:i,key:r}=V(t,e);Array.isArray(i[r])||(i[r]=[])}const{target:i,key:r}=V(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function X(t,e,n){var i,r;if(F.str(n)){const{target:i,key:r}=V(t,n),s=e.__r3f.previousAttach;void 0===s?delete i[r]:i[r]=s}else null==(i=e.__r3f)||null==i.previousAttach||i.previousAttach(t,e);null==(r=e.__r3f)||delete r.previousAttach}function q(t,e){let{children:n,key:s,ref:a}=e,o=(0,r.A)(e,_),l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{children:c,key:u,ref:h}=l,d=(0,r.A)(l,b),f=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var p;const m=null!=(p=null==t?void 0:t.__r3f)?p:{},g=Object.entries(o),v=[];if(f){const t=Object.keys(d);for(let e=0;e<t.length;e++)o.hasOwnProperty(t[e])||g.unshift([t[e],D+"remove"])}g.forEach(e=>{let[n,i]=e;var r;if(null!=(r=t.__r3f)&&r.primitive&&"object"===n)return;if(F.equ(i,d[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return v.push([n,i,!0,[]]);let s=[];n.includes("-")&&(s=n.split("-")),v.push([n,i,!1,s]);for(const t in o){const e=o[t];t.startsWith("".concat(n,"-"))&&v.push([t,e,!1,t.split("-")])}});const y=(0,i.A)({},o);return m.memoizedProps&&m.memoizedProps.args&&(y.args=m.memoizedProps.args),m.memoizedProps&&m.memoizedProps.attach&&(y.attach=m.memoizedProps.attach),{memoized:y,changes:v}}const Z="undefined"!==typeof process&&!1;function Y(t,e){var n,i,r;const a=null!=(n=t.__r3f)?n:{},o=a.root,l=null!=(i=null==o||null==o.getState?void 0:o.getState())?i:{},{memoized:c,changes:u}=z(e)?e:q(t,e),h=a.eventCount;t.__r3f&&(t.__r3f.memoizedProps=c);for(let d=0;d<u.length;d++){let[e,n,i,r]=u[d];if(A(t)){const t=3001,i="srgb",r="srgb-linear";"encoding"===e?(e="colorSpace",n=n===t?i:r):"outputEncoding"===e&&(e="outputColorSpace",n=n===t?i:r)}let o=t,c=o[e];if(r.length&&(c=r.reduce((t,e)=>t[e],t),!c||!c.set)){const[n,...i]=r.reverse();o=i.reverse().reduce((t,e)=>t[e],t),e=n}if(n===D+"remove")if(o.constructor){let t=I.get(o.constructor);t||(t=new o.constructor,I.set(o.constructor,t)),n=t[e]}else n=0;if(i)n?a.handlers[e]=n:delete a.handlers[e],a.eventCount=Object.keys(a.handlers).length;else if(c&&c.set&&(c.copy||c instanceof s.Layers)){if(Array.isArray(n))c.fromArray?c.fromArray(n):c.set(...n);else if(c.copy&&n&&n.constructor&&(Z?c.constructor.name===n.constructor.name:c.constructor===n.constructor))c.copy(n);else if(void 0!==n){const t=c instanceof s.Color;!t&&c.setScalar?c.setScalar(n):c instanceof s.Layers&&n instanceof s.Layers?c.mask=n.mask:c.set(n),C()||l.linear||!t||c.convertSRGBToLinear()}}else if(o[e]=n,o[e]instanceof s.Texture&&o[e].format===s.RGBAFormat&&o[e].type===s.UnsignedByteType){const t=o[e];A(t)&&A(l.gl)?t.colorSpace=l.gl.outputColorSpace:t.encoding=l.gl.outputEncoding}K(t)}if(a.parent&&l.internal&&t.raycast&&h!==a.eventCount){const e=l.internal.interaction.indexOf(t);e>-1&&l.internal.interaction.splice(e,1),a.eventCount&&l.internal.interaction.push(t)}return!(1===u.length&&"onUpdate"===u[0][0])&&u.length&&null!=(r=t.__r3f)&&r.parent&&J(t),t}function K(t){var e,n;const i=null==(e=t.__r3f)||null==(n=e.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function J(t){null==t.onUpdate||t.onUpdate(t)}function Q(t,e){t.manual||(P(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function $(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function tt(t,e,n,i){const r=n.get(e);r&&(n.delete(e),0===n.size&&(t.delete(i),r.target.releasePointerCapture(i)))}function et(t){function e(t){return t.filter(t=>["Move","Over","Enter","Out","Leave"].some(e=>{var n;return null==(n=t.__r3f)?void 0:n.handlers["onPointer"+e]}))}function n(e){const{internal:n}=t.getState();for(const t of n.hovered.values())if(!e.length||!e.find(e=>e.object===t.object&&e.index===t.index&&e.instanceId===t.instanceId)){const r=t.eventObject.__r3f,s=null==r?void 0:r.handlers;if(n.hovered.delete($(t)),null!=r&&r.eventCount){const n=(0,i.A)((0,i.A)({},t),{},{intersections:e});null==s.onPointerOut||s.onPointerOut(n),null==s.onPointerLeave||s.onPointerLeave(n)}}}function r(t,e){for(let n=0;n<e.length;n++){const i=e[n].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(t)}}return{handlePointer:function(a){switch(a){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return e=>{const{internal:i}=t.getState();"pointerId"in e&&i.capturedMap.has(e.pointerId)&&requestAnimationFrame(()=>{i.capturedMap.has(e.pointerId)&&(i.capturedMap.delete(e.pointerId),n([]))})}}return function(o){const{onPointerMissed:l,internal:c}=t.getState();c.lastEvent.current=o;const u="onPointerMove"===a,h="onClick"===a||"onContextMenu"===a||"onDoubleClick"===a,d=function(e,n){const r=t.getState(),s=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction;for(let t=0;t<o.length;t++){const e=U(o[t]);e&&(e.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(e,r);let l=o.flatMap(function(t){const n=U(t);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(e,n,null==(i=n.previousRoot)?void 0:i.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(t,!0):[]):[];var i}).sort((t,e)=>{const n=U(t.object),i=U(e.object);return n&&i&&i.events.priority-n.events.priority||t.distance-e.distance}).filter(t=>{const e=$(t);return!s.has(e)&&(s.add(e),!0)});r.events.filter&&(l=r.events.filter(l,r));for(const t of l){let e=t.object;for(;e;){var c;null!=(c=e.__r3f)&&c.eventCount&&a.push((0,i.A)((0,i.A)({},t),{},{eventObject:e})),e=e.parent}}if("pointerId"in e&&r.internal.capturedMap.has(e.pointerId))for(let t of r.internal.capturedMap.get(e.pointerId).values())s.has($(t.intersection))||a.push(t.intersection);return a}(o,u?e:void 0),f=h?function(e){const{internal:n}=t.getState(),i=e.offsetX-n.initialClick[0],r=e.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(o):0;"onPointerDown"===a&&(c.initialClick=[o.offsetX,o.offsetY],c.initialHits=d.map(t=>t.eventObject)),h&&!d.length&&f<=2&&(r(o,c.interaction),l&&l(o)),u&&n(d),function(e,r,a,o){const l=t.getState();if(e.length){const t={stopped:!1};for(const c of e){const u=U(c.object)||l,{raycaster:h,pointer:d,camera:f,internal:p}=u,m=new s.Vector3(d.x,d.y,0).unproject(f),g=t=>{var e,n;return null!=(e=null==(n=p.capturedMap.get(t))?void 0:n.has(c.eventObject))&&e},v=t=>{const e={intersection:c,target:r.target};p.capturedMap.has(t)?p.capturedMap.get(t).set(c.eventObject,e):p.capturedMap.set(t,new Map([[c.eventObject,e]])),r.target.setPointerCapture(t)},y=t=>{const e=p.capturedMap.get(t);e&&tt(p.capturedMap,c.eventObject,e,t)};let x={};for(let t in r){let e=r[t];"function"!==typeof e&&(x[t]=e)}let _=(0,i.A)((0,i.A)((0,i.A)({},c),x),{},{pointer:d,intersections:e,stopped:t.stopped,delta:a,unprojectedPoint:m,ray:h.ray,camera:f,stopPropagation(){const i="pointerId"in r&&p.capturedMap.get(r.pointerId);(!i||i.has(c.eventObject))&&(_.stopped=t.stopped=!0,p.hovered.size&&Array.from(p.hovered.values()).find(t=>t.eventObject===c.eventObject))&&n([...e.slice(0,e.indexOf(c)),c])},target:{hasPointerCapture:g,setPointerCapture:v,releasePointerCapture:y},currentTarget:{hasPointerCapture:g,setPointerCapture:v,releasePointerCapture:y},nativeEvent:r});if(o(_),!0===t.stopped)break}}}(d,o,f,function(t){const e=t.eventObject,n=e.__r3f,i=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(u){if(i.onPointerOver||i.onPointerEnter||i.onPointerOut||i.onPointerLeave){const e=$(t),n=c.hovered.get(e);n?n.stopped&&t.stopPropagation():(c.hovered.set(e,t),null==i.onPointerOver||i.onPointerOver(t),null==i.onPointerEnter||i.onPointerEnter(t))}null==i.onPointerMove||i.onPointerMove(t)}else{const n=i[a];n?h&&!c.initialHits.includes(e)||(r(o,c.interaction.filter(t=>!c.initialHits.includes(t))),n(t)):h&&c.initialHits.includes(e)&&r(o,c.interaction.filter(t=>!c.initialHits.includes(t)))}})}}}}const nt=t=>!(null==t||!t.render),it=a.createContext(null),rt=(t,e)=>{const n=function(t){const e="function"===typeof t?l(t):t,n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.getState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,i]=(0,a.useReducer)(t=>t+1,0),r=e.getState(),s=(0,a.useRef)(r),o=(0,a.useRef)(t),l=(0,a.useRef)(n),u=(0,a.useRef)(!1),h=(0,a.useRef)();let d;void 0===h.current&&(h.current=t(r));let f=!1;(s.current!==r||o.current!==t||l.current!==n||u.current)&&(d=t(r),f=!n(h.current,d)),c(()=>{f&&(h.current=d),s.current=r,o.current=t,l.current=n,u.current=!1});const p=(0,a.useRef)(r);c(()=>{const t=()=>{try{const t=e.getState(),n=o.current(t);l.current(h.current,n)||(s.current=t,h.current=n,i())}catch(t){u.current=!0,i()}},n=e.subscribe(t);return e.getState()!==p.current&&t(),n},[]);const m=f?d:h.current;return(0,a.useDebugValue)(m),m};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const t=[n,e];return{next(){const e=t.length<=0;return{value:t.shift(),done:e}}}},n}((n,r)=>{const o=new s.Vector3,l=new s.Vector3,c=new s.Vector3;function u(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size;const{width:i,height:a,top:u,left:h}=n,d=i/a;e instanceof s.Vector3?c.copy(e):c.set(...e);const f=t.getWorldPosition(o).distanceTo(c);if(P(t))return{width:i/t.zoom,height:a/t.zoom,top:u,left:h,factor:1,distance:f,aspect:d};{const e=t.fov*Math.PI/180,n=2*Math.tan(e/2)*f,r=n*(i/a);return{width:r,height:n,top:u,left:h,factor:i/r,distance:f,aspect:d}}}let h;const d=t=>n(e=>({performance:(0,i.A)((0,i.A)({},e.performance),{},{current:t})})),f=new s.Vector2,p={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t(r(),e)},advance:(t,n)=>e(t,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new s.Clock,pointer:f,mouse:f,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const t=r();h&&clearTimeout(h),t.performance.current!==t.performance.min&&d(t.performance.min),h=setTimeout(()=>d(r().performance.max),t.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:u},setEvents:t=>n(e=>(0,i.A)((0,i.A)({},e),{},{events:(0,i.A)((0,i.A)({},e.events),t)})),setSize:(t,e,s,a,o)=>{const c=r().camera,h={width:t,height:e,top:a||0,left:o||0,updateStyle:s};n(t=>({size:h,viewport:(0,i.A)((0,i.A)({},t.viewport),u(c,l,h))}))},setDpr:t=>n(e=>{const n=j(t);return{viewport:(0,i.A)((0,i.A)({},e.viewport),{},{dpr:n,initialDpr:e.viewport.initialDpr||n})}}),setFrameloop:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const e=r().clock;e.stop(),e.elapsedTime=0,"never"!==t&&(e.start(),e.elapsedTime=0),n(()=>({frameloop:t}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:a.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(t,e,n)=>{const i=r().internal;return i.priority=i.priority+(e>0?1:0),i.subscribers.push({ref:t,priority:e,store:n}),i.subscribers=i.subscribers.sort((t,e)=>t.priority-e.priority),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(e>0?1:0),n.subscribers=n.subscribers.filter(e=>e.ref!==t))}}}};return p}),r=n.getState();let o=r.size,u=r.viewport.dpr,h=r.camera;return n.subscribe(()=>{const{camera:t,size:e,viewport:r,gl:s,set:a}=n.getState();if(e!==o||r.dpr!==u){var l;o=e,u=r.dpr,Q(t,e),s.setPixelRatio(r.dpr);const n=null!=(l=e.updateStyle)?l:"undefined"!==typeof HTMLCanvasElement&&s.domElement instanceof HTMLCanvasElement;s.setSize(e.width,e.height,n)}t!==h&&(h=t,a(e=>({viewport:(0,i.A)((0,i.A)({},e.viewport),e.viewport.getCurrentViewport(t))})))}),n.subscribe(e=>t(e)),n};let st,at=new Set,ot=new Set,lt=new Set;function ct(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function ut(t,e){switch(t){case"before":return ct(at,e);case"after":return ct(ot,e);case"tail":return ct(lt,e)}}let ht,dt;function ft(t,e,n){let i=e.clock.getDelta();for("never"===e.frameloop&&"number"===typeof t&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),ht=e.internal.subscribers,st=0;st<ht.length;st++)dt=ht[st],dt.ref.current(dt.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),"always"===e.frameloop?1:e.internal.frames}function pt(){const t=a.useContext(it);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function mt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t=>t,e=arguments.length>1?arguments[1]:void 0;return pt()(t,e)}function gt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=pt(),i=n.getState().internal.subscribe,r=N(t);return L(()=>i(r,e,n),[e,i,n]),null}const vt=new WeakMap;function yt(t,e){return function(n){let i=vt.get(n);i||(i=new n,vt.set(n,i)),t&&t(i);for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return Promise.all(s.map(t=>new Promise((n,r)=>i.load(t,t=>{t.scene&&Object.assign(t,B(t.scene)),n(t)},e,e=>r(new Error("Could not load ".concat(t,": ").concat(null==e?void 0:e.message))))))).finally(()=>null==i.dispose?void 0:i.dispose())}}function xt(t,e,n,i){const r=Array.isArray(e)?e:[e],s=g(yt(n,i),[t,...r],{equal:F.equ});return Array.isArray(e)?s:s[0]}xt.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return((t,e,n)=>{m(t,e,!0,n)})(yt(n),[t,...i])},xt.clear=function(t,e){return(t=>{if(void 0===t||0===t.length)f.splice(0,f.length);else{const e=f.find(e=>p(t,e.keys,e.equal));e&&e.remove()}})([t,...Array.isArray(e)?e:[e]])};const _t=new Map,{invalidate:bt,advance:wt}=function(t){let e,n,i,r=!1;function s(a){n=requestAnimationFrame(s),r=!0,e=0,ut("before",a);for(const n of t.values()){var o;i=n.store.getState(),!i.internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(o=i.gl.xr)&&o.isPresenting||(e+=ft(a,i))}if(ut("after",a),0===e)return ut("tail",a),r=!1,cancelAnimationFrame(n)}return{loop:s,invalidate:function e(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var a;if(!n)return t.forEach(t=>e(t.store.getState()),i);null!=(a=n.gl.xr)&&a.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+i),r||(r=!0,requestAnimationFrame(s)))},advance:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(n&&ut("before",e),i)ft(e,i,r);else for(const s of t.values())ft(e,s.store.getState());n&&ut("after",e)}}}(_t),{reconciler:St,applyProps:Mt}=function(t,e){function n(t,e,n){let i,{args:a=[],attach:o}=e,l=(0,r.A)(e,v),c="".concat(t[0].toUpperCase()).concat(t.slice(1));if("primitive"===t){if(void 0===l.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=H(l.object,{type:t,root:n,attach:o,primitive:!0})}else{const e=S[c];if(!e)throw new Error("R3F: ".concat(c," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(a))throw new Error("R3F: The args prop must be an array!");i=H(new e(...a),{type:t,root:n,attach:o,memoizedProps:{args:a}})}return void 0===i.__r3f.attach&&(i instanceof s.BufferGeometry?i.__r3f.attach="geometry":i instanceof s.Material&&(i.__r3f.attach="material")),"inject"!==c&&Y(i,l),i}function i(t,e){let n=!1;var i,r;e&&(null!=(i=e.__r3f)&&i.attach?G(t,e,e.__r3f.attach):e.isObject3D&&t.isObject3D&&(t.add(e),n=!0),n||null==(r=t.__r3f)||r.objects.push(e),e.__r3f||H(e,{}),e.__r3f.parent=t,J(e),K(e))}function a(t,e,n){let i=!1;if(e){var r,s;if(null!=(r=e.__r3f)&&r.attach)G(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){e.parent=t,e.dispatchEvent({type:"added"});const r=t.children.filter(t=>t!==e),s=r.indexOf(n);t.children=[...r.slice(0,s),e,...r.slice(s)],i=!0}i||null==(s=t.__r3f)||s.objects.push(e),e.__r3f||H(e,{}),e.__r3f.parent=t,J(e),K(e)}}function l(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&[...t].forEach(t=>c(e,t,n))}function c(t,e,n){if(e){var i,r,s;if(e.__r3f&&(e.__r3f.parent=null),null!=(i=t.__r3f)&&i.objects&&(t.__r3f.objects=t.__r3f.objects.filter(t=>t!==e)),null!=(r=e.__r3f)&&r.attach)X(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){var a;t.remove(e),null!=(a=e.__r3f)&&a.root&&function(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(t=>t!==e),n.initialHits=n.initialHits.filter(t=>t!==e),n.hovered.forEach((t,i)=>{t.eventObject!==e&&t.object!==e||n.hovered.delete(i)}),n.capturedMap.forEach((t,i)=>{tt(n.capturedMap,e,t,i)})}(e.__r3f.root,e)}const c=null==(s=e.__r3f)?void 0:s.primitive,u=void 0===n?null!==e.dispose&&!c:n;var o;if(!c)l(null==(o=e.__r3f)?void 0:o.objects,e,u),l(e.children,e,u);delete e.__r3f,u&&e.dispose&&"Scene"!==e.type&&(0,d.unstable_scheduleCallback)(d.unstable_IdlePriority,()=>{try{e.dispose()}catch(t){}}),K(t)}}const u=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:h()({createInstance:n,removeChild:c,appendChild:i,appendInitialChild:i,insertBefore:a,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(t,e)=>{if(!e)return;const n=t.getState().scene;n.__r3f&&(n.__r3f.root=t,i(n,e))},removeChildFromContainer:(t,e)=>{e&&c(t.getState().scene,e)},insertInContainerBefore:(t,e,n)=>{if(!e||!n)return;const i=t.getState().scene;i.__r3f&&a(i,e,n)},getRootHostContext:()=>null,getChildHostContext:t=>t,finalizeInitialChildren(t){var e;const n=null!=(e=null==t?void 0:t.__r3f)?e:{};return Boolean(n.handlers)},prepareUpdate(t,e,n,i){var s;if((null!=(s=null==t?void 0:t.__r3f)?s:{}).primitive&&i.object&&i.object!==t)return[!0];{const{args:e=[],children:s}=i,a=(0,r.A)(i,y),{args:o=[],children:l}=n,c=(0,r.A)(n,x);if(!Array.isArray(e))throw new Error("R3F: the args prop must be an array!");if(e.some((t,e)=>t!==o[e]))return[!0];const u=q(t,a,c,!0);return u.changes.length?[!1,u]:null}},commitUpdate(t,e,r,s,a,o){let[l,u]=e;l?function(t,e,r,s){var a;const o=null==(a=t.__r3f)?void 0:a.parent;if(!o)return;const l=n(e,r,t.__r3f.root);if(t.children){for(const e of t.children)e.__r3f&&i(l,e);t.children=t.children.filter(t=>!t.__r3f)}t.__r3f.objects.forEach(t=>i(l,t)),t.__r3f.objects=[],t.__r3f.autoRemovedBeforeAppend||c(o,t),l.parent&&(l.__r3f.autoRemovedBeforeAppend=!0),i(o,l),l.raycast&&l.__r3f.eventCount&&l.__r3f.root.getState().internal.interaction.push(l);[s,s.alternate].forEach(t=>{null!==t&&(t.stateNode=l,t.ref&&("function"===typeof t.ref?t.ref(l):t.ref.current=l))})}(t,r,a,o):Y(t,u)},commitMount(t,e,n,i){var r;const s=null!=(r=t.__r3f)?r:{};t.raycast&&s.handlers&&s.eventCount&&t.__r3f.root.getState().internal.interaction.push(t)},getPublicInstance:t=>t,prepareForCommit:()=>null,preparePortalMount:t=>H(t.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(t){var e;const{attach:n,parent:i}=null!=(e=t.__r3f)?e:{};n&&i&&X(i,t,n),t.isObject3D&&(t.visible=!1),K(t)},unhideInstance(t,e){var n;const{attach:i,parent:r}=null!=(n=t.__r3f)?n:{};i&&r&&G(r,t,i),(t.isObject3D&&null==e.visible||e.visible)&&(t.visible=!0),K(t)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>e?e():o.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&F.fun(performance.now)?performance.now:F.fun(Date.now)?Date.now:()=>0,scheduleTimeout:F.fun(setTimeout)?setTimeout:void 0,cancelTimeout:F.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Y}}(0,function(){var t;const e="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!e)return o.DefaultEventPriority;switch(null==(t=e.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return o.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return o.ContinuousEventPriority;default:return o.DefaultEventPriority}}),Et={objects:"shallow",strict:!1},Tt=(t,e)=>{const n="function"===typeof t?t(e):t;return nt(n)?n:new s.WebGLRenderer((0,i.A)({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0},t))};function At(t){const e=_t.get(t),n=null==e?void 0:e.fiber,l=null==e?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const c="function"===typeof reportError?reportError:console.error,u=l||rt(bt,wt),h=n||St.createContainer(u,o.ConcurrentRoot,null,!1,null,"",c,null);let d;e||_t.set(t,{fiber:h,store:u});let f,p=!1;return{configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:a,scene:o,events:l,onCreated:c,shadows:h=!1,linear:m=!1,flat:g=!1,legacy:v=!1,orthographic:y=!1,frameloop:x="always",dpr:_=[1,2],performance:b,raycaster:S,camera:M,onPointerMissed:E}=e,T=u.getState(),A=T.gl;T.gl||T.set({gl:A=Tt(n,t)});let P=T.raycaster;P||T.set({raycaster:P=new s.Raycaster});const R=S||{},{params:L}=R,N=(0,r.A)(R,w);if(F.equ(N,P,Et)||Mt(P,(0,i.A)({},N)),F.equ(L,P.params,Et)||Mt(P,{params:(0,i.A)((0,i.A)({},P.params),L)}),!T.camera||T.camera===f&&!F.equ(f,M,Et)){f=M;const t=M instanceof s.Camera,e=t?M:y?new s.OrthographicCamera(0,0,0,0,.1,1e3):new s.PerspectiveCamera(75,0,.1,1e3);t||(e.position.z=5,M&&Mt(e,M),T.camera||null!=M&&M.rotation||e.lookAt(0,0,0)),T.set({camera:e})}if(!T.scene){let t;o instanceof s.Scene?t=o:(t=new s.Scene,o&&Mt(t,o)),T.set({scene:H(t)})}if(!T.xr){var k;const t=(t,e)=>{const n=u.getState();"never"!==n.frameloop&&wt(t,!0,n,e)},e=()=>{const e=u.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?t:null),e.gl.xr.isPresenting||bt(e)},n={connect(){const t=u.getState().gl;t.xr.addEventListener("sessionstart",e),t.xr.addEventListener("sessionend",e)},disconnect(){const t=u.getState().gl;t.xr.removeEventListener("sessionstart",e),t.xr.removeEventListener("sessionend",e)}};"function"===typeof(null==(k=A.xr)?void 0:k.addEventListener)&&n.connect(),T.set({xr:n})}if(A.shadowMap){const t=A.shadowMap.enabled,e=A.shadowMap.type;if(A.shadowMap.enabled=!!h,F.boo(h))A.shadowMap.type=s.PCFSoftShadowMap;else if(F.str(h)){var O;const t={basic:s.BasicShadowMap,percentage:s.PCFShadowMap,soft:s.PCFSoftShadowMap,variance:s.VSMShadowMap};A.shadowMap.type=null!=(O=t[h])?O:s.PCFSoftShadowMap}else F.obj(h)&&Object.assign(A.shadowMap,h);t===A.shadowMap.enabled&&e===A.shadowMap.type||(A.shadowMap.needsUpdate=!0)}const D=C();D&&("enabled"in D?D.enabled=!v:"legacyMode"in D&&(D.legacyMode=v));Mt(A,{outputEncoding:m?3e3:3001,toneMapping:g?s.NoToneMapping:s.ACESFilmicToneMapping}),T.legacy!==v&&T.set(()=>({legacy:v})),T.linear!==m&&T.set(()=>({linear:m})),T.flat!==g&&T.set(()=>({flat:g})),!n||F.fun(n)||nt(n)||F.equ(n,A,Et)||Mt(A,n),l&&!T.events.handlers&&T.set({events:l(u)});const I=function(t,e){if(e)return e;if("undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:e,height:n,top:i,left:r}=t.parentElement.getBoundingClientRect();return{width:e,height:n,top:i,left:r}}return"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?{width:t.width,height:t.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(t,a);return F.equ(I,T.size,Et)||T.setSize(I.width,I.height,I.updateStyle,I.top,I.left),_&&T.viewport.dpr!==j(_)&&T.setDpr(_),T.frameloop!==x&&T.setFrameloop(x),T.onPointerMissed||T.set({onPointerMissed:E}),b&&!F.equ(b,T.performance,Et)&&T.set(t=>({performance:(0,i.A)((0,i.A)({},t.performance),b)})),d=c,p=!0,this},render(e){return p||this.configure(),St.updateContainer(a.createElement(Ct,{store:u,children:e,onCreated:d,rootElement:t}),h,null,()=>{}),u},unmount(){Pt(t)}}}function Ct(t){let{store:e,children:n,onCreated:r,rootElement:s}=t;return L(()=>{const t=e.getState();t.set(t=>({internal:(0,i.A)((0,i.A)({},t.internal),{},{active:!0})})),r&&r(t),e.getState().events.connected||null==t.events.connect||t.events.connect(s)},[]),a.createElement(it.Provider,{value:e},n)}function Pt(t,e){const n=_t.get(t),i=null==n?void 0:n.fiber;if(i){const r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),St.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var n,i,s,a;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(s=r.gl)||null==s.forceContextLoss||s.forceContextLoss(),null!=(a=r.gl)&&a.xr&&r.xr.disconnect(),function(t){t.dispose&&"Scene"!==t.type&&t.dispose();for(const e in t)null==e.dispose||e.dispose(),delete t[e]}(r),_t.delete(t),e&&e(t)}catch(o){}},500)})}}St.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:a.version});a.unstable_act},950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(730)},958:(t,e,n)=>{t.exports=function(t){var e={},i=n(43),r=n(853),s=Object.assign;function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var _=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var b=Symbol.iterator;function w(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=b&&t[b]||t["@@iterator"])?t:null}function S(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case p:return(t.displayName||"Context")+".Consumer";case f:return(t._context.displayName||"Context")+".Provider";case m:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case y:return null!==(e=t.displayName||null)?e:S(t.type)||"Memo";case x:e=t._payload,t=t._init;try{return S(t(e))}catch(n){}}return null}function M(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(e);case 8:return e===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function E(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function T(t){if(E(t)!==t)throw Error(a(188))}function A(t){var e=t.alternate;if(!e){if(null===(e=E(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return T(r),t;if(s===i)return T(r),e;s=s.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}function C(t){return null!==(t=A(t))?P(t):null}function P(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=P(t);if(null!==e)return e;t=t.sibling}return null}function R(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){if(4!==t.tag){var e=R(t);if(null!==e)return e}t=t.sibling}return null}var L,N=Array.isArray,k=t.getPublicInstance,O=t.getRootHostContext,D=t.getChildHostContext,I=t.prepareForCommit,z=t.resetAfterCommit,j=t.createInstance,U=t.appendInitialChild,F=t.finalizeInitialChildren,B=t.prepareUpdate,H=t.shouldSetTextContent,V=t.createTextInstance,W=t.scheduleTimeout,G=t.cancelTimeout,X=t.noTimeout,q=t.isPrimaryRenderer,Z=t.supportsMutation,Y=t.supportsPersistence,K=t.supportsHydration,J=t.getInstanceFromNode,Q=t.preparePortalMount,$=t.getCurrentEventPriority,tt=t.detachDeletedInstance,et=t.supportsMicrotasks,nt=t.scheduleMicrotask,it=t.supportsTestSelectors,rt=t.findFiberRoot,st=t.getBoundingRect,at=t.getTextContent,ot=t.isHiddenSubtree,lt=t.matchAccessibilityRole,ct=t.setFocusIfFocusable,ut=t.setupIntersectionObserver,ht=t.appendChild,dt=t.appendChildToContainer,ft=t.commitTextUpdate,pt=t.commitMount,mt=t.commitUpdate,gt=t.insertBefore,vt=t.insertInContainerBefore,yt=t.removeChild,xt=t.removeChildFromContainer,_t=t.resetTextContent,bt=t.hideInstance,wt=t.hideTextInstance,St=t.unhideInstance,Mt=t.unhideTextInstance,Et=t.clearContainer,Tt=t.cloneInstance,At=t.createContainerChildSet,Ct=t.appendChildToContainerChildSet,Pt=t.finalizeContainerChildren,Rt=t.replaceContainerChildren,Lt=t.cloneHiddenInstance,Nt=t.cloneHiddenTextInstance,kt=t.canHydrateInstance,Ot=t.canHydrateTextInstance,Dt=t.canHydrateSuspenseInstance,It=t.isSuspenseInstancePending,zt=t.isSuspenseInstanceFallback,jt=t.registerSuspenseInstanceRetry,Ut=t.getNextHydratableSibling,Ft=t.getFirstHydratableChild,Bt=t.getFirstHydratableChildWithinContainer,Ht=t.getFirstHydratableChildWithinSuspenseInstance,Vt=t.hydrateInstance,Wt=t.hydrateTextInstance,Gt=t.hydrateSuspenseInstance,Xt=t.getNextHydratableInstanceAfterSuspenseInstance,qt=t.commitHydratedContainer,Zt=t.commitHydratedSuspenseInstance,Yt=t.clearSuspenseBoundary,Kt=t.clearSuspenseBoundaryFromContainer,Jt=t.shouldDeleteUnhydratedTailInstances,Qt=t.didNotMatchHydratedContainerTextInstance,$t=t.didNotMatchHydratedTextInstance;function te(t){if(void 0===L)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);L=e&&e[1]||""}return"\n"+L+t}var ee=!1;function ne(t,e){if(!t||ee)return"";ee=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=o);break}}}finally{ee=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?te(t):""}var ie=Object.prototype.hasOwnProperty,re=[],se=-1;function ae(t){return{current:t}}function oe(t){0>se||(t.current=re[se],re[se]=null,se--)}function le(t,e){se++,re[se]=t.current,t.current=e}var ce={},ue=ae(ce),he=ae(!1),de=ce;function fe(t,e){var n=t.type.contextTypes;if(!n)return ce;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pe(t){return null!==(t=t.childContextTypes)&&void 0!==t}function me(){oe(he),oe(ue)}function ge(t,e,n){if(ue.current!==ce)throw Error(a(168));le(ue,e),le(he,n)}function ve(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(a(108,M(t)||"Unknown",r));return s({},n,i)}function ye(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ce,de=ue.current,le(ue,t),le(he,he.current),!0}function xe(t,e,n){var i=t.stateNode;if(!i)throw Error(a(169));n?(t=ve(t,e,de),i.__reactInternalMemoizedMergedChildContext=t,oe(he),oe(ue),le(ue,t)):oe(he),le(he,n)}var _e=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(be(t)/we|0)|0},be=Math.log,we=Math.LN2;var Se=64,Me=4194304;function Ee(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Te(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=Ee(o):0!==(s&=a)&&(i=Ee(s))}else 0!==(a=n&~r)?i=Ee(a):0!==s&&(i=Ee(s));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(s=e&-e)||16===r&&0!==(4194240&s)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-_e(e)),i|=t[n],e&=~r;return i}function Ae(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function Ce(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Pe(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Re(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-_e(e)]=n}function Le(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-_e(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ne=0;function ke(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var Oe=r.unstable_scheduleCallback,De=r.unstable_cancelCallback,Ie=r.unstable_shouldYield,ze=r.unstable_requestPaint,je=r.unstable_now,Ue=r.unstable_ImmediatePriority,Fe=r.unstable_UserBlockingPriority,Be=r.unstable_NormalPriority,He=r.unstable_IdlePriority,Ve=null,We=null;var Ge="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},Xe=null,qe=!1,Ze=!1;function Ye(t){null===Xe?Xe=[t]:Xe.push(t)}function Ke(){if(!Ze&&null!==Xe){Ze=!0;var t=0,e=Ne;try{var n=Xe;for(Ne=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}Xe=null,qe=!1}catch(r){throw null!==Xe&&(Xe=Xe.slice(t+1)),Oe(Ue,Ke),r}finally{Ne=e,Ze=!1}}return null}var Je=o.ReactCurrentBatchConfig;function Qe(t,e){if(Ge(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ie.call(e,r)||!Ge(t[r],e[r]))return!1}return!0}function $e(t){switch(t.tag){case 5:return te(t.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return t=ne(t.type,!1);case 11:return t=ne(t.type.render,!1);case 1:return t=ne(t.type,!0);default:return""}}function tn(t,e){if(t&&t.defaultProps){for(var n in e=s({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var en=ae(null),nn=null,rn=null,sn=null;function an(){sn=rn=nn=null}function on(t,e,n){q?(le(en,e._currentValue),e._currentValue=n):(le(en,e._currentValue2),e._currentValue2=n)}function ln(t){var e=en.current;oe(en),q?t._currentValue=e:t._currentValue2=e}function cn(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function un(t,e){nn=t,sn=rn=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Ir=!0),t.firstContext=null)}function hn(t){var e=q?t._currentValue:t._currentValue2;if(sn!==t)if(t={context:t,memoizedValue:e,next:null},null===rn){if(null===nn)throw Error(a(308));rn=t,nn.dependencies={lanes:0,firstContext:t}}else rn=rn.next=t;return e}var dn=null,fn=!1;function pn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vn(t,e){var n=t.updateQueue;null!==n&&(n=n.shared,null!==Zs&&0!==(1&t.mode)&&0===(2&qs)?(null===(t=n.interleaved)?(e.next=e,null===dn?dn=[n]:dn.push(n)):(e.next=t.next,t.next=e),n.interleaved=e):(null===(t=n.pending)?e.next=e:(e.next=t.next,t.next=e),n.pending=e))}function yn(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,Le(t,n)}}function xn(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _n(t,e,n,i){var r=t.updateQueue;fn=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var c=l,u=c.next;c.next=null,null===o?a=u:o.next=u,o=c;var h=t.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===l?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(null!==a){var d=r.baseState;for(o=0,h=u=c=null,l=a;;){var f=l.lane,p=l.eventTime;if((i&f)===f){null!==h&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var m=t,g=l;switch(f=e,p=n,g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(p,d,f);break t}d=m;break t;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(p,d,f):m)||void 0===f)break t;d=s({},d,f);break t;case 2:fn=!0}}null!==l.callback&&0!==l.lane&&(t.flags|=64,null===(f=r.effects)?r.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,o|=f;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(f=l).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}if(null===h&&(c=d),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,null!==(e=r.shared.interleaved)){r=e;do{o|=r.lane,r=r.next}while(r!==e)}else null===a&&(r.shared.lanes=0);ea|=o,t.lanes=o,t.memoizedState=d}}function bn(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var wn=(new i.Component).refs;function Sn(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:s({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Mn={isMounted:function(t){return!!(t=t._reactInternals)&&E(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=_a(),r=ba(t),s=gn(i,r);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),vn(t,s),null!==(e=wa(t,r,i))&&yn(e,t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=_a(),r=ba(t),s=gn(i,r);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),vn(t,s),null!==(e=wa(t,r,i))&&yn(e,t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_a(),i=ba(t),r=gn(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),vn(t,r),null!==(e=wa(t,i,n))&&yn(e,t,i)}};function En(t,e,n,i,r,s,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,a):!e.prototype||!e.prototype.isPureReactComponent||(!Qe(n,i)||!Qe(r,s))}function Tn(t,e,n){var i=!1,r=ce,s=e.contextType;return"object"===typeof s&&null!==s?s=hn(s):(r=pe(e)?de:ue.current,s=(i=null!==(i=e.contextTypes)&&void 0!==i)?fe(t,r):ce),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Mn,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function An(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Mn.enqueueReplaceState(e,e.state,null)}function Cn(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=wn,pn(t);var s=e.contextType;"object"===typeof s&&null!==s?r.context=hn(s):(s=pe(e)?de:ue.current,r.context=fe(t,s)),r.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(Sn(t,e,s,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&Mn.enqueueReplaceState(r,r.state,null),_n(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}var Pn=[],Rn=0,Ln=null,Nn=0,kn=[],On=0,Dn=null,In=1,zn="";function jn(t,e){Pn[Rn++]=Nn,Pn[Rn++]=Ln,Ln=t,Nn=e}function Un(t,e,n){kn[On++]=In,kn[On++]=zn,kn[On++]=Dn,Dn=t;var i=In;t=zn;var r=32-_e(i)-1;i&=~(1<<r),n+=1;var s=32-_e(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,In=1<<32-_e(e)+r|n<<r|i,zn=s+t}else In=1<<s|n<<r|i,zn=t}function Fn(t){null!==t.return&&(jn(t,1),Un(t,1,0))}function Bn(t){for(;t===Ln;)Ln=Pn[--Rn],Pn[Rn]=null,Nn=Pn[--Rn],Pn[Rn]=null;for(;t===Dn;)Dn=kn[--On],kn[On]=null,zn=kn[--On],kn[On]=null,In=kn[--On],kn[On]=null}var Hn=null,Vn=null,Wn=!1,Gn=!1,Xn=null;function qn(t,e){var n=Ja(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function Zn(t,e){switch(t.tag){case 5:return null!==(e=kt(e,t.type,t.pendingProps))&&(t.stateNode=e,Hn=t,Vn=Ft(e),!0);case 6:return null!==(e=Ot(e,t.pendingProps))&&(t.stateNode=e,Hn=t,Vn=null,!0);case 13:if(null!==(e=Dt(e))){var n=null!==Dn?{id:In,overflow:zn}:null;return t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ja(18,null,null,0)).stateNode=e,n.return=t,t.child=n,Hn=t,Vn=null,!0}return!1;default:return!1}}function Yn(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function Kn(t){if(Wn){var e=Vn;if(e){var n=e;if(!Zn(t,e)){if(Yn(t))throw Error(a(418));e=Ut(n);var i=Hn;e&&Zn(t,e)?qn(i,n):(t.flags=-4097&t.flags|2,Wn=!1,Hn=t)}}else{if(Yn(t))throw Error(a(418));t.flags=-4097&t.flags|2,Wn=!1,Hn=t}}}function Jn(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Hn=t}function Qn(t){if(!K||t!==Hn)return!1;if(!Wn)return Jn(t),Wn=!0,!1;if(3!==t.tag&&(5!==t.tag||Jt(t.type)&&!H(t.type,t.memoizedProps))){var e=Vn;if(e){if(Yn(t)){for(t=Vn;t;)t=Ut(t);throw Error(a(418))}for(;e;)qn(t,e),e=Ut(e)}}if(Jn(t),13===t.tag){if(!K)throw Error(a(316));if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));Vn=Xt(t)}else Vn=Hn?Ut(t.stateNode):null;return!0}function $n(){K&&(Vn=Hn=null,Gn=Wn=!1)}function ti(t){null===Xn?Xn=[t]:Xn.push(t)}function ei(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,t));var r=i,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=r.refs;e===wn&&(e=r.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function ni(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ii(t){return(0,t._init)(t._payload)}function ri(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=$a(t,e)).index=0,t.sibling=null,t}function s(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function h(t,e,n,i){return null===e||6!==e.tag?((e=io(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n,i){var s=n.type;return s===u?p(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===x&&ii(s)===e.type)?((i=r(e,n.props)).ref=ei(t,e,n),i.return=t,i):((i=to(n.type,n.key,n.props,null,t.mode,i)).ref=ei(t,e,n),i.return=t,i)}function f(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=ro(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function p(t,e,n,i,s){return null===e||7!==e.tag?((e=eo(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function m(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=io(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case l:return(n=to(e.type,e.key,e.props,null,t.mode,n)).ref=ei(t,null,e),n.return=t,n;case c:return(e=ro(e,t.mode,n)).return=t,e;case x:return m(t,(0,e._init)(e._payload),n)}if(N(e)||w(e))return(e=eo(e,t.mode,n,null)).return=t,e;ni(t,e)}return null}function g(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:h(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===r?d(t,e,n,i):null;case c:return n.key===r?f(t,e,n,i):null;case x:return g(t,e,(r=n._init)(n._payload),i)}if(N(n)||w(n))return null!==r?null:p(t,e,n,i,null);ni(t,n)}return null}function v(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return h(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case l:return d(e,t=t.get(null===i.key?n:i.key)||null,i,r);case c:return f(e,t=t.get(null===i.key?n:i.key)||null,i,r);case x:return v(t,e,n,(0,i._init)(i._payload),r)}if(N(i)||w(i))return p(e,t=t.get(n)||null,i,r,null);ni(e,i)}return null}function y(r,a,o,l){for(var c=null,u=null,h=a,d=a=0,f=null;null!==h&&d<o.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=g(r,h,o[d],l);if(null===p){null===h&&(h=f);break}t&&h&&null===p.alternate&&e(r,h),a=s(p,a,d),null===u?c=p:u.sibling=p,u=p,h=f}if(d===o.length)return n(r,h),Wn&&jn(r,d),c;if(null===h){for(;d<o.length;d++)null!==(h=m(r,o[d],l))&&(a=s(h,a,d),null===u?c=h:u.sibling=h,u=h);return Wn&&jn(r,d),c}for(h=i(r,h);d<o.length;d++)null!==(f=v(h,r,d,o[d],l))&&(t&&null!==f.alternate&&h.delete(null===f.key?d:f.key),a=s(f,a,d),null===u?c=f:u.sibling=f,u=f);return t&&h.forEach(function(t){return e(r,t)}),Wn&&jn(r,d),c}function _(r,o,l,c){var u=w(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,d=o,f=o=0,p=null,y=l.next();null!==d&&!y.done;f++,y=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var x=g(r,d,y.value,c);if(null===x){null===d&&(d=p);break}t&&d&&null===x.alternate&&e(r,d),o=s(x,o,f),null===h?u=x:h.sibling=x,h=x,d=p}if(y.done)return n(r,d),Wn&&jn(r,f),u;if(null===d){for(;!y.done;f++,y=l.next())null!==(y=m(r,y.value,c))&&(o=s(y,o,f),null===h?u=y:h.sibling=y,h=y);return Wn&&jn(r,f),u}for(d=i(r,d);!y.done;f++,y=l.next())null!==(y=v(d,r,f,y.value,c))&&(t&&null!==y.alternate&&d.delete(null===y.key?f:y.key),o=s(y,o,f),null===h?u=y:h.sibling=y,h=y);return t&&d.forEach(function(t){return e(r,t)}),Wn&&jn(r,f),u}return function t(i,s,a,h){if("object"===typeof a&&null!==a&&a.type===u&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case l:t:{for(var d=a.key,f=s;null!==f;){if(f.key===d){if((d=a.type)===u){if(7===f.tag){n(i,f.sibling),(s=r(f,a.props.children)).return=i,i=s;break t}}else if(f.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===x&&ii(d)===f.type){n(i,f.sibling),(s=r(f,a.props)).ref=ei(i,f,a),s.return=i,i=s;break t}n(i,f);break}e(i,f),f=f.sibling}a.type===u?((s=eo(a.props.children,i.mode,h,a.key)).return=i,i=s):((h=to(a.type,a.key,a.props,null,i.mode,h)).ref=ei(i,s,a),h.return=i,i=h)}return o(i);case c:t:{for(f=a.key;null!==s;){if(s.key===f){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break t}n(i,s);break}e(i,s),s=s.sibling}(s=ro(a,i.mode,h)).return=i,i=s}return o(i);case x:return t(i,s,(f=a._init)(a._payload),h)}if(N(a))return y(i,s,a,h);if(w(a))return _(i,s,a,h);ni(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=io(a,i.mode,h)).return=i,i=s),o(i)):n(i,s)}}var si=ri(!0),ai=ri(!1),oi={},li=ae(oi),ci=ae(oi),ui=ae(oi);function hi(t){if(t===oi)throw Error(a(174));return t}function di(t,e){le(ui,e),le(ci,t),le(li,oi),t=O(e),oe(li),le(li,t)}function fi(){oe(li),oe(ci),oe(ui)}function pi(t){var e=hi(ui.current),n=hi(li.current);n!==(e=D(n,t.type,e))&&(le(ci,t),le(li,e))}function mi(t){ci.current===t&&(oe(li),oe(ci))}var gi=ae(0);function vi(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||It(n)||zt(n)))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yi=[];function xi(){for(var t=0;t<yi.length;t++){var e=yi[t];q?e._workInProgressVersionPrimary=null:e._workInProgressVersionSecondary=null}yi.length=0}var _i=o.ReactCurrentDispatcher,bi=o.ReactCurrentBatchConfig,wi=0,Si=null,Mi=null,Ei=null,Ti=!1,Ai=!1,Ci=0,Pi=0;function Ri(){throw Error(a(321))}function Li(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ge(t[n],e[n]))return!1;return!0}function Ni(t,e,n,i,r,s){if(wi=s,Si=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_i.current=null===t||null===t.memoizedState?pr:mr,t=n(i,r),Ai){s=0;do{if(Ai=!1,Ci=0,25<=s)throw Error(a(301));s+=1,Ei=Mi=null,e.updateQueue=null,_i.current=gr,t=n(i,r)}while(Ai)}if(_i.current=fr,e=null!==Mi&&null!==Mi.next,wi=0,Ei=Mi=Si=null,Ti=!1,e)throw Error(a(300));return t}function ki(){var t=0!==Ci;return Ci=0,t}function Oi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ei?Si.memoizedState=Ei=t:Ei=Ei.next=t,Ei}function Di(){if(null===Mi){var t=Si.alternate;t=null!==t?t.memoizedState:null}else t=Mi.next;var e=null===Ei?Si.memoizedState:Ei.next;if(null!==e)Ei=e,Mi=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Mi=t).memoizedState,baseState:Mi.baseState,baseQueue:Mi.baseQueue,queue:Mi.queue,next:null},null===Ei?Si.memoizedState=Ei=t:Ei=Ei.next=t}return Ei}function Ii(t,e){return"function"===typeof e?e(t):e}function zi(t){var e=Di(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=Mi,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=o=null,c=null,u=s;do{var h=u.lane;if((wi&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,Si.lanes|=h,ea|=h}u=u.next}while(null!==u&&u!==s);null===c?o=i:c.next=l,Ge(i,e.memoizedState)||(Ir=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{s=r.lane,Si.lanes|=s,ea|=s,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ji(t){var e=Di(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=t(s,o.action),o=o.next}while(o!==r);Ge(s,e.memoizedState)||(Ir=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Ui(){}function Fi(t,e){var n=Si,i=Di(),r=e(),s=!Ge(i.memoizedState,r);if(s&&(i.memoizedState=r,Ir=!0),i=i.queue,Ji(Vi.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||null!==Ei&&1&Ei.memoizedState.tag){if(n.flags|=2048,Xi(9,Hi.bind(null,n,i,r,e),void 0,null),null===Zs)throw Error(a(349));0!==(30&wi)||Bi(n,e,r)}return r}function Bi(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=Si.updateQueue)?(e={lastEffect:null,stores:null},Si.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Hi(t,e,n,i){e.value=n,e.getSnapshot=i,Wi(e)&&wa(t,1,-1)}function Vi(t,e,n){return n(function(){Wi(e)&&wa(t,1,-1)})}function Wi(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ge(t,n)}catch(i){return!0}}function Gi(t){var e=Oi();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:t},e.queue=t,t=t.dispatch=lr.bind(null,Si,t),[e.memoizedState,t]}function Xi(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=Si.updateQueue)?(e={lastEffect:null,stores:null},Si.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function qi(){return Di().memoizedState}function Zi(t,e,n,i){var r=Oi();Si.flags|=t,r.memoizedState=Xi(1|e,n,void 0,void 0===i?null:i)}function Yi(t,e,n,i){var r=Di();i=void 0===i?null:i;var s=void 0;if(null!==Mi){var a=Mi.memoizedState;if(s=a.destroy,null!==i&&Li(i,a.deps))return void(r.memoizedState=Xi(e,n,s,i))}Si.flags|=t,r.memoizedState=Xi(1|e,n,s,i)}function Ki(t,e){return Zi(8390656,8,t,e)}function Ji(t,e){return Yi(2048,8,t,e)}function Qi(t,e){return Yi(4,2,t,e)}function $i(t,e){return Yi(4,4,t,e)}function tr(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function er(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Yi(4,4,tr.bind(null,e,t),n)}function nr(){}function ir(t,e){var n=Di();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Li(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function rr(t,e){var n=Di();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Li(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function sr(t,e){var n=Ne;Ne=0!==n&&4>n?n:4,t(!0);var i=bi.transition;bi.transition={};try{t(!1),e()}finally{Ne=n,bi.transition=i}}function ar(){return Di().memoizedState}function or(t,e,n){var i=ba(t);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},cr(t)?ur(e,n):(hr(t,e,n),null!==(t=wa(t,i,n=_a()))&&dr(t,e,i))}function lr(t,e,n){var i=ba(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(cr(t))ur(e,r);else{hr(t,e,r);var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Ge(o,a))return}catch(l){}null!==(t=wa(t,i,n=_a()))&&dr(t,e,i)}}function cr(t){var e=t.alternate;return t===Si||null!==e&&e===Si}function ur(t,e){Ai=Ti=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hr(t,e,n){null!==Zs&&0!==(1&t.mode)&&0===(2&qs)?(null===(t=e.interleaved)?(n.next=n,null===dn?dn=[e]:dn.push(e)):(n.next=t.next,t.next=n),e.interleaved=n):(null===(t=e.pending)?n.next=n:(n.next=t.next,t.next=n),e.pending=n)}function dr(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,Le(t,n)}}var fr={readContext:hn,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},pr={readContext:hn,useCallback:function(t,e){return Oi().memoizedState=[t,void 0===e?null:e],t},useContext:hn,useEffect:Ki,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Zi(4194308,4,tr.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zi(4,2,t,e)},useMemo:function(t,e){var n=Oi();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Oi();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=or.bind(null,Si,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},Oi().memoizedState=t},useState:Gi,useDebugValue:nr,useDeferredValue:function(t){var e=Gi(t),n=e[0],i=e[1];return Ki(function(){var e=bi.transition;bi.transition={};try{i(t)}finally{bi.transition=e}},[t]),n},useTransition:function(){var t=Gi(!1),e=t[0];return t=sr.bind(null,t[1]),Oi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Si,r=Oi();if(Wn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=e(),null===Zs)throw Error(a(349));0!==(30&wi)||Bi(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Ki(Vi.bind(null,i,s,t),[t]),i.flags|=2048,Xi(9,Hi.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Oi(),e=Zs.identifierPrefix;if(Wn){var n=zn;e=":"+e+"R"+(n=(In&~(1<<32-_e(In)-1)).toString(32)+n),0<(n=Ci++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=Pi++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mr={readContext:hn,useCallback:ir,useContext:hn,useEffect:Ji,useImperativeHandle:er,useInsertionEffect:Qi,useLayoutEffect:$i,useMemo:rr,useReducer:zi,useRef:qi,useState:function(){return zi(Ii)},useDebugValue:nr,useDeferredValue:function(t){var e=zi(Ii),n=e[0],i=e[1];return Ji(function(){var e=bi.transition;bi.transition={};try{i(t)}finally{bi.transition=e}},[t]),n},useTransition:function(){return[zi(Ii)[0],Di().memoizedState]},useMutableSource:Ui,useSyncExternalStore:Fi,useId:ar,unstable_isNewReconciler:!1},gr={readContext:hn,useCallback:ir,useContext:hn,useEffect:Ji,useImperativeHandle:er,useInsertionEffect:Qi,useLayoutEffect:$i,useMemo:rr,useReducer:ji,useRef:qi,useState:function(){return ji(Ii)},useDebugValue:nr,useDeferredValue:function(t){var e=ji(Ii),n=e[0],i=e[1];return Ji(function(){var e=bi.transition;bi.transition={};try{i(t)}finally{bi.transition=e}},[t]),n},useTransition:function(){return[ji(Ii)[0],Di().memoizedState]},useMutableSource:Ui,useSyncExternalStore:Fi,useId:ar,unstable_isNewReconciler:!1};function vr(t,e){try{var n="",i=e;do{n+=$e(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:r}}function yr(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xr,_r,br,wr,Sr="function"===typeof WeakMap?WeakMap:Map;function Mr(t,e,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ua||(ua=!0,ha=i),yr(0,e)},n}function Er(t,e,n){(n=gn(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){yr(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){yr(0,e),"function"!==typeof i&&(null===da?da=new Set([this]):da.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function Tr(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new Sr;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Ga.bind(null,t,e,n),e.then(t,t))}function Ar(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function Cr(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=gn(-1,1)).tag=2,vn(n,e))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}function Pr(t){t.flags|=4}function Rr(t,e){if(null!==t&&t.child===e.child)return!0;if(0!==(16&e.flags))return!1;for(t=e.child;null!==t;){if(0!==(12854&t.flags)||0!==(12854&t.subtreeFlags))return!1;t=t.sibling}return!0}if(Z)xr=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)U(t,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},_r=function(){},br=function(t,e,n,i,r){if((t=t.memoizedProps)!==i){var s=e.stateNode,a=hi(li.current);n=B(s,n,t,i,r,a),(e.updateQueue=n)&&Pr(e)}},wr=function(t,e,n,i){n!==i&&Pr(e)};else if(Y){xr=function(t,e,n,i){for(var r=e.child;null!==r;){if(5===r.tag){var s=r.stateNode;n&&i&&(s=Lt(s,r.type,r.memoizedProps,r)),U(t,s)}else if(6===r.tag)s=r.stateNode,n&&i&&(s=Nt(s,r.memoizedProps,r)),U(t,s);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(s=r.child)&&(s.return=r),xr(t,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};var Lr=function(t,e,n,i){for(var r=e.child;null!==r;){if(5===r.tag){var s=r.stateNode;n&&i&&(s=Lt(s,r.type,r.memoizedProps,r)),Ct(t,s)}else if(6===r.tag)s=r.stateNode,n&&i&&(s=Nt(s,r.memoizedProps,r)),Ct(t,s);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(s=r.child)&&(s.return=r),Lr(t,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_r=function(t,e){var n=e.stateNode;if(!Rr(t,e)){t=n.containerInfo;var i=At(t);Lr(i,e,!1,!1),n.pendingChildren=i,Pr(e),Pt(t,i)}},br=function(t,e,n,i,r){var s=t.stateNode,a=t.memoizedProps;if((t=Rr(t,e))&&a===i)e.stateNode=s;else{var o=e.stateNode,l=hi(li.current),c=null;a!==i&&(c=B(o,n,a,i,r,l)),t&&null===c?e.stateNode=s:(s=Tt(s,c,n,a,i,e,t,o),F(s,n,i,r,l)&&Pr(e),e.stateNode=s,t?Pr(e):xr(s,e,!1,!1))}},wr=function(t,e,n,i){n!==i?(t=hi(ui.current),n=hi(li.current),e.stateNode=V(i,t,n,e),Pr(e)):e.stateNode=t.stateNode}}else _r=function(){},br=function(){},wr=function(){};function Nr(t,e){if(!Wn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function kr(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Or(t,e,n){var i=e.pendingProps;switch(Bn(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(e),null;case 1:case 17:return pe(e.type)&&me(),kr(e),null;case 3:return i=e.stateNode,fi(),oe(he),oe(ue),xi(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(Qn(e)?Pr(e):null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==Xn&&(Aa(Xn),Xn=null))),_r(t,e),kr(e),null;case 5:mi(e),n=hi(ui.current);var r=e.type;if(null!==t&&null!=e.stateNode)br(t,e,r,i,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(a(166));return kr(e),null}if(t=hi(li.current),Qn(e)){if(!K)throw Error(a(175));t=Vt(e.stateNode,e.type,e.memoizedProps,n,t,e,!Gn),e.updateQueue=t,null!==t&&Pr(e)}else{var s=j(r,i,n,t,e);xr(s,e,!1,!1),e.stateNode=s,F(s,r,i,n,t)&&Pr(e)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return kr(e),null;case 6:if(t&&null!=e.stateNode)wr(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(a(166));if(t=hi(ui.current),n=hi(li.current),Qn(e)){if(!K)throw Error(a(176));if(t=e.stateNode,i=e.memoizedProps,(n=Wt(t,i,e,!Gn))&&null!==(r=Hn))switch(s=0!==(1&r.mode),r.tag){case 3:Qt(r.stateNode.containerInfo,t,i,s);break;case 5:$t(r.type,r.memoizedProps,r.stateNode,t,i,s)}n&&Pr(e)}else e.stateNode=V(i,t,n,e)}return kr(e),null;case 13:if(oe(gi),i=e.memoizedState,Wn&&null!==Vn&&0!==(1&e.mode)&&0===(128&e.flags)){for(t=Vn;t;)t=Ut(t);return $n(),e.flags|=98560,e}if(null!==i&&null!==i.dehydrated){if(i=Qn(e),null===t){if(!i)throw Error(a(318));if(!K)throw Error(a(344));if(!(t=null!==(t=e.memoizedState)?t.dehydrated:null))throw Error(a(317));Gt(t,e)}else $n(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;return kr(e),null}return null!==Xn&&(Aa(Xn),Xn=null),0!==(128&e.flags)?(e.lanes=n,e):(i=null!==i,n=!1,null===t?Qn(e):n=null!==t.memoizedState,i&&!n&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&gi.current)?0===$s&&($s=3):Da())),null!==e.updateQueue&&(e.flags|=4),kr(e),null);case 4:return fi(),_r(t,e),null===t&&Q(e.stateNode.containerInfo),kr(e),null;case 10:return ln(e.type._context),kr(e),null;case 19:if(oe(gi),null===(r=e.memoizedState))return kr(e),null;if(i=0!==(128&e.flags),null===(s=r.rendering))if(i)Nr(r,!1);else{if(0!==$s||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(s=vi(t))){for(e.flags|=128,Nr(r,!1),null!==(t=s.updateQueue)&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=n,i=e.child;null!==i;)r=t,(n=i).flags&=14680066,null===(s=n.alternate)?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,n.type=s.type,r=s.dependencies,n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return le(gi,1&gi.current|2),e.child}t=t.sibling}null!==r.tail&&je()>oa&&(e.flags|=128,i=!0,Nr(r,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=vi(s))){if(e.flags|=128,i=!0,null!==(t=t.updateQueue)&&(e.updateQueue=t,e.flags|=4),Nr(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!Wn)return kr(e),null}else 2*je()-r.renderingStartTime>oa&&1073741824!==n&&(e.flags|=128,i=!0,Nr(r,!1),e.lanes=4194304);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(t=r.last)?t.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=je(),e.sibling=null,t=gi.current,le(gi,i?1&t|2:1&t),e):(kr(e),null);case 22:case 23:return La(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Js)&&(kr(e),Z&&6&e.subtreeFlags&&(e.flags|=8192)):kr(e),null;case 24:case 25:return null}throw Error(a(156,e.tag))}var Dr=o.ReactCurrentOwner,Ir=!1;function zr(t,e,n,i){e.child=null===t?ai(e,null,n,i):si(e,t.child,n,i)}function jr(t,e,n,i,r){n=n.render;var s=e.ref;return un(e,r),i=Ni(t,e,n,i,s,r),n=ki(),null===t||Ir?(Wn&&n&&Fn(e),e.flags|=1,zr(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,rs(t,e,r))}function Ur(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||Qa(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=to(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Fr(t,e,s,i,r))}if(s=t.child,0===(t.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Qe)(a,i)&&t.ref===e.ref)return rs(t,e,r)}return e.flags|=1,(t=$a(s,i)).ref=e.ref,t.return=e,e.child=t}function Fr(t,e,n,i,r){if(null!==t&&Qe(t.memoizedProps,i)&&t.ref===e.ref){if(Ir=!1,0===(t.lanes&r))return e.lanes=t.lanes,rs(t,e,r);0!==(131072&t.flags)&&(Ir=!0)}return Vr(t,e,n,i,r)}function Br(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null},le(Qs,Js),Js|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null},e.updateQueue=null,le(Qs,Js),Js|=t,null;e.memoizedState={baseLanes:0,cachePool:null},i=null!==s?s.baseLanes:n,le(Qs,Js),Js|=i}else null!==s?(i=s.baseLanes|n,e.memoizedState=null):i=n,le(Qs,Js),Js|=i;return zr(t,e,r,n),e.child}function Hr(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vr(t,e,n,i,r){var s=pe(n)?de:ue.current;return s=fe(e,s),un(e,r),n=Ni(t,e,n,i,s,r),i=ki(),null===t||Ir?(Wn&&i&&Fn(e),e.flags|=1,zr(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,rs(t,e,r))}function Wr(t,e,n,i,r){if(pe(n)){var s=!0;ye(e)}else s=!1;if(un(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),Tn(e,n,i),Cn(e,n,i,r),i=!0;else if(null===t){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=hn(c):c=fe(e,c=pe(n)?de:ue.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&An(e,a,i,c),fn=!1;var d=e.memoizedState;a.state=d,_n(e,i,a,r),l=e.memoizedState,o!==i||d!==l||he.current||fn?("function"===typeof u&&(Sn(e,n,u,i),l=e.memoizedState),(o=fn||En(e,n,o,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,mn(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:tn(e.type,o),a.props=c,h=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=hn(l):l=fe(e,l=pe(n)?de:ue.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&An(e,a,i,l),fn=!1,d=e.memoizedState,a.state=d,_n(e,i,a,r);var p=e.memoizedState;o!==h||d!==p||he.current||fn?("function"===typeof f&&(Sn(e,n,f,i),p=e.memoizedState),(c=fn||En(e,n,c,i,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Gr(t,e,n,i,s,r)}function Gr(t,e,n,i,r,s){Hr(t,e);var a=0!==(128&e.flags);if(!i&&!a)return r&&xe(e,n,!1),rs(t,e,s);i=e.stateNode,Dr.current=e;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&a?(e.child=si(e,t.child,null,s),e.child=si(e,null,o,s)):zr(t,e,o,s),e.memoizedState=i.state,r&&xe(e,n,!0),e.child}function Xr(t){var e=t.stateNode;e.pendingContext?ge(0,e.pendingContext,e.pendingContext!==e.context):e.context&&ge(0,e.context,!1),di(t,e.containerInfo)}function qr(t,e,n,i,r){return $n(),ti(r),e.flags|=256,zr(t,e,n,i),e.child}var Zr={dehydrated:null,treeContext:null,retryLane:0};function Yr(t){return{baseLanes:t,cachePool:null}}function Kr(t,e,n){var i,r=e.pendingProps,s=gi.current,o=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&s)),i?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),le(gi,1&s),null===t)return Kn(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:zt(t)?e.lanes=8:e.lanes=1073741824,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=s):o=no(s,r,0,null),t=eo(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Yr(n),e.memoizedState=Zr,t):Jr(e,s));if(null!==(s=t.memoizedState)){if(null!==(i=s.dehydrated)){if(l)return 256&e.flags?(e.flags&=-257,ts(t,e,n,Error(a(422)))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=no({mode:"visible",children:r.children},s,0,null),(o=eo(o,s,n,null)).flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,0!==(1&e.mode)&&si(e,t.child,null,n),e.child.memoizedState=Yr(n),e.memoizedState=Zr,o);if(0===(1&e.mode))e=ts(t,e,n,null);else if(zt(i))e=ts(t,e,n,Error(a(419)));else if(r=0!==(n&t.childLanes),Ir||r){if(null!==(r=Zs)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(r=0!==(o&(r.suspendedLanes|n))?0:o)&&r!==s.retryLane&&(s.retryLane=r,wa(t,r,-1))}Da(),e=ts(t,e,n,Error(a(421)))}else It(i)?(e.flags|=128,e.child=t.child,e=qa.bind(null,t),jt(i,e),e=null):(n=s.treeContext,K&&(Vn=Ht(i),Hn=e,Wn=!0,Xn=null,Gn=!1,null!==n&&(kn[On++]=In,kn[On++]=zn,kn[On++]=Dn,In=n.id,zn=n.overflow,Dn=e)),(e=Jr(e,e.pendingProps.children)).flags|=4096);return e}return o?(r=$r(t,e,r.children,r.fallback,n),o=e.child,s=t.child.memoizedState,o.memoizedState=null===s?Yr(n):{baseLanes:s.baseLanes|n,cachePool:null},o.childLanes=t.childLanes&~n,e.memoizedState=Zr,r):(n=Qr(t,e,r.children,n),e.memoizedState=null,n)}return o?(r=$r(t,e,r.children,r.fallback,n),o=e.child,s=t.child.memoizedState,o.memoizedState=null===s?Yr(n):{baseLanes:s.baseLanes|n,cachePool:null},o.childLanes=t.childLanes&~n,e.memoizedState=Zr,r):(n=Qr(t,e,r.children,n),e.memoizedState=null,n)}function Jr(t,e){return(e=no({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Qr(t,e,n,i){var r=t.child;return t=r.sibling,n=$a(r,{mode:"visible",children:n}),0===(1&e.mode)&&(n.lanes=i),n.return=e,n.sibling=null,null!==t&&(null===(i=e.deletions)?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=n}function $r(t,e,n,i,r){var s=e.mode,a=(t=t.child).sibling,o={mode:"hidden",children:n};return 0===(1&s)&&e.child!==t?((n=e.child).childLanes=0,n.pendingProps=o,e.deletions=null):(n=$a(t,o)).subtreeFlags=14680064&t.subtreeFlags,null!==a?i=$a(a,i):(i=eo(i,s,r,null)).flags|=2,i.return=e,n.return=e,n.sibling=i,e.child=n,i}function ts(t,e,n,i){return null!==i&&ti(i),si(e,t.child,null,n),(t=Jr(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function es(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),cn(t.return,e,n)}function ns(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function is(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(zr(t,e,i.children,n),0!==(2&(i=gi.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&es(t,n,e);else if(19===t.tag)es(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(le(gi,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===vi(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ns(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===vi(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ns(e,!0,n,null,s);break;case"together":ns(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rs(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),ea|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=$a(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=$a(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function ss(t,e){switch(Bn(e),e.tag){case 1:return pe(e.type)&&me(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return fi(),oe(he),oe(ue),xi(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return mi(e),null;case 13:if(oe(gi),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(a(340));$n()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return oe(gi),null;case 4:return fi(),null;case 10:return ln(e.type._context),null;case 22:case 23:return La(),null;default:return null}}var as=!1,os=!1,ls="function"===typeof WeakSet?WeakSet:Set,cs=null;function us(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Wa(t,e,i)}else n.current=null}function hs(t,e,n){try{n()}catch(i){Wa(t,e,i)}}var ds=!1;function fs(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,void 0!==s&&hs(e,n,s)}r=r.next}while(r!==i)}}function ps(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ms(t){var e=t.ref;if(null!==e){var n=t.stateNode;if(5===t.tag)t=k(n);else t=n;"function"===typeof e?e(t):e.current=t}}function gs(t,e,n){if(We&&"function"===typeof We.onCommitFiberUnmount)try{We.onCommitFiberUnmount(Ve,e)}catch(a){}switch(e.tag){case 0:case 11:case 14:case 15:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var i=t=t.next;do{var r=i,s=r.destroy;r=r.tag,void 0!==s&&(0!==(2&r)||0!==(4&r))&&hs(e,n,s),i=i.next}while(i!==t)}break;case 1:if(us(e,n),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(a){Wa(e,n,a)}break;case 5:us(e,n);break;case 4:Z?Ms(t,e,n):Y&&Y&&(e=e.stateNode.containerInfo,n=At(e),Rt(e,n))}}function vs(t,e,n){for(var i=e;;)if(gs(t,i,n),null===i.child||Z&&4===i.tag){if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function ys(t){var e=t.alternate;null!==e&&(t.alternate=null,ys(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&tt(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xs(t){return 5===t.tag||3===t.tag||4===t.tag}function _s(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||xs(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function bs(t){if(Z){t:{for(var e=t.return;null!==e;){if(xs(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(n.tag){case 5:e=n.stateNode,32&n.flags&&(_t(e),n.flags&=-33),Ss(t,n=_s(t),e);break;case 3:case 4:e=n.stateNode.containerInfo,ws(t,n=_s(t),e);break;default:throw Error(a(161))}}}function ws(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?vt(n,t,e):dt(n,t);else if(4!==i&&null!==(t=t.child))for(ws(t,e,n),t=t.sibling;null!==t;)ws(t,e,n),t=t.sibling}function Ss(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?gt(n,t,e):ht(n,t);else if(4!==i&&null!==(t=t.child))for(Ss(t,e,n),t=t.sibling;null!==t;)Ss(t,e,n),t=t.sibling}function Ms(t,e,n){for(var i,r,s=e,o=!1;;){if(!o){o=s.return;t:for(;;){if(null===o)throw Error(a(160));switch(i=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:i=i.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===s.tag||6===s.tag)vs(t,s,n),r?xt(i,s.stateNode):yt(i,s.stateNode);else if(18===s.tag)r?Kt(i,s.stateNode):Yt(i,s.stateNode);else if(4===s.tag){if(null!==s.child){i=s.stateNode.containerInfo,r=!0,s.child.return=s,s=s.child;continue}}else if(gs(t,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===e)break;for(;null===s.sibling;){if(null===s.return||s.return===e)return;4===(s=s.return).tag&&(o=!1)}s.sibling.return=s.return,s=s.sibling}}function Es(t,e){if(Z){switch(e.tag){case 0:case 11:case 14:case 15:return fs(3,e,e.return),ps(3,e),void fs(5,e,e.return);case 1:case 12:case 17:return;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps;t=null!==t?t.memoizedProps:i;var r=e.type,s=e.updateQueue;e.updateQueue=null,null!==s&&mt(n,s,r,t,i,e)}return;case 6:if(null===e.stateNode)throw Error(a(162));return n=e.memoizedProps,void ft(e.stateNode,null!==t?t.memoizedProps:n,n);case 3:return void(K&&null!==t&&t.memoizedState.isDehydrated&&qt(e.stateNode.containerInfo));case 13:case 19:return void Ts(e)}throw Error(a(163))}switch(e.tag){case 0:case 11:case 14:case 15:return fs(3,e,e.return),ps(3,e),void fs(5,e,e.return);case 12:case 22:case 23:return;case 13:case 19:return void Ts(e);case 3:K&&null!==t&&t.memoizedState.isDehydrated&&qt(e.stateNode.containerInfo)}t:if(Y){switch(e.tag){case 1:case 5:case 6:break t;case 3:case 4:e=e.stateNode,Rt(e.containerInfo,e.pendingChildren);break t}throw Error(a(163))}}function Ts(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ls),e.forEach(function(e){var i=Za.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))})}}function As(t,e,n){cs=t,Cs(t,e,n)}function Cs(t,e,n){for(var i=0!==(1&t.mode);null!==cs;){var r=cs,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||as;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||os;o=as;var c=os;if(as=a,(os=l)&&!c)for(cs=r;null!==cs;)l=(a=cs).child,22===a.tag&&null!==a.memoizedState?Ls(r):null!==l?(l.return=a,cs=l):Ls(r);for(;null!==s;)cs=s,Cs(s,e,n),s=s.sibling;cs=r,as=o,os=c}Ps(t)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,cs=s):Ps(t)}}function Ps(t){for(;null!==cs;){var e=cs;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:os||ps(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!os)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&bn(e,s,i);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:n=k(e.child.stateNode);break;case 1:n=e.child.stateNode}bn(e,o,n)}break;case 5:var l=e.stateNode;null===n&&4&e.flags&&pt(l,e.type,e.memoizedProps,e);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(K&&null===e.memoizedState){var c=e.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Zt(h)}}}break;default:throw Error(a(163))}os||512&e.flags&&ms(e)}catch(d){Wa(e,e.return,d)}}if(e===t){cs=null;break}if(null!==(n=e.sibling)){n.return=e.return,cs=n;break}cs=e.return}}function Rs(t){for(;null!==cs;){var e=cs;if(e===t){cs=null;break}var n=e.sibling;if(null!==n){n.return=e.return,cs=n;break}cs=e.return}}function Ls(t){for(;null!==cs;){var e=cs;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ps(4,e)}catch(l){Wa(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Wa(e,r,l)}}var s=e.return;try{ms(e)}catch(l){Wa(e,s,l)}break;case 5:var a=e.return;try{ms(e)}catch(l){Wa(e,a,l)}}}catch(l){Wa(e,e.return,l)}if(e===t){cs=null;break}var o=e.sibling;if(null!==o){o.return=e.return,cs=o;break}cs=e.return}}var Ns=0,ks=1,Os=2,Ds=3,Is=4;if("function"===typeof Symbol&&Symbol.for){var zs=Symbol.for;Ns=zs("selector.component"),ks=zs("selector.has_pseudo_class"),Os=zs("selector.role"),Ds=zs("selector.test_id"),Is=zs("selector.text")}function js(t){var e=J(t);if(null!=e){if("string"!==typeof e.memoizedProps["data-testname"])throw Error(a(364));return e}if(null===(t=rt(t)))throw Error(a(362));return t.stateNode.current}function Us(t,e){switch(e.$$typeof){case Ns:if(t.type===e.value)return!0;break;case ks:t:{e=e.value,t=[t,0];for(var n=0;n<t.length;){var i=t[n++],r=t[n++],s=e[r];if(5!==i.tag||!ot(i)){for(;null!=s&&Us(i,s);)s=e[++r];if(r===e.length){e=!0;break t}for(i=i.child;null!==i;)t.push(i,r),i=i.sibling}}e=!1}return e;case Os:if(5===t.tag&&lt(t.stateNode,e.value))return!0;break;case Is:if((5===t.tag||6===t.tag)&&(null!==(t=at(t))&&0<=t.indexOf(e.value)))return!0;break;case Ds:if(5===t.tag&&("string"===typeof(t=t.memoizedProps["data-testname"])&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Fs(t){switch(t.$$typeof){case Ns:return"<"+(S(t.value)||"Unknown")+">";case ks:return":has("+(Fs(t)||"")+")";case Os:return'[role="'+t.value+'"]';case Is:return'"'+t.value+'"';case Ds:return'[data-testname="'+t.value+'"]';default:throw Error(a(365))}}function Bs(t,e){var n=[];t=[t,0];for(var i=0;i<t.length;){var r=t[i++],s=t[i++],a=e[s];if(5!==r.tag||!ot(r)){for(;null!=a&&Us(r,a);)a=e[++s];if(s===e.length)n.push(r);else for(r=r.child;null!==r;)t.push(r,s),r=r.sibling}}return n}function Hs(t,e){if(!it)throw Error(a(363));t=Bs(t=js(t),e),e=[],t=Array.from(t);for(var n=0;n<t.length;){var i=t[n++];if(5===i.tag)ot(i)||e.push(i.stateNode);else for(i=i.child;null!==i;)t.push(i),i=i.sibling}return e}var Vs=Math.ceil,Ws=o.ReactCurrentDispatcher,Gs=o.ReactCurrentOwner,Xs=o.ReactCurrentBatchConfig,qs=0,Zs=null,Ys=null,Ks=0,Js=0,Qs=ae(0),$s=0,ta=null,ea=0,na=0,ia=0,ra=null,sa=null,aa=0,oa=1/0;function la(){oa=je()+500}var ca,ua=!1,ha=null,da=null,fa=!1,pa=null,ma=0,ga=0,va=null,ya=-1,xa=0;function _a(){return 0!==(6&qs)?je():-1!==ya?ya:ya=je()}function ba(t){return 0===(1&t.mode)?1:0!==(2&qs)&&0!==Ks?Ks&-Ks:null!==Je.transition?(0===xa&&(t=Se,0===(4194240&(Se<<=1))&&(Se=64),xa=t),xa):0!==(t=Ne)?t:$()}function wa(t,e,n){if(50<ga)throw ga=0,va=null,Error(a(185));var i=Sa(t,e);return null===i?null:(Re(i,e,n),0!==(2&qs)&&i===Zs||(i===Zs&&(0===(2&qs)&&(na|=e),4===$s&&Ca(i,Ks)),Ma(i,n),1===e&&0===qs&&0===(1&t.mode)&&(la(),qe&&Ke())),i)}function Sa(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function Ma(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-_e(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=Ae(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}(t,e);var i=Te(t,t===Zs?Ks:0);if(0===i)null!==n&&De(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&De(n),1===e)0===t.tag?function(t){qe=!0,Ye(t)}(Pa.bind(null,t)):Ye(Pa.bind(null,t)),et?nt(function(){0===qs&&Ke()}):Oe(Ue,Ke),n=null;else{switch(ke(i)){case 1:n=Ue;break;case 4:n=Fe;break;case 16:default:n=Be;break;case 536870912:n=He}n=Ya(n,Ea.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ea(t,e){if(ya=-1,xa=0,0!==(6&qs))throw Error(a(327));var n=t.callbackNode;if(Ha()&&t.callbackNode!==n)return null;var i=Te(t,t===Zs?Ks:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=Ia(t,i);else{e=i;var r=qs;qs|=2;var s=Oa();for(Zs===t&&Ks===e||(la(),Na(t,e));;)try{ja();break}catch(l){ka(t,l)}an(),Ws.current=s,qs=r,null!==Ys?e=0:(Zs=null,Ks=0,e=$s)}if(0!==e){if(2===e&&(0!==(r=Ce(t))&&(i=r,e=Ta(t,r))),1===e)throw n=ta,Na(t,0),Ca(t,i),Ma(t,je()),n;if(6===e)Ca(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ge(s(),r))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=Ia(t,i))&&(0!==(s=Ce(t))&&(i=s,e=Ta(t,s))),1===e))throw n=ta,Na(t,0),Ca(t,i),Ma(t,je()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(a(345));case 2:case 5:Ba(t,sa);break;case 3:if(Ca(t,i),(130023424&i)===i&&10<(e=aa+500-je())){if(0!==Te(t,0))break;if(((r=t.suspendedLanes)&i)!==i){_a(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=W(Ba.bind(null,t,sa),e);break}Ba(t,sa);break;case 4:if(Ca(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-_e(i);s=1<<o,(o=e[o])>r&&(r=o),i&=~s}if(i=r,10<(i=(120>(i=je()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Vs(i/1960))-i)){t.timeoutHandle=W(Ba.bind(null,t,sa),i);break}Ba(t,sa);break;default:throw Error(a(329))}}}return Ma(t,je()),t.callbackNode===n?Ea.bind(null,t):null}function Ta(t,e){var n=ra;return t.current.memoizedState.isDehydrated&&(Na(t,e).flags|=256),2!==(t=Ia(t,e))&&(e=sa,sa=n,null!==e&&Aa(e)),t}function Aa(t){null===sa?sa=t:sa.push.apply(sa,t)}function Ca(t,e){for(e&=~ia,e&=~na,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_e(e),i=1<<n;t[n]=-1,e&=~i}}function Pa(t){if(0!==(6&qs))throw Error(a(327));Ha();var e=Te(t,0);if(0===(1&e))return Ma(t,je()),null;var n=Ia(t,e);if(0!==t.tag&&2===n){var i=Ce(t);0!==i&&(e=i,n=Ta(t,i))}if(1===n)throw n=ta,Na(t,0),Ca(t,e),Ma(t,je()),n;if(6===n)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ba(t,sa),Ma(t,je()),null}function Ra(t){null!==pa&&0===pa.tag&&0===(6&qs)&&Ha();var e=qs;qs|=1;var n=Xs.transition,i=Ne;try{if(Xs.transition=null,Ne=1,t)return t()}finally{Ne=i,Xs.transition=n,0===(6&(qs=e))&&Ke()}}function La(){Js=Qs.current,oe(Qs)}function Na(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==X&&(t.timeoutHandle=X,G(n)),null!==Ys)for(n=Ys.return;null!==n;){var i=n;switch(Bn(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&me();break;case 3:fi(),oe(he),oe(ue),xi();break;case 5:mi(i);break;case 4:fi();break;case 13:case 19:oe(gi);break;case 10:ln(i.type._context);break;case 22:case 23:La()}n=n.return}if(Zs=t,Ys=t=$a(t.current,null),Ks=Js=e,$s=0,ta=null,ia=na=ea=0,sa=ra=null,null!==dn){for(e=0;e<dn.length;e++)if(null!==(i=(n=dn[e]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}dn=null}return t}function ka(t,e){for(;;){var n=Ys;try{if(an(),_i.current=fr,Ti){for(var i=Si.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Ti=!1}if(wi=0,Ei=Mi=Si=null,Ai=!1,Ci=0,Gs.current=null,null===n||null===n.return){$s=1,ta=e,Ys=null;break}t:{var s=t,o=n.return,l=n,c=e;if(e=Ks,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ar(o);if(null!==p){p.flags&=-257,Cr(p,o,l,0,e),1&p.mode&&Tr(s,u,e),c=u;var m=(e=p).updateQueue;if(null===m){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break t}if(0===(1&e)){Tr(s,u,e),Da();break t}c=Error(a(426))}else if(Wn&&1&l.mode){var v=Ar(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Cr(v,o,l,0,e),ti(c);break t}}s=c,4!==$s&&($s=2),null===ra?ra=[s]:ra.push(s),c=vr(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e,xn(l,Mr(0,c,e));break t;case 1:s=c;var y=l.type,x=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===da||!da.has(x)))){l.flags|=65536,e&=-e,l.lanes|=e,xn(l,Er(l,s,e));break t}}l=l.return}while(null!==l)}Fa(n)}catch(_){e=_,Ys===n&&null!==n&&(Ys=n=n.return);continue}break}}function Oa(){var t=Ws.current;return Ws.current=fr,null===t?fr:t}function Da(){0!==$s&&3!==$s&&2!==$s||($s=4),null===Zs||0===(268435455&ea)&&0===(268435455&na)||Ca(Zs,Ks)}function Ia(t,e){var n=qs;qs|=2;var i=Oa();for(Zs===t&&Ks===e||Na(t,e);;)try{za();break}catch(r){ka(t,r)}if(an(),qs=n,Ws.current=i,null!==Ys)throw Error(a(261));return Zs=null,Ks=0,$s}function za(){for(;null!==Ys;)Ua(Ys)}function ja(){for(;null!==Ys&&!Ie();)Ua(Ys)}function Ua(t){var e=ca(t.alternate,t,Js);t.memoizedProps=t.pendingProps,null===e?Fa(t):Ys=e,Gs.current=null}function Fa(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Or(n,e,Js)))return void(Ys=n)}else{if(null!==(n=ss(n,e)))return n.flags&=32767,void(Ys=n);if(null===t)return $s=6,void(Ys=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ys=e);Ys=e=t}while(null!==e);0===$s&&($s=5)}function Ba(t,e){var n=Ne,i=Xs.transition;try{Xs.transition=null,Ne=1,function(t,e,n){do{Ha()}while(null!==pa);if(0!==(6&qs))throw Error(a(327));var i=t.finishedWork,r=t.finishedLanes;if(null===i)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var s=i.lanes|i.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-_e(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}(t,s),t===Zs&&(Ys=Zs=null,Ks=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||fa||(fa=!0,Ya(Be,function(){return Ha(),null})),s=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||s){s=Xs.transition,Xs.transition=null;var o=Ne;Ne=1;var l=qs;qs|=4,Gs.current=null,function(t,e){for(I(t.containerInfo),cs=e;null!==cs;)if(e=(t=cs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,cs=e;else for(;null!==cs;){t=cs;try{var n=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,r=n.memoizedState,s=t.stateNode,o=s.getSnapshotBeforeUpdate(t.elementType===t.type?i:tn(t.type,i),r);s.__reactInternalSnapshotBeforeUpdate=o}break;case 3:Z&&Et(t.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(l){Wa(t,t.return,l)}if(null!==(e=t.sibling)){e.return=t.return,cs=e;break}cs=t.return}n=ds,ds=!1}(t,i),function(t,e){for(cs=e;null!==cs;){var n=(e=cs).deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t;Z?Ms(s,r,e):vs(s,r,e);var a=r.alternate;null!==a&&(a.return=null),r.return=null}catch(b){Wa(r,e,b)}}if(n=e.child,0!==(12854&e.subtreeFlags)&&null!==n)n.return=e,cs=n;else for(;null!==cs;){e=cs;try{var o=e.flags;if(32&o&&Z&&_t(e.stateNode),512&o){var l=e.alternate;if(null!==l){var c=l.ref;null!==c&&("function"===typeof c?c(null):c.current=null)}}if(8192&o)switch(e.tag){case 13:if(null!==e.memoizedState){var u=e.alternate;null!==u&&null!==u.memoizedState||(aa=je())}break;case 22:var h=null!==e.memoizedState,d=e.alternate,f=null!==d&&null!==d.memoizedState;if(n=e,Z)t:if(i=n,r=h,s=null,Z)for(var p=i;;){if(5===p.tag){if(null===s){s=p;var m=p.stateNode;r?bt(m):St(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===s){var g=p.stateNode;r?wt(g):Mt(g,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===i)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===i)break;for(;null===p.sibling;){if(null===p.return||p.return===i)break t;s===p&&(s=null),p=p.return}s===p&&(s=null),p.sibling.return=p.return,p=p.sibling}if(h&&!f&&0!==(1&n.mode)){cs=n;for(var v=n.child;null!==v;){for(n=cs=v;null!==cs;){var y=(i=cs).child;switch(i.tag){case 0:case 11:case 14:case 15:fs(4,i,i.return);break;case 1:us(i,i.return);var x=i.stateNode;if("function"===typeof x.componentWillUnmount){var _=i.return;try{x.props=i.memoizedProps,x.state=i.memoizedState,x.componentWillUnmount()}catch(b){Wa(i,_,b)}}break;case 5:us(i,i.return);break;case 22:if(null!==i.memoizedState){Rs(n);continue}}null!==y?(y.return=i,cs=y):Rs(n)}v=v.sibling}}}switch(4102&o){case 2:bs(e),e.flags&=-3;break;case 6:bs(e),e.flags&=-3,Es(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,Es(e.alternate,e);break;case 4:Es(e.alternate,e)}}catch(b){Wa(e,e.return,b)}if(null!==(n=e.sibling)){n.return=e.return,cs=n;break}cs=e.return}}}(t,i),z(t.containerInfo),t.current=i,As(i,t,r),ze(),qs=l,Ne=o,Xs.transition=s}else t.current=i;if(fa&&(fa=!1,pa=t,ma=r),s=t.pendingLanes,0===s&&(da=null),function(t){if(We&&"function"===typeof We.onCommitFiberRoot)try{We.onCommitFiberRoot(Ve,t,void 0,128===(128&t.current.flags))}catch(e){}}(i.stateNode),Ma(t,je()),null!==e)for(n=t.onRecoverableError,i=0;i<e.length;i++)n(e[i]);if(ua)throw ua=!1,t=ha,ha=null,t;0!==(1&ma)&&0!==t.tag&&Ha(),s=t.pendingLanes,0!==(1&s)?t===va?ga++:(ga=0,va=t):ga=0,Ke()}(t,e,n)}finally{Xs.transition=i,Ne=n}return null}function Ha(){if(null!==pa){var t=ke(ma),e=Xs.transition,n=Ne;try{if(Xs.transition=null,Ne=16>t?16:t,null===pa)var i=!1;else{if(t=pa,pa=null,ma=0,0!==(6&qs))throw Error(a(331));var r=qs;for(qs|=4,cs=t.current;null!==cs;){var s=cs,o=s.child;if(0!==(16&cs.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(cs=u;null!==cs;){var h=cs;switch(h.tag){case 0:case 11:case 15:fs(8,h,s)}var d=h.child;if(null!==d)d.return=h,cs=d;else for(;null!==cs;){var f=(h=cs).sibling,p=h.return;if(ys(h),h===u){cs=null;break}if(null!==f){f.return=p,cs=f;break}cs=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}cs=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,cs=o;else t:for(;null!==cs;){if(0!==(2048&(s=cs).flags))switch(s.tag){case 0:case 11:case 15:fs(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,cs=y;break t}cs=s.return}}var x=t.current;for(cs=x;null!==cs;){var _=(o=cs).child;if(0!==(2064&o.subtreeFlags)&&null!==_)_.return=o,cs=_;else t:for(o=x;null!==cs;){if(0!==(2048&(l=cs).flags))try{switch(l.tag){case 0:case 11:case 15:ps(9,l)}}catch(w){Wa(l,l.return,w)}if(l===o){cs=null;break t}var b=l.sibling;if(null!==b){b.return=l.return,cs=b;break t}cs=l.return}}if(qs=r,Ke(),We&&"function"===typeof We.onPostCommitFiberRoot)try{We.onPostCommitFiberRoot(Ve,t)}catch(w){}i=!0}return i}finally{Ne=n,Xs.transition=e}}return!1}function Va(t,e,n){vn(t,e=Mr(0,e=vr(n,e),1)),e=_a(),null!==(t=Sa(t,1))&&(Re(t,1,e),Ma(t,e))}function Wa(t,e,n){if(3===t.tag)Va(t,t,n);else for(;null!==e;){if(3===e.tag){Va(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===da||!da.has(i))){vn(e,t=Er(e,t=vr(n,t),1)),t=_a(),null!==(e=Sa(e,1))&&(Re(e,1,t),Ma(e,t));break}}e=e.return}}function Ga(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=_a(),t.pingedLanes|=t.suspendedLanes&n,Zs===t&&(Ks&n)===n&&(4===$s||3===$s&&(130023424&Ks)===Ks&&500>je()-aa?Na(t,0):ia|=n),Ma(t,e)}function Xa(t,e){0===e&&(0===(1&t.mode)?e=1:(e=Me,0===(130023424&(Me<<=1))&&(Me=4194304)));var n=_a();null!==(t=Sa(t,e))&&(Re(t,e,n),Ma(t,n))}function qa(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Xa(t,n)}function Za(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(e),Xa(t,n)}function Ya(t,e){return Oe(t,e)}function Ka(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(t,e,n,i){return new Ka(t,e,n,i)}function Qa(t){return!(!(t=t.prototype)||!t.isReactComponent)}function $a(t,e){var n=t.alternate;return null===n?((n=Ja(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function to(t,e,n,i,r,s){var o=2;if(i=t,"function"===typeof t)Qa(t)&&(o=1);else if("string"===typeof t)o=5;else t:switch(t){case u:return eo(n.children,r,s,e);case h:o=8,r|=8;break;case d:return(t=Ja(12,n,e,2|r)).elementType=d,t.lanes=s,t;case g:return(t=Ja(13,n,e,r)).elementType=g,t.lanes=s,t;case v:return(t=Ja(19,n,e,r)).elementType=v,t.lanes=s,t;case _:return no(n,r,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case f:o=10;break t;case p:o=9;break t;case m:o=11;break t;case y:o=14;break t;case x:o=16,i=null;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Ja(o,n,e,r)).elementType=t,e.type=i,e.lanes=s,e}function eo(t,e,n,i){return(t=Ja(7,t,i,e)).lanes=n,t}function no(t,e,n,i){return(t=Ja(22,t,i,e)).elementType=_,t.lanes=n,t.stateNode={},t}function io(t,e,n){return(t=Ja(6,t,null,e)).lanes=n,t}function ro(t,e,n){return(e=Ja(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function so(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=X,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pe(0),this.expirationTimes=Pe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.identifierPrefix=i,this.onRecoverableError=r,K&&(this.mutableSourceEagerHydrationData=null)}function ao(t,e,n,i,r,s,a,o,l){return t=new so(t,e,n,o,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Ja(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},pn(s),t}function oo(t){if(!t)return ce;t:{if(E(t=t._reactInternals)!==t||1!==t.tag)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(pe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(a(171))}if(1===t.tag){var n=t.type;if(pe(n))return ve(t,n,e)}return e}function lo(t){var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw t=Object.keys(t).join(","),Error(a(268,t))}return null===(t=C(e))?null:t.stateNode}function co(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function uo(t,e){co(t,e),(t=t.alternate)&&co(t,e)}function ho(t){return null===(t=C(t))?null:t.stateNode}function fo(){return null}return ca=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||he.current)Ir=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return Ir=!1,function(t,e,n){switch(e.tag){case 3:Xr(e),$n();break;case 5:pi(e);break;case 1:pe(e.type)&&ye(e);break;case 4:di(e,e.stateNode.containerInfo);break;case 10:on(0,e.type._context,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(null!==i)return null!==i.dehydrated?(le(gi,1&gi.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Kr(t,e,n):(le(gi,1&gi.current),null!==(t=rs(t,e,n))?t.sibling:null);le(gi,1&gi.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return is(t,e,n);e.flags|=128}var r=e.memoizedState;if(null!==r&&(r.rendering=null,r.tail=null,r.lastEffect=null),le(gi,gi.current),i)break;return null;case 22:case 23:return e.lanes=0,Br(t,e,n)}return rs(t,e,n)}(t,e,n);Ir=0!==(131072&t.flags)}else Ir=!1,Wn&&0!==(1048576&e.flags)&&Un(e,Nn,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var r=fe(e,ue.current);un(e,n),r=Ni(null,e,i,t,r,n);var s=ki();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pe(i)?(s=!0,ye(e)):s=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,pn(e),r.updater=Mn,e.stateNode=r,r._reactInternals=e,Cn(e,i,t,n),e=Gr(null,e,i,!0,s,n)):(e.tag=0,Wn&&s&&Fn(e),zr(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Qa(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===m)return 11;if(t===y)return 14}return 2}(i),t=tn(i,t),r){case 0:e=Vr(null,e,i,t,n);break t;case 1:e=Wr(null,e,i,t,n);break t;case 11:e=jr(null,e,i,t,n);break t;case 14:e=Ur(null,e,i,tn(i.type,t),n);break t}throw Error(a(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Vr(t,e,i,r=e.elementType===i?r:tn(i,r),n);case 1:return i=e.type,r=e.pendingProps,Wr(t,e,i,r=e.elementType===i?r:tn(i,r),n);case 3:t:{if(Xr(e),null===t)throw Error(a(387));i=e.pendingProps,r=(s=e.memoizedState).element,mn(t,e),_n(e,i,null,n);var o=e.memoizedState;if(i=o.element,K&&s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:o.cache,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=qr(t,e,i,n,r=Error(a(423)));break t}if(i!==r){e=qr(t,e,i,n,r=Error(a(424)));break t}for(K&&(Vn=Bt(e.stateNode.containerInfo),Hn=e,Wn=!0,Xn=null,Gn=!1),n=ai(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===r){e=rs(t,e,n);break t}zr(t,e,i,n)}e=e.child}return e;case 5:return pi(e),null===t&&Kn(e),i=e.type,r=e.pendingProps,s=null!==t?t.memoizedProps:null,o=r.children,H(i,r)?o=null:null!==s&&H(i,s)&&(e.flags|=32),Hr(t,e),zr(t,e,o,n),e.child;case 6:return null===t&&Kn(e),null;case 13:return Kr(t,e,n);case 4:return di(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=si(e,null,i,n):zr(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,jr(t,e,i,r=e.elementType===i?r:tn(i,r),n);case 7:return zr(t,e,e.pendingProps,n),e.child;case 8:case 12:return zr(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,on(0,i,o=r.value),null!==s)if(Ge(s.value,o)){if(s.children===r.children&&!he.current){e=rs(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=gn(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),cn(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),cn(o,n,e),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}zr(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,un(e,n),i=i(r=hn(r)),e.flags|=1,zr(t,e,i,n),e.child;case 14:return r=tn(i=e.type,e.pendingProps),Ur(t,e,i,r=tn(i.type,r),n);case 15:return Fr(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:tn(i,r),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,pe(i)?(t=!0,ye(e)):t=!1,un(e,n),Tn(e,i,r),Cn(e,i,r,n),Gr(null,e,i,!0,t,n);case 19:return is(t,e,n);case 22:return Br(t,e,n)}throw Error(a(156,e.tag))},e.attemptContinuousHydration=function(t){13===t.tag&&(wa(t,134217728,_a()),uo(t,134217728))},e.attemptHydrationAtCurrentPriority=function(t){if(13===t.tag){var e=_a(),n=ba(t);wa(t,n,e),uo(t,n)}},e.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ee(e.pendingLanes);0!==n&&(Le(e,1|n),Ma(e,je()),0===(6&qs)&&(la(),Ke()))}break;case 13:var i=_a();Ra(function(){return wa(t,1,i)}),uo(t,1)}},e.batchedUpdates=function(t,e){var n=qs;qs|=1;try{return t(e)}finally{0===(qs=n)&&(la(),qe&&Ke())}},e.createComponentSelector=function(t){return{$$typeof:Ns,value:t}},e.createContainer=function(t,e,n,i,r,s,a){return ao(t,e,!1,null,0,i,0,s,a)},e.createHasPseudoClassSelector=function(t){return{$$typeof:ks,value:t}},e.createHydrationContainer=function(t,e,n,i,r,s,a,o,l){return(t=ao(n,i,!0,t,0,s,0,o,l)).context=oo(null),n=t.current,(s=gn(i=_a(),r=ba(n))).callback=void 0!==e&&null!==e?e:null,vn(n,s),t.current.lanes=r,Re(t,r,i),Ma(t,i),t},e.createPortal=function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}},e.createRoleSelector=function(t){return{$$typeof:Os,value:t}},e.createTestNameSelector=function(t){return{$$typeof:Ds,value:t}},e.createTextSelector=function(t){return{$$typeof:Is,value:t}},e.deferredUpdates=function(t){var e=Ne,n=Xs.transition;try{return Xs.transition=null,Ne=16,t()}finally{Ne=e,Xs.transition=n}},e.discreteUpdates=function(t,e,n,i,r){var s=Ne,a=Xs.transition;try{return Xs.transition=null,Ne=1,t(e,n,i,r)}finally{Ne=s,Xs.transition=a,0===qs&&la()}},e.findAllNodes=Hs,e.findBoundingRects=function(t,e){if(!it)throw Error(a(363));e=Hs(t,e),t=[];for(var n=0;n<e.length;n++)t.push(st(e[n]));for(e=t.length-1;0<e;e--)for(var i=(n=t[e]).x,r=i+n.width,s=n.y,o=s+n.height,l=e-1;0<=l;l--)if(e!==l){var c=t[l],u=c.x,h=u+c.width,d=c.y,f=d+c.height;if(i>=u&&s>=d&&r<=h&&o<=f){t.splice(e,1);break}if(!(i!==u||n.width!==c.width||f<s||d>o)){d>s&&(c.height+=d-s,c.y=s),f<o&&(c.height=o-d),t.splice(e,1);break}if(!(s!==d||n.height!==c.height||h<i||u>r)){u>i&&(c.width+=u-i,c.x=i),h<r&&(c.width=r-u),t.splice(e,1);break}}return t},e.findHostInstance=lo,e.findHostInstanceWithNoPortals=function(t){return null===(t=null!==(t=A(t))?R(t):null)?null:t.stateNode},e.findHostInstanceWithWarning=function(t){return lo(t)},e.flushControlled=function(t){var e=qs;qs|=1;var n=Xs.transition,i=Ne;try{Xs.transition=null,Ne=1,t()}finally{Ne=i,Xs.transition=n,0===(qs=e)&&(la(),Ke())}},e.flushPassiveEffects=Ha,e.flushSync=Ra,e.focusWithin=function(t,e){if(!it)throw Error(a(363));for(e=Bs(t=js(t),e),e=Array.from(e),t=0;t<e.length;){var n=e[t++];if(!ot(n)){if(5===n.tag&&ct(n.stateNode))return!0;for(n=n.child;null!==n;)e.push(n),n=n.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ne},e.getFindAllNodesFailureDescription=function(t,e){if(!it)throw Error(a(363));var n=0,i=[];t=[js(t),0];for(var r=0;r<t.length;){var s=t[r++],o=t[r++],l=e[o];if((5!==s.tag||!ot(s))&&(Us(s,l)&&(i.push(Fs(l)),++o>n&&(n=o)),o<e.length))for(s=s.child;null!==s;)t.push(s,o),s=s.sibling}if(n<e.length){for(t=[];n<e.length;n++)t.push(Fs(e[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+t.join(" > ")}return null},e.getPublicRootInstance=function(t){return(t=t.current).child?5===t.child.tag?k(t.child.stateNode):t.child.stateNode:null},e.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:ho,findFiberByHostInstance:t.findFiberByHostInstance||fo,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{Ve=e.inject(t),We=e}catch(n){}t=!!e.checkDCE}}return t},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(t,e,n,i){if(!it)throw Error(a(363));t=Hs(t,e);var r=ut(t,n,i).disconnect;return{disconnect:function(){r()}}},e.registerMutableSourceForHydration=function(t,e){var n=e._getVersion;n=n(e._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n)},e.runWithPriority=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(t,e,n,i){var r=e.current,s=_a(),a=ba(r);return n=oo(n),null===e.context?e.context=n:e.pendingContext=n,(e=gn(s,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),vn(r,e),null!==(t=wa(r,a,s))&&yn(t,r,a),a},e}},985:(t,e,n)=>{"use strict";n.d(e,{Hl:()=>D});var i=n(45),r=n(379),s=n(918),a=n(168),o=n(43),l=n(408);function c(t,e){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function u(){let{debounce:t,scroll:e,polyfill:n,offsetSize:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const r=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=(0,o.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,o.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=t?"number"==typeof t?t:t.scroll:null,d=t?"number"==typeof t?t:t.resize:null,p=(0,o.useRef)(!1);(0,o.useEffect)(()=>(p.current=!0,()=>{p.current=!1}));const[m,g,v]=(0,o.useMemo)(()=>{const t=()=>{if(!l.current.element)return;const{left:t,top:e,width:n,height:r,bottom:s,right:o,x:c,y:u}=l.current.element.getBoundingClientRect(),h={left:t,top:e,width:n,height:r,bottom:s,right:o,x:c,y:u};l.current.element instanceof HTMLElement&&i&&(h.height=l.current.element.offsetHeight,h.width=l.current.element.offsetWidth),Object.freeze(h),p.current&&!f(l.current.lastBounds,h)&&a(l.current.lastBounds=h)};return[t,d?c(t,d):t,u?c(t,u):t]},[a,i,u,d]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(t=>t.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function x(){l.current.element&&(l.current.resizeObserver=new r(v),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(t=>t.addEventListener("scroll",v,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(t,e){(0,o.useEffect)(()=>{if(e){const e=t;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}},[t,e])}(v,!!e),function(t){(0,o.useEffect)(()=>{const e=t;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[t])}(g),(0,o.useEffect)(()=>{y(),x()},[e,v,g]),(0,o.useEffect)(()=>y,[]),[t=>{!t||t===l.current.element||(y(),l.current.element=t,l.current.scrollContainers=h(t),x())},s,m]}function h(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(t=>"auto"===t||"scroll"===t)&&e.push(t),[...e,...h(t.parentElement)]}const d=["x","y","top","bottom","left","right","width","height"],f=(t,e)=>d.every(n=>t[n]===e[n]);var p,m,g=Object.defineProperty,v=Object.defineProperties,y=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,w=(t,e,n)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S=(t,e)=>{for(var n in e||(e={}))_.call(e,n)&&w(t,n,e[n]);if(x)for(var n of x(e))b.call(e,n)&&w(t,n,e[n]);return t};"undefined"===typeof window||!(null==(p=window.document)?void 0:p.createElement)&&"ReactNative"!==(null==(m=window.navigator)?void 0:m.product)?o.useEffect:o.useLayoutEffect;function M(t,e,n){if(!t)return;if(!0===n(t))return t;let i=e?t.return:t.child;for(;i;){const t=M(i,e,n);if(t)return t;i=e?null:i.sibling}}function E(t){try{return Object.defineProperties(t,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(e){return t}}const T=console.error;console.error=function(){const t=[...arguments].join("");if(!(null==t?void 0:t.startsWith("Warning:"))||!t.includes("useContext"))return T.apply(this,arguments);console.error=T};const A=E(o.createContext(null));class C extends o.Component{render(){return o.createElement(A.Provider,{value:this._reactInternals},this.props.children)}}function P(){const t=o.useContext(A);if(null===t)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=o.useId();return o.useMemo(()=>{for(const n of[t,null==t?void 0:t.alternate]){if(!n)continue;const t=M(n,!1,t=>{let n=t.memoizedState;for(;n;){if(n.memoizedState===e)return!0;n=n.next}});if(t)return t}},[t,e])}function R(){const t=function(){const t=P(),[e]=o.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&"object"===typeof n.type){const t=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;t&&t!==A&&!e.has(t)&&e.set(t,o.useContext(E(t)))}n=n.return}return e}();return o.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>{return o.createElement(e,null,o.createElement(n.Provider,(r=S({},i),s={value:t.get(n)},v(r,y(s)))));var r,s},t=>o.createElement(C,S({},t))),[t])}n(205),n(16),n(853);const L=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"],N={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function k(t){const{handlePointer:e}=(0,s.c)(t);return{priority:1,enabled:!0,compute(t,e,n){e.pointer.set(t.offsetX/e.size.width*2-1,-t.offsetY/e.size.height*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)},connected:void 0,handlers:Object.keys(N).reduce((t,n)=>(0,r.A)((0,r.A)({},t),{},{[n]:e(n)}),{}),update:()=>{var e;const{events:n,internal:i}=t.getState();null!=(e=i.lastEvent)&&e.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:e=>{var n;const{set:i,events:s}=t.getState();null==s.disconnect||s.disconnect(),i(t=>({events:(0,r.A)((0,r.A)({},t.events),{},{connected:e})})),Object.entries(null!=(n=s.handlers)?n:[]).forEach(t=>{let[n,i]=t;const[r,s]=N[n];e.addEventListener(r,i,{passive:s})})},disconnect:()=>{const{set:e,events:n}=t.getState();var i;n.connected&&(Object.entries(null!=(i=n.handlers)?i:[]).forEach(t=>{let[e,i]=t;if(n&&n.connected instanceof HTMLElement){const[t]=N[e];n.connected.removeEventListener(t,i)}}),e(t=>({events:(0,r.A)((0,r.A)({},t.events),{},{connected:void 0})})))}}}const O=o.forwardRef(function(t,e){let{children:n,fallback:c,resize:h,style:d,gl:f,events:p=k,eventSource:m,eventPrefix:g,shadows:v,linear:y,flat:x,legacy:_,orthographic:b,frameloop:w,dpr:S,performance:M,raycaster:E,camera:T,scene:A,onPointerMissed:C,onCreated:P}=t,N=(0,i.A)(t,L);o.useMemo(()=>(0,s.e)(l),[]);const O=R(),[D,I]=u((0,r.A)({scroll:!0,debounce:{scroll:50,resize:0}},h)),z=o.useRef(null),j=o.useRef(null);o.useImperativeHandle(e,()=>z.current);const U=(0,s.u)(C),[F,B]=o.useState(!1),[H,V]=o.useState(!1);if(F)throw F;if(H)throw H;const W=o.useRef(null);(0,s.a)(()=>{const t=z.current;I.width>0&&I.height>0&&t&&(W.current||(W.current=(0,s.b)(t)),W.current.configure({gl:f,events:p,shadows:v,linear:y,flat:x,legacy:_,orthographic:b,frameloop:w,dpr:S,performance:M,raycaster:E,camera:T,scene:A,size:I,onPointerMissed:function(){return null==U.current?void 0:U.current(...arguments)},onCreated:t=>{null==t.events.connect||t.events.connect(m?(0,s.i)(m)?m.current:m:j.current),g&&t.setEvents({compute:(t,e)=>{const n=t[g+"X"],i=t[g+"Y"];e.pointer.set(n/e.size.width*2-1,-i/e.size.height*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)}}),null==P||P(t)}}),W.current.render(o.createElement(O,null,o.createElement(s.E,{set:V},o.createElement(o.Suspense,{fallback:o.createElement(s.B,{set:B})},n)))))}),o.useEffect(()=>{const t=z.current;if(t)return()=>(0,s.d)(t)},[]);const G=m?"none":"auto";return o.createElement("div",(0,a.A)({ref:j,style:(0,r.A)({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:G},d)},N),o.createElement("div",{ref:D,style:{width:"100%",height:"100%"}},o.createElement("canvas",{ref:z,style:{display:"block"}},c)))}),D=o.forwardRef(function(t,e){return o.createElement(C,null,o.createElement(O,(0,a.A)({},t,{ref:e})))})}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var a={};t=t||[null,e({}),e([]),e(e)];for(var o=2&r&&i;("object"==typeof o||"function"==typeof o)&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach(t=>a[t]=()=>i[t]);return a.default=()=>i,n.d(s,a),s}})(),n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce((e,i)=>(n.f[i](t,e),e),[])),n.u=t=>"static/js/"+t+"."+{60:"2caa849f",173:"8b3552c1",401:"9c5eb7d5",431:"1e6bcc5e"}[t]+".chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="zuricatas-simulator-frontend:";n.l=(i,r,s,a)=>{if(t[i])t[i].push(r);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==e+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",e+s),o.src=i),t[i]=[r];var d=(e,n)=>{o.onerror=o.onload=null,clearTimeout(f);var r=t[i];if(delete t[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(t=>t(n)),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/Nasa_app_challenge/",(()=>{var t={792:0};n.f.j=(e,i)=>{var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((n,i)=>r=t[e]=[n,i]);i.push(r[2]=s);var a=n.p+n.u(e),o=new Error;n.l(a,i=>{if(n.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}},"chunk-"+e,e)}};var e=(e,i)=>{var r,s,a=i[0],o=i[1],l=i[2],c=0;if(a.some(e=>0!==t[e])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(e&&e(i);c<a.length;c++)s=a[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0},i=self.webpackChunkzuricatas_simulator_frontend=self.webpackChunkzuricatas_simulator_frontend||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";var t={};n.r(t),n.d(t,{hasBrowserEnv:()=>Ae,hasStandardBrowserEnv:()=>Pe,hasStandardBrowserWebWorkerEnv:()=>Re,navigator:()=>Ce,origin:()=>Le});var e=n(43),i=n(391),r=n(475);function s(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var a=n(379);let o={data:""},l=t=>"object"==typeof window?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||o,c=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,u=/\/\*[^]*?\*\/|  +/g,h=/\n+/g,d=(t,e)=>{let n="",i="",r="";for(let s in t){let a=t[s];"@"==s[0]?"i"==s[1]?n=s+" "+a+";":i+="f"==s[1]?d(a,s):s+"{"+d(a,"k"==s[1]?"":e)+"}":"object"==typeof a?i+=d(a,e?e.replace(/([^,])+/g,t=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,e=>/&/.test(e)?e.replace(/&/g,t):t?t+" "+e:e)):s):null!=a&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=d.p?d.p(s,a):s+":"+a+";")}return n+(e&&r?e+"{"+r+"}":r)+i},f={},p=t=>{if("object"==typeof t){let e="";for(let n in t)e+=n+p(t[n]);return e}return t},m=(t,e,n,i,r)=>{let s=p(t),a=f[s]||(f[s]=(t=>{let e=0,n=11;for(;e<t.length;)n=101*n+t.charCodeAt(e++)>>>0;return"go"+n})(s));if(!f[a]){let e=s!==t?t:(t=>{let e,n,i=[{}];for(;e=c.exec(t.replace(u,""));)e[4]?i.shift():e[3]?(n=e[3].replace(h," ").trim(),i.unshift(i[0][n]=i[0][n]||{})):i[0][e[1]]=e[2].replace(h," ").trim();return i[0]})(t);f[a]=d(r?{["@keyframes "+a]:e}:e,n?"":"."+a)}let o=n&&f.g?f.g:null;return n&&(f.g=f[a]),((t,e,n,i)=>{i?e.data=e.data.replace(i,t):-1===e.data.indexOf(t)&&(e.data=n?t+e.data:e.data+t)})(f[a],e,i,o),a};function g(t){let e=this||{},n=t.call?t(e.p):t;return m(n.unshift?n.raw?((t,e,n)=>t.reduce((t,i,r)=>{let s=e[r];if(s&&s.call){let t=s(n),e=t&&t.props&&t.props.className||/^go/.test(t)&&t;s=e?"."+e:t&&"object"==typeof t?t.props?"":d(t,""):!1===t?"":t}return t+i+(null==s?"":s)},""))(n,[].slice.call(arguments,1),e.p):n.reduce((t,n)=>Object.assign(t,n&&n.call?n(e.p):n),{}):n,l(e.target),e.g,e.o,e.k)}g.bind({g:1});let v,y,x,_=g.bind({k:1});function b(t,e){let n=this||{};return function(){let i=arguments;function r(s,a){let o=Object.assign({},s),l=o.className||r.className;n.p=Object.assign({theme:y&&y()},o),n.o=/ *go\d+/.test(l),o.className=g.apply(n,i)+(l?" "+l:""),e&&(o.ref=a);let c=t;return t[0]&&(c=o.as||t,delete o.as),x&&c[0]&&x(o),v(c,o)}return e?e(r):r}}var w,S,M,E,T,A,C,P,R,L,N,k,O,D,I,z,j=(t,e)=>(t=>"function"==typeof t)(t)?t(e):t,U=(()=>{let t=0;return()=>(++t).toString()})(),F=(()=>{let t;return()=>{if(void 0===t&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),B="default",H=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return(0,a.A)((0,a.A)({},t),{},{toasts:[e.toast,...t.toasts].slice(0,n)});case 1:return(0,a.A)((0,a.A)({},t),{},{toasts:t.toasts.map(t=>t.id===e.toast.id?(0,a.A)((0,a.A)({},t),e.toast):t)});case 2:let{toast:i}=e;return H(t,{type:t.toasts.find(t=>t.id===i.id)?1:0,toast:i});case 3:let{toastId:r}=e;return(0,a.A)((0,a.A)({},t),{},{toasts:t.toasts.map(t=>t.id===r||void 0===r?(0,a.A)((0,a.A)({},t),{},{dismissed:!0,visible:!1}):t)});case 4:return void 0===e.toastId?(0,a.A)((0,a.A)({},t),{},{toasts:[]}):(0,a.A)((0,a.A)({},t),{},{toasts:t.toasts.filter(t=>t.id!==e.toastId)});case 5:return(0,a.A)((0,a.A)({},t),{},{pausedAt:e.time});case 6:let s=e.time-(t.pausedAt||0);return(0,a.A)((0,a.A)({},t),{},{pausedAt:void 0,toasts:t.toasts.map(t=>(0,a.A)((0,a.A)({},t),{},{pauseDuration:t.pauseDuration+s}))})}},V=[],W={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},G={},X=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;G[e]=H(G[e]||W,t),V.forEach(t=>{let[n,i]=t;n===e&&i(G[e])})},q=t=>Object.keys(G).forEach(e=>X(t,e)),Z=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return e=>{X(e,t)}},Y={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},K=t=>(e,n)=>{let i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return(0,a.A)((0,a.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||U()})}(e,t,n);return Z(i.toasterId||(t=>Object.keys(G).find(e=>G[e].toasts.some(e=>e.id===t)))(i.id))({type:2,toast:i}),i.id},J=(t,e)=>K("blank")(t,e);J.error=K("error"),J.success=K("success"),J.loading=K("loading"),J.custom=K("custom"),J.dismiss=(t,e)=>{let n={type:3,toastId:t};e?Z(e)(n):q(n)},J.dismissAll=t=>J.dismiss(void 0,t),J.remove=(t,e)=>{let n={type:4,toastId:t};e?Z(e)(n):q(n)},J.removeAll=t=>J.remove(void 0,t),J.promise=(t,e,n)=>{let i=J.loading(e.loading,(0,a.A)((0,a.A)({},n),null==n?void 0:n.loading));return"function"==typeof t&&(t=t()),t.then(t=>{let r=e.success?j(e.success,t):void 0;return r?J.success(r,(0,a.A)((0,a.A)({id:i},n),null==n?void 0:n.success)):J.dismiss(i),t}).catch(t=>{let r=e.error?j(e.error,t):void 0;r?J.error(r,(0,a.A)((0,a.A)({id:i},n),null==n?void 0:n.error)):J.dismiss(i)}),t};var Q=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:i,pausedAt:r}=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B,[i,r]=(0,e.useState)(G[n]||W),s=(0,e.useRef)(G[n]);(0,e.useEffect)(()=>(s.current!==G[n]&&r(G[n]),V.push([n,r]),()=>{let t=V.findIndex(t=>{let[e]=t;return e===n});t>-1&&V.splice(t,1)}),[n]);let o=i.toasts.map(e=>{var n,i,r;return(0,a.A)((0,a.A)((0,a.A)((0,a.A)({},t),t[e.type]),e),{},{removeDelay:e.removeDelay||(null==(n=t[e.type])?void 0:n.removeDelay)||(null==t?void 0:t.removeDelay),duration:e.duration||(null==(i=t[e.type])?void 0:i.duration)||(null==t?void 0:t.duration)||Y[e.type],style:(0,a.A)((0,a.A)((0,a.A)({},t.style),null==(r=t[e.type])?void 0:r.style),e.style)})});return(0,a.A)((0,a.A)({},i),{},{toasts:o})}(t,n),s=(0,e.useRef)(new Map).current,o=(0,e.useCallback)(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(s.has(t))return;let n=setTimeout(()=>{s.delete(t),l({type:4,toastId:t})},e);s.set(t,n)},[]);(0,e.useEffect)(()=>{if(r)return;let t=Date.now(),e=i.map(e=>{if(e.duration===1/0)return;let i=(e.duration||0)+e.pauseDuration-(t-e.createdAt);if(!(i<0))return setTimeout(()=>J.dismiss(e.id,n),i);e.visible&&J.dismiss(e.id)});return()=>{e.forEach(t=>t&&clearTimeout(t))}},[i,r,n]);let l=(0,e.useCallback)(Z(n),[n]),c=(0,e.useCallback)(()=>{l({type:5,time:Date.now()})},[l]),u=(0,e.useCallback)((t,e)=>{l({type:1,toast:{id:t,height:e}})},[l]),h=(0,e.useCallback)(()=>{r&&l({type:6,time:Date.now()})},[r,l]),d=(0,e.useCallback)((t,e)=>{let{reverseOrder:n=!1,gutter:r=8,defaultPosition:s}=e||{},a=i.filter(e=>(e.position||s)===(t.position||s)&&e.height),o=a.findIndex(e=>e.id===t.id),l=a.filter((t,e)=>e<o&&t.visible).length;return a.filter(t=>t.visible).slice(...n?[l+1]:[0,l]).reduce((t,e)=>t+(e.height||0)+r,0)},[i]);return(0,e.useEffect)(()=>{i.forEach(t=>{if(t.dismissed)o(t.id,t.removeDelay);else{let e=s.get(t.id);e&&(clearTimeout(e),s.delete(t.id))}})},[i,o]),{toasts:i,handlers:{updateHeight:u,startPause:c,endPause:h,calculateOffset:d}}},$=_(w||(w=s(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),tt=_(S||(S=s(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),et=_(M||(M=s(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),nt=b("div")(E||(E=s(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),t=>t.primary||"#ff4b4b",$,tt,t=>t.secondary||"#fff",et),it=_(T||(T=s(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),rt=b("div")(A||(A=s(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),t=>t.secondary||"#e0e0e0",t=>t.primary||"#616161",it),st=_(C||(C=s(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),at=_(P||(P=s(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),ot=b("div")(R||(R=s(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),t=>t.primary||"#61d345",st,at,t=>t.secondary||"#fff"),lt=b("div")(L||(L=s(["\n  position: absolute;\n"]))),ct=b("div")(N||(N=s(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),ut=_(k||(k=s(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),ht=b("div")(O||(O=s(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),ut),dt=t=>{let{toast:n}=t,{icon:i,type:r,iconTheme:s}=n;return void 0!==i?"string"==typeof i?e.createElement(ht,null,i):i:"blank"===r?null:e.createElement(ct,null,e.createElement(rt,(0,a.A)({},s)),"loading"!==r&&e.createElement(lt,null,"error"===r?e.createElement(nt,(0,a.A)({},s)):e.createElement(ot,(0,a.A)({},s))))},ft=t=>"\n0% {transform: translate3d(0,".concat(-200*t,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),pt=t=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*t,"%,-1px) scale(.6); opacity:0;}\n"),mt=b("div")(D||(D=s(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),gt=b("div")(I||(I=s(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),vt=e.memo(t=>{let{toast:n,position:i,style:r,children:s}=t,o=n.height?((t,e)=>{let n=t.includes("top")?1:-1,[i,r]=F()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ft(n),pt(n)];return{animation:e?"".concat(_(i)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(_(r)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(n.position||i||"top-center",n.visible):{opacity:0},l=e.createElement(dt,{toast:n}),c=e.createElement(gt,(0,a.A)({},n.ariaProps),j(n.message,n));return e.createElement(mt,{className:n.className,style:(0,a.A)((0,a.A)((0,a.A)({},o),r),n.style)},"function"==typeof s?s({icon:l,message:c}):e.createElement(e.Fragment,null,l,c))});!function(t,e,n,i){d.p=e,v=t,y=n,x=i}(e.createElement);var yt=t=>{let{id:n,className:i,style:r,onHeightUpdate:s,children:a}=t,o=e.useCallback(t=>{if(t){let e=()=>{let e=t.getBoundingClientRect().height;s(n,e)};e(),new MutationObserver(e).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[n,s]);return e.createElement("div",{ref:o,className:i,style:r},a)},xt=g(z||(z=s(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),_t=t=>{let{reverseOrder:n,position:i="top-center",toastOptions:r,gutter:s,children:o,toasterId:l,containerStyle:c,containerClassName:u}=t,{toasts:h,handlers:d}=Q(r,l);return e.createElement("div",{"data-rht-toaster":l||"",style:(0,a.A)({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},c),className:u,onMouseEnter:d.startPause,onMouseLeave:d.endPause},h.map(t=>{let r=t.position||i,l=((t,e)=>{let n=t.includes("top"),i=n?{top:0}:{bottom:0},r=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return(0,a.A)((0,a.A)({left:0,right:0,display:"flex",position:"absolute",transition:F()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(e*(n?1:-1),"px)")},i),r)})(r,d.calculateOffset(t,{reverseOrder:n,gutter:s,defaultPosition:i}));return e.createElement(yt,{id:t.id,key:t.id,onHeightUpdate:d.updateHeight,className:t.visible?xt:"",style:l},"custom"===t.type?j(t.message,t):o?o(t):e.createElement(vt,{toast:t,position:r}))}))},bt=J;function wt(t,e){return function(){return t.apply(e,arguments)}}const{toString:St}=Object.prototype,{getPrototypeOf:Mt}=Object,{iterator:Et,toStringTag:Tt}=Symbol,At=(Ct=Object.create(null),t=>{const e=St.call(t);return Ct[e]||(Ct[e]=e.slice(8,-1).toLowerCase())});var Ct;const Pt=t=>(t=t.toLowerCase(),e=>At(e)===t),Rt=t=>e=>typeof e===t,{isArray:Lt}=Array,Nt=Rt("undefined");function kt(t){return null!==t&&!Nt(t)&&null!==t.constructor&&!Nt(t.constructor)&&It(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ot=Pt("ArrayBuffer");const Dt=Rt("string"),It=Rt("function"),zt=Rt("number"),jt=t=>null!==t&&"object"===typeof t,Ut=t=>{if("object"!==At(t))return!1;const e=Mt(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Tt in t)&&!(Et in t)},Ft=Pt("Date"),Bt=Pt("File"),Ht=Pt("Blob"),Vt=Pt("FileList"),Wt=Pt("URLSearchParams"),[Gt,Xt,qt,Zt]=["ReadableStream","Request","Response","Headers"].map(Pt);function Yt(t,e){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),Lt(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(kt(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),s=i.length;let a;for(n=0;n<s;n++)a=i[n],e.call(null,t[a],a,t)}}function Kt(t,e){if(kt(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i,r=n.length;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Jt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Qt=t=>!Nt(t)&&t!==Jt;const $t=(te="undefined"!==typeof Uint8Array&&Mt(Uint8Array),t=>te&&t instanceof te);var te;const ee=Pt("HTMLFormElement"),ne=(t=>{let{hasOwnProperty:e}=t;return(t,n)=>e.call(t,n)})(Object.prototype),ie=Pt("RegExp"),re=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Yt(n,(n,r)=>{let s;!1!==(s=e(n,r,t))&&(i[r]=s||n)}),Object.defineProperties(t,i)};const se=Pt("AsyncFunction"),ae=((t,e)=>{return t?setImmediate:e?(n="axios@".concat(Math.random()),i=[],Jt.addEventListener("message",t=>{let{source:e,data:r}=t;e===Jt&&r===n&&i.length&&i.shift()()},!1),t=>{i.push(t),Jt.postMessage(n,"*")}):t=>setTimeout(t);var n,i})("function"===typeof setImmediate,It(Jt.postMessage)),oe="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Jt):"undefined"!==typeof process&&process.nextTick||ae,le={isArray:Lt,isArrayBuffer:Ot,isBuffer:kt,isFormData:t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||It(t.append)&&("formdata"===(e=At(t))||"object"===e&&It(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Ot(t.buffer),e},isString:Dt,isNumber:zt,isBoolean:t=>!0===t||!1===t,isObject:jt,isPlainObject:Ut,isEmptyObject:t=>{if(!jt(t)||kt(t))return!1;try{return 0===Object.keys(t).length&&Object.getPrototypeOf(t)===Object.prototype}catch(o){return!1}},isReadableStream:Gt,isRequest:Xt,isResponse:qt,isHeaders:Zt,isUndefined:Nt,isDate:Ft,isFile:Bt,isBlob:Ht,isRegExp:ie,isFunction:It,isStream:t=>jt(t)&&It(t.pipe),isURLSearchParams:Wt,isTypedArray:$t,isFileList:Vt,forEach:Yt,merge:function t(){const{caseless:e}=Qt(this)&&this||{},n={},i=(i,r)=>{const s=e&&Kt(n,r)||r;Ut(n[s])&&Ut(i)?n[s]=t(n[s],i):Ut(i)?n[s]=t({},i):Lt(i)?n[s]=i.slice():n[s]=i};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Yt(arguments[r],i);return n},extend:function(t,e,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Yt(e,(e,i)=>{n&&It(e)?t[i]=wt(e,n):t[i]=e},{allOwnKeys:i}),t},trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,i)=>{let r,s,a;const o={};if(e=e||{},null==t)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)a=r[s],i&&!i(a,t,e)||o[a]||(e[a]=t[a],o[a]=!0);t=!1!==n&&Mt(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:At,kindOfTest:Pt,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return-1!==i&&i===n},toArray:t=>{if(!t)return null;if(Lt(t))return t;let e=t.length;if(!zt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Et]).call(t);let i;for(;(i=n.next())&&!i.done;){const n=i.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const i=[];for(;null!==(n=t.exec(e));)i.push(n);return i},isHTMLForm:ee,hasOwnProperty:ne,hasOwnProp:ne,reduceDescriptors:re,freezeMethods:t=>{re(t,(e,n)=>{if(It(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=t[n];It(i)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(t,e)=>{const n={},i=t=>{t.forEach(t=>{n[t]=!0})};return Lt(t)?i(t):i(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,e,n){return e.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:Kt,global:Jt,isContextDefined:Qt,isSpecCompliantForm:function(t){return!!(t&&It(t.append)&&"FormData"===t[Tt]&&t[Et])},toJSONObject:t=>{const e=new Array(10),n=(t,i)=>{if(jt(t)){if(e.indexOf(t)>=0)return;if(kt(t))return t;if(!("toJSON"in t)){e[i]=t;const r=Lt(t)?[]:{};return Yt(t,(t,e)=>{const s=n(t,i+1);!Nt(s)&&(r[e]=s)}),e[i]=void 0,r}}return t};return n(t,0)},isAsyncFn:se,isThenable:t=>t&&(jt(t)||It(t))&&It(t.then)&&It(t.catch),setImmediate:ae,asap:oe,isIterable:t=>null!=t&&It(t[Et])};function ce(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}le.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.status}}});const ue=ce.prototype,he={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{he[t]={value:t}}),Object.defineProperties(ce,he),Object.defineProperty(ue,"isAxiosError",{value:!0}),ce.from=(t,e,n,i,r,s)=>{const a=Object.create(ue);return le.toFlatObject(t,a,function(t){return t!==Error.prototype},t=>"isAxiosError"!==t),ce.call(a,t.message,e,n,i,r),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const de=ce;function fe(t){return le.isPlainObject(t)||le.isArray(t)}function pe(t){return le.endsWith(t,"[]")?t.slice(0,-2):t}function me(t,e,n){return t?t.concat(e).map(function(t,e){return t=pe(t),!n&&e?"["+t+"]":t}).join(n?".":""):e}const ge=le.toFlatObject(le,{},null,function(t){return/^is[A-Z]/.test(t)});const ve=function(t,e,n){if(!le.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const i=(n=le.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,e){return!le.isUndefined(e[t])})).metaTokens,r=n.visitor||c,s=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&le.isSpecCompliantForm(e);if(!le.isFunction(r))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(le.isDate(t))return t.toISOString();if(le.isBoolean(t))return t.toString();if(!o&&le.isBlob(t))throw new de("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(t)||le.isTypedArray(t)?o&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function c(t,n,r){let o=t;if(t&&!r&&"object"===typeof t)if(le.endsWith(n,"{}"))n=i?n:n.slice(0,-2),t=JSON.stringify(t);else if(le.isArray(t)&&function(t){return le.isArray(t)&&!t.some(fe)}(t)||(le.isFileList(t)||le.endsWith(n,"[]"))&&(o=le.toArray(t)))return n=pe(n),o.forEach(function(t,i){!le.isUndefined(t)&&null!==t&&e.append(!0===a?me([n],i,s):null===a?n:n+"[]",l(t))}),!1;return!!fe(t)||(e.append(me(r,n,s),l(t)),!1)}const u=[],h=Object.assign(ge,{defaultVisitor:c,convertValue:l,isVisitable:fe});if(!le.isObject(t))throw new TypeError("data must be an object");return function t(n,i){if(!le.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),le.forEach(n,function(n,s){!0===(!(le.isUndefined(n)||null===n)&&r.call(e,n,le.isString(s)?s.trim():s,i,h))&&t(n,i?i.concat(s):[s])}),u.pop()}}(t),e};function ye(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function xe(t,e){this._pairs=[],t&&ve(t,this,e)}const _e=xe.prototype;_e.append=function(t,e){this._pairs.push([t,e])},_e.toString=function(t){const e=t?function(e){return t.call(this,e,ye)}:ye;return this._pairs.map(function(t){return e(t[0])+"="+e(t[1])},"").join("&")};const be=xe;function we(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Se(t,e,n){if(!e)return t;const i=n&&n.encode||we;le.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(s=r?r(e,n):le.isURLSearchParams(e)?e.toString():new be(e,n).toString(i),s){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+s}return t}const Me=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){le.forEach(this.handlers,function(e){null!==e&&t(e)})}},Ee={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Te={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:be,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ae="undefined"!==typeof window&&"undefined"!==typeof document,Ce="object"===typeof navigator&&navigator||void 0,Pe=Ae&&(!Ce||["ReactNative","NativeScript","NS"].indexOf(Ce.product)<0),Re="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Le=Ae&&window.location.href||"http://localhost",Ne=(0,a.A)((0,a.A)({},t),Te);const ke=function(t){function e(t,n,i,r){let s=t[r++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=r>=t.length;if(s=!s&&le.isArray(i)?i.length:s,o)return le.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!a;i[s]&&le.isObject(i[s])||(i[s]=[]);return e(t,n,i[s],r)&&le.isArray(i[s])&&(i[s]=function(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}(i[s])),!a}if(le.isFormData(t)&&le.isFunction(t.entries)){const n={};return le.forEachEntry(t,(t,i)=>{e(function(t){return le.matchAll(/\w+|\[(\w*)]/g,t).map(t=>"[]"===t[0]?"":t[1]||t[0])}(t),i,n,0)}),n}return null};const Oe={transitional:Ee,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,r=le.isObject(t);r&&le.isHTMLForm(t)&&(t=new FormData(t));if(le.isFormData(t))return i?JSON.stringify(ke(t)):t;if(le.isArrayBuffer(t)||le.isBuffer(t)||le.isStream(t)||le.isFile(t)||le.isBlob(t)||le.isReadableStream(t))return t;if(le.isArrayBufferView(t))return t.buffer;if(le.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return ve(t,new Ne.classes.URLSearchParams,(0,a.A)({visitor:function(t,e,n,i){return Ne.isNode&&le.isBuffer(t)?(this.append(e,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((s=le.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return ve(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return r||i?(e.setContentType("application/json",!1),function(t,e,n){if(le.isString(t))try{return(e||JSON.parse)(t),le.trim(t)}catch(o){if("SyntaxError"!==o.name)throw o}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Oe.transitional,n=e&&e.forcedJSONParsing,i="json"===this.responseType;if(le.isResponse(t)||le.isReadableStream(t))return t;if(t&&le.isString(t)&&(n&&!this.responseType||i)){const n=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(o){if(n){if("SyntaxError"===o.name)throw de.from(o,de.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ne.classes.FormData,Blob:Ne.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],t=>{Oe.headers[t]={}});const De=Oe,Ie=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ze=Symbol("internals");function je(t){return t&&String(t).trim().toLowerCase()}function Ue(t){return!1===t||null==t?t:le.isArray(t)?t.map(Ue):String(t)}function Fe(t,e,n,i,r){return le.isFunction(i)?i.call(this,e,n):(r&&(e=n),le.isString(e)?le.isString(i)?-1!==e.indexOf(i):le.isRegExp(i)?i.test(e):void 0:void 0)}class Be{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function r(t,e,n){const r=je(e);if(!r)throw new Error("header name must be a non-empty string");const s=le.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||e]=Ue(t))}const s=(t,e)=>le.forEach(t,(t,n)=>r(t,n,e));if(le.isPlainObject(t)||t instanceof this.constructor)s(t,e);else if(le.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))s((t=>{const e={};let n,i,r;return t&&t.split("\n").forEach(function(t){r=t.indexOf(":"),n=t.substring(0,r).trim().toLowerCase(),i=t.substring(r+1).trim(),!n||e[n]&&Ie[n]||("set-cookie"===n?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e})(t),e);else if(le.isObject(t)&&le.isIterable(t)){let n,i,r={};for(const e of t){if(!le.isArray(e))throw TypeError("Object iterator must return a key-value pair");r[i=e[0]]=(n=r[i])?le.isArray(n)?[...n,e[1]]:[n,e[1]]:e[1]}s(r,e)}else null!=t&&r(e,t,n);return this}get(t,e){if(t=je(t)){const n=le.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}(t);if(le.isFunction(e))return e.call(this,t,n);if(le.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=je(t)){const n=le.findKey(this,t);return!(!n||void 0===this[n]||e&&!Fe(0,this[n],n,e))}return!1}delete(t,e){const n=this;let i=!1;function r(t){if(t=je(t)){const r=le.findKey(n,t);!r||e&&!Fe(0,n[r],r,e)||(delete n[r],i=!0)}}return le.isArray(t)?t.forEach(r):r(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const r=e[n];t&&!Fe(0,this[r],r,t,!0)||(delete this[r],i=!0)}return i}normalize(t){const e=this,n={};return le.forEach(this,(i,r)=>{const s=le.findKey(n,r);if(s)return e[s]=Ue(i),void delete e[r];const a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}(r):String(r).trim();a!==r&&delete e[r],e[a]=Ue(i),n[a]=!0}),this}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.constructor.concat(this,...e)}toJSON(t){const e=Object.create(null);return le.forEach(this,(n,i)=>{null!=n&&!1!==n&&(e[i]=t&&le.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(t=>{let[e,n]=t;return e+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const e=new this(t);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach(t=>e.set(t)),e}static accessor(t){const e=(this[ze]=this[ze]={accessors:{}}).accessors,n=this.prototype;function i(t){const i=je(t);e[i]||(!function(t,e){const n=le.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(t,n,r){return this[i].call(this,e,t,n,r)},configurable:!0})})}(n,t),e[i]=!0)}return le.isArray(t)?t.forEach(i):i(t),this}}Be.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),le.reduceDescriptors(Be.prototype,(t,e)=>{let{value:n}=t,i=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(t){this[i]=t}}}),le.freezeMethods(Be);const He=Be;function Ve(t,e){const n=this||De,i=e||n,r=He.from(i.headers);let s=i.data;return le.forEach(t,function(t){s=t.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function We(t){return!(!t||!t.__CANCEL__)}function Ge(t,e,n){de.call(this,null==t?"canceled":t,de.ERR_CANCELED,e,n),this.name="CanceledError"}le.inherits(Ge,de,{__CANCEL__:!0});const Xe=Ge;function qe(t,e,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new de("Request failed with status code "+n.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}const Ze=function(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r,s=0,a=0;return e=void 0!==e?e:1e3,function(o){const l=Date.now(),c=i[a];r||(r=l),n[s]=o,i[s]=l;let u=a,h=0;for(;u!==s;)h+=n[u++],u%=t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),l-r<e)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};const Ye=function(t,e){let n,i,r=0,s=1e3/e;const a=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=s,n=null,i&&(clearTimeout(i),i=null),t(...e)};return[function(){const t=Date.now(),e=t-r;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];e>=s?a(l,t):(n=l,i||(i=setTimeout(()=>{i=null,a(n)},s-e)))},()=>n&&a(n)]},Ke=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=Ze(50,250);return Ye(n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,o=s-i,l=r(o);i=s;t({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:n,lengthComputable:null!=a,[e?"download":"upload"]:!0})},n)},Je=(t,e)=>{const n=null!=t;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},Qe=t=>function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return le.asap(()=>t(...n))},$e=Ne.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ne.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ne.origin),Ne.navigator&&/(msie|trident)/i.test(Ne.navigator.userAgent)):()=>!0,tn=Ne.hasStandardBrowserEnv?{write(t,e,n,i,r,s){const a=[t+"="+encodeURIComponent(e)];le.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),le.isString(i)&&a.push("path="+i),le.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function en(t,e,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e);return t&&(i||0==n)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const nn=t=>t instanceof He?(0,a.A)({},t):t;function rn(t,e){e=e||{};const n={};function i(t,e,n,i){return le.isPlainObject(t)&&le.isPlainObject(e)?le.merge.call({caseless:i},t,e):le.isPlainObject(e)?le.merge({},e):le.isArray(e)?e.slice():e}function r(t,e,n,r){return le.isUndefined(e)?le.isUndefined(t)?void 0:i(void 0,t,0,r):i(t,e,0,r)}function s(t,e){if(!le.isUndefined(e))return i(void 0,e)}function o(t,e){return le.isUndefined(e)?le.isUndefined(t)?void 0:i(void 0,t):i(void 0,e)}function l(n,r,s){return s in e?i(n,r):s in t?i(void 0,n):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(t,e,n)=>r(nn(t),nn(e),0,!0)};return le.forEach(Object.keys((0,a.A)((0,a.A)({},t),e)),function(i){const s=c[i]||r,a=s(t[i],e[i],i);le.isUndefined(a)&&s!==l||(n[i]=a)}),n}const sn=t=>{const e=rn({},t);let n,{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:o,auth:l}=e;if(e.headers=o=He.from(o),e.url=Se(en(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),le.isFormData(i))if(Ne.hasStandardBrowserEnv||Ne.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[t,...e]=n?n.split(";").map(t=>t.trim()).filter(Boolean):[];o.setContentType([t||"multipart/form-data",...e].join("; "))}if(Ne.hasStandardBrowserEnv&&(r&&le.isFunction(r)&&(r=r(e)),r||!1!==r&&$e(e.url))){const t=s&&a&&tn.read(a);t&&o.set(s,t)}return e},an="undefined"!==typeof XMLHttpRequest&&function(t){return new Promise(function(e,n){const i=sn(t);let r=i.data;const s=He.from(i.headers).normalize();let a,o,l,c,u,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=i;function p(){c&&c(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=He.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());qe(function(t){e(t),p()},function(t){n(t),p()},{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:i,config:t,request:m}),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new de("Request aborted",de.ECONNABORTED,t,m)),m=null)},m.onerror=function(){n(new de("Network Error",de.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let e=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||Ee;i.timeoutErrorMessage&&(e=i.timeoutErrorMessage),n(new de(e,r.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,t,m)),m=null},void 0===r&&s.setContentType(null),"setRequestHeader"in m&&le.forEach(s.toJSON(),function(t,e){m.setRequestHeader(e,t)}),le.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),h&&"json"!==h&&(m.responseType=i.responseType),f&&([l,u]=Ke(f,!0),m.addEventListener("progress",l)),d&&m.upload&&([o,c]=Ke(d),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(a=e=>{m&&(n(!e||e.type?new Xe(null,t,m):e),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const v=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(i.url);v&&-1===Ne.protocols.indexOf(v)?n(new de("Unsupported protocol "+v+":",de.ERR_BAD_REQUEST,t)):m.send(r||null)})},on=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let n,i=new AbortController;const r=function(t){if(!n){n=!0,a();const e=t instanceof Error?t:this.reason;i.abort(e instanceof de?e:new Xe(e instanceof Error?e.message:e))}};let s=e&&setTimeout(()=>{s=null,r(new de("timeout ".concat(e," of ms exceeded"),de.ETIMEDOUT))},e);const a=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(t=>{t.unsubscribe?t.unsubscribe(r):t.removeEventListener("abort",r)}),t=null)};t.forEach(t=>t.addEventListener("abort",r));const{signal:o}=i;return o.unsubscribe=()=>le.asap(a),o}};function ln(t,e){this.v=t,this.k=e}function cn(t){return function(){return new un(t.apply(this,arguments))}}function un(t){var e,n;function i(e,n){try{var s=t[e](n),a=s.value,o=a instanceof ln;Promise.resolve(o?a.v:a).then(function(n){if(o){var l="return"===e?"return":"next";if(!a.k||n.done)return i(l,n);n=t[l](n).value}r(s.done?"return":"normal",n)},function(t){i("throw",t)})}catch(t){r("throw",t)}}function r(t,r){switch(t){case"return":e.resolve({value:r,done:!0});break;case"throw":e.reject(r);break;default:e.resolve({value:r,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(t,r){return new Promise(function(s,a){var o={key:t,arg:r,resolve:s,reject:a,next:null};n?n=n.next=o:(e=n=o,i(t,r))})},"function"!=typeof t.return&&(this.return=void 0)}function hn(t){return new ln(t,0)}function dn(t){var e={},n=!1;function i(e,i){return n=!0,i=new Promise(function(n){n(t[e](i))}),{done:!1,value:new ln(i,1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(t){return n?(n=!1,t):i("next",t)},"function"==typeof t.throw&&(e.throw=function(t){if(n)throw n=!1,t;return i("throw",t)}),"function"==typeof t.return&&(e.return=function(t){return n?(n=!1,t):i("return",t)}),e}function fn(t){var e,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new pn(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function pn(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return pn=function(t){this.s=t,this.n=t.next},pn.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new pn(t)}un.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},un.prototype.next=function(t){return this._invoke("next",t)},un.prototype.throw=function(t){return this._invoke("throw",t)},un.prototype.return=function(t){return this._invoke("return",t)};const mn=function*(t,e){let n=t.byteLength;if(!e||n<e)return void(yield t);let i,r=0;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},gn=function(){var t=cn(function*(t,e){var n,i=!1,r=!1;try{for(var s,a=fn(vn(t));i=!(s=yield hn(a.next())).done;i=!1){const t=s.value;yield*dn(fn(mn(t,e)))}}catch(o){r=!0,n=o}finally{try{i&&null!=a.return&&(yield hn(a.return()))}finally{if(r)throw n}}});return function(e,n){return t.apply(this,arguments)}}(),vn=function(){var t=cn(function*(t){if(t[Symbol.asyncIterator])return void(yield*dn(fn(t)));const e=t.getReader();try{for(;;){const{done:t,value:n}=yield hn(e.read());if(t)break;yield n}}finally{yield hn(e.cancel())}});return function(e){return t.apply(this,arguments)}}(),yn=(t,e,n,i)=>{const r=gn(t,e);let s,a=0,o=t=>{s||(s=!0,i&&i(t))};return new ReadableStream({async pull(t){try{const{done:e,value:i}=await r.next();if(e)return o(),void t.close();let s=i.byteLength;if(n){let t=a+=s;n(t)}t.enqueue(new Uint8Array(i))}catch(e){throw o(e),e}},cancel:t=>(o(t),r.return())},{highWaterMark:2})},xn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,_n=xn&&"function"===typeof ReadableStream,bn=xn&&("function"===typeof TextEncoder?(wn=new TextEncoder,t=>wn.encode(t)):async t=>new Uint8Array(await new Response(t).arrayBuffer()));var wn;const Sn=function(t){try{for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return!!t(...n)}catch(o){return!1}},Mn=_n&&Sn(()=>{let t=!1;const e=new Request(Ne.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),En=_n&&Sn(()=>le.isReadableStream(new Response("").body)),Tn={stream:En&&(t=>t.body)};var An;xn&&(An=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Tn[t]&&(Tn[t]=le.isFunction(An[t])?e=>e[t]():(e,n)=>{throw new de("Response type '".concat(t,"' is not supported"),de.ERR_NOT_SUPPORT,n)})}));const Cn=async(t,e)=>{const n=le.toFiniteNumber(t.getContentLength());return null==n?(async t=>{if(null==t)return 0;if(le.isBlob(t))return t.size;if(le.isSpecCompliantForm(t)){const e=new Request(Ne.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return le.isArrayBufferView(t)||le.isArrayBuffer(t)?t.byteLength:(le.isURLSearchParams(t)&&(t+=""),le.isString(t)?(await bn(t)).byteLength:void 0)})(e):n},Pn=xn&&(async t=>{let{url:e,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:h,withCredentials:d="same-origin",fetchOptions:f}=sn(t);u=u?(u+"").toLowerCase():"text";let p,m=on([r,s&&s.toAbortSignal()],o);const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let v;try{if(c&&Mn&&"get"!==n&&"head"!==n&&0!==(v=await Cn(h,i))){let t,n=new Request(e,{method:"POST",body:i,duplex:"half"});if(le.isFormData(i)&&(t=n.headers.get("content-type"))&&h.setContentType(t),n.body){const[t,e]=Je(v,Ke(Qe(c)));i=yn(n.body,65536,t,e)}}le.isString(d)||(d=d?"include":"omit");const r="credentials"in Request.prototype;p=new Request(e,(0,a.A)((0,a.A)({},f),{},{signal:m,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:i,duplex:"half",credentials:r?d:void 0}));let s=await fetch(p,f);const o=En&&("stream"===u||"response"===u);if(En&&(l||o&&g)){const t={};["status","statusText","headers"].forEach(e=>{t[e]=s[e]});const e=le.toFiniteNumber(s.headers.get("content-length")),[n,i]=l&&Je(e,Ke(Qe(l),!0))||[];s=new Response(yn(s.body,65536,n,()=>{i&&i(),g&&g()}),t)}u=u||"text";let y=await Tn[le.findKey(Tn,u)||"text"](s,t);return!o&&g&&g(),await new Promise((e,n)=>{qe(e,n,{data:y,headers:He.from(s.headers),status:s.status,statusText:s.statusText,config:t,request:p})})}catch(y){if(g&&g(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new de("Network Error",de.ERR_NETWORK,t,p),{cause:y.cause||y});throw de.from(y,y&&y.code,t,p)}}),Rn={http:null,xhr:an,fetch:Pn};le.forEach(Rn,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(o){}Object.defineProperty(t,"adapterName",{value:e})}});const Ln=t=>"- ".concat(t),Nn=t=>le.isFunction(t)||null===t||!1===t,kn=t=>{t=le.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let s=0;s<e;s++){let e;if(n=t[s],i=n,!Nn(n)&&(i=Rn[(e=String(n)).toLowerCase()],void 0===i))throw new de("Unknown adapter '".concat(e,"'"));if(i)break;r[e||"#"+s]=i}if(!i){const t=Object.entries(r).map(t=>{let[e,n]=t;return"adapter ".concat(e," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let n=e?t.length>1?"since :\n"+t.map(Ln).join("\n"):" "+Ln(t[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function On(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xe(null,t)}function Dn(t){On(t),t.headers=He.from(t.headers),t.data=Ve.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return kn(t.adapter||De.adapter)(t).then(function(e){return On(t),e.data=Ve.call(t,t.transformResponse,e),e.headers=He.from(e.headers),e},function(e){return We(e)||(On(t),e&&e.response&&(e.response.data=Ve.call(t,t.transformResponse,e.response),e.response.headers=He.from(e.response.headers))),Promise.reject(e)})}const In="1.11.0",zn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{zn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const jn={};zn.transitional=function(t,e,n){function i(t,e){return"[Axios v"+In+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,r,s)=>{if(!1===t)throw new de(i(r," has been removed"+(e?" in "+e:"")),de.ERR_DEPRECATED);return e&&!jn[r]&&(jn[r]=!0,console.warn(i(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,s)}},zn.spelling=function(t){return(e,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(t)),!0)};const Un={assertOptions:function(t,e,n){if("object"!==typeof t)throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],a=e[s];if(a){const e=t[s],n=void 0===e||a(e,s,t);if(!0!==n)throw new de("option "+s+" must be "+n,de.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new de("Unknown option "+s,de.ERR_BAD_OPTION)}},validators:zn},Fn=Un.validators;class Bn{constructor(t){this.defaults=t||{},this.interceptors={request:new Me,response:new Me}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";try{n.stack?e&&!String(n.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+e):n.stack=e}catch(o){}}throw n}}_request(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},e=rn(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:r}=e;void 0!==n&&Un.assertOptions(n,{silentJSONParsing:Fn.transitional(Fn.boolean),forcedJSONParsing:Fn.transitional(Fn.boolean),clarifyTimeoutError:Fn.transitional(Fn.boolean)},!1),null!=i&&(le.isFunction(i)?e.paramsSerializer={serialize:i}:Un.assertOptions(i,{encode:Fn.function,serialize:Fn.function},!0)),void 0!==e.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Un.assertOptions(e,{baseUrl:Fn.spelling("baseURL"),withXsrfToken:Fn.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s=r&&le.merge(r.common,r[e.method]);r&&le.forEach(["delete","get","head","post","put","patch","common"],t=>{delete r[t]}),e.headers=He.concat(s,r);const a=[];let o=!0;this.interceptors.request.forEach(function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(o=o&&t.synchronous,a.unshift(t.fulfilled,t.rejected))});const l=[];let c;this.interceptors.response.forEach(function(t){l.push(t.fulfilled,t.rejected)});let u,h=0;if(!o){const t=[Dn.bind(this),void 0];for(t.unshift(...a),t.push(...l),u=t.length,c=Promise.resolve(e);h<u;)c=c.then(t[h++],t[h++]);return c}u=a.length;let d=e;for(h=0;h<u;){const t=a[h++],e=a[h++];try{d=t(d)}catch(f){e.call(this,f);break}}try{c=Dn.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(t){return Se(en((t=rn(this.defaults,t)).baseURL,t.url,t.allowAbsoluteUrls),t.params,t.paramsSerializer)}}le.forEach(["delete","get","head","options"],function(t){Bn.prototype[t]=function(e,n){return this.request(rn(n||{},{method:t,url:e,data:(n||{}).data}))}}),le.forEach(["post","put","patch"],function(t){function e(e){return function(n,i,r){return this.request(rn(r||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Bn.prototype[t]=e(),Bn.prototype[t+"Form"]=e(!0)});const Hn=Bn;class Vn{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(t){e=t});const n=this;this.promise.then(t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null}),this.promise.then=t=>{let e;const i=new Promise(t=>{n.subscribe(t),e=t}).then(t);return i.cancel=function(){n.unsubscribe(e)},i},t(function(t,i,r){n.reason||(n.reason=new Xe(t,i,r),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;const e=new Vn(function(e){t=e});return{token:e,cancel:t}}}const Wn=Vn;const Gn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gn).forEach(t=>{let[e,n]=t;Gn[n]=e});const Xn=Gn;const qn=function t(e){const n=new Hn(e),i=wt(Hn.prototype.request,n);return le.extend(i,Hn.prototype,n,{allOwnKeys:!0}),le.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return t(rn(e,n))},i}(De);qn.Axios=Hn,qn.CanceledError=Xe,qn.CancelToken=Wn,qn.isCancel=We,qn.VERSION=In,qn.toFormData=ve,qn.AxiosError=de,qn.Cancel=qn.CanceledError,qn.all=function(t){return Promise.all(t)},qn.spread=function(t){return function(e){return t.apply(null,e)}},qn.isAxiosError=function(t){return le.isObject(t)&&!0===t.isAxiosError},qn.mergeConfig=rn,qn.AxiosHeaders=He,qn.formToJSON=t=>ke(le.isHTMLForm(t)?new FormData(t):t),qn.getAdapter=kn,qn.HttpStatusCode=Xn,qn.default=qn;const Zn=qn.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"/Nasa_app_challenge",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL||"http://localhost:5001",timeout:3e4,headers:{"Content-Type":"application/json"}});Zn.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t},t=>Promise.reject(t)),Zn.interceptors.response.use(t=>t,t=>{var e;return 401===(null===(e=t.response)||void 0===e?void 0:e.status)&&(localStorage.removeItem("token"),delete Zn.defaults.headers.common.Authorization,"/login"!==window.location.pathname&&"/register"!==window.location.pathname&&(window.location.href="/login")),Promise.reject(t)});const Yn=Zn;var Kn=n(579);const Jn=(0,e.createContext)(),Qn=()=>{const t=(0,e.useContext)(Jn);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},$n=t=>{let{children:n}=t;const[i,r]=(0,e.useState)(null),[s,a]=(0,e.useState)(!0),o=(0,e.useCallback)(()=>{localStorage.removeItem("token"),r(null),bt.success("Logged out successfully")},[]),l=(0,e.useCallback)(async()=>{try{const t=await Yn.get("/api/auth/profile");r(t.data.user)}catch(t){console.error("Failed to fetch user profile:",t),o()}finally{a(!1)}},[o]);(0,e.useEffect)(()=>{localStorage.getItem("token")?l():a(!1)},[l]);const c={user:i,loading:s,login:async(t,e)=>{try{const n=await Yn.post("/api/auth/login",{email:t,password:e}),{token:i,user:s}=n.data;return localStorage.setItem("token",i),r(s),bt.success("Welcome back!"),{success:!0}}catch(s){var n,i;const t=(null===(n=s.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.error)||"Login failed";return bt.error(t),{success:!1,error:t}}},register:async t=>{try{const e=await Yn.post("/api/auth/register",t),{token:n,user:i}=e.data;return localStorage.setItem("token",n),r(i),bt.success("Account created successfully!"),{success:!0}}catch(i){var e,n;const t=(null===(e=i.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||"Registration failed";return bt.error(t),{success:!1,error:t}}},logout:o,updateProfile:async t=>{try{const e=await Yn.put("/api/auth/profile",t);return r(e.data.user),bt.success("Profile updated successfully"),{success:!0}}catch(i){var e,n;const t=(null===(e=i.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||"Failed to update profile";return bt.error(t),{success:!1,error:t}}},changePassword:async(t,e)=>{try{return await Yn.put("/api/auth/change-password",{currentPassword:t,newPassword:e}),bt.success("Password changed successfully"),{success:!0}}catch(r){var n,i;const t=(null===(n=r.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.error)||"Failed to change password";return bt.error(t),{success:!1,error:t}}},isAuthenticated:!!i};return(0,Kn.jsx)(Jn.Provider,{value:c,children:n})},ti=(0,e.createContext)(),ei=()=>{const t=(0,e.useContext)(ti);if(!t)throw new Error("useSimulation must be used within a SimulationProvider");return t},ni=t=>{let{children:n}=t;const[i,r]=(0,e.useState)([]),[s,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)([]),h={simulations:i,currentSimulation:s,loading:o,asteroids:c,fetchAsteroids:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{l(!0);const e=new URLSearchParams(t).toString(),n=await Yn.get("/api/asteroids?".concat(e));return u(n.data.asteroids),n.data}catch(e){return console.error("Failed to fetch asteroids:",e),bt.error("Failed to load asteroids"),{asteroids:[]}}finally{l(!1)}},fetchFeaturedAsteroids:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{return(await Yn.get("/api/asteroids/featured?limit=".concat(t))).data.asteroids}catch(e){return console.error("Failed to fetch featured asteroids:",e),[]}},searchAsteroids:async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return(await Yn.get("/api/asteroids/search?q=".concat(encodeURIComponent(t),"&limit=").concat(e))).data.asteroids}catch(n){return console.error("Failed to search asteroids:",n),[]}},getAsteroidById:async t=>{try{return(await Yn.get("/api/asteroids/".concat(t))).data.asteroid}catch(e){throw console.error("Failed to fetch asteroid:",e),e}},syncAsteroidData:async()=>{try{l(!0);const t=await Yn.post("/api/asteroids/sync");return bt.success("Asteroid data synchronized!"),t.data}catch(n){var t,e;const i=(null===(t=n.response)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to sync data";throw bt.error(i),n}finally{l(!1)}},getAsteroidStats:async()=>{try{return(await Yn.get("/api/asteroids/stats/overview")).data.statistics}catch(t){return console.error("Failed to fetch asteroid stats:",t),{}}},runSimulation:async t=>{try{l(!0);const e=(await Yn.post("/api/simulations",t)).data.simulation;return a(e),bt.success("Simulation completed successfully!"),{success:!0,simulation:e}}catch(i){var e,n;const t=(null===(e=i.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||"Simulation failed";return bt.error(t),{success:!1,error:t}}finally{l(!1)}},fetchUserSimulations:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{l(!0);const e=new URLSearchParams(t).toString(),n=await Yn.get("/api/simulations/my?".concat(e));return r(n.data.simulations),n.data}catch(e){return console.error("Failed to fetch user simulations:",e),bt.error("Failed to load your simulations"),{simulations:[]}}finally{l(!1)}},fetchPublicSimulations:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{l(!0);const e=new URLSearchParams(t).toString(),n=await Yn.get("/api/simulations/public?".concat(e));return r(n.data.simulations),n.data}catch(e){return console.error("Failed to fetch public simulations:",e),bt.error("Failed to load community simulations"),{simulations:[]}}finally{l(!1)}},getSimulationById:async t=>{try{return(await Yn.get("/api/simulations/".concat(t))).data.simulation}catch(e){throw console.error("Failed to fetch simulation:",e),e}},voteOnSimulation:async(t,e)=>{try{const n=await Yn.post("/api/simulations/".concat(t,"/vote"),{vote:e});return bt.success("Vote recorded!"),n.data}catch(r){var n,i;const t=(null===(n=r.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.error)||"Failed to vote";throw bt.error(t),r}},addComment:async(t,e)=>{try{const n=await Yn.post("/api/simulations/".concat(t,"/comments"),{text:e});return bt.success("Comment added!"),n.data.comment}catch(r){var n,i;const t=(null===(n=r.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.error)||"Failed to add comment";throw bt.error(t),r}},deleteSimulation:async t=>{try{return await Yn.delete("/api/simulations/".concat(t)),r(e=>e.filter(e=>e._id!==t)),bt.success("Simulation deleted"),{success:!0}}catch(i){var e,n;const t=(null===(e=i.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||"Failed to delete simulation";return bt.error(t),{success:!1,error:t}}},getSimulationStats:async()=>{try{return(await Yn.get("/api/simulations/stats/overview")).data.statistics}catch(t){return console.error("Failed to fetch simulation stats:",t),{}}},setCurrentSimulation:a,setSimulations:r};return(0,Kn.jsx)(ti.Provider,{value:h,children:n})};var ii=n(216),ri=n(45),si=n(139),ai=n.n(si);const oi=["xxl","xl","lg","md","sm","xs"],li="xs",ci=e.createContext({prefixes:{},breakpoints:oi,minBreakpoint:li}),{Consumer:ui,Provider:hi}=ci;function di(t,n){const{prefixes:i}=(0,e.useContext)(ci);return t||i[n]||n}function fi(){const{breakpoints:t}=(0,e.useContext)(ci);return t}function pi(){const{minBreakpoint:t}=(0,e.useContext)(ci);return t}function mi(){const{dir:t}=(0,e.useContext)(ci);return"rtl"===t}const gi=["bsPrefix","fluid","as","className"],vi=e.forwardRef((t,e)=>{let{bsPrefix:n,fluid:i=!1,as:r="div",className:s}=t,o=(0,ri.A)(t,gi);const l=di(n,"container"),c="string"===typeof i?"-".concat(i):"-fluid";return(0,Kn.jsx)(r,(0,a.A)((0,a.A)({ref:e},o),{},{className:ai()(s,i?"".concat(l).concat(c):l)}))});vi.displayName="Container";const yi=vi,xi=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=t?String(t):e||null},_i=e.createContext(null);var bi=n(168),wi=n(587);n(740);function Si(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function Mi(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}function Ei(t,n){return Object.keys(n).reduce(function(i,r){var s,a=i,o=a[Si(r)],l=a[r],c=(0,wi.A)(a,[Si(r),r].map(Mi)),u=n[r],h=function(t,n,i){var r=(0,e.useRef)(void 0!==t),s=(0,e.useState)(n),a=s[0],o=s[1],l=void 0!==t,c=r.current;return r.current=l,!l&&c&&a!==n&&o(n),[l?t:a,(0,e.useCallback)(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];i&&i.apply(void 0,[t].concat(n)),o(t)},[i])]}(l,o,t[u]),d=h[0],f=h[1];return(0,bi.A)({},c,((s={})[r]=d,s[u]=f,s))},t)}function Ti(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==t&&void 0!==t&&this.setState(t)}function Ai(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!==n&&void 0!==n?n:null}.bind(this))}function Ci(t,e){try{var n=this.props,i=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,i)}finally{this.props=n,this.state=i}}Ti.__suppressDeprecationWarning=!0,Ai.__suppressDeprecationWarning=!0,Ci.__suppressDeprecationWarning=!0;const Pi=["bsPrefix","className","as"],Ri=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,as:r}=t,s=(0,ri.A)(t,Pi);n=di(n,"navbar-brand");const o=r||(s.href?"a":"span");return(0,Kn.jsx)(o,(0,a.A)((0,a.A)({},s),{},{ref:e,className:ai()(i,n)}))});Ri.displayName="NavbarBrand";const Li=Ri;function Ni(t){return t&&t.ownerDocument||document}function ki(t,e){return function(t){var e=Ni(t);return e&&e.defaultView||window}(t).getComputedStyle(t,e)}var Oi=/([A-Z])/g;var Di=/^ms-/;function Ii(t){return function(t){return t.replace(Oi,"-$1").toLowerCase()}(t).replace(Di,"-ms-")}var zi=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const ji=function(t,e){var n="",i="";if("string"===typeof e)return t.style.getPropertyValue(Ii(e))||ki(t).getPropertyValue(Ii(e));Object.keys(e).forEach(function(r){var s=e[r];s||0===s?!function(t){return!(!t||!zi.test(t))}(r)?n+=Ii(r)+": "+s+";":i+=r+"("+s+") ":t.style.removeProperty(Ii(r))}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n};function Ui(t,e){return Ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ui(t,e)}var Fi=n(950);const Bi=!1,Hi=e.createContext(null);var Vi="unmounted",Wi="exited",Gi="entering",Xi="entered",qi="exiting",Zi=function(t){function n(e,n){var i;i=t.call(this,e,n)||this;var r,s=n&&!n.isMounting?e.enter:e.appear;return i.appearStatus=null,e.in?s?(r=Wi,i.appearStatus=Gi):r=Xi:r=e.unmountOnExit||e.mountOnEnter?Vi:Wi,i.state={status:r},i.nextCallback=null,i}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ui(t,e)}(n,t),n.getDerivedStateFromProps=function(t,e){return t.in&&e.status===Vi?{status:Wi}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Gi&&n!==Xi&&(e=Gi):n!==Gi&&n!==Xi||(e=qi)}this.updateStatus(!1,e)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var t,e,n,i=this.props.timeout;return t=e=n=i,null!=i&&"number"!==typeof i&&(t=i.exit,e=i.enter,n=void 0!==i.appear?i.appear:e),{exit:t,enter:e,appear:n}},i.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===Gi){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Fi.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Wi&&this.setState({status:Vi})},i.performEnter=function(t){var e=this,n=this.props.enter,i=this.context?this.context.isMounting:t,r=this.props.nodeRef?[i]:[Fi.findDOMNode(this),i],s=r[0],a=r[1],o=this.getTimeouts(),l=i?o.appear:o.enter;!t&&!n||Bi?this.safeSetState({status:Xi},function(){e.props.onEntered(s)}):(this.props.onEnter(s,a),this.safeSetState({status:Gi},function(){e.props.onEntering(s,a),e.onTransitionEnd(l,function(){e.safeSetState({status:Xi},function(){e.props.onEntered(s,a)})})}))},i.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:Fi.findDOMNode(this);e&&!Bi?(this.props.onExit(i),this.safeSetState({status:qi},function(){t.props.onExiting(i),t.onTransitionEnd(n.exit,function(){t.safeSetState({status:Wi},function(){t.props.onExited(i)})})})):this.safeSetState({status:Wi},function(){t.props.onExited(i)})},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},i.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,e.nextCallback=null,t(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:Fi.findDOMNode(this),i=null==t&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=r[0],a=r[1];this.props.addEndListener(s,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},i.render=function(){var t=this.state.status;if(t===Vi)return null;var n=this.props,i=n.children,r=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,wi.A)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(Hi.Provider,{value:null},"function"===typeof i?i(t,r):e.cloneElement(e.Children.only(i),r))},n}(e.Component);function Yi(){}Zi.contextType=Hi,Zi.propTypes={},Zi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Yi,onEntering:Yi,onEntered:Yi,onExit:Yi,onExiting:Yi,onExited:Yi},Zi.UNMOUNTED=Vi,Zi.EXITED=Wi,Zi.ENTERING=Gi,Zi.ENTERED=Xi,Zi.EXITING=qi;const Ki=Zi;function Ji(t){if(!t||"function"===typeof t)return null;const{major:n}=function(){const t=e.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}();return n>=19?t.props.ref:t.ref}const Qi=!("undefined"===typeof window||!window.document||!window.document.createElement);var $i=!1,tr=!1;try{var er={get passive(){return $i=!0},get once(){return tr=$i=!0}};Qi&&(window.addEventListener("test",er,er),window.removeEventListener("test",er,!0))}catch(o){}const nr=function(t,e,n,i){if(i&&"boolean"!==typeof i&&!tr){var r=i.once,s=i.capture,a=n;!tr&&r&&(a=n.__once||function t(i){this.removeEventListener(e,t,s),n.call(this,i)},n.__once=a),t.addEventListener(e,a,$i?i:s)}t.addEventListener(e,n,i)};const ir=function(t,e,n,i){var r=i&&"boolean"!==typeof i?i.capture:i;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)};const rr=function(t,e,n,i){return nr(t,e,n,i),function(){ir(t,e,n,i)}};function sr(t,e,n){void 0===n&&(n=5);var i=!1,r=setTimeout(function(){i||function(t,e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,i),t.dispatchEvent(r)}}(t,"transitionend",!0)},e+n),s=rr(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),s()}}function ar(t,e,n,i){null==n&&(n=function(t){var e=ji(t,"transitionDuration")||"",n=-1===e.indexOf("ms")?1e3:1;return parseFloat(e)*n}(t)||0);var r=sr(t,n,i),s=rr(t,"transitionend",e);return function(){r(),s()}}function or(t,e){const n=ji(t,e)||"",i=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*i}function lr(t,e){const n=or(t,"transitionDuration"),i=or(t,"transitionDelay"),r=ar(t,n=>{n.target===t&&(r(),e(n))},n+i)}const cr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(t=>null!=t).reduce((t,e)=>{if("function"!==typeof e)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===t?e:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];t.apply(this,i),e.apply(this,i)}},null)};function ur(t){t.offsetHeight}const hr=t=>t&&"function"!==typeof t?e=>{t.current=e}:t;const dr=function(t,n){return(0,e.useMemo)(()=>function(t,e){const n=hr(t),i=hr(e);return t=>{n&&n(t),i&&i(t)}}(t,n),[t,n])};const fr=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],pr=e.forwardRef((t,n)=>{let{onEnter:i,onEntering:r,onEntered:s,onExit:o,onExiting:l,onExited:c,addEndListener:u,children:h,childRef:d}=t,f=(0,ri.A)(t,fr);const p=(0,e.useRef)(null),m=dr(p,d),g=t=>{var e;m((e=t)&&"setState"in e?Fi.findDOMNode(e):null!=e?e:null)},v=t=>e=>{t&&p.current&&t(p.current,e)},y=(0,e.useCallback)(v(i),[i]),x=(0,e.useCallback)(v(r),[r]),_=(0,e.useCallback)(v(s),[s]),b=(0,e.useCallback)(v(o),[o]),w=(0,e.useCallback)(v(l),[l]),S=(0,e.useCallback)(v(c),[c]),M=(0,e.useCallback)(v(u),[u]);return(0,Kn.jsx)(Ki,(0,a.A)((0,a.A)({ref:n},f),{},{onEnter:y,onEntered:_,onEntering:x,onExit:b,onExited:S,onExiting:w,addEndListener:M,nodeRef:p,children:"function"===typeof h?(t,e)=>h(t,(0,a.A)((0,a.A)({},e),{},{ref:g})):e.cloneElement(h,{ref:g})}))});pr.displayName="TransitionWrapper";const mr=pr,gr=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","in","timeout","mountOnEnter","unmountOnExit","appear","getDimensionValue"],vr={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function yr(t,e){const n=e["offset".concat(t[0].toUpperCase()).concat(t.slice(1))],i=vr[t];return n+parseInt(ji(e,i[0]),10)+parseInt(ji(e,i[1]),10)}const xr={[Wi]:"collapse",[qi]:"collapsing",[Gi]:"collapsing",[Xi]:"collapse show"},_r=e.forwardRef((t,n)=>{let{onEnter:i,onEntering:r,onEntered:s,onExit:o,onExiting:l,className:c,children:u,dimension:h="height",in:d=!1,timeout:f=300,mountOnEnter:p=!1,unmountOnExit:m=!1,appear:g=!1,getDimensionValue:v=yr}=t,y=(0,ri.A)(t,gr);const x="function"===typeof h?h():h,_=(0,e.useMemo)(()=>cr(t=>{t.style[x]="0"},i),[x,i]),b=(0,e.useMemo)(()=>cr(t=>{const e="scroll".concat(x[0].toUpperCase()).concat(x.slice(1));t.style[x]="".concat(t[e],"px")},r),[x,r]),w=(0,e.useMemo)(()=>cr(t=>{t.style[x]=null},s),[x,s]),S=(0,e.useMemo)(()=>cr(t=>{t.style[x]="".concat(v(x,t),"px"),ur(t)},o),[o,v,x]),M=(0,e.useMemo)(()=>cr(t=>{t.style[x]=null},l),[x,l]);return(0,Kn.jsx)(mr,(0,a.A)((0,a.A)({ref:n,addEndListener:lr},y),{},{"aria-expanded":y.role?d:null,onEnter:_,onEntering:b,onEntered:w,onExit:S,onExiting:M,childRef:Ji(u),in:d,timeout:f,mountOnEnter:p,unmountOnExit:m,appear:g,children:(t,n)=>e.cloneElement(u,(0,a.A)((0,a.A)({},n),{},{className:ai()(c,u.props.className,xr[t],"width"===x&&"collapse-horizontal")}))}))});_r.displayName="Collapse";const br=_r,wr=e.createContext(null);wr.displayName="NavbarContext";const Sr=wr,Mr=["children","bsPrefix"],Er=e.forwardRef((t,n)=>{let{children:i,bsPrefix:r}=t,s=(0,ri.A)(t,Mr);r=di(r,"navbar-collapse");const o=(0,e.useContext)(Sr);return(0,Kn.jsx)(br,(0,a.A)((0,a.A)({in:!(!o||!o.expanded)},s),{},{children:(0,Kn.jsx)("div",{ref:n,className:r,children:i})}))});Er.displayName="NavbarCollapse";const Tr=Er;const Ar=function(t){const n=(0,e.useRef)(t);return(0,e.useEffect)(()=>{n.current=t},[t]),n};function Cr(t){const n=Ar(t);return(0,e.useCallback)(function(){return n.current&&n.current(...arguments)},[n])}const Pr=["bsPrefix","className","children","label","as","onClick"],Rr=e.forwardRef((t,n)=>{let{bsPrefix:i,className:r,children:s,label:o="Toggle navigation",as:l="button",onClick:c}=t,u=(0,ri.A)(t,Pr);i=di(i,"navbar-toggler");const{onToggle:h,expanded:d}=(0,e.useContext)(Sr)||{},f=Cr(t=>{c&&c(t),h&&h()});return"button"===l&&(u.type="button"),(0,Kn.jsx)(l,(0,a.A)((0,a.A)({},u),{},{ref:n,onClick:f,"aria-label":o,className:ai()(r,i,!d&&"collapsed"),children:s||(0,Kn.jsx)("span",{className:"".concat(i,"-icon")})}))});Rr.displayName="NavbarToggle";const Lr=Rr,Nr="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,kr="undefined"!==typeof document||Nr?e.useLayoutEffect:e.useEffect,Or=new WeakMap,Dr=(t,e)=>{if(!t||!e)return;const n=Or.get(e)||new Map;Or.set(e,n);let i=n.get(t);return i||(i=e.matchMedia(t),i.refCount=0,n.set(i.media,i)),i};function Ir(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const i=Dr(t,n),[r,s]=(0,e.useState)(()=>!!i&&i.matches);return kr(()=>{let e=Dr(t,n);if(!e)return s(!1);let i=Or.get(n);const r=()=>{s(e.matches)};return e.refCount++,e.addListener(r),r(),()=>{e.removeListener(r),e.refCount--,e.refCount<=0&&(null==i||i.delete(e.media)),e=void 0}},[t]),r}const zr=function(t){const n=Object.keys(t);function i(t,e){return t===e?e:t?"".concat(t," and ").concat(e):e}function r(e){const i=function(t){return n[Math.min(n.indexOf(t)+1,n.length-1)]}(e);let r=t[i];return r="number"===typeof r?"".concat(r-.2,"px"):"calc(".concat(r," - 0.2px)"),"(max-width: ".concat(r,")")}return function(n,s,a){let o;return"object"===typeof n?(o=n,a=s,s=!0):(s=s||!0,o={[n]:s}),Ir((0,e.useMemo)(()=>Object.entries(o).reduce((e,n)=>{let[s,a]=n;return"up"!==a&&!0!==a||(e=i(e,function(e){let n=t[e];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(s))),"down"!==a&&!0!==a||(e=i(e,r(s))),e},""),[JSON.stringify(o)]),a)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),jr=zr;function Ur(t){void 0===t&&(t=Ni());try{var e=t.activeElement;return e&&e.nodeName?e:null}catch(o){return t.body}}function Fr(t,e){return t.contains?t.contains(e):t.compareDocumentPosition?t===e||!!(16&t.compareDocumentPosition(e)):void 0}function Br(){const t=(0,e.useRef)(!0),n=(0,e.useRef)(()=>t.current);return(0,e.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),n.current}function Hr(t){const n=function(t){const n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)(()=>()=>n.current(),[])}function Vr(t){const n=(0,e.useRef)(null);return(0,e.useEffect)(()=>{n.current=t}),n.current}const Wr=function(t){const n=(0,e.useRef)(t);return(0,e.useEffect)(()=>{n.current=t},[t]),n};function Gr(t){const n=Wr(t);return(0,e.useCallback)(function(){return n.current&&n.current(...arguments)},[n])}function Xr(t){return"".concat("data-rr-ui-").concat(t)}const qr=Xr("modal-open");const Zr=class{constructor(){let{ownerDocument:t,handleContainerOverflow:e=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=e,this.isRTL=n,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const e={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();t.style={overflow:i.style.overflow,[n]:i.style[n]},t.scrollBarWidth&&(e[n]="".concat(parseInt(ji(i,n)||"0",10)+t.scrollBarWidth,"px")),i.setAttribute(qr,""),ji(i,e)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const e=this.getElement();e.removeAttribute(qr),Object.assign(e.style,t.style)}add(t){let e=this.modals.indexOf(t);return-1!==e?e:(e=this.modals.length,this.modals.push(t),this.setModalAttributes(t),0!==e||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e)}remove(t){const e=this.modals.indexOf(t);-1!==e&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}},Yr=(0,e.createContext)(Qi?window:void 0);Yr.Provider;function Kr(){return(0,e.useContext)(Yr)}const Jr=(t,e)=>Qi?null==t?(e||Ni()).body:("function"===typeof t&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;const Qr=t=>t&&"function"!==typeof t?e=>{t.current=e}:t;const $r=function(t,n){return(0,e.useMemo)(()=>function(t,e){const n=Qr(t),i=Qr(e);return t=>{n&&n(t),i&&i(t)}}(t,n),[t,n])},ts="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,es="undefined"!==typeof document||ts?e.useLayoutEffect:e.useEffect;const ns=function(t){let{children:n,in:i,onExited:r,mountOnEnter:s,unmountOnExit:a}=t;const o=(0,e.useRef)(null),l=(0,e.useRef)(i),c=Gr(r);(0,e.useEffect)(()=>{i?l.current=!0:c(o.current)},[i,c]);const u=$r(o,Ji(n)),h=(0,e.cloneElement)(n,{ref:u});return i?h:a||!l.current&&s?null:h},is=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const rs=["component"];const ss=e.forwardRef((t,n)=>{let{component:i}=t,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,rs);const s=function(t){let{onEnter:n,onEntering:i,onEntered:r,onExit:s,onExiting:a,onExited:o,addEndListener:l,children:c}=t,u=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,is);const h=(0,e.useRef)(null),d=$r(h,Ji(c)),f=t=>e=>{t&&h.current&&t(h.current,e)},p=(0,e.useCallback)(f(n),[n]),m=(0,e.useCallback)(f(i),[i]),g=(0,e.useCallback)(f(r),[r]),v=(0,e.useCallback)(f(s),[s]),y=(0,e.useCallback)(f(a),[a]),x=(0,e.useCallback)(f(o),[o]),_=(0,e.useCallback)(f(l),[l]);return Object.assign({},u,{nodeRef:h},n&&{onEnter:p},i&&{onEntering:m},r&&{onEntered:g},s&&{onExit:v},a&&{onExiting:y},o&&{onExited:x},l&&{addEndListener:_},{children:"function"===typeof c?(t,e)=>c(t,Object.assign({},e,{ref:d})):(0,e.cloneElement)(c,{ref:d})})}(r);return(0,Kn.jsx)(i,Object.assign({ref:n},s))}),as=ss;function os(t){let{children:n,in:i,onExited:r,onEntered:s,transition:a}=t;const[o,l]=(0,e.useState)(!i);i&&o&&l(!1);const c=function(t){let{in:n,onTransition:i}=t;const r=(0,e.useRef)(null),s=(0,e.useRef)(!0),a=Gr(i);return es(()=>{if(!r.current)return;let t=!1;return a({in:n,element:r.current,initial:s.current,isStale:()=>t}),()=>{t=!0}},[n,a]),es(()=>(s.current=!1,()=>{s.current=!0}),[]),r}({in:!!i,onTransition:t=>{Promise.resolve(a(t)).then(()=>{t.isStale()||(t.in?null==s||s(t.element,t.initial):(l(!0),null==r||r(t.element)))},e=>{throw t.in||l(!0),e})}}),u=$r(c,Ji(n));return o&&!i?null:(0,e.cloneElement)(n,{ref:u})}function ls(t,e,n){return t?(0,Kn.jsx)(as,Object.assign({},n,{component:t})):e?(0,Kn.jsx)(os,Object.assign({},n,{transition:e})):(0,Kn.jsx)(ns,Object.assign({},n))}const cs=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let us;function hs(t){const n=Kr(),i=t||function(t){return us||(us=new Zr({ownerDocument:null==t?void 0:t.document})),us}(n),r=(0,e.useRef)({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>i.add(r.current),remove:()=>i.remove(r.current),isTopModal:()=>i.isTopModal(r.current),setDialogRef:(0,e.useCallback)(t=>{r.current.dialog=t},[]),setBackdropRef:(0,e.useCallback)(t=>{r.current.backdrop=t},[])})}const ds=(0,e.forwardRef)((t,n)=>{let{show:i=!1,role:r="dialog",className:s,style:a,children:o,backdrop:l=!0,keyboard:c=!0,onBackdropClick:u,onEscapeKeyDown:h,transition:d,runTransition:f,backdropTransition:p,runBackdropTransition:m,autoFocus:g=!0,enforceFocus:v=!0,restoreFocus:y=!0,restoreFocusOptions:x,renderDialog:_,renderBackdrop:b=t=>(0,Kn.jsx)("div",Object.assign({},t)),manager:w,container:S,onShow:M,onHide:E=()=>{},onExit:T,onExited:A,onExiting:C,onEnter:P,onEntering:R,onEntered:L}=t,N=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,cs);const k=Kr(),O=function(t,n){const i=Kr(),[r,s]=(0,e.useState)(()=>Jr(t,null==i?void 0:i.document));if(!r){const e=Jr(t);e&&s(e)}return(0,e.useEffect)(()=>{n&&r&&n(r)},[n,r]),(0,e.useEffect)(()=>{const e=Jr(t);e!==r&&s(e)},[t,r]),r}(S),D=hs(w),I=Br(),z=Vr(i),[j,U]=(0,e.useState)(!i),F=(0,e.useRef)(null);(0,e.useImperativeHandle)(n,()=>D,[D]),Qi&&!z&&i&&(F.current=Ur(null==k?void 0:k.document)),i&&j&&U(!1);const B=Gr(()=>{if(D.add(),q.current=rr(document,"keydown",G),X.current=rr(document,"focus",()=>setTimeout(V),!0),M&&M(),g){var t,e;const n=Ur(null!=(t=null==(e=D.dialog)?void 0:e.ownerDocument)?t:null==k?void 0:k.document);D.dialog&&n&&!Fr(D.dialog,n)&&(F.current=n,D.dialog.focus())}}),H=Gr(()=>{var t;(D.remove(),null==q.current||q.current(),null==X.current||X.current(),y)&&(null==(t=F.current)||null==t.focus||t.focus(x),F.current=null)});(0,e.useEffect)(()=>{i&&O&&B()},[i,O,B]),(0,e.useEffect)(()=>{j&&H()},[j,H]),Hr(()=>{H()});const V=Gr(()=>{if(!v||!I()||!D.isTopModal())return;const t=Ur(null==k?void 0:k.document);D.dialog&&t&&!Fr(D.dialog,t)&&D.dialog.focus()}),W=Gr(t=>{t.target===t.currentTarget&&(null==u||u(t),!0===l&&E())}),G=Gr(t=>{c&&function(t){return"Escape"===t.code||27===t.keyCode}(t)&&D.isTopModal()&&(null==h||h(t),t.defaultPrevented||E())}),X=(0,e.useRef)(),q=(0,e.useRef)();if(!O)return null;const Z=Object.assign({role:r,ref:D.setDialogRef,"aria-modal":"dialog"===r||void 0},N,{style:a,className:s,tabIndex:-1});let Y=_?_(Z):(0,Kn.jsx)("div",Object.assign({},Z,{children:e.cloneElement(o,{role:"document"})}));Y=ls(d,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!i,onExit:T,onExiting:C,onExited:function(){U(!0),null==A||A(...arguments)},onEnter:P,onEntering:R,onEntered:L,children:Y});let K=null;return l&&(K=b({ref:D.setBackdropRef,onClick:W}),K=ls(p,m,{in:!!i,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:K})),(0,Kn.jsx)(Kn.Fragment,{children:Fi.createPortal((0,Kn.jsxs)(Kn.Fragment,{children:[K,Y]}),O)})});ds.displayName="Modal";const fs=Object.assign(ds,{Manager:Zr}),ps=["className","children","transitionClasses","onEnter"],ms={[Gi]:"show",[Xi]:"show"},gs=e.forwardRef((t,n)=>{let{className:i,children:r,transitionClasses:s={},onEnter:o}=t,l=(0,ri.A)(t,ps);const c=(0,a.A)({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},l),u=(0,e.useCallback)((t,e)=>{ur(t),null==o||o(t,e)},[o]);return(0,Kn.jsx)(mr,(0,a.A)((0,a.A)({ref:n,addEndListener:lr},c),{},{onEnter:u,childRef:Ji(r),children:(t,n)=>e.cloneElement(r,(0,a.A)((0,a.A)({},n),{},{className:ai()("fade",i,r.props.className,ms[t],s[t])}))}))});gs.displayName="Fade";const vs=gs,ys=["className","bsPrefix","as"],xs=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="div"}=t,s=(0,ri.A)(t,ys);return i=di(i,"offcanvas-body"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});xs.displayName="OffcanvasBody";const _s=xs,bs=["bsPrefix","className","children","in","mountOnEnter","unmountOnExit","appear"],ws={[Gi]:"show",[Xi]:"show"},Ss=e.forwardRef((t,n)=>{let{bsPrefix:i,className:r,children:s,in:o=!1,mountOnEnter:l=!1,unmountOnExit:c=!1,appear:u=!1}=t,h=(0,ri.A)(t,bs);return i=di(i,"offcanvas"),(0,Kn.jsx)(mr,(0,a.A)((0,a.A)({ref:n,addEndListener:lr,in:o,mountOnEnter:l,unmountOnExit:c,appear:u},h),{},{childRef:Ji(s),children:(t,n)=>e.cloneElement(s,(0,a.A)((0,a.A)({},n),{},{className:ai()(r,s.props.className,(t===Gi||t===qi)&&"".concat(i,"-toggling"),ws[t])}))}))});Ss.displayName="OffcanvasToggling";const Ms=Ss,Es=e.createContext({onHide(){}});var Ts=n(173),As=n.n(Ts);const Cs=["className","variant","aria-label"],Ps={"aria-label":As().string,onClick:As().func,variant:As().oneOf(["white"])},Rs=e.forwardRef((t,e)=>{let{className:n,variant:i,"aria-label":r="Close"}=t,s=(0,ri.A)(t,Cs);return(0,Kn.jsx)("button",(0,a.A)({ref:e,type:"button",className:ai()("btn-close",i&&"btn-close-".concat(i),n),"aria-label":r},s))});Rs.displayName="CloseButton",Rs.propTypes=Ps;const Ls=Rs,Ns=["closeLabel","closeVariant","closeButton","onHide","children"],ks=e.forwardRef((t,n)=>{let{closeLabel:i="Close",closeVariant:r,closeButton:s=!1,onHide:o,children:l}=t,c=(0,ri.A)(t,Ns);const u=(0,e.useContext)(Es),h=Cr(()=>{null==u||u.onHide(),null==o||o()});return(0,Kn.jsxs)("div",(0,a.A)((0,a.A)({ref:n},c),{},{children:[l,s&&(0,Kn.jsx)(Ls,{"aria-label":i,variant:r,onClick:h})]}))});ks.displayName="AbstractModalHeader";const Os=ks,Ds=["bsPrefix","className","closeLabel","closeButton"],Is=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,closeLabel:r="Close",closeButton:s=!1}=t,o=(0,ri.A)(t,Ds);return n=di(n,"offcanvas-header"),(0,Kn.jsx)(Os,(0,a.A)((0,a.A)({ref:e},o),{},{className:ai()(i,n),closeLabel:r,closeButton:s}))});Is.displayName="OffcanvasHeader";const zs=Is,js=t=>e.forwardRef((e,n)=>(0,Kn.jsx)("div",(0,a.A)((0,a.A)({},e),{},{ref:n,className:ai()(e.className,t)}))),Us=["className","bsPrefix","as"],Fs=js("h5"),Bs=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r=Fs}=t,s=(0,ri.A)(t,Us);return i=di(i,"offcanvas-title"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});Bs.displayName="OffcanvasTitle";const Hs=Bs;var Vs=Function.prototype.bind.call(Function.prototype.call,[].slice);function Ws(t,e){return Vs(t.querySelectorAll(e))}function Gs(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Xs=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",qs=".sticky-top",Zs=".navbar-toggler";class Ys extends Zr{adjustAndStore(t,e,n){const i=e.style[t];e.dataset[t]=i,ji(e,{[t]:"".concat(parseFloat(ji(e,t))+n,"px")})}restore(t,e){const n=e.dataset[t];void 0!==n&&(delete e.dataset[t],ji(e,{[t]:n}))}setContainerStyle(t){super.setContainerStyle(t);const e=this.getElement();var n,i;if(i="modal-open",(n=e).classList?n.classList.add(i):function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")}(n,i)||("string"===typeof n.className?n.className=n.className+" "+i:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+i)),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Ws(e,Xs).forEach(e=>this.adjustAndStore(r,e,t.scrollBarWidth)),Ws(e,qs).forEach(e=>this.adjustAndStore(s,e,-t.scrollBarWidth)),Ws(e,Zs).forEach(e=>this.adjustAndStore(s,e,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const e=this.getElement();var n,i;i="modal-open",(n=e).classList?n.classList.remove(i):"string"===typeof n.className?n.className=Gs(n.className,i):n.setAttribute("class",Gs(n.className&&n.className.baseVal||"",i));const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Ws(e,Xs).forEach(t=>this.restore(r,t)),Ws(e,qs).forEach(t=>this.restore(s,t)),Ws(e,Zs).forEach(t=>this.restore(s,t))}}let Ks;function Js(t){return Ks||(Ks=new Ys(t)),Ks}const Qs=Ys,$s=["bsPrefix","className","children","aria-labelledby","placement","responsive","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager","renderStaticNode"];function ta(t){return(0,Kn.jsx)(Ms,(0,a.A)({},t))}function ea(t){return(0,Kn.jsx)(vs,(0,a.A)({},t))}const na=e.forwardRef((t,n)=>{let{bsPrefix:i,className:r,children:s,"aria-labelledby":o,placement:l="start",responsive:c,show:u=!1,backdrop:h=!0,keyboard:d=!0,scroll:f=!1,onEscapeKeyDown:p,onShow:m,onHide:g,container:v,autoFocus:y=!0,enforceFocus:x=!0,restoreFocus:_=!0,restoreFocusOptions:b,onEntered:w,onExit:S,onExiting:M,onEnter:E,onEntering:T,onExited:A,backdropClassName:C,manager:P,renderStaticNode:R=!1}=t,L=(0,ri.A)(t,$s);const N=(0,e.useRef)();i=di(i,"offcanvas");const[k,O]=(0,e.useState)(!1),D=Cr(g),I=jr(c||"xs","up");(0,e.useEffect)(()=>{O(c?u&&!I:u)},[u,c,I]);const z=(0,e.useMemo)(()=>({onHide:D}),[D]);const j=(0,e.useCallback)(t=>(0,Kn.jsx)("div",(0,a.A)((0,a.A)({},t),{},{className:ai()("".concat(i,"-backdrop"),C)})),[C,i]),U=t=>(0,Kn.jsx)("div",(0,a.A)((0,a.A)((0,a.A)({},t),L),{},{className:ai()(r,c?"".concat(i,"-").concat(c):i,"".concat(i,"-").concat(l)),"aria-labelledby":o,children:s}));return(0,Kn.jsxs)(Kn.Fragment,{children:[!k&&(c||R)&&U({}),(0,Kn.jsx)(Es.Provider,{value:z,children:(0,Kn.jsx)(fs,{show:k,ref:n,backdrop:h,container:v,keyboard:d,autoFocus:y,enforceFocus:x&&!f,restoreFocus:_,restoreFocusOptions:b,onEscapeKeyDown:p,onShow:m,onHide:D,onEnter:function(t){t&&(t.style.visibility="visible");for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];null==E||E(t,...n)},onEntering:T,onEntered:w,onExit:S,onExiting:M,onExited:function(t){t&&(t.style.visibility="");for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];null==A||A(...n)},manager:P||(f?(N.current||(N.current=new Qs({handleContainerOverflow:!1})),N.current):Js()),transition:ta,backdropTransition:ea,renderBackdrop:j,renderDialog:U})})]})});na.displayName="Offcanvas";const ia=Object.assign(na,{Body:_s,Header:zs,Title:Hs}),ra=["onHide"],sa=e.forwardRef((t,n)=>{let{onHide:i}=t,r=(0,ri.A)(t,ra);const s=(0,e.useContext)(Sr),o=Cr(()=>{null==s||null==s.onToggle||s.onToggle(),null==i||i()});return(0,Kn.jsx)(ia,(0,a.A)((0,a.A)({ref:n,show:!(null==s||!s.expanded)},r),{},{renderStaticNode:!0,onHide:o}))});sa.displayName="NavbarOffcanvas";const aa=sa,oa=["className","bsPrefix","as"],la=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="span"}=t,s=(0,ri.A)(t,oa);return i=di(i,"navbar-text"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});la.displayName="NavbarText";const ca=la,ua=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],ha=e.forwardRef((t,n)=>{const i=Ei(t,{expanded:"onToggle"}),{bsPrefix:r,expand:s=!0,variant:o="light",bg:l,fixed:c,sticky:u,className:h,as:d="nav",expanded:f,onToggle:p,onSelect:m,collapseOnSelect:g=!1}=i,v=(0,ri.A)(i,ua),y=di(r,"navbar"),x=(0,e.useCallback)(function(){null==m||m(...arguments),g&&f&&(null==p||p(!1))},[m,g,f,p]);void 0===v.role&&"nav"!==d&&(v.role="navigation");let _="".concat(y,"-expand");"string"===typeof s&&(_="".concat(_,"-").concat(s));const b=(0,e.useMemo)(()=>({onToggle:()=>null==p?void 0:p(!f),bsPrefix:y,expanded:!!f,expand:s}),[y,f,s,p]);return(0,Kn.jsx)(Sr.Provider,{value:b,children:(0,Kn.jsx)(_i.Provider,{value:x,children:(0,Kn.jsx)(d,(0,a.A)((0,a.A)({ref:n},v),{},{className:ai()(h,y,s&&_,o&&"".concat(y,"-").concat(o),l&&"bg-".concat(l),u&&"sticky-".concat(u),c&&"fixed-".concat(c))}))})})});ha.displayName="Navbar";const da=Object.assign(ha,{Brand:Li,Collapse:Tr,Offcanvas:aa,Text:ca,Toggle:Lr});function fa(){const[,t]=(0,e.useReducer)(t=>t+1,0);return t}const pa=e.createContext(null);pa.displayName="NavContext";const ma=pa,ga=e.createContext(null),va=["as","disabled"];function ya(t){let{tagName:e,disabled:n,href:i,target:r,rel:s,role:a,onClick:o,tabIndex:l=0,type:c}=t;e||(e=null!=i||null!=r||null!=s?"a":"button");const u={tagName:e};if("button"===e)return[{type:c||"button",disabled:n},u];const h=t=>{(n||"a"===e&&function(t){return!t||"#"===t.trim()}(i))&&t.preventDefault(),n?t.stopPropagation():null==o||o(t)};return"a"===e&&(i||(i="#"),n&&(i=void 0)),[{role:null!=a?a:"button",disabled:void 0,tabIndex:n?void 0:l,href:i,target:"a"===e?r:void 0,"aria-disabled":n||void 0,rel:"a"===e?s:void 0,onClick:h,onKeyDown:t=>{" "===t.key&&(t.preventDefault(),h(t))}},u]}const xa=e.forwardRef((t,e)=>{let{as:n,disabled:i}=t,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,va);const[s,{tagName:a}]=ya(Object.assign({tagName:n,disabled:i},r));return(0,Kn.jsx)(a,Object.assign({},r,s,{ref:e}))});xa.displayName="Button";const _a=xa,ba=["as","active","eventKey"];function wa(t){let{key:n,onClick:i,active:r,id:s,role:a,disabled:o}=t;const l=(0,e.useContext)(_i),c=(0,e.useContext)(ma),u=(0,e.useContext)(ga);let h=r;const d={role:a};if(c){a||"tablist"!==c.role||(d.role="tab");const t=c.getControllerId(null!=n?n:null),e=c.getControlledId(null!=n?n:null);d[Xr("event-key")]=n,d.id=t||s,h=null==r&&null!=n?c.activeKey===n:r,!h&&(null!=u&&u.unmountOnExit||null!=u&&u.mountOnEnter)||(d["aria-controls"]=e)}return"tab"===d.role&&(d["aria-selected"]=h,h||(d.tabIndex=-1),o&&(d.tabIndex=-1,d["aria-disabled"]=!0)),d.onClick=Gr(t=>{o||(null==i||i(t),null!=n&&l&&!t.isPropagationStopped()&&l(n,t))}),[d,{isActive:h}]}const Sa=e.forwardRef((t,e)=>{let{as:n=_a,active:i,eventKey:r}=t,s=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,ba);const[a,o]=wa(Object.assign({key:xi(r,s.href),active:i},s));return a[Xr("active")]=o.isActive,(0,Kn.jsx)(n,Object.assign({},s,a,{ref:e}))});Sa.displayName="NavItem";const Ma=Sa,Ea=["as","onSelect","activeKey","role","onKeyDown"];const Ta=()=>{},Aa=Xr("event-key"),Ca=e.forwardRef((t,n)=>{let{as:i="div",onSelect:r,activeKey:s,role:a,onKeyDown:o}=t,l=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,Ea);const c=fa(),u=(0,e.useRef)(!1),h=(0,e.useContext)(_i),d=(0,e.useContext)(ga);let f,p;d&&(a=a||"tablist",s=d.activeKey,f=d.getControlledId,p=d.getControllerId);const m=(0,e.useRef)(null),g=t=>{const e=m.current;if(!e)return null;const n=Ws(e,"[".concat(Aa,"]:not([aria-disabled=true])")),i=e.querySelector("[aria-selected=true]");if(!i||i!==document.activeElement)return null;const r=n.indexOf(i);if(-1===r)return null;let s=r+t;return s>=n.length&&(s=0),s<0&&(s=n.length-1),n[s]},v=(t,e)=>{null!=t&&(null==r||r(t,e),null==h||h(t,e))};(0,e.useEffect)(()=>{if(m.current&&u.current){const t=m.current.querySelector("[".concat(Aa,"][aria-selected=true]"));null==t||t.focus()}u.current=!1});const y=$r(n,m);return(0,Kn.jsx)(_i.Provider,{value:v,children:(0,Kn.jsx)(ma.Provider,{value:{role:a,activeKey:xi(s),getControlledId:f||Ta,getControllerId:p||Ta},children:(0,Kn.jsx)(i,Object.assign({},l,{onKeyDown:t=>{if(null==o||o(t),!d)return;let e;switch(t.key){case"ArrowLeft":case"ArrowUp":e=g(-1);break;case"ArrowRight":case"ArrowDown":e=g(1);break;default:return}var n;e&&(t.preventDefault(),v(e.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,t),u.current=!0,c())},ref:y,role:a}))})})});Ca.displayName="Nav";const Pa=Object.assign(Ca,{Item:Ma}),Ra=e.createContext(null);Ra.displayName="CardHeaderContext";const La=Ra,Na=["className","bsPrefix","as"],ka=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="div"}=t,s=(0,ri.A)(t,Na);return i=di(i,"nav-item"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});ka.displayName="NavItem";const Oa=ka;new WeakMap;const Da=["onKeyDown"];const Ia=e.forwardRef((t,e)=>{let{onKeyDown:n}=t,i=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,Da);const[r]=ya(Object.assign({tagName:"a"},i)),s=Gr(t=>{r.onKeyDown(t),null==n||n(t)});return(a=i.href)&&"#"!==a.trim()&&"button"!==i.role?(0,Kn.jsx)("a",Object.assign({ref:e},i,{onKeyDown:n})):(0,Kn.jsx)("a",Object.assign({ref:e},i,r,{onKeyDown:s}));var a});Ia.displayName="Anchor";const za=Ia,ja=["bsPrefix","className","as","active","eventKey","disabled"],Ua=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,as:r=za,active:s,eventKey:o,disabled:l=!1}=t,c=(0,ri.A)(t,ja);n=di(n,"nav-link");const[u,h]=wa((0,a.A)({key:xi(o,c.href),active:s,disabled:l},c));return(0,Kn.jsx)(r,(0,a.A)((0,a.A)((0,a.A)({},c),u),{},{ref:e,disabled:l,className:ai()(i,n,l&&"disabled",h.isActive&&"active")}))});Ua.displayName="NavLink";const Fa=Ua,Ba=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],Ha=e.forwardRef((t,n)=>{const i=Ei(t,{activeKey:"onSelect"}),{as:r="div",bsPrefix:s,variant:o,fill:l=!1,justify:c=!1,navbar:u,navbarScroll:h,className:d,activeKey:f}=i,p=(0,ri.A)(i,Ba),m=di(s,"nav");let g,v,y=!1;const x=(0,e.useContext)(Sr),_=(0,e.useContext)(La);return x?(g=x.bsPrefix,y=null==u||u):_&&({cardHeaderBsPrefix:v}=_),(0,Kn.jsx)(Pa,(0,a.A)({as:r,ref:n,activeKey:f,className:ai()(d,{[m]:!y,["".concat(g,"-nav")]:y,["".concat(g,"-nav-scroll")]:y&&h,["".concat(v,"-").concat(o)]:!!v,["".concat(m,"-").concat(o)]:!!o,["".concat(m,"-fill")]:l,["".concat(m,"-justified")]:c})},p))});Ha.displayName="Nav";const Va=Object.assign(Ha,{Item:Oa,Link:Fa});function Wa(t,n,i){const r=(0,e.useRef)(void 0!==t),[s,a]=(0,e.useState)(n),o=void 0!==t,l=r.current;return r.current=o,!o&&l&&s!==n&&a(n),[o?t:s,(0,e.useCallback)(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[r,...s]=e;let o=null==i?void 0:i(r,...s);return a(r),o},[i])]}const Ga=e.createContext(null);var Xa=Object.prototype.hasOwnProperty;function qa(t,e,n){for(n of t.keys())if(Za(n,e))return n}function Za(t,e){var n,i,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((i=t.length)===e.length)for(;i--&&Za(t[i],e[i]););return-1===i}if(n===Set){if(t.size!==e.size)return!1;for(i of t){if((r=i)&&"object"===typeof r&&!(r=qa(e,r)))return!1;if(!e.has(r))return!1}return!0}if(n===Map){if(t.size!==e.size)return!1;for(i of t){if((r=i[0])&&"object"===typeof r&&!(r=qa(e,r)))return!1;if(!Za(i[1],e.get(r)))return!1}return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((i=t.byteLength)===e.byteLength)for(;i--&&t.getInt8(i)===e.getInt8(i););return-1===i}if(ArrayBuffer.isView(t)){if((i=t.byteLength)===e.byteLength)for(;i--&&t[i]===e[i];);return-1===i}if(!n||"object"===typeof t){for(n in i=0,t){if(Xa.call(t,n)&&++i&&!Xa.call(e,n))return!1;if(!(n in e)||!Za(t[n],e[n]))return!1}return Object.keys(e).length===i}}return t!==t&&e!==e}const Ya=function(t){const n=Br();return[t[0],(0,e.useCallback)(e=>{if(n())return t[1](e)},[n,t[1]])]};function Ka(t){return t.split("-")[0]}function Ja(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Qa(t){return t instanceof Ja(t).Element||t instanceof Element}function $a(t){return t instanceof Ja(t).HTMLElement||t instanceof HTMLElement}function to(t){return"undefined"!==typeof ShadowRoot&&(t instanceof Ja(t).ShadowRoot||t instanceof ShadowRoot)}var eo=Math.max,no=Math.min,io=Math.round;function ro(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function so(){return!/^((?!chrome|android).)*safari/i.test(ro())}function ao(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&$a(t)&&(r=t.offsetWidth>0&&io(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&io(i.height)/t.offsetHeight||1);var a=(Qa(t)?Ja(t):window).visualViewport,o=!so()&&n,l=(i.left+(o&&a?a.offsetLeft:0))/r,c=(i.top+(o&&a?a.offsetTop:0))/s,u=i.width/r,h=i.height/s;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function oo(t){var e=ao(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function lo(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&to(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function co(t){return t?(t.nodeName||"").toLowerCase():null}function uo(t){return Ja(t).getComputedStyle(t)}function ho(t){return["table","td","th"].indexOf(co(t))>=0}function fo(t){return((Qa(t)?t.ownerDocument:t.document)||window.document).documentElement}function po(t){return"html"===co(t)?t:t.assignedSlot||t.parentNode||(to(t)?t.host:null)||fo(t)}function mo(t){return $a(t)&&"fixed"!==uo(t).position?t.offsetParent:null}function go(t){for(var e=Ja(t),n=mo(t);n&&ho(n)&&"static"===uo(n).position;)n=mo(n);return n&&("html"===co(n)||"body"===co(n)&&"static"===uo(n).position)?e:n||function(t){var e=/firefox/i.test(ro());if(/Trident/i.test(ro())&&$a(t)&&"fixed"===uo(t).position)return null;var n=po(t);for(to(n)&&(n=n.host);$a(n)&&["html","body"].indexOf(co(n))<0;){var i=uo(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function vo(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function yo(t,e,n){return eo(t,no(e,n))}function xo(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function _o(t,e){return e.reduce(function(e,n){return e[n]=t,e},{})}var bo="top",wo="bottom",So="right",Mo="left",Eo="auto",To=[bo,wo,So,Mo],Ao="start",Co="end",Po="viewport",Ro="popper",Lo=To.reduce(function(t,e){return t.concat([e+"-"+Ao,e+"-"+Co])},[]),No=[].concat(To,[Eo]).reduce(function(t,e){return t.concat([e,e+"-"+Ao,e+"-"+Co])},[]),ko=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const Oo={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,o=Ka(n.placement),l=vo(o),c=[Mo,So].indexOf(o)>=0?"height":"width";if(s&&a){var u=function(t,e){return xo("number"!==typeof(t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:_o(t,To))}(r.padding,n),h=oo(s),d="y"===l?bo:Mo,f="y"===l?wo:So,p=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=go(s),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=p/2-m/2,x=u[d],_=v-h[c]-u[f],b=v/2-h[c]/2+y,w=yo(x,b,_),S=l;n.modifiersData[i]=((e={})[S]=w,e.centerOffset=w-b,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!==typeof i||(i=e.elements.popper.querySelector(i)))&&lo(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Do(t){return t.split("-")[1]}var Io={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zo(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,a=t.offsets,o=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,d=a.x,f=void 0===d?0:d,p=a.y,m=void 0===p?0:p,g="function"===typeof u?u({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),x=Mo,_=bo,b=window;if(c){var w=go(n),S="clientHeight",M="clientWidth";if(w===Ja(n)&&"static"!==uo(w=fo(n)).position&&"absolute"===o&&(S="scrollHeight",M="scrollWidth"),r===bo||(r===Mo||r===So)&&s===Co)_=wo,m-=(h&&w===b&&b.visualViewport?b.visualViewport.height:w[S])-i.height,m*=l?1:-1;if(r===Mo||(r===bo||r===wo)&&s===Co)x=So,f-=(h&&w===b&&b.visualViewport?b.visualViewport.width:w[M])-i.width,f*=l?1:-1}var E,T=Object.assign({position:o},c&&Io),A=!0===u?function(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:io(n*r)/r||0,y:io(i*r)/r||0}}({x:f,y:m},Ja(n)):{x:f,y:m};return f=A.x,m=A.y,l?Object.assign({},T,((E={})[_]=y?"0":"",E[x]=v?"0":"",E.transform=(b.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",E)):Object.assign({},T,((e={})[_]=y?m+"px":"",e[x]=v?f+"px":"",e.transform="",e))}const jo={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,a=void 0===s||s,o=n.roundOffsets,l=void 0===o||o,c={placement:Ka(e.placement),variation:Do(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,zo(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,zo(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var Uo={passive:!0};const Fo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,a=i.resize,o=void 0===a||a,l=Ja(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(t){t.addEventListener("scroll",n.update,Uo)}),o&&l.addEventListener("resize",n.update,Uo),function(){s&&c.forEach(function(t){t.removeEventListener("scroll",n.update,Uo)}),o&&l.removeEventListener("resize",n.update,Uo)}},data:{}};var Bo={left:"right",right:"left",bottom:"top",top:"bottom"};function Ho(t){return t.replace(/left|right|bottom|top/g,function(t){return Bo[t]})}var Vo={start:"end",end:"start"};function Wo(t){return t.replace(/start|end/g,function(t){return Vo[t]})}function Go(t){var e=Ja(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Xo(t){return ao(fo(t)).left+Go(t).scrollLeft}function qo(t){var e=uo(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Zo(t){return["html","body","#document"].indexOf(co(t))>=0?t.ownerDocument.body:$a(t)&&qo(t)?t:Zo(po(t))}function Yo(t,e){var n;void 0===e&&(e=[]);var i=Zo(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=Ja(i),a=r?[s].concat(s.visualViewport||[],qo(i)?i:[]):i,o=e.concat(a);return r?o:o.concat(Yo(po(a)))}function Ko(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Jo(t,e,n){return e===Po?Ko(function(t,e){var n=Ja(t),i=fo(t),r=n.visualViewport,s=i.clientWidth,a=i.clientHeight,o=0,l=0;if(r){s=r.width,a=r.height;var c=so();(c||!c&&"fixed"===e)&&(o=r.offsetLeft,l=r.offsetTop)}return{width:s,height:a,x:o+Xo(t),y:l}}(t,n)):Qa(e)?function(t,e){var n=ao(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Ko(function(t){var e,n=fo(t),i=Go(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=eo(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=eo(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-i.scrollLeft+Xo(t),l=-i.scrollTop;return"rtl"===uo(r||n).direction&&(o+=eo(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}(fo(t)))}function Qo(t,e,n,i){var r="clippingParents"===e?function(t){var e=Yo(po(t)),n=["absolute","fixed"].indexOf(uo(t).position)>=0&&$a(t)?go(t):t;return Qa(n)?e.filter(function(t){return Qa(t)&&lo(t,n)&&"body"!==co(t)}):[]}(t):[].concat(e),s=[].concat(r,[n]),a=s[0],o=s.reduce(function(e,n){var r=Jo(t,n,i);return e.top=eo(r.top,e.top),e.right=no(r.right,e.right),e.bottom=no(r.bottom,e.bottom),e.left=eo(r.left,e.left),e},Jo(t,a,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function $o(t){var e,n=t.reference,i=t.element,r=t.placement,s=r?Ka(r):null,a=r?Do(r):null,o=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(s){case bo:e={x:o,y:n.y-i.height};break;case wo:e={x:o,y:n.y+n.height};break;case So:e={x:n.x+n.width,y:l};break;case Mo:e={x:n.x-i.width,y:l};break;default:e={x:n.x,y:n.y}}var c=s?vo(s):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case Ao:e[c]=e[c]-(n[u]/2-i[u]/2);break;case Co:e[c]=e[c]+(n[u]/2-i[u]/2)}}return e}function tl(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,s=n.strategy,a=void 0===s?t.strategy:s,o=n.boundary,l=void 0===o?"clippingParents":o,c=n.rootBoundary,u=void 0===c?Po:c,h=n.elementContext,d=void 0===h?Ro:h,f=n.altBoundary,p=void 0!==f&&f,m=n.padding,g=void 0===m?0:m,v=xo("number"!==typeof g?g:_o(g,To)),y=d===Ro?"reference":Ro,x=t.rects.popper,_=t.elements[p?y:d],b=Qo(Qa(_)?_:_.contextElement||fo(t.elements.popper),l,u,a),w=ao(t.elements.reference),S=$o({reference:w,element:x,strategy:"absolute",placement:r}),M=Ko(Object.assign({},x,S)),E=d===Ro?M:w,T={top:b.top-E.top+v.top,bottom:E.bottom-b.bottom+v.bottom,left:b.left-E.left+v.left,right:E.right-b.right+v.right},A=t.modifiersData.offset;if(d===Ro&&A){var C=A[r];Object.keys(T).forEach(function(t){var e=[So,wo].indexOf(t)>=0?1:-1,n=[bo,wo].indexOf(t)>=0?"y":"x";T[t]+=C[n]*e})}return T}const el={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,a=n.altAxis,o=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=e.options.placement,v=Ka(g),y=l||(v===g||!p?[Ho(g)]:function(t){if(Ka(t)===Eo)return[];var e=Ho(t);return[Wo(t),e,Wo(e)]}(g)),x=[g].concat(y).reduce(function(t,n){return t.concat(Ka(n)===Eo?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?No:l,u=Do(i),h=u?o?Lo:Lo.filter(function(t){return Do(t)===u}):To,d=h.filter(function(t){return c.indexOf(t)>=0});0===d.length&&(d=h);var f=d.reduce(function(e,n){return e[n]=tl(t,{placement:n,boundary:r,rootBoundary:s,padding:a})[Ka(n)],e},{});return Object.keys(f).sort(function(t,e){return f[t]-f[e]})}(e,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)},[]),_=e.rects.reference,b=e.rects.popper,w=new Map,S=!0,M=x[0],E=0;E<x.length;E++){var T=x[E],A=Ka(T),C=Do(T)===Ao,P=[bo,wo].indexOf(A)>=0,R=P?"width":"height",L=tl(e,{placement:T,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),N=P?C?So:Mo:C?wo:bo;_[R]>b[R]&&(N=Ho(N));var k=Ho(N),O=[];if(s&&O.push(L[A]<=0),o&&O.push(L[N]<=0,L[k]<=0),O.every(function(t){return t})){M=T,S=!1;break}w.set(T,O)}if(S)for(var D=function(t){var e=x.find(function(e){var n=w.get(e);if(n)return n.slice(0,t).every(function(t){return t})});if(e)return M=e,"break"},I=p?3:1;I>0;I--){if("break"===D(I))break}e.placement!==M&&(e.modifiersData[i]._skip=!0,e.placement=M,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function nl(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function il(t){return[bo,So,wo,Mo].some(function(e){return t[e]>=0})}const rl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=void 0===r?[0,0]:r,a=No.reduce(function(t,n){return t[n]=function(t,e,n){var i=Ka(t),r=[Mo,bo].indexOf(i)>=0?-1:1,s="function"===typeof n?n(Object.assign({},e,{placement:t})):n,a=s[0],o=s[1];return a=a||0,o=(o||0)*r,[Mo,So].indexOf(i)>=0?{x:o,y:a}:{x:a,y:o}}(n,e.rects,s),t},{}),o=a[e.placement],l=o.x,c=o.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=a}};const sl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=void 0===r||r,a=n.altAxis,o=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,m=void 0===p?0:p,g=tl(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=Ka(e.placement),y=Do(e.placement),x=!y,_=vo(v),b="x"===_?"y":"x",w=e.modifiersData.popperOffsets,S=e.rects.reference,M=e.rects.popper,E="function"===typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,T="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),A=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,C={x:0,y:0};if(w){if(s){var P,R="y"===_?bo:Mo,L="y"===_?wo:So,N="y"===_?"height":"width",k=w[_],O=k+g[R],D=k-g[L],I=f?-M[N]/2:0,z=y===Ao?S[N]:M[N],j=y===Ao?-M[N]:-S[N],U=e.elements.arrow,F=f&&U?oo(U):{width:0,height:0},B=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=B[R],V=B[L],W=yo(0,S[N],F[N]),G=x?S[N]/2-I-W-H-T.mainAxis:z-W-H-T.mainAxis,X=x?-S[N]/2+I+W+V+T.mainAxis:j+W+V+T.mainAxis,q=e.elements.arrow&&go(e.elements.arrow),Z=q?"y"===_?q.clientTop||0:q.clientLeft||0:0,Y=null!=(P=null==A?void 0:A[_])?P:0,K=k+X-Y,J=yo(f?no(O,k+G-Y-Z):O,k,f?eo(D,K):D);w[_]=J,C[_]=J-k}if(o){var Q,$="x"===_?bo:Mo,tt="x"===_?wo:So,et=w[b],nt="y"===b?"height":"width",it=et+g[$],rt=et-g[tt],st=-1!==[bo,Mo].indexOf(v),at=null!=(Q=null==A?void 0:A[b])?Q:0,ot=st?it:et-S[nt]-M[nt]-at+T.altAxis,lt=st?et+S[nt]+M[nt]-at-T.altAxis:rt,ct=f&&st?function(t,e,n){var i=yo(t,e,n);return i>n?n:i}(ot,et,lt):yo(f?ot:it,et,f?lt:rt);w[b]=ct,C[b]=ct-et}e.modifiersData[i]=C}},requiresIfExists:["offset"]};function al(t,e,n){void 0===n&&(n=!1);var i=$a(e),r=$a(e)&&function(t){var e=t.getBoundingClientRect(),n=io(e.width)/t.offsetWidth||1,i=io(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),s=fo(e),a=ao(t,r,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==co(e)||qo(s))&&(o=function(t){return t!==Ja(t)&&$a(t)?{scrollLeft:(e=t).scrollLeft,scrollTop:e.scrollTop}:Go(t);var e}(e)),$a(e)?((l=ao(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Xo(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function ol(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}}),i.push(t)}return t.forEach(function(t){e.set(t.name,t)}),t.forEach(function(t){n.has(t.name)||r(t)}),i}function ll(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}var cl={placement:"bottom",modifiers:[],strategy:"absolute"};function ul(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(t){return!(t&&"function"===typeof t.getBoundingClientRect)})}function hl(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,s=void 0===r?cl:r;return function(t,e,n){void 0===n&&(n=s);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},cl,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],o=!1,l={state:r,setOptions:function(n){var o="function"===typeof n?n(r.options):n;c(),r.options=Object.assign({},s,r.options,o),r.scrollParents={reference:Qa(t)?Yo(t):t.contextElement?Yo(t.contextElement):[],popper:Yo(e)};var u=function(t){var e=ol(t);return ko.reduce(function(t,n){return t.concat(e.filter(function(t){return t.phase===n}))},[])}(function(t){var e=t.reduce(function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(i,r.options.modifiers)));return r.orderedModifiers=u.filter(function(t){return t.enabled}),r.orderedModifiers.forEach(function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,s=t.effect;if("function"===typeof s){var o=s({state:r,name:e,instance:l,options:i}),c=function(){};a.push(o||c)}}),l.update()},forceUpdate:function(){if(!o){var t=r.elements,e=t.reference,n=t.popper;if(ul(e,n)){r.rects={reference:al(e,go(n),"fixed"===r.options.strategy),popper:oo(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach(function(t){return r.modifiersData[t.name]=Object.assign({},t.data)});for(var i=0;i<r.orderedModifiers.length;i++)if(!0!==r.reset){var s=r.orderedModifiers[i],a=s.fn,c=s.options,u=void 0===c?{}:c,h=s.name;"function"===typeof a&&(r=a({state:r,options:u,name:h,instance:l})||r)}else r.reset=!1,i=-1}}},update:ll(function(){return new Promise(function(t){l.forceUpdate(),t(r)})}),destroy:function(){c(),o=!0}};if(!ul(t,e))return l;function c(){a.forEach(function(t){return t()}),a=[]}return l.setOptions(n).then(function(t){!o&&n.onFirstUpdate&&n.onFirstUpdate(t)}),l}}const dl=hl({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,a=tl(e,{elementContext:"reference"}),o=tl(e,{altBoundary:!0}),l=nl(a,i),c=nl(o,r,s),u=il(l),h=il(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=$o({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},jo,Fo,rl,el,sl,Oo]}),fl=["enabled","placement","strategy","modifiers"];const pl={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},ml={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:t=>{let{state:e}=t;return()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const e=(t.getAttribute("aria-describedby")||"").split(",").filter(t=>t.trim()!==n.id);e.length?t.setAttribute("aria-describedby",e.join(",")):t.removeAttribute("aria-describedby")}}},fn:t=>{let{state:e}=t;var n;const{popper:i,reference:r}=e.elements,s=null==(n=i.getAttribute("role"))?void 0:n.toLowerCase();if(i.id&&"tooltip"===s&&"setAttribute"in r){const t=r.getAttribute("aria-describedby");if(t&&-1!==t.split(",").indexOf(i.id))return;r.setAttribute("aria-describedby",t?"".concat(t,",").concat(i.id):i.id)}}},gl=[];const vl=function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enabled:r=!0,placement:s="bottom",strategy:a="absolute",modifiers:o=gl}=i,l=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(i,fl);const c=(0,e.useRef)(o),u=(0,e.useRef)(),h=(0,e.useCallback)(()=>{var t;null==(t=u.current)||t.update()},[]),d=(0,e.useCallback)(()=>{var t;null==(t=u.current)||t.forceUpdate()},[]),[f,p]=Ya((0,e.useState)({placement:s,update:h,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),m=(0,e.useMemo)(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:t=>{let{state:e}=t;const n={},i={};Object.keys(e.elements).forEach(t=>{n[t]=e.styles[t],i[t]=e.attributes[t]}),p({state:e,styles:n,attributes:i,update:h,forceUpdate:d,placement:e.placement})}}),[h,d,p]),g=(0,e.useMemo)(()=>(Za(c.current,o)||(c.current=o),c.current),[o]);return(0,e.useEffect)(()=>{u.current&&r&&u.current.setOptions({placement:s,strategy:a,modifiers:[...g,m,pl]})},[a,s,m,r,g]),(0,e.useEffect)(()=>{if(r&&null!=t&&null!=n)return u.current=dl(t,n,Object.assign({},l,{placement:s,strategy:a,modifiers:[...g,ml,m]})),()=>{null!=u.current&&(u.current.destroy(),u.current=void 0,p(t=>Object.assign({},t,{attributes:{},styles:{popper:{}}})))}},[r,t,n]),f};var yl=n(440),xl=n.n(yl);const _l=()=>{};const bl=t=>t&&("current"in t?t.current:t),wl={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const Sl=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_l,{disabled:i,clickTrigger:r="click"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,e.useRef)(!1),a=(0,e.useRef)(!1),o=(0,e.useCallback)(e=>{const n=bl(t);var i;xl()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!n||!!((i=e).metaKey||i.altKey||i.ctrlKey||i.shiftKey)||!function(t){return 0===t.button}(e)||!!Fr(n,e.target)||a.current,a.current=!1},[t]),l=Gr(e=>{const n=bl(t);n&&Fr(n,e.target)?a.current=!0:a.current=!1}),c=Gr(t=>{s.current||n(t)});(0,e.useEffect)(()=>{var e,n;if(i||null==t)return;const s=Ni(bl(t)),a=s.defaultView||window;let u=null!=(e=a.event)?e:null==(n=a.parent)?void 0:n.event,h=null;wl[r]&&(h=rr(s,wl[r],l,!0));const d=rr(s,r,o,!0),f=rr(s,r,t=>{t!==u?c(t):u=void 0});let p=[];return"ontouchstart"in s.documentElement&&(p=[].slice.call(s.body.children).map(t=>rr(t,"mousemove",_l))),()=>{null==h||h(),d(),f(),p.forEach(t=>t())}},[t,i,r,o,l,c])};function Ml(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function El(t){let{enabled:e,enableEvents:n,placement:i,flip:r,offset:s,fixed:a,containerPadding:o,arrowElement:l,popperConfig:c={}}=t;var u,h,d,f,p;const m=function(t){const e={};return Array.isArray(t)?(null==t||t.forEach(t=>{e[t.name]=t}),e):t||e}(c.modifiers);return Object.assign({},c,{placement:i,enabled:e,strategy:a?"fixed":c.strategy,modifiers:Ml(Object.assign({},m,{eventListeners:{enabled:n,options:null==(u=m.eventListeners)?void 0:u.options},preventOverflow:Object.assign({},m.preventOverflow,{options:o?Object.assign({padding:o},null==(h=m.preventOverflow)?void 0:h.options):null==(d=m.preventOverflow)?void 0:d.options}),offset:{options:Object.assign({offset:s},null==(f=m.offset)?void 0:f.options)},arrow:Object.assign({},m.arrow,{enabled:!!l,options:Object.assign({},null==(p=m.arrow)?void 0:p.options,{element:l})}),flip:Object.assign({enabled:!!r},m.flip)}))})}const Tl=["children","usePopper"];const Al=()=>{};function Cl(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,e.useContext)(Ga),[i,r]=(0,e.useState)(null),s=(0,e.useRef)(!1),{flip:a,offset:o,rootCloseEvent:l,fixed:c=!1,placement:u,popperConfig:h={},enableEventListeners:d=!0,usePopper:f=!!n}=t,p=null==(null==n?void 0:n.show)?!!t.show:n.show;p&&!s.current&&(s.current=!0);const{placement:m,setMenu:g,menuElement:v,toggleElement:y}=n||{},x=vl(y,v,El({placement:u||m||"bottom-start",enabled:f,enableEvents:null==d?p:d,offset:o,flip:a,fixed:c,arrowElement:i,popperConfig:h})),_=Object.assign({ref:g||Al,"aria-labelledby":null==y?void 0:y.id},x.attributes.popper,{style:x.styles.popper}),b={show:p,placement:m,hasShown:s.current,toggle:null==n?void 0:n.toggle,popper:f?x:null,arrowProps:f?Object.assign({ref:r},x.attributes.arrow,{style:x.styles.arrow}):{}};return Sl(v,t=>{null==n||n.toggle(!1,t)},{clickTrigger:l,disabled:!p}),[_,b]}function Pl(t){let{children:e,usePopper:n=!0}=t,i=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,Tl);const[r,s]=Cl(Object.assign({},i,{usePopper:n}));return(0,Kn.jsx)(Kn.Fragment,{children:e(r,s)})}Pl.displayName="DropdownMenu";const Rl=Pl,Ll={prefix:String(Math.round(1e10*Math.random())),current:0},Nl=e.createContext(Ll),kl=e.createContext(!1);Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);let Ol=new WeakMap;function Dl(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,e.useContext)(Nl),i=(0,e.useRef)(null);if(null===i.current&&!t){var r,s;let t=null===(s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===s||null===(r=s.ReactCurrentOwner)||void 0===r?void 0:r.current;if(t){let e=Ol.get(t);null==e?Ol.set(t,{id:n.current,state:t.memoizedState}):t.memoizedState!==e.state&&(n.current=e.id,Ol.delete(t))}i.current=++n.current}return i.current}const Il="function"===typeof e.useId?function(t){let n=e.useId(),[i]=(0,e.useState)("function"===typeof e.useSyncExternalStore?e.useSyncExternalStore(Ul,zl,jl):(0,e.useContext)(kl)),r=i?"react-aria":"react-aria".concat(Ll.prefix);return t||"".concat(r,"-").concat(n)}:function(t){let n=(0,e.useContext)(Nl),i=Dl(!!t),r="react-aria".concat(n.prefix);return t||"".concat(r,"-").concat(i)};function zl(){return!1}function jl(){return!0}function Ul(t){return()=>{}}const Fl=t=>{var e;return"menu"===(null==(e=t.getAttribute("role"))?void 0:e.toLowerCase())},Bl=()=>{};function Hl(){const t=Il(),{show:n=!1,toggle:i=Bl,setToggle:r,menuElement:s}=(0,e.useContext)(Ga)||{},a=(0,e.useCallback)(t=>{i(!n,t)},[n,i]),o={id:t,ref:r||Bl,onClick:a,"aria-expanded":!!n};return s&&Fl(s)&&(o["aria-haspopup"]=!0),[o,{show:n,toggle:i}]}function Vl(t){let{children:e}=t;const[n,i]=Hl();return(0,Kn.jsx)(Kn.Fragment,{children:e(n,i)})}Vl.displayName="DropdownToggle";const Wl=Vl,Gl=["eventKey","disabled","onClick","active","as"];function Xl(t){let{key:n,href:i,active:r,disabled:s,onClick:a}=t;const o=(0,e.useContext)(_i),l=(0,e.useContext)(ma),{activeKey:c}=l||{},u=xi(n,i),h=null==r&&null!=n?xi(c)===u:r;return[{onClick:Gr(t=>{s||(null==a||a(t),o&&!t.isPropagationStopped()&&o(u,t))}),"aria-disabled":s||void 0,"aria-selected":h,[Xr("dropdown-item")]:""},{isActive:h}]}const ql=e.forwardRef((t,e)=>{let{eventKey:n,disabled:i,onClick:r,active:s,as:a=_a}=t,o=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,Gl);const[l]=Xl({key:n,href:o.href,disabled:i,onClick:r,active:s});return(0,Kn.jsx)(a,Object.assign({},o,{ref:e},l))});ql.displayName="DropdownItem";const Zl=ql;function Yl(){const t=fa(),n=(0,e.useRef)(null),i=(0,e.useCallback)(e=>{n.current=e,t()},[t]);return[n,i]}function Kl(t){let{defaultShow:n,show:i,onSelect:r,onToggle:s,itemSelector:a="* [".concat(Xr("dropdown-item"),"]"),focusFirstItemOnShow:o,placement:l="bottom-start",children:c}=t;const u=Kr(),[h,d]=Wa(i,n,s),[f,p]=Yl(),m=f.current,[g,v]=Yl(),y=g.current,x=Vr(h),_=(0,e.useRef)(null),b=(0,e.useRef)(!1),w=(0,e.useContext)(_i),S=(0,e.useCallback)(function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==e?void 0:e.type;d(t,{originalEvent:e,source:n})},[d]),M=Gr((t,e)=>{null==r||r(t,e),S(!1,e,"select"),e.isPropagationStopped()||null==w||w(t,e)}),E=(0,e.useMemo)(()=>({toggle:S,placement:l,show:h,menuElement:m,toggleElement:y,setMenu:p,setToggle:v}),[S,l,h,m,y,p,v]);m&&x&&!h&&(b.current=m.contains(m.ownerDocument.activeElement));const T=Gr(()=>{y&&y.focus&&y.focus()}),A=Gr(()=>{const t=_.current;let e=o;if(null==e&&(e=!(!f.current||!Fl(f.current))&&"keyboard"),!1===e||"keyboard"===e&&!/^key.+$/.test(t))return;const n=Ws(f.current,a)[0];n&&n.focus&&n.focus()});(0,e.useEffect)(()=>{h?A():b.current&&(b.current=!1,T())},[h,b,T,A]),(0,e.useEffect)(()=>{_.current=null});const C=(t,e)=>{if(!f.current)return null;const n=Ws(f.current,a);let i=n.indexOf(t)+e;return i=Math.max(0,Math.min(i,n.length)),n[i]};return function(t,n,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=Gr(i);(0,e.useEffect)(()=>{const e="function"===typeof t?t():t;return e.addEventListener(n,s,r),()=>e.removeEventListener(n,s,r)},[t])}((0,e.useCallback)(()=>u.document,[u]),"keydown",t=>{var e,n;const{key:i}=t,r=t.target,s=null==(e=f.current)?void 0:e.contains(r),a=null==(n=g.current)?void 0:n.contains(r);if(/input|textarea/i.test(r.tagName)&&(" "===i||"Escape"!==i&&s||"Escape"===i&&"search"===r.type))return;if(!s&&!a)return;if("Tab"===i&&(!f.current||!h))return;_.current=t.type;const o={originalEvent:t,source:t.type};switch(i){case"ArrowUp":{const e=C(r,-1);return e&&e.focus&&e.focus(),void t.preventDefault()}case"ArrowDown":if(t.preventDefault(),h){const t=C(r,1);t&&t.focus&&t.focus()}else d(!0,o);return;case"Tab":nr(r.ownerDocument,"keyup",t=>{var e;("Tab"!==t.key||t.target)&&null!=(e=f.current)&&e.contains(t.target)||d(!1,o)},{once:!0});break;case"Escape":"Escape"===i&&(t.preventDefault(),t.stopPropagation()),d(!1,o)}}),(0,Kn.jsx)(_i.Provider,{value:M,children:(0,Kn.jsx)(Ga.Provider,{value:E,children:c})})}Kl.displayName="Dropdown",Kl.Menu=Rl,Kl.Toggle=Wl,Kl.Item=Zl;const Jl=Kl,Ql=e.createContext({});Ql.displayName="DropdownContext";const $l=Ql,tc=["className","bsPrefix","as","role"],ec=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="hr",role:s="separator"}=t,o=(0,ri.A)(t,tc);return i=di(i,"dropdown-divider"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i),role:s},o))});ec.displayName="DropdownDivider";const nc=ec,ic=["className","bsPrefix","as","role"],rc=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="div",role:s="heading"}=t,o=(0,ri.A)(t,ic);return i=di(i,"dropdown-header"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i),role:s},o))});rc.displayName="DropdownHeader";const sc=rc,ac=["bsPrefix","className","eventKey","disabled","onClick","active","as"],oc=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,eventKey:r,disabled:s=!1,onClick:o,active:l,as:c=za}=t,u=(0,ri.A)(t,ac);const h=di(n,"dropdown-item"),[d,f]=Xl({key:r,href:u.href,disabled:s,onClick:o,active:l});return(0,Kn.jsx)(c,(0,a.A)((0,a.A)((0,a.A)({},u),d),{},{ref:e,className:ai()(i,h,f.isActive&&"active",s&&"disabled")}))});oc.displayName="DropdownItem";const lc=oc,cc=["className","bsPrefix","as"],uc=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="span"}=t,s=(0,ri.A)(t,cc);return i=di(i,"dropdown-item-text"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});uc.displayName="DropdownItemText";const hc=uc,dc=e.createContext(null);dc.displayName="InputGroupContext";const fc=dc;function pc(t,e){return t}const mc=["bsPrefix","className","align","rootCloseEvent","flip","show","renderOnMount","as","popperConfig","variant"];function gc(t,e,n){let i=t?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===e?i=t?n?"top-start":"top-end":n?"top-end":"top-start":"end"===e?i=t?n?"left-end":"right-end":n?"left-start":"right-start":"start"===e?i=t?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===e?i="bottom":"up-centered"===e&&(i="top"),i}const vc=e.forwardRef((t,n)=>{let{bsPrefix:i,className:r,align:s,rootCloseEvent:o,flip:l=!0,show:c,renderOnMount:u,as:h="div",popperConfig:d,variant:f}=t,p=(0,ri.A)(t,mc),m=!1;const g=(0,e.useContext)(Sr),v=di(i,"dropdown-menu"),{align:y,drop:x,isRTL:_}=(0,e.useContext)($l);s=s||y;const b=(0,e.useContext)(fc),w=[];if(s)if("object"===typeof s){const t=Object.keys(s);if(t.length){const e=t[0],n=s[e];m="start"===n,w.push("".concat(v,"-").concat(e,"-").concat(n))}}else"end"===s&&(m=!0);const S=gc(m,x,_),[M,{hasShown:E,popper:T,show:A,toggle:C}]=Cl({flip:l,rootCloseEvent:o,show:c,usePopper:!g&&0===w.length,offset:[0,2],popperConfig:d,placement:S});if(M.ref=dr(pc(n),M.ref),kr(()=>{A&&(null==T||T.update())},[A]),!E&&!u&&!b)return null;"string"!==typeof h&&(M.show=A,M.close=()=>null==C?void 0:C(!1),M.align=s);let P=p.style;return null!=T&&T.placement&&(P=(0,a.A)((0,a.A)({},p.style),M.style),p["x-placement"]=T.placement),(0,Kn.jsx)(h,(0,a.A)((0,a.A)((0,a.A)((0,a.A)({},p),M),{},{style:P},(w.length||g)&&{"data-bs-popper":"static"}),{},{className:ai()(r,v,A&&"show",m&&"".concat(v,"-end"),f&&"".concat(v,"-").concat(f),...w)}))});vc.displayName="DropdownMenu";const yc=vc,xc=["as","bsPrefix","variant","size","active","disabled","className"],_c=e.forwardRef((t,e)=>{let{as:n,bsPrefix:i,variant:r="primary",size:s,active:o=!1,disabled:l=!1,className:c}=t,u=(0,ri.A)(t,xc);const h=di(i,"btn"),[d,{tagName:f}]=ya((0,a.A)({tagName:n,disabled:l},u)),p=f;return(0,Kn.jsx)(p,(0,a.A)((0,a.A)((0,a.A)({},d),u),{},{ref:e,disabled:l,className:ai()(c,h,o&&"active",r&&"".concat(h,"-").concat(r),s&&"".concat(h,"-").concat(s),u.href&&l&&"disabled")}))});_c.displayName="Button";const bc=_c,wc=["bsPrefix","split","className","childBsPrefix","as"],Sc=e.forwardRef((t,n)=>{let{bsPrefix:i,split:r,className:s,childBsPrefix:o,as:l=bc}=t,c=(0,ri.A)(t,wc);const u=di(i,"dropdown-toggle"),h=(0,e.useContext)(Ga);void 0!==o&&(c.bsPrefix=o);const[d]=Hl();return d.ref=dr(d.ref,pc(n)),(0,Kn.jsx)(l,(0,a.A)((0,a.A)({className:ai()(s,u,r&&"".concat(u,"-split"),(null==h?void 0:h.show)&&"show")},d),c))});Sc.displayName="DropdownToggle";const Mc=Sc,Ec=["bsPrefix","drop","show","className","align","onSelect","onToggle","focusFirstItemOnShow","as","navbar","autoClose"],Tc=e.forwardRef((t,n)=>{const i=Ei(t,{show:"onToggle"}),{bsPrefix:r,drop:s="down",show:o,className:l,align:c="start",onSelect:u,onToggle:h,focusFirstItemOnShow:d,as:f="div",navbar:p,autoClose:m=!0}=i,g=(0,ri.A)(i,Ec),v=(0,e.useContext)(fc),y=di(r,"dropdown"),x=mi(),_=Cr((t,e)=>{var n;var i;(null==(n=e.originalEvent)||null==(n=n.target)?void 0:n.classList.contains("dropdown-toggle"))&&"mousedown"===e.source||(e.originalEvent.currentTarget!==document||"keydown"===e.source&&"Escape"!==e.originalEvent.key||(e.source="rootClose"),i=e.source,(!1===m?"click"===i:"inside"===m?"rootClose"!==i:"outside"!==m||"select"!==i)&&(null==h||h(t,e)))}),b=gc("end"===c,s,x),w=(0,e.useMemo)(()=>({align:c,drop:s,isRTL:x}),[c,s,x]),S={down:y,"down-centered":"".concat(y,"-center"),up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,Kn.jsx)($l.Provider,{value:w,children:(0,Kn.jsx)(Jl,{placement:b,show:o,onSelect:u,onToggle:_,focusFirstItemOnShow:d,itemSelector:".".concat(y,"-item:not(.disabled):not(:disabled)"),children:v?g.children:(0,Kn.jsx)(f,(0,a.A)((0,a.A)({},g),{},{ref:n,className:ai()(l,o&&"show",S[s])}))})})});Tc.displayName="Dropdown";const Ac=Object.assign(Tc,{Toggle:Mc,Menu:yc,Item:lc,ItemText:hc,Divider:nc,Header:sc}),Cc=["bsPrefix","bg","pill","text","className","as"],Pc=e.forwardRef((t,e)=>{let{bsPrefix:n,bg:i="primary",pill:r=!1,text:s,className:o,as:l="span"}=t,c=(0,ri.A)(t,Cc);const u=di(n,"badge");return(0,Kn.jsx)(l,(0,a.A)((0,a.A)({ref:e},c),{},{className:ai()(o,u,r&&"rounded-pill",s&&"text-".concat(s),i&&"bg-".concat(i))}))});Pc.displayName="Badge";const Rc=Pc;var Lc=n(140);const Nc=()=>{var t;const{user:e,logout:n,isAuthenticated:i}=Qn();return(0,Kn.jsx)(da,{expand:"lg",variant:"dark",fixed:"top",className:"navbar-custom",children:(0,Kn.jsxs)(yi,{children:[(0,Kn.jsx)(Lc.m,{to:"/",children:(0,Kn.jsxs)(da.Brand,{children:[(0,Kn.jsx)("i",{className:"bi bi-rocket-takeoff me-2"}),"AstroZuri"]})}),(0,Kn.jsx)(da.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,Kn.jsxs)(da.Collapse,{id:"basic-navbar-nav",children:[(0,Kn.jsxs)(Va,{className:"me-auto",children:[(0,Kn.jsx)(Lc.m,{to:"/asteroids",children:(0,Kn.jsxs)(Va.Link,{children:[(0,Kn.jsx)("i",{className:"bi bi-search me-1"}),"Explore Asteroids"]})}),(0,Kn.jsx)(Lc.m,{to:"/community",children:(0,Kn.jsxs)(Va.Link,{children:[(0,Kn.jsx)("i",{className:"bi bi-people me-1"}),"Community"]})}),(0,Kn.jsx)(Lc.m,{to:"/orbits",children:(0,Kn.jsxs)(Va.Link,{children:[(0,Kn.jsx)("i",{className:"bi bi-globe me-1"}),"Orbits"]})}),(0,Kn.jsx)(Lc.m,{to:"/3d-test",children:(0,Kn.jsxs)(Va.Link,{children:[(0,Kn.jsx)("i",{className:"bi bi-cpu me-1"}),"3D Test"]})}),(0,Kn.jsx)(Lc.m,{to:"/vr",children:(0,Kn.jsxs)(Va.Link,{children:[(0,Kn.jsx)("i",{className:"bi bi-vr me-1"}),"VR Experience"]})})]}),(0,Kn.jsx)(Va,{children:i?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(Lc.m,{to:"/dashboard",children:(0,Kn.jsxs)(Va.Link,{children:[(0,Kn.jsx)("i",{className:"bi bi-speedometer2 me-1"}),"Dashboard"]})}),(0,Kn.jsxs)(Ac,{align:"end",children:[(0,Kn.jsxs)(Ac.Toggle,{as:Va.Link,className:"d-flex align-items-center",children:[(0,Kn.jsx)("i",{className:"bi bi-person-circle me-2"}),null===e||void 0===e?void 0:e.username,(null===e||void 0===e||null===(t=e.stats)||void 0===t?void 0:t.points)>0&&(0,Kn.jsx)(Rc,{bg:"primary",className:"ms-2",children:e.stats.points})]}),(0,Kn.jsxs)(Ac.Menu,{className:"dropdown-menu-dark",children:[(0,Kn.jsx)(Lc.m,{to:"/profile",children:(0,Kn.jsxs)(Ac.Item,{children:[(0,Kn.jsx)("i",{className:"bi bi-person me-2"}),"Profile"]})}),(0,Kn.jsx)(Ac.Divider,{}),(0,Kn.jsxs)(Ac.Item,{onClick:n,children:[(0,Kn.jsx)("i",{className:"bi bi-box-arrow-right me-2"}),"Logout"]})]})]})]}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(Lc.m,{to:"/login",children:(0,Kn.jsxs)(Va.Link,{children:[(0,Kn.jsx)("i",{className:"bi bi-box-arrow-in-right me-1"}),"Login"]})}),(0,Kn.jsx)(Lc.m,{to:"/register",children:(0,Kn.jsxs)(Va.Link,{children:[(0,Kn.jsx)("i",{className:"bi bi-person-plus me-1"}),"Register"]})})]})})]})]})})},kc=["bsPrefix","className","as"],Oc=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,as:r="div"}=t,s=(0,ri.A)(t,kc);const o=di(n,"row"),l=fi(),c=pi(),u="".concat(o,"-cols"),h=[];return l.forEach(t=>{const e=s[t];let n;delete s[t],null!=e&&"object"===typeof e?({cols:n}=e):n=e;const i=t!==c?"-".concat(t):"";null!=n&&h.push("".concat(u).concat(i,"-").concat(n))}),(0,Kn.jsx)(r,(0,a.A)((0,a.A)({ref:e},s),{},{className:ai()(i,o,...h)}))});Oc.displayName="Row";const Dc=Oc,Ic=["as","bsPrefix","className"],zc=["className"];const jc=e.forwardRef((t,e)=>{const[n,{as:i="div",bsPrefix:r,spans:s}]=function(t){let{as:e,bsPrefix:n,className:i}=t,r=(0,ri.A)(t,Ic);n=di(n,"col");const s=fi(),o=pi(),l=[],c=[];return s.forEach(t=>{const e=r[t];let i,s,a;delete r[t],"object"===typeof e&&null!=e?({span:i,offset:s,order:a}=e):i=e;const u=t!==o?"-".concat(t):"";i&&l.push(!0===i?"".concat(n).concat(u):"".concat(n).concat(u,"-").concat(i)),null!=a&&c.push("order".concat(u,"-").concat(a)),null!=s&&c.push("offset".concat(u,"-").concat(s))}),[(0,a.A)((0,a.A)({},r),{},{className:ai()(i,...l,...c)}),{as:e,bsPrefix:n,spans:l}]}(t),{className:o}=n,l=(0,ri.A)(n,zc);return(0,Kn.jsx)(i,(0,a.A)((0,a.A)({},l),{},{ref:e,className:ai()(o,!s.length&&r)}))});jc.displayName="Col";const Uc=jc,Fc=["className","bsPrefix","as"],Bc=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="div"}=t,s=(0,ri.A)(t,Fc);return i=di(i,"card-body"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});Bc.displayName="CardBody";const Hc=Bc,Vc=["className","bsPrefix","as"],Wc=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="div"}=t,s=(0,ri.A)(t,Vc);return i=di(i,"card-footer"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});Wc.displayName="CardFooter";const Gc=Wc,Xc=["bsPrefix","className","as"],qc=e.forwardRef((t,n)=>{let{bsPrefix:i,className:r,as:s="div"}=t,o=(0,ri.A)(t,Xc);const l=di(i,"card-header"),c=(0,e.useMemo)(()=>({cardHeaderBsPrefix:l}),[l]);return(0,Kn.jsx)(La.Provider,{value:c,children:(0,Kn.jsx)(s,(0,a.A)((0,a.A)({ref:n},o),{},{className:ai()(r,l)}))})});qc.displayName="CardHeader";const Zc=qc,Yc=["bsPrefix","className","variant","as"],Kc=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,variant:r,as:s="img"}=t,o=(0,ri.A)(t,Yc);const l=di(n,"card-img");return(0,Kn.jsx)(s,(0,a.A)({ref:e,className:ai()(r?"".concat(l,"-").concat(r):l,i)},o))});Kc.displayName="CardImg";const Jc=Kc,Qc=["className","bsPrefix","as"],$c=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="div"}=t,s=(0,ri.A)(t,Qc);return i=di(i,"card-img-overlay"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});$c.displayName="CardImgOverlay";const tu=$c,eu=["className","bsPrefix","as"],nu=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="a"}=t,s=(0,ri.A)(t,eu);return i=di(i,"card-link"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});nu.displayName="CardLink";const iu=nu,ru=["className","bsPrefix","as"],su=js("h6"),au=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r=su}=t,s=(0,ri.A)(t,ru);return i=di(i,"card-subtitle"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});au.displayName="CardSubtitle";const ou=au,lu=["className","bsPrefix","as"],cu=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="p"}=t,s=(0,ri.A)(t,lu);return i=di(i,"card-text"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});cu.displayName="CardText";const uu=cu,hu=["className","bsPrefix","as"],du=js("h5"),fu=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r=du}=t,s=(0,ri.A)(t,hu);return i=di(i,"card-title"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});fu.displayName="CardTitle";const pu=fu,mu=["bsPrefix","className","bg","text","border","body","children","as"],gu=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,bg:r,text:s,border:o,body:l=!1,children:c,as:u="div"}=t,h=(0,ri.A)(t,mu);const d=di(n,"card");return(0,Kn.jsx)(u,(0,a.A)((0,a.A)({ref:e},h),{},{className:ai()(i,d,r&&"bg-".concat(r),s&&"text-".concat(s),o&&"border-".concat(o)),children:l?(0,Kn.jsx)(Hc,{children:c}):c}))});gu.displayName="Card";const vu=Object.assign(gu,{Img:Jc,Title:pu,Subtitle:ou,Body:Hc,Link:iu,Text:uu,Header:Zc,Footer:Gc,ImgOverlay:tu}),yu=()=>{const{isAuthenticated:t}=Qn(),{fetchFeaturedAsteroids:n,getAsteroidStats:i,getSimulationStats:r}=ei(),[s,o]=(0,e.useState)([]),[l,c]=(0,e.useState)({});(0,e.useEffect)(()=>{u()},[]);const u=async()=>{try{const[t,e,s]=await Promise.all([n(6),i(),r()]);o(t),c((0,a.A)((0,a.A)({},e),s))}catch(t){console.error("Failed to load home data:",t)}};return(0,Kn.jsxs)("div",{className:"home-page",children:[(0,Kn.jsx)("section",{className:"hero-section py-5 mt-5",children:(0,Kn.jsx)(yi,{children:(0,Kn.jsx)("div",{className:"fade-in-animation",children:(0,Kn.jsxs)(Dc,{className:"align-items-center min-vh-100",children:[(0,Kn.jsxs)(Uc,{lg:6,children:[(0,Kn.jsx)("h1",{className:"display-4 fw-bold mb-4 text-glow",children:"AstroZuri"}),(0,Kn.jsx)("p",{className:"lead mb-4 text-secondary",children:"Explore real NASA data to simulate asteroid impact scenarios. Model catastrophic collisions, analyze their potential effects, and design effective mitigation strategies to safeguard our planet."}),(0,Kn.jsx)("p",{className:"mb-4",children:"Developed for the 2025 NASA Space Apps Challenge, this project tackles the \u201cMeteor Madness\u201d challenge through advanced simulation tools and real-time collaborative technology."}),(0,Kn.jsxs)("div",{className:"d-flex gap-3 flex-wrap",children:[t?(0,Kn.jsx)(Lc.m,{to:"/simulator",children:(0,Kn.jsxs)(bc,{variant:"primary",size:"lg",className:"hover-scale",children:[(0,Kn.jsx)("i",{className:"bi bi-rocket-takeoff me-2"}),"Start Simulation"]})}):(0,Kn.jsx)(Lc.m,{to:"/register",children:(0,Kn.jsxs)(bc,{variant:"primary",size:"lg",className:"hover-scale",children:[(0,Kn.jsx)("i",{className:"bi bi-person-plus me-2"}),"Get Started"]})}),(0,Kn.jsx)(Lc.m,{to:"/asteroids",children:(0,Kn.jsxs)(bc,{variant:"outline-primary",size:"lg",className:"hover-scale",children:[(0,Kn.jsx)("i",{className:"bi bi-search me-2"}),"Explore Asteroids"]})})]})]}),(0,Kn.jsx)(Uc,{lg:6,className:"text-center",children:(0,Kn.jsx)("div",{className:"hero-animation",children:(0,Kn.jsx)("div",{className:"planet-earth",children:(0,Kn.jsx)("div",{className:"asteroid-approaching"})})})})]})})})}),(0,Kn.jsx)("section",{className:"stats-section py-5 bg-dark",children:(0,Kn.jsx)(yi,{children:(0,Kn.jsx)("div",{className:"slide-in-animation",children:(0,Kn.jsxs)(Dc,{className:"text-center",children:[(0,Kn.jsx)(Uc,{md:3,className:"mb-4",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("i",{className:"bi bi-asterisk display-4 text-primary mb-3"}),(0,Kn.jsx)("h3",{className:"fw-bold",children:l.totalAsteroids||0}),(0,Kn.jsx)("p",{className:"text-muted",children:"Asteroids Tracked"})]})})}),(0,Kn.jsx)(Uc,{md:3,className:"mb-4",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle display-4 text-warning mb-3"}),(0,Kn.jsx)("h3",{className:"fw-bold",children:l.hazardousAsteroids||0}),(0,Kn.jsx)("p",{className:"text-muted",children:"Potentially Hazardous"})]})})}),(0,Kn.jsx)(Uc,{md:3,className:"mb-4",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("i",{className:"bi bi-cpu display-4 text-success mb-3"}),(0,Kn.jsx)("h3",{className:"fw-bold",children:l.totalSimulations||0}),(0,Kn.jsx)("p",{className:"text-muted",children:"Simulations Run"})]})})}),(0,Kn.jsx)(Uc,{md:3,className:"mb-4",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("i",{className:"bi bi-people display-4 text-info mb-3"}),(0,Kn.jsx)("h3",{className:"fw-bold",children:l.publicSimulations||0}),(0,Kn.jsx)("p",{className:"text-muted",children:"Community Shares"})]})})})]})})})}),(0,Kn.jsx)("section",{className:"featured-section py-5",children:(0,Kn.jsx)(yi,{children:(0,Kn.jsx)(Dc,{children:(0,Kn.jsxs)(Uc,{children:[(0,Kn.jsx)("h2",{className:"text-center mb-5",children:"Featured Near-Earth Asteroids"}),(0,Kn.jsx)(Dc,{children:null===s||void 0===s?void 0:s.map((e,n)=>{var i,r,s;return(0,Kn.jsx)(Uc,{md:6,lg:4,className:"mb-4",children:(0,Kn.jsxs)(vu,{className:"h-100 hover-scale",children:[(0,Kn.jsxs)(vu.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,Kn.jsx)("h6",{className:"mb-0 text-truncate",title:e.name,children:e.name}),e.is_potentially_hazardous_asteroid&&(0,Kn.jsxs)(Rc,{bg:"warning",text:"dark",children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-1"}),"Hazardous"]})]}),(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsxs)("div",{className:"mb-3",children:[(0,Kn.jsx)("small",{className:"text-muted",children:"Diameter"}),(0,Kn.jsx)("div",{className:"fw-bold",children:null!==(i=e.calculatedProperties)&&void 0!==i&&i.averageDiameter?"".concat((e.calculatedProperties.averageDiameter/1e3).toFixed(2)," km"):"Unknown"})]}),(0,Kn.jsxs)("div",{className:"mb-3",children:[(0,Kn.jsx)("small",{className:"text-muted",children:"Velocity"}),(0,Kn.jsx)("div",{className:"fw-bold",children:null!==(r=e.calculatedProperties)&&void 0!==r&&r.averageVelocity?"".concat(e.calculatedProperties.averageVelocity.toFixed(2)," km/s"):"Unknown"})]}),(null===(s=e.calculatedProperties)||void 0===s?void 0:s.kineticEnergy)&&(0,Kn.jsxs)("div",{className:"mb-3",children:[(0,Kn.jsx)("small",{className:"text-muted",children:"Kinetic Energy"}),(0,Kn.jsxs)("div",{className:"fw-bold",children:[(e.calculatedProperties.kineticEnergy/1e15).toExponential(2)," PJ"]})]})]}),(0,Kn.jsx)(vu.Footer,{children:t?(0,Kn.jsx)(Lc.m,{to:{pathname:"/simulator",search:"?asteroid=".concat(e._id)},children:(0,Kn.jsxs)(bc,{variant:"primary",size:"sm",className:"w-100",children:[(0,Kn.jsx)("i",{className:"bi bi-play-circle me-1"}),"Simulate Impact"]})}):(0,Kn.jsx)(Lc.m,{to:"/register",children:(0,Kn.jsxs)(bc,{variant:"outline-primary",size:"sm",className:"w-100",children:[(0,Kn.jsx)("i",{className:"bi bi-person-plus me-1"}),"Register to Simulate"]})})})]})},e._id)})}),(0,Kn.jsx)("div",{className:"text-center mt-4",children:(0,Kn.jsx)(Lc.m,{to:"/asteroids",children:(0,Kn.jsxs)(bc,{variant:"outline-primary",children:[(0,Kn.jsx)("i",{className:"bi bi-arrow-right me-2"}),"View All Asteroids"]})})})]})})})}),(0,Kn.jsx)("section",{className:"features-section py-5 bg-dark",children:(0,Kn.jsx)(yi,{children:(0,Kn.jsx)(Dc,{children:(0,Kn.jsxs)(Uc,{children:[(0,Kn.jsx)("h2",{className:"text-center mb-5",children:"Key Features"}),(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{md:6,lg:3,className:"mb-4",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100 text-center",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("i",{className:"bi bi-database display-4 text-primary mb-3"}),(0,Kn.jsx)("h5",{children:"Real NASA Data"}),(0,Kn.jsx)("p",{className:"text-muted",children:"Live asteroid data from NASA's NeoWs API with accurate orbital parameters."})]})})}),(0,Kn.jsx)(Uc,{md:6,lg:3,className:"mb-4",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100 text-center",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("i",{className:"bi bi-geo-alt display-4 text-success mb-3"}),(0,Kn.jsx)("h5",{children:"Interactive Maps"}),(0,Kn.jsx)("p",{className:"text-muted",children:"Select impact locations worldwide with detailed consequence visualization."})]})})}),(0,Kn.jsx)(Uc,{md:6,lg:3,className:"mb-4",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100 text-center",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("i",{className:"bi bi-shield-check display-4 text-warning mb-3"}),(0,Kn.jsx)("h5",{children:"Mitigation Planning"}),(0,Kn.jsx)("p",{className:"text-muted",children:"Design and test asteroid deflection strategies with effectiveness modeling."})]})})}),(0,Kn.jsx)(Uc,{md:6,lg:3,className:"mb-4",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100 text-center",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("i",{className:"bi bi-people display-4 text-info mb-3"}),(0,Kn.jsx)("h5",{children:"Community Sharing"}),(0,Kn.jsx)("p",{className:"text-muted",children:"Share simulations, vote on strategies, and collaborate with other users."})]})})})]})]})})})})]})},xu=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],_u=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,striped:r,bordered:s,borderless:o,hover:l,size:c,variant:u,responsive:h}=t,d=(0,ri.A)(t,xu);const f=di(n,"table"),p=ai()(i,f,u&&"".concat(f,"-").concat(u),c&&"".concat(f,"-").concat(c),r&&"".concat(f,"-").concat("string"===typeof r?"striped-".concat(r):"striped"),s&&"".concat(f,"-bordered"),o&&"".concat(f,"-borderless"),l&&"".concat(f,"-hover")),m=(0,Kn.jsx)("table",(0,a.A)((0,a.A)({},d),{},{className:p,ref:e}));if(h){let t="".concat(f,"-responsive");return"string"===typeof h&&(t="".concat(t,"-").concat(h)),(0,Kn.jsx)("div",{className:t,children:m})}return m});_u.displayName="Table";const bu=_u,wu=["className","bsPrefix","as"],Su=js("h4");Su.displayName="DivStyledAsH4";const Mu=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r=Su}=t,s=(0,ri.A)(t,wu);return i=di(i,"alert-heading"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});Mu.displayName="AlertHeading";const Eu=Mu,Tu=["className","bsPrefix","as"],Au=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r=za}=t,s=(0,ri.A)(t,Tu);return i=di(i,"alert-link"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});Au.displayName="AlertLink";const Cu=Au,Pu=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],Ru=e.forwardRef((t,e)=>{const n=Ei(t,{show:"onClose"}),{bsPrefix:i,show:r=!0,closeLabel:s="Close alert",closeVariant:o,className:l,children:c,variant:u="primary",onClose:h,dismissible:d,transition:f=vs}=n,p=(0,ri.A)(n,Pu),m=di(i,"alert"),g=Cr(t=>{h&&h(!1,t)}),v=!0===f?vs:f,y=(0,Kn.jsxs)("div",(0,a.A)((0,a.A)({role:"alert"},v?void 0:p),{},{ref:e,className:ai()(l,m,u&&"".concat(m,"-").concat(u),d&&"".concat(m,"-dismissible")),children:[d&&(0,Kn.jsx)(Ls,{onClick:g,"aria-label":s,variant:o}),c]}));return v?(0,Kn.jsx)(v,(0,a.A)((0,a.A)({unmountOnExit:!0},p),{},{ref:void 0,in:r,children:y})):r?y:null});Ru.displayName="Alert";const Lu=Object.assign(Ru,{Link:Cu,Heading:Eu});var Nu=n(705);function ku(t){return t+.5|0}const Ou=(t,e,n)=>Math.max(Math.min(t,n),e);function Du(t){return Ou(ku(2.55*t),0,255)}function Iu(t){return Ou(ku(255*t),0,255)}function zu(t){return Ou(ku(t/2.55)/100,0,1)}function ju(t){return Ou(ku(100*t),0,100)}const Uu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Fu=[..."0123456789ABCDEF"],Bu=t=>Fu[15&t],Hu=t=>Fu[(240&t)>>4]+Fu[15&t],Vu=t=>(240&t)>>4===(15&t);function Wu(t){var e=(t=>Vu(t.r)&&Vu(t.g)&&Vu(t.b)&&Vu(t.a))(t)?Bu:Hu;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const Gu=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Xu(t,e,n){const i=e*Math.min(n,1-n),r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function qu(t,e,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+t/60)%6;return n-n*e*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function Zu(t,e,n){const i=Xu(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Yu(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),s=Math.min(e,n,i),a=(r+s)/2;let o,l,c;return r!==s&&(c=r-s,l=a>.5?c/(2-r-s):c/(r+s),o=function(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}(e,n,i,c,r),o=60*o+.5),[0|o,l||0,a]}function Ku(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Iu)}function Ju(t,e,n){return Ku(Xu,t,e,n)}function Qu(t){return(t%360+360)%360}function $u(t){const e=Gu.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?Du(+e[5]):Iu(+e[5]));const r=Qu(+e[2]),s=+e[3]/100,a=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return Ku(Zu,t,e,n)}(r,s,a):"hsv"===e[1]?function(t,e,n){return Ku(qu,t,e,n)}(r,s,a):Ju(r,s,a),{r:n[0],g:n[1],b:n[2],a:i}}const th={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},eh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let nh;function ih(t){nh||(nh=function(){const t={},e=Object.keys(eh),n=Object.keys(th);let i,r,s,a,o;for(i=0;i<e.length;i++){for(a=o=e[i],r=0;r<n.length;r++)s=n[r],o=o.replace(s,th[s]);s=parseInt(eh[a],16),t[o]=[s>>16&255,s>>8&255,255&s]}return t}(),nh.transparent=[0,0,0,0]);const e=nh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const rh=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const sh=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,ah=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function oh(t,e,n){if(t){let i=Yu(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=Ju(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function lh(t,e){return t?Object.assign(e||{},t):t}function ch(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Iu(t[3]))):(e=lh(t,{r:0,g:0,b:0,a:1})).a=Iu(e.a),e}function uh(t){return"r"===t.charAt(0)?function(t){const e=rh.exec(t);let n,i,r,s=255;if(e){if(e[7]!==n){const t=+e[7];s=e[8]?Du(t):Ou(255*t,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?Du(n):Ou(n,0,255)),i=255&(e[4]?Du(i):Ou(i,0,255)),r=255&(e[6]?Du(r):Ou(r,0,255)),{r:n,g:i,b:r,a:s}}}(t):$u(t)}class hh{constructor(t){if(t instanceof hh)return t;const e=typeof t;let n;"object"===e?n=ch(t):"string"===e&&(n=function(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*Uu[t[1]],g:255&17*Uu[t[2]],b:255&17*Uu[t[3]],a:5===n?17*Uu[t[4]]:255}:7!==n&&9!==n||(e={r:Uu[t[1]]<<4|Uu[t[2]],g:Uu[t[3]]<<4|Uu[t[4]],b:Uu[t[5]]<<4|Uu[t[6]],a:9===n?Uu[t[7]]<<4|Uu[t[8]]:255})),e}(t)||ih(t)||uh(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=lh(this._rgb);return t&&(t.a=zu(t.a)),t}set rgb(t){this._rgb=ch(t)}rgbString(){return this._valid?function(t){return t&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(zu(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"))}(this._rgb):void 0}hexString(){return this._valid?Wu(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=Yu(t),n=e[0],i=ju(e[1]),r=ju(e[2]);return t.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(zu(t.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const s=e===r?.5:e,a=2*s-1,o=n.a-i.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=ah(zu(t.r)),r=ah(zu(t.g)),s=ah(zu(t.b));return{r:Iu(sh(i+n*(ah(zu(e.r))-i))),g:Iu(sh(r+n*(ah(zu(e.g))-r))),b:Iu(sh(s+n*(ah(zu(e.b))-s))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new hh(this.rgb)}alpha(t){return this._rgb.a=Iu(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=ku(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return oh(this._rgb,2,t),this}darken(t){return oh(this._rgb,2,-t),this}saturate(t){return oh(this._rgb,1,t),this}desaturate(t){return oh(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=Yu(t);n[0]=Qu(n[0]+e),n=Ju(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function dh(){}const fh=(()=>{let t=0;return()=>t++})();function ph(t){return null===t||void 0===t}function mh(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function gh(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function vh(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function yh(t,e){return vh(t)?t:e}function xh(t,e){return"undefined"===typeof t?e:t}const _h=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function bh(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function wh(t,e,n,i){let r,s,a;if(mh(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(gh(t))for(a=Object.keys(t),s=a.length,r=0;r<s;r++)e.call(n,t[a[r]],a[r])}function Sh(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Mh(t){if(mh(t))return t.map(Mh);if(gh(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Mh(t[n[r]]);return e}return t}function Eh(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function Th(t,e,n,i){if(!Eh(t))return;const r=e[t],s=n[t];gh(r)&&gh(s)?Ah(r,s,i):e[t]=Mh(s)}function Ah(t,e,n){const i=mh(e)?e:[e],r=i.length;if(!gh(t))return t;const s=(n=n||{}).merger||Th;let a;for(let o=0;o<r;++o){if(a=i[o],!gh(a))continue;const e=Object.keys(a);for(let i=0,r=e.length;i<r;++i)s(e[i],t,a,n)}return t}function Ch(t,e){return Ah(t,e,{merger:Ph})}function Ph(t,e,n){if(!Eh(t))return;const i=e[t],r=n[t];gh(i)&&gh(r)?Ch(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Mh(r))}const Rh={"":t=>t,x:t=>t.x,y:t=>t.y};function Lh(t,e){const n=Rh[e]||(Rh[e]=function(t){const e=function(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function Nh(t){return t.charAt(0).toUpperCase()+t.slice(1)}const kh=t=>"undefined"!==typeof t,Oh=t=>"function"===typeof t,Dh=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const Ih=Math.PI,zh=2*Ih,jh=zh+Ih,Uh=Number.POSITIVE_INFINITY,Fh=Ih/180,Bh=Ih/2,Hh=Ih/4,Vh=2*Ih/3,Wh=Math.log10,Gh=Math.sign;function Xh(t,e,n){return Math.abs(t-e)<n}function qh(t){const e=Math.round(t);t=Xh(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Wh(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Zh(t){return!function(t){return"symbol"===typeof t||"object"===typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Yh(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Kh(t){return t*(Ih/180)}function Jh(t){return t*(180/Ih)}function Qh(t){if(!vh(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function $h(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Ih&&(s+=zh),{angle:s,distance:r}}function td(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ed(t,e){return(t-e+jh)%zh-Ih}function nd(t){return(t%zh+zh)%zh}function id(t,e,n,i){const r=nd(t),s=nd(e),a=nd(n),o=nd(s-r),l=nd(a-r),c=nd(r-s),u=nd(r-a);return r===s||r===a||i&&s===a||o>l&&c<u}function rd(t,e,n){return Math.max(e,Math.min(n,t))}function sd(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function ad(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const od=(t,e,n,i)=>ad(t,n,i?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),ld=(t,e,n)=>ad(t,n,i=>t[i][e]>=n);const cd=["push","pop","shift","splice","unshift"];function ud(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(cd.forEach(e=>{delete t[e]}),delete t._chartjs)}function hd(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const dd="undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame;function fd(t,e){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];n=s,i||(i=!0,dd.call(window,()=>{i=!1,t.apply(e,n)}))}}const pd=t=>"start"===t?"left":"end"===t?"right":"center",md=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function gd(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:a,vScale:o,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=a.axis,{min:h,max:d,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(r=Math.min(od(l,u,h).lo,n?i:od(e,u,a.getPixelForValue(h)).lo),c){const t=l.slice(0,r+1).reverse().findIndex(t=>!ph(t[o.axis]));r-=Math.max(0,t)}r=rd(r,0,i-1)}if(p){let t=Math.max(od(l,a.axis,d,!0).hi+1,n?0:od(e,u,a.getPixelForValue(d),!0).hi+1);if(c){const e=l.slice(t-1).findIndex(t=>!ph(t[o.axis]));t+=Math.max(0,e)}s=rd(t,r,i)-r}else s=i-r}return{start:r,count:s}}function vd(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const yd=t=>0===t||1===t,xd=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*zh/n),_d=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*zh/n)+1,bd={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Bh),easeOutSine:t=>Math.sin(t*Bh),easeInOutSine:t=>-.5*(Math.cos(Ih*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>yd(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>yd(t)?t:xd(t,.075,.3),easeOutElastic:t=>yd(t)?t:_d(t,.075,.3),easeInOutElastic(t){const e=.1125;return yd(t)?t:t<.5?.5*xd(2*t,e,.45):.5+.5*_d(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-bd.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*bd.easeInBounce(2*t):.5*bd.easeOutBounce(2*t-1)+.5};function wd(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Sd(t){return wd(t)?t:new hh(t)}function Md(t){return wd(t)?t:new hh(t).saturate(.5).darken(.1).hexString()}const Ed=["x","y","borderWidth","radius","tension"],Td=["color","borderColor","backgroundColor"];const Ad=new Map;function Cd(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Ad.get(n);return i||(i=new Intl.NumberFormat(t,e),Ad.set(n,i)),i}(e,n).format(t)}const Pd={values:t=>mh(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),s=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const a=Wh(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Cd(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Wh(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Pd.numeric.call(this,t,e,n):""}};var Rd={formatters:Pd};const Ld=Object.create(null),Nd=Object.create(null);function kd(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const e=n[i];t=t[e]||(t[e]=Object.create(null))}return t}function Od(t,e,n){return"string"===typeof e?Ah(kd(t,e),n):Ah(kd(t,""),e)}class Dd{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Md(e.backgroundColor),this.hoverBorderColor=(t,e)=>Md(e.borderColor),this.hoverColor=(t,e)=>Md(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Od(this,t,e)}get(t){return kd(this,t)}describe(t,e){return Od(Nd,t,e)}override(t,e){return Od(Ld,t,e)}route(t,e,n,i){const r=kd(this,t),s=kd(this,n),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=s[i];return gh(t)?Object.assign({},e,t):xh(t,e)},set(t){this[a]=t}}})}apply(t){t.forEach(t=>t(this))}}var Id=new Dd({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Td},numbers:{type:"number",properties:Ed}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Rd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function zd(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function jd(t,e,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let a=0;const o=n.length;let l,c,u,h,d;for(l=0;l<o;l++)if(h=n[l],void 0===h||null===h||mh(h)){if(mh(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||mh(d)||(a=zd(t,r,s,a,d))}else a=zd(t,r,s,a,h);t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return a}function Ud(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Fd(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Bd(t,e,n,i){Hd(t,e,n,i,null)}function Hd(t,e,n,i,r){let s,a,o,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,m=e.radius;let g=(p||0)*Fh;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,i),t.rotate(g),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(m)||m<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,m,0,0,zh):t.arc(n,i,m,0,zh),t.closePath();break;case"triangle":u=r?r/2:m,t.moveTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=Vh,t.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=Vh,t.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),t.closePath();break;case"rectRounded":c=.516*m,l=m-c,a=Math.cos(g+Hh)*l,h=Math.cos(g+Hh)*(r?r/2-c:l),o=Math.sin(g+Hh)*l,d=Math.sin(g+Hh)*(r?r/2-c:l),t.arc(n-h,i-o,c,g-Ih,g-Bh),t.arc(n+d,i-a,c,g-Bh,g),t.arc(n+h,i+o,c,g,g+Bh),t.arc(n-d,i+a,c,g+Bh,g+Ih),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}g+=Hh;case"rectRot":h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),t.moveTo(n-h,i-o),t.lineTo(n+d,i-a),t.lineTo(n+h,i+o),t.lineTo(n-d,i+a),t.closePath();break;case"crossRot":g+=Hh;case"cross":h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),t.moveTo(n-h,i-o),t.lineTo(n+h,i+o),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a);break;case"star":h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),t.moveTo(n-h,i-o),t.lineTo(n+h,i+o),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a),g+=Hh,h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),t.moveTo(n-h,i-o),t.lineTo(n+h,i+o),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a);break;case"line":a=r?r/2:Math.cos(g)*m,o=Math.sin(g)*m,t.moveTo(n-a,i-o),t.lineTo(n+a,i+o);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(g)*(r?r/2:m),i+Math.sin(g)*m);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function Vd(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Wd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Gd(t){t.restore()}function Xd(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!==!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function qd(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Zd(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(a,u),t.lineTo(o,u),t.stroke()}}function Yd(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Kd(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=mh(e)?e:[e],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ph(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&Yd(t,s.backdrop),o&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),ph(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),Zd(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function Jd(t,e){const{x:n,y:i,w:r,h:s,radius:a}=e;t.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*Ih,Ih,!0),t.lineTo(n,i+s-a.bottomLeft),t.arc(n+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,Ih,Bh,!0),t.lineTo(n+r-a.bottomRight,i+s),t.arc(n+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,Bh,0,!0),t.lineTo(n+r,i+a.topRight),t.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-Bh,!0),t.lineTo(n+a.topLeft,i)}const Qd=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$d=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function tf(t,e){const n=(""+t).match(Qd);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const ef=t=>+t||0;function nf(t,e){const n={},i=gh(e),r=i?Object.keys(e):e,s=gh(t)?i?n=>xh(t[n],t[e[n]]):e=>t[e]:()=>t;for(const a of r)n[a]=ef(s(a));return n}function rf(t){return nf(t,{top:"y",right:"x",bottom:"y",left:"x"})}function sf(t){return nf(t,["topLeft","topRight","bottomLeft","bottomRight"])}function af(t){const e=rf(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function of(t,e){t=t||{},e=e||Id.font;let n=xh(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let i=xh(t.style,e.style);i&&!(""+i).match($d)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:xh(t.family,e.family),lineHeight:tf(xh(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:xh(t.weight,e.weight),string:""};return r.string=function(t){return!t||ph(t.size)||ph(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function lf(t,e,n,i){let r,s,a,o=!0;for(r=0,s=t.length;r<s;++r)if(a=t[r],void 0!==a&&(void 0!==e&&"function"===typeof a&&(a=a(e),o=!1),void 0!==n&&mh(a)&&(a=a[n%a.length],o=!1),void 0!==a))return i&&!o&&(i.cacheable=!1),a}function cf(t,e){return Object.assign(Object.create(t),e)}function uf(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>t[0];const r=(arguments.length>2?arguments[2]:void 0)||t;"undefined"===typeof n&&(n=bf("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>uf([i,...t],e,r,n)};return new Proxy(s,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>mf(n,i,()=>function(t,e,n,i){let r;for(const s of e)if(r=bf(ff(s,t),n),"undefined"!==typeof r)return pf(t,r)?xf(n,i,t,r):r}(i,e,t,n)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>wf(t).includes(e),ownKeys:t=>wf(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function hf(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:df(t,i),setContext:e=>hf(t,e,n,i),override:r=>hf(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>mf(t,e,()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=t;let o=i[e];Oh(o)&&a.isScriptable(e)&&(o=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=n;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(s,a||i);o.delete(t),pf(t,l)&&(l=xf(r._scopes,r,t,l));return l}(e,o,t,n));mh(o)&&o.length&&(o=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&i(t))return e[s.index%e.length];if(gh(e[0])){const n=e,i=r._scopes.filter(t=>t!==n);e=[];for(const l of n){const n=xf(i,r,t,l);e.push(hf(n,s,a&&a[t],o))}}return e}(e,o,t,a.isIndexable));pf(e,o)&&(o=hf(o,r,s&&s[e],a));return o}(t,e,n)),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function df(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Oh(n)?n:()=>n,isIndexable:Oh(i)?i:()=>i}}const ff=(t,e)=>t?t+Nh(e):e,pf=(t,e)=>gh(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function mf(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const i=n();return t[e]=i,i}function gf(t,e,n){return Oh(t)?t(e,n):t}const vf=(t,e)=>!0===t?e:"string"===typeof t?Lh(e,t):void 0;function yf(t,e,n,i,r){for(const s of e){const e=vf(n,s);if(e){t.add(e);const s=gf(e._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===e&&"undefined"!==typeof i&&n!==i)return null}return!1}function xf(t,e,n,i){const r=e._rootScopes,s=gf(e._fallback,n,i),a=[...t,...r],o=new Set;o.add(i);let l=_f(o,a,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=_f(o,a,s,l,i),null!==l))&&uf(Array.from(o),[""],r,s,()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];if(mh(r)&&gh(n))return n;return r||{}}(e,n,i)))}function _f(t,e,n,i,r){for(;n;)n=yf(t,e,n,i,r);return n}function bf(t,e){for(const n of e){if(!n)continue;const e=n[t];if("undefined"!==typeof e)return e}}function wf(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function Sf(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=e[c],a[o]={r:r.parse(Lh(u,s),c)};return a}const Mf=Number.EPSILON||1e-14,Ef=(t,e)=>e<t.length&&!t[e].skip&&t[e],Tf=t=>"x"===t?"y":"x";function Af(t,e,n,i){const r=t.skip?e:t,s=e,a=n.skip?e:n,o=td(s,r),l=td(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(a.x-r.x),y:s.y-h*(a.y-r.y)},next:{x:s.x+d*(a.x-r.x),y:s.y+d*(a.y-r.y)}}}function Cf(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Tf(e),i=t.length,r=Array(i).fill(0),s=Array(i);let a,o,l,c=Ef(t,0);for(a=0;a<i;++a)if(o=l,l=c,c=Ef(t,a+1),l){if(c){const t=c[e]-l[e];r[a]=0!==t?(c[n]-l[n])/t:0}s[a]=o?c?Gh(r[a-1])!==Gh(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(t,e,n){const i=t.length;let r,s,a,o,l,c=Ef(t,0);for(let u=0;u<i-1;++u)l=c,c=Ef(t,u+1),l&&c&&(Xh(e[u],0,Mf)?n[u]=n[u+1]=0:(r=n[u]/e[u],s=n[u+1]/e[u],o=Math.pow(r,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=r*a*e[u],n[u+1]=s*a*e[u])))}(t,r,s),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=Tf(n),r=t.length;let s,a,o,l=Ef(t,0);for(let c=0;c<r;++c){if(a=o,o=l,l=Ef(t,c+1),!o)continue;const r=o[n],u=o[i];a&&(s=(r-a[n])/3,o["cp1".concat(n)]=r-s,o["cp1".concat(i)]=u-s*e[c]),l&&(s=(l[n]-r)/3,o["cp2".concat(n)]=r+s,o["cp2".concat(i)]=u+s*e[c])}}(t,s,e)}function Pf(t,e,n){return Math.max(Math.min(t,n),e)}function Rf(t,e,n,i,r){let s,a,o,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)Cf(t,r);else{let n=i?t[t.length-1]:t[0];for(s=0,a=t.length;s<a;++s)o=t[s],l=Af(n,o,t[Math.min(s+1,a-(i?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}e.capBezierPoints&&function(t,e){let n,i,r,s,a,o=Vd(t[0],e);for(n=0,i=t.length;n<i;++n)a=s,s=o,o=n<i-1&&Vd(t[n+1],e),s&&(r=t[n],a&&(r.cp1x=Pf(r.cp1x,e.left,e.right),r.cp1y=Pf(r.cp1y,e.top,e.bottom)),o&&(r.cp2x=Pf(r.cp2x,e.left,e.right),r.cp2y=Pf(r.cp2y,e.top,e.bottom)))}(t,n)}function Lf(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Nf(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function kf(t,e,n){let i;return"string"===typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const Of=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const Df=["top","right","bottom","left"];function If(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Df[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function zf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Of(n),s="border-box"===r.boxSizing,a=If(r,"padding"),o=If(r,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let a,o,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(r,s,t.target))a=r,o=s;else{const t=e.getBoundingClientRect();a=i.clientX-t.left,o=i.clientY-t.top,l=!0}return{x:a,y:o,box:l}}(t,n),h=a.left+(u&&o.left),d=a.top+(u&&o.top);let{width:f,height:p}=e;return s&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const jf=t=>Math.round(10*t)/10;function Uf(t,e,n,i){const r=Of(t),s=If(r,"margin"),a=kf(r.maxWidth,t,"clientWidth")||Uh,o=kf(r.maxHeight,t,"clientHeight")||Uh,l=function(t,e,n){let i,r;if(void 0===e||void 0===n){const s=t&&Nf(t);if(s){const t=s.getBoundingClientRect(),a=Of(s),o=If(a,"border","width"),l=If(a,"padding");e=t.width-l.width-o.width,n=t.height-l.height-o.height,i=kf(a.maxWidth,s,"clientWidth"),r=kf(a.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||Uh,maxHeight:r||Uh}}(t,e,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const t=If(r,"border","width"),e=If(r,"padding");c-=e.width+t.width,u-=e.height+t.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=jf(Math.min(c,a,l.maxWidth)),u=jf(Math.min(u,o,l.maxHeight)),c&&!u&&(u=jf(c/2));return(void 0!==e||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=jf(Math.floor(u*i))),{width:c,height:u}}function Ff(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(t.height,"px"),a.style.width="".concat(t.width,"px")),(t.currentDevicePixelRatio!==i||a.height!==r||a.width!==s)&&(t.currentDevicePixelRatio=i,a.height=r,a.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0)}const Bf=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Lf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(o){}return t}();function Hf(t,e){const n=function(t,e){return Of(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Vf(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Wf(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function Gf(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},a=Vf(t,r,n),o=Vf(r,s,n),l=Vf(s,e,n),c=Vf(a,o,n),u=Vf(o,l,n);return Vf(c,u,n)}function Xf(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function qf(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Zf(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Yf(t){return"angle"===t?{between:id,compare:ed,normalize:nd}:{between:sd,compare:(t,e)=>t-e,normalize:t=>t}}function Kf(t){let{start:e,end:n,count:i,loop:r,style:s}=t;return{start:e%i,end:n%i,loop:r&&(n-e+1)%i===0,style:s}}function Jf(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,a=e.length,{compare:o,between:l,normalize:c}=Yf(i),{start:u,end:h,loop:d,style:f}=function(t,e,n){const{property:i,start:r,end:s}=n,{between:a,normalize:o}=Yf(i),l=e.length;let c,u,{start:h,end:d,loop:f}=t;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&a(o(e[h%l][i]),r,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let m,g,v,y=!1,x=null;const _=()=>y||l(r,v,m)&&0!==o(r,v),b=()=>!y||0===o(s,m)||l(s,v,m);for(let w=u,S=u;w<=h;++w)g=e[w%a],g.skip||(m=c(g[i]),m!==v&&(y=l(m,r,s),null===x&&_()&&(x=0===o(m,r)?w:S),null!==x&&b()&&(p.push(Kf({start:x,end:w,loop:d,count:a,style:f})),x=null),S=w,v=m));return null!==x&&p.push(Kf({start:x,end:h,loop:d,count:a,style:f})),p}function Qf(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=Jf(i[r],t.points,e);s.length&&n.push(...s)}return n}function $f(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),s=tp(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,l=n.length,c=[];let u=s,h=e[0].start,d=h;function f(t,e,i,r){const s=o?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=s;for(;n[e%l].skip;)e+=s;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:i,style:r}),u=r,h=e%l)}}for(const p of e){h=o?h:p.start;let t,e=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];t=tp(i.setContext(cf(r,{type:"segment",p0:e,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),ep(t,u)&&f(h,d-1,p.loop,u),e=s,u=t}h<d-1&&f(h,d-1,p.loop,u)}return c}(t,e,n,i):e}function tp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function ep(t,e){if(!e)return!1;const n=[],i=function(t,e){return wd(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function np(t,e,n){return t.options.clip?t[n]:e[n]}function ip(t,e){const n=e._clip;if(n.disabled)return!1;const i=function(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:np(n,e,"left"),right:np(n,e,"right"),top:np(i,e,"top"),bottom:np(i,e,"bottom")}:e}(e,t.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?t.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?t.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class rp{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],s=e.duration;r.forEach(i=>i({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=dd.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,a=r.length-1,o=!1;for(;a>=0;--a)s=r[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),o=!0):(r[a]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var sp=new rp;const ap="transparent",op={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=Sd(t||ap),r=i.valid&&Sd(e||ap);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class lp{constructor(t,e,n,i){const r=e[n];i=lf([t.to,i,r,t.from]);const s=lf([t.from,r,i]);this._active=!0,this._fn=t.fn||op[t.type||typeof s],this._easing=bd[t.easing]||bd.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=lf([t.to,e,i,t.from]),this._from=lf([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,a=this._to;let o;if(this._active=r!==a&&(s||e<n),!this._active)return this._target[i]=a,void this._notify(!0);e<0?this._target[i]=r:(o=e/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[i]=this._fn(r,a,o))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class cp{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!gh(t))return;const e=Object.keys(Id.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!gh(r))return;const s={};for(const t of e)s[t]=r[t];(mh(r.properties)&&r.properties||[i]).forEach(t=>{t!==i&&n.has(t)||n.set(t,s)})})}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const e=t[i[r]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),s=Object.keys(e),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(r[l]=u=new lp(h,t,l,c),i.push(u)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(sp.add(this._chart,n),!0):void 0}}function up(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:i?s:r,end:i?r:s}}function hp(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function dp(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=t.keys,s="single"===i.mode;let a,o,l,c;if(null===e)return;let u=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===n){if(u=!0,i.all)continue;break}c=t.values[l],vh(c)&&(s||0===e||Gh(e)===Gh(c))&&(e+=c)}return u||i.all?e:0}function fp(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function pp(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function mp(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function gp(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=i,l=s.axis,c=a.axis,u=function(t,e,n){return"".concat(t.id,".").concat(e.id,".").concat(n.stack||n.type)}(s,a,i),h=e.length;let d;for(let f=0;f<h;++f){const t=e[f],{[l]:n,[c]:s}=t;d=(t._stacks||(t._stacks={}))[c]=pp(r,u,n),d[o]=s,d._top=mp(d,a,!0,i.type),d._bottom=mp(d,a,!1,i.type);(d._visualValues||(d._visualValues={}))[o]=s}}function vp(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function yp(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const xp=t=>"reset"===t||"none"===t,_p=(t,e)=>e?t:Object.assign({},t);class bp{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=fp(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&yp(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=xh(n.xAxisID,vp(t,"x")),s=e.yAxisID=xh(n.yAxisID,vp(t,"y")),a=e.rAxisID=xh(n.rAxisID,vp(t,"r")),o=e.indexAxis,l=e.iAxisID=i(o,r,s,a),c=e.vAxisID=i(o,s,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ud(this._data,this),t._stacked&&yp(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(gh(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:n,vScale:i}=e,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",a=Object.keys(t),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[r]:u,[s]:t[u]};return o}(e,t)}else if(n!==e){if(n){ud(n,this);const t=this._cachedMeta;yp(t),t._parsed=[]}e&&Object.isExtensible(e)&&(r=this,(i=e)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),cd.forEach(t=>{const e="_onData"+Nh(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const a=n.apply(this,r);return i._chartjs.listeners.forEach(t=>{"function"===typeof t[e]&&t[e](...r)}),a}})}))),this._syncList=[],this._data=e}var i,r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=fp(e.vScale,e),e.stack!==n.stack&&(i=!0,yp(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&(gp(this,e._parsed),e._stacked=fp(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,a=r.axis;let o,l,c,u=0===t&&e===i.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=mh(i[t])?this.parseArrayData(n,i,t,e):gh(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===l[a]||h&&l[a]<h[a];for(o=0;o<e;++o)n._parsed[o+t]=l=c[o],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&gp(this,c)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:s}=t,a=r.axis,o=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[a]:c||r.parse(l[f],f),[o]:s.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:r,yScale:s}=t,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=e[c],a[o]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(t,e,n,i){const{xScale:r,yScale:s}=t,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=e[h],l[c]={x:r.parse(Lh(d,a),h),y:s.parse(Lh(d,o),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,s=e[t.axis];return dp({keys:hp(i,!0),values:e._stacks[t.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let s=null===r?NaN:r;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,s=dp(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,s=i.length,a=this._getOtherScale(t),o=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:hp(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=i[h];const e=d[a.axis];return!vh(d[t.axis])||c>e||u<e}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,t,d,o),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,t,d,o);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i][t.axis],vh(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return gh(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(xh(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=up(t,n),r=up(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,r,a,o),c=a;c<a+o;++c){const e=i[c];e.hidden||(e.active&&l?s.push(e):e.draw(t,r))}for(c=0;c<s.length;++c)s[c].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return cf(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return cf(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===e,r=this._cachedDataOpts,s=t+"-"+e,a=r[s],o=this.enableOptionSharing&&kh(n);if(a)return _p(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=i?["".concat(t,"Hover"),"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(Id.elements[t]),f=l.resolveNamedOptions(h,d,()=>this.getContext(n,i,e),u);return f.$shared&&(f.$shared=o,r[s]=Object.freeze(_p(f,o))),f}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(e),a=r[s];if(a)return a;let o;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),s=i.getOptionScopes(this.getDataset(),r);o=i.createResolver(s,this.getContext(t,n,e))}const l=new cp(i,o&&o.animations);return o&&o._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||xp(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:s}}updateElement(t,e,n,i){xp(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!xp(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const i=n.length,r=e.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=t+e;let a;const o=t=>{for(t.length+=e,a=t.length-1;a>=s;a--)t[a]=t[a-e]};for(o(r),a=t;a<s;++a)r[a]=new this.dataElementType;this._parsing&&o(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&yp(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function wp(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=hd(i.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let i,r,s,a,o=e._length;const l=()=>{32767!==s&&-32768!==s&&(kh(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(i=0,r=n.length;i<r;++i)s=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=e.ticks.length;i<r;++i)s=e.getPixelForTick(i),l();return o}function Sp(t,e,n,i){return mh(t)?function(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),a=Math.min(r,s),o=Math.max(r,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Mp(t,e,n,i){const r=t.iScale,s=t.vScale,a=r.getLabels(),o=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[r.axis]=o||r.parse(a[c],c),l.push(Sp(d,h,s,c));return l}function Ep(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Tp(t,e,n,i){let r=e.borderSkipped;const s={};if(!r)return void(t.borderSkipped=s);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[Ap(u,a,o,l)]=!0,r=c)),s[Ap(r,a,o,l)]=!0,t.borderSkipped=s}function Ap(t,e,n,i){var r,s,a;return i?(a=n,t=Cp(t=(r=t)===(s=e)?a:r===a?s:r,n,e)):t=Cp(t,e,n),t}function Cp(t,e,n){return"start"===t?e:"end"===t?n:t}function Pp(t,e,n){let{inflateAmount:i}=e;t.inflateAmount="auto"===i?1===n?.33:0:i}(0,Nu.A)(bp,"defaults",{}),(0,Nu.A)(bp,"datasetElementType",null),(0,Nu.A)(bp,"dataElementType",null);class Rp extends bp{parsePrimitiveData(t,e,n,i){return Mp(t,e,n,i)}parseArrayData(t,e,n,i){return Mp(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:s}=t,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===r.axis?a:o,c="x"===s.axis?a:o,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[r.axis]=r.parse(Lh(p,l),h),u.push(Sp(Lh(p,c),f,s,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),s=r._custom,a=Ep(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,i);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=r||ph(e[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(e._stacks||{})[a.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||Ep(e._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(m.options=u||this.resolveDataElementOptions(d,t[d].active?"active":i));const g=m.options||t[d].options;Tp(m,g,p,s),Pp(m,g,c.ratio),this.updateElement(t[d],d,m,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),r=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(e),o=a&&a[n.axis],l=t=>{const e=t._parsed.find(t=>t[n.axis]===o),i=e&&e[t.vScale.axis];if(ph(i)||isNaN(i))return!0};for(const c of i)if((void 0===e||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[xh("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,s;for(r=0,s=e.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||wp(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,a=r||0,o=this.getParsed(t),l=o._custom,c=Ep(l);let u,h,d=o[e.axis],f=0,p=n?this.applyStack(e,o,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&Gh(d)!==Gh(l.barEnd)&&(f=0),f+=d);const m=ph(r)||c?f:r;let g=e.getPixelForValue(m);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):g,h=u-g,Math.abs(h)<s){h=function(t,e,n){return 0!==t?Gh(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(h,e,a)*s,d===a&&(g-=h/2);const t=e.getPixelForDecimal(0),r=e.getPixelForDecimal(1),l=Math.min(t,r),f=Math.max(t,r);g=Math.max(Math.min(g,f),l),u=g+h,n&&!c&&(o._stacks[e.axis]._visualValues[i]=e.getValueForPixel(u)-e.getValueForPixel(g))}if(g===e.getPixelForValue(a)){const t=Gh(h)*e.getLineWidthForValue(a)/2;g+=t,h-=t}return{size:h,base:g,head:u,center:u+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,s=xh(i.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,c="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,s=r[t];let a=t>0?r[t-1]:null,o=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?e.end-e.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,i,n*l):function(t,e,n,i){const r=n.barThickness;let s,a;return ph(r)?(s=e.min*n.categoryPercentage,a=n.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:e.pixels[t]-s/2}}(t,e,i,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(xh(u,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+h;a=c.start+c.chunk*d+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),o=Math.min(s,e.min*e.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[e.axis]||n[r].hidden||n[r].draw(this._ctx)}}(0,Nu.A)(Rp,"id","bar"),(0,Nu.A)(Rp,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Nu.A)(Rp,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Lp extends bp{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let s=0;s<r.length;s++){const t=e[n+s];r[s]._custom=xh(t[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let s=0;s<r.length;s++){const t=e[n+s];r[s]._custom=xh(t&&t.r&&+t.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y),l=s._custom;return{label:n[t]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(e,i),c=s.axis,u=a.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=o||this.resolveDataElementOptions(h,e.active?"active":i),r&&(d.options.radius=0)),this.updateElement(e,h,d,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=xh(n&&n._custom,r),i}}(0,Nu.A)(Lp,"id","bubble"),(0,Nu.A)(Lp,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Nu.A)(Lp,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Np extends bp{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,a=t=>+n[t];if(gh(n[t])){const{key:t="value"}=this._parsing;a=e=>+Lh(n[e],t)}for(r=t,s=t+e;r<s;++r)i._parsed[r]=a(r)}}_getRotation(){return Kh(this.options.rotation-90)}_getCircumference(){return Kh(this.options.circumference)}_getRotationExtents(){let t=zh,e=-zh;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function(t,e,n){let i=1,r=1,s=0,a=0;if(e<zh){const o=t,l=o+e,c=Math.cos(o),u=Math.sin(o),h=Math.cos(l),d=Math.sin(l),f=(t,e,i)=>id(t,o,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>id(t,o,l,!0)?-1:Math.min(e,e*n,i,i*n),m=f(0,c,h),g=f(Bh,u,d),v=p(Ih,c,h),y=p(Ih+Bh,u,d);i=(m-v)/2,r=(g-y)/2,s=-(m+v)/2,a=-(g+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}(d,h,o),v=(n.width-s)/f,y=(n.height-s)/p,x=Math.max(Math.min(v,y)/2,0),_=_h(this.options.radius,x),b=(_-Math.max(_*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*_,this.offsetY=g*_,i.total=this.calculateTotal(),this.outerRadius=_-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/zh)}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&o.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,i);let m,g=this._getRotation();for(m=0;m<e;++m)g+=this._circumference(m,r);for(m=e;m<e+n;++m){const e=this._circumference(m,r),n=t[m],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+e,circumference:e,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(m,n.active?"active":i)),g+=e,this.updateElement(n,m,s,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?zh*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Cd(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,s,a,o;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),t=s.data,a=s.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)o=a.resolveDataElementOptions(i),"inner"!==o.borderAlign&&(e=Math.max(e,o.borderWidth||0,o.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(xh(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,Nu.A)(Np,"id","doughnut"),(0,Nu.A)(Np,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Nu.A)(Np,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),(0,Nu.A)(Np,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,r)=>{const s=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class kp extends bp{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,s=this.chart._animationsDisabled;let{start:a,count:o}=gd(e,i,s);this._drawStart=a,this._drawCount=o,vd(e)&&(a=0,o=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},t),this.updateElements(i,a,o,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,i),h=s.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,m=Zh(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||"none"===i,v=e+n,y=t.length;let x=e>0&&this.getParsed(e-1);for(let _=0;_<y;++_){const n=t[_],f=g?n:{};if(_<e||_>=v){f.skip=!0;continue}const y=this.getParsed(_),b=ph(y[d]),w=f[h]=s.getPixelForValue(y[h],_),S=f[d]=r||b?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,y,o):y[d],_);f.skip=isNaN(w)||isNaN(S)||b,f.stop=_>0&&Math.abs(y[h]-x[h])>m,p&&(f.parsed=y,f.raw=l.data[_]),u&&(f.options=c||this.resolveDataElementOptions(_,n.active?"active":i)),g||this.updateElement(n,_,f,i),x=y}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}(0,Nu.A)(kp,"id","line"),(0,Nu.A)(kp,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Nu.A)(kp,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Op extends bp{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Cd(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return Sf.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*Ih;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,i,f);for(h=e;h<e+n;h++){const e=t[h];let n=d,p=d+this._computeAngle(h,i,f),m=s.getDataVisibility(h)?o.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(a.animateScale&&(m=0),a.animateRotate&&(n=p=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,g,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?Kh(this.resolveDataElementOptions(t,e).angle||n):0}}(0,Nu.A)(Op,"id","polarArea"),(0,Nu.A)(Op,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Nu.A)(Op,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,r)=>{const s=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Dp extends Np{}(0,Nu.A)(Dp,"id","pie"),(0,Nu.A)(Dp,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Ip extends bp{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return Sf.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,s,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let a=e;a<e+n;a++){const e=t[a],n=this.resolveDataElementOptions(a,e.active?"active":i),o=r.getPointPositionForValue(a,this.getParsed(a).r),l=s?r.xCenter:o.x,c=s?r.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,a,u,i)}}}(0,Nu.A)(Ip,"id","radar"),(0,Nu.A)(Ip,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Nu.A)(Ip,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class zp extends bp{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y);return{label:n[t]||"",value:"("+a+", "+o+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:s}=gd(e,n,i);if(this._drawStart=r,this._drawCount=s,vd(e)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:a},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=s.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,g=Zh(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=e>0&&this.getParsed(e-1);for(let x=e;x<e+n;++x){const e=t[x],n=this.getParsed(x),c=v?e:{},p=ph(n[f]),_=c[d]=s.getPixelForValue(n[d],x),b=c[f]=r||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],x);c.skip=isNaN(_)||isNaN(b)||p,c.stop=x>0&&Math.abs(n[d]-y[d])>g,m&&(c.parsed=n,c.raw=l.data[x]),h&&(c.options=u||this.resolveDataElementOptions(x,e.active?"active":i)),v||this.updateElement(e,x,c,i),y=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,s)/2}}(0,Nu.A)(zp,"id","scatter"),(0,Nu.A)(zp,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Nu.A)(zp,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function jp(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Up{static override(t){Object.assign(Up.prototype,t)}constructor(t){(0,Nu.A)(this,"options",void 0),this.options=t||{}}init(){}formats(){return jp()}parse(){return jp()}format(){return jp()}add(){return jp()}diff(){return jp()}startOf(){return jp()}endOf(){return jp()}}var Fp=Up;function Bp(t,e,n,i){const{controller:r,data:s,_sorted:a}=t,o=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&"r"!==e&&a&&s.length){const a=o._reversePixels?ld:od;if(!i){const i=a(s,e,n);if(l){const{vScale:e}=r._cachedMeta,{_parsed:n}=t,s=n.slice(0,i.lo+1).reverse().findIndex(t=>!ph(t[e.axis]));i.lo-=Math.max(0,s);const a=n.slice(i.hi).findIndex(t=>!ph(t[e.axis]));i.hi+=Math.max(0,a)}return i}if(r._sharedOptions){const t=s[0],i="function"===typeof t.getRange&&t.getRange(e);if(i){const t=a(s,e,n-i),r=a(s,e,n+i);return{lo:t.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function Hp(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),a=n[e];for(let o=0,l=s.length;o<l;++o){const{index:t,data:n}=s[o],{lo:l,hi:c}=Bp(s[o],e,a,r);for(let e=l;e<=c;++e){const r=n[e];r.skip||i(r,t,e)}}}function Vp(t,e,n,i,r){const s=[];if(!r&&!t.isPointInArea(e))return s;return Hp(t,n,e,function(n,a,o){(r||Vd(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&s.push({element:n,datasetIndex:a,index:o})},!0),s}function Wp(t,e,n,i,r,s){let a=[];const o=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,s=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return Hp(t,n,e,function(n,c,u){const h=n.inRange(e.x,e.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||t.isPointInArea(d))&&!h)return;const f=o(e,d);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function Gp(t,e,n,i,r,s){return s||t.isPointInArea(e)?"r"!==n||i?Wp(t,e,n,i,r,s):function(t,e,n,i){let r=[];return Hp(t,n,e,function(t,n,s){const{startAngle:a,endAngle:o}=t.getProps(["startAngle","endAngle"],i),{angle:l}=$h(t,{x:e.x,y:e.y});id(l,a,o)&&r.push({element:t,datasetIndex:n,index:s})}),r}(t,e,n,r):[]}function Xp(t,e,n,i,r){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return Hp(t,n,e,(t,i,l)=>{t[a]&&t[a](e[n],r)&&(s.push({element:t,datasetIndex:i,index:l}),o=o||t.inRange(e.x,e.y,r))}),i&&!o?[]:s}var qp={evaluateInteractionItems:Hp,modes:{index(t,e,n,i){const r=zf(e,t),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?Vp(t,r,s,i,a):Gp(t,r,s,!1,i,a),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=o[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,i){const r=zf(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?Vp(t,r,s,i,a):Gp(t,r,s,!1,i,a);if(o.length>0){const e=o[0].datasetIndex,n=t.getDatasetMeta(e).data;o=[];for(let t=0;t<n.length;++t)o.push({element:n[t],datasetIndex:e,index:t})}return o},point:(t,e,n,i)=>Vp(t,zf(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const r=zf(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;return Gp(t,r,s,n.intersect,i,a)},x:(t,e,n,i)=>Xp(t,zf(e,t),"x",n.intersect,i),y:(t,e,n,i)=>Xp(t,zf(e,t),"y",n.intersect,i)}};const Zp=["left","top","right","bottom"];function Yp(t,e){return t.filter(t=>t.pos===e)}function Kp(t,e){return t.filter(t=>-1===Zp.indexOf(t.pos)&&t.box.axis===e)}function Jp(t,e){return t.sort((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function Qp(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!Zp.includes(i))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,a,o;for(s=0,a=t.length;s<a;++s){o=t[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*i:a&&e.availableWidth,o.height=r):(o.width=i,o.height=c?c*r:a&&e.availableHeight)}return n}function $p(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function tm(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function em(t,e,n,i){const{pos:r,box:s}=n,a=t.maxPadding;if(!gh(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[r]+=n.size}s.getPadding&&tm(a,s.getPadding());const o=Math.max(0,e.outerWidth-$p(a,t,"left","right")),l=Math.max(0,e.outerHeight-$p(a,t,"top","bottom")),c=o!==t.w,u=l!==t.h;return t.w=o,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function nm(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{i[t]=Math.max(e[t],n[t])}),i}return i(t?["left","right"]:["top","bottom"])}function im(t,e,n,i){const r=[];let s,a,o,l,c,u;for(s=0,a=t.length,c=0;s<a;++s){o=t[s],l=o.box,l.update(o.width||e.w,o.height||e.h,nm(o.horizontal,e));const{same:a,other:h}=em(e,n,o,i);c|=a&&r.length,u=u||h,l.fullSize||r.push(o)}return c&&im(r,e,n,i)||u}function rm(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function sm(t,e,n,i){const r=n.padding;let{x:s,y:a}=e;for(const o of t){const t=o.box,l=i[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const i=e.w*c,s=l.size||t.height;kh(l.start)&&(a=l.start),t.fullSize?rm(t,r.left,a,n.outerWidth-r.right-r.left,s):rm(t,e.left+l.placed,a,i,s),l.start=a,l.placed+=i,a=t.bottom}else{const i=e.h*c,a=l.size||t.width;kh(l.start)&&(s=l.start),t.fullSize?rm(t,s,r.top,a,n.outerHeight-r.bottom-r.top):rm(t,s,e.top+l.placed,a,i),l.start=s,l.placed+=i,s=t.right}}e.x=s,e.y=a}var am={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=af(t.options.layout.padding),s=Math.max(e-r.width,0),a=Math.max(n-r.height,0),o=function(t){const e=function(t){const e=[];let n,i,r,s,a,o;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:s,options:{stack:a,stackWeight:o=1}}=r),e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return e}(t),n=Jp(e.filter(t=>t.box.fullSize),!0),i=Jp(Yp(e,"left"),!0),r=Jp(Yp(e,"right")),s=Jp(Yp(e,"top"),!0),a=Jp(Yp(e,"bottom")),o=Kp(e,"x"),l=Kp(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:Yp(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}(t.boxes),l=o.vertical,c=o.horizontal;wh(t.boxes,t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()});const u=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),d=Object.assign({},r);tm(d,af(i));const f=Object.assign({maxPadding:d,w:s,h:a,x:r.left,y:r.top},r),p=Qp(l.concat(c),h);im(o.fullSize,f,h,p),im(l,f,h,p),im(c,f,h,p)&&im(l,f,h,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),sm(o.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,sm(o.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},wh(o.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class om{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class lm extends om{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const cm="$chartjs",um={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hm=t=>null===t||""===t;const dm=!!Bf&&{passive:!0};function fm(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,dm)}function pm(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function mm(t,e,n){const i=t.canvas,r=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||pm(n.addedNodes,i),e=e&&!pm(n.removedNodes,i);e&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function gm(t,e,n){const i=t.canvas,r=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||pm(n.removedNodes,i),e=e&&!pm(n.addedNodes,i);e&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const vm=new Map;let ym=0;function xm(){const t=window.devicePixelRatio;t!==ym&&(ym=t,vm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function _m(t,e,n){const i=t.canvas,r=i&&Nf(i);if(!r)return;const s=fd((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()},window),a=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||s(n,i)});return a.observe(r),function(t,e){vm.size||window.addEventListener("resize",xm),vm.set(t,e)}(t,s),a}function bm(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){vm.delete(t),vm.size||window.removeEventListener("resize",xm)}(t)}function wm(t,e,n){const i=t.canvas,r=fd(e=>{null!==t.ctx&&n(function(t,e){const n=um[t.type]||t.type,{x:i,y:r}=zf(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))},t);return function(t,e,n){t&&t.addEventListener(e,n,dm)}(i,e,r),r}class Sm extends om{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[cm]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",hm(r)){const e=Hf(t,"width");void 0!==e&&(t.width=e)}if(hm(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Hf(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[cm])return!1;const n=e[cm].initial;["height","width"].forEach(t=>{const i=n[t];ph(i)?e.removeAttribute(t):e.setAttribute(t,i)});const i=n.style||{};return Object.keys(i).forEach(t=>{e.style[t]=i[t]}),e.width=e.width,delete e[cm],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:mm,detach:gm,resize:_m}[e]||wm;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:bm,detach:bm,resize:bm}[e]||fm)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return Uf(t,e,n,i)}isAttached(t){const e=t&&Nf(t);return!(!e||!e.isConnected)}}class Mm{constructor(){(0,Nu.A)(this,"x",void 0),(0,Nu.A)(this,"y",void 0),(0,Nu.A)(this,"active",!1),(0,Nu.A)(this,"options",void 0),(0,Nu.A)(this,"$animations",void 0)}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Zh(this.x)&&Zh(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach(t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),i}}function Em(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>r)return function(t,e,n,i){let r,s=0,a=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===a&&(e.push(t[r]),s++,a=n[s*i])}(e,c,s,a/r),c;const u=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const s=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}(i);for(let a=0,o=s.length-1;a<o;a++){const t=s[a];if(t>r)return t}return Math.max(r,1)}(s,e,r);if(a>0){let t,n;const i=a>1?Math.round((l-o)/(a-1)):null;for(Tm(e,c,u,ph(i)?0:o-i,o),t=0,n=a-1;t<n;t++)Tm(e,c,u,s[t],s[t+1]);return Tm(e,c,u,l,ph(i)?e.length:l+i),c}return Tm(e,c,u),c}function Tm(t,e,n,i,r){const s=xh(i,0),a=Math.min(xh(r,t.length),t.length);let o,l,c,u=0;for(n=Math.ceil(n),r&&(o=r-i,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(e.push(t[l]),u++,c=Math.round(s+u*n))}(0,Nu.A)(Mm,"defaults",{}),(0,Nu.A)(Mm,"defaultRoutes",void 0);const Am=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Cm=(t,e)=>Math.min(e||t,t);function Pm(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function Rm(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,a=t._endPixel,o=1e-6;let l,c=t.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-o||c>a+o)))return c}function Lm(t){return t.drawTicks?t.tickLength:0}function Nm(t,e){if(!t.display)return 0;const n=of(t.font,e),i=af(t.padding);return(mh(t.text)?t.text.length:1)*n.lineHeight+i.height}function km(t,e,n){let i=pd(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class Om extends Mm{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=yh(t,Number.POSITIVE_INFINITY),e=yh(e,Number.NEGATIVE_INFINITY),n=yh(n,Number.POSITIVE_INFINITY),i=yh(i,Number.NEGATIVE_INFINITY),{min:yh(t,n),max:yh(e,i),minDefined:vh(t),maxDefined:vh(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)e=a[o].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),s||(i=Math.max(i,e.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:yh(n,yh(i,n)),max:yh(i,yh(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){bh(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:r}=t,s=_h(e,(r-i)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(i,-Math.abs(s)),max:a(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?Pm(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Em(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){bh(this.options.afterUpdate,[this])}beforeSetDimensions(){bh(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){bh(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),bh(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){bh(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=bh(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){bh(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){bh(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Cm(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let s,a,o,l=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=rd(this.chart.width-u,0,this.maxWidth);s=t.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(t.offset?.5:1)),a=this.maxHeight-Lm(t.grid)-e.padding-Nm(t.title,this.chart.options.font),o=Math.sqrt(u*u+h*h),l=Jh(Math.min(Math.asin(rd((c.highest.height+6)/s,-1,1)),Math.asin(rd(a/o,-1,1))-Math.asin(rd(h/o,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){bh(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){bh(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=Nm(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=Lm(r)+s):(t.height=this.maxHeight,t.width=Lm(r)+s),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:s}=this._getLabelSizes(),o=2*n.padding,l=Kh(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const e=n.mirror?0:u*r.width+c*s.height;t.height=Math.min(this.maxHeight,t.height+e+o)}else{const e=n.mirror?0:c*r.width+u*s.height;t.width=Math.min(this.maxWidth,t.width+e+o)}this._calculatePadding(e,i,u,c)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;o?l?(u=i*t.width,h=n*e.height):(u=n*t.height,h=i*e.width):"start"===r?h=e.width:"end"===r?u=t.width:"inner"!==r&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){bh(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)ph(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Pm(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:r}=this,s=[],a=[],o=Math.floor(e/Cm(e,n));let l,c,u,h,d,f,p,m,g,v,y,x=0,_=0;for(l=0;l<e;l+=o){if(h=t[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},m=d.lineHeight,g=v=0,ph(h)||mh(h)){if(mh(h))for(c=0,u=h.length;c<u;++c)y=h[c],ph(y)||mh(y)||(g=zd(i,p.data,p.gc,g,y),v+=m)}else g=zd(i,p.data,p.gc,g,h),v=m;s.push(g),a.push(v),x=Math.max(g,x),_=Math.max(v,_)}!function(t,e){wh(t,t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}})}(r,e);const b=s.indexOf(x),w=a.indexOf(_),S=t=>({width:s[t]||0,height:a[t]||0});return{first:S(0),last:S(e-1),widest:S(b),highest:S(w),widths:s,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return rd(this._alignToPixels?Ud(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return cf(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=cf(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=Kh(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),s=t.autoSkipPadding||0,a=r?r.widest.width+s:0,o=r?r.highest.height+s:0;return this.isHorizontal()?o*n>a*i?a/n:o/i:o*i<a*n?o/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:a}=i,o=r.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=Lm(r),h=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,m=function(t){return Ud(n,t,f)};let g,v,y,x,_,b,w,S,M,E,T,A;if("top"===s)g=m(this.bottom),b=this.bottom-u,S=g-p,E=m(t.top)+p,A=t.bottom;else if("bottom"===s)g=m(this.top),E=t.top,A=m(t.bottom)-p,b=g+p,S=this.top+u;else if("left"===s)g=m(this.right),_=this.right-u,w=g-p,M=m(t.left)+p,T=t.right;else if("right"===s)g=m(this.left),M=t.left,T=m(t.right)-p,_=g+p,w=this.left+u;else if("x"===e){if("center"===s)g=m((t.top+t.bottom)/2+.5);else if(gh(s)){const t=Object.keys(s)[0],e=s[t];g=m(this.chart.scales[t].getPixelForValue(e))}E=t.top,A=t.bottom,b=g+p,S=b+u}else if("y"===e){if("center"===s)g=m((t.left+t.right)/2);else if(gh(s)){const t=Object.keys(s)[0],e=s[t];g=m(this.chart.scales[t].getPixelForValue(e))}_=g-p,w=_-u,M=t.left,T=t.right}const C=xh(i.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/C));for(v=0;v<c;v+=P){const t=this.getContext(v),e=r.setContext(t),i=a.setContext(t),s=e.lineWidth,c=e.color,u=i.dash||[],d=i.dashOffset,f=e.tickWidth,p=e.tickColor,m=e.tickBorderDash||[],g=e.tickBorderDashOffset;y=Rm(this,v,o),void 0!==y&&(x=Ud(n,y,s),l?_=w=M=T=x:b=S=E=A=x,h.push({tx1:_,ty1:b,tx2:w,ty2:S,x1:M,y1:E,x2:T,y2:A,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=r,h=Lm(n.grid),d=h+c,f=u?-c:d,p=-Kh(this.labelRotation),m=[];let g,v,y,x,_,b,w,S,M,E,T,A,C="middle";if("top"===i)b=this.bottom-f,w=this._getXAxisLabelAlignment();else if("bottom"===i)b=this.top+f,w=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(h);w=t.textAlign,_=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(h);w=t.textAlign,_=t.x}else if("x"===e){if("center"===i)b=(t.top+t.bottom)/2+d;else if(gh(i)){const t=Object.keys(i)[0],e=i[t];b=this.chart.scales[t].getPixelForValue(e)+d}w=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)_=(t.left+t.right)/2-d;else if(gh(i)){const t=Object.keys(i)[0],e=i[t];_=this.chart.scales[t].getPixelForValue(e)}w=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===o?C="top":"end"===o&&(C="bottom"));const P=this._getLabelSizes();for(g=0,v=a.length;g<v;++g){y=a[g],x=y.label;const t=r.setContext(this.getContext(g));S=this.getPixelForTick(g)+r.labelOffset,M=this._resolveTickFontOptions(g),E=M.lineHeight,T=mh(x)?x.length:1;const e=T/2,n=t.color,o=t.textStrokeColor,c=t.textStrokeWidth;let h,d=w;if(s?(_=S,"inner"===w&&(d=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),A="top"===i?"near"===l||0!==p?-T*E+E/2:"center"===l?-P.highest.height/2-e*E+E:-P.highest.height+E/2:"near"===l||0!==p?E/2:"center"===l?P.highest.height/2-e*E:P.highest.height-T*E,u&&(A*=-1),0===p||t.showLabelBackdrop||(_+=E/2*Math.sin(p))):(b=S,A=(1-T)*E/2),t.showLabelBackdrop){const e=af(t.backdropPadding),n=P.heights[g],i=P.widths[g];let r=A-e.top,s=0-e.left;switch(C){case"middle":r-=n/2;break;case"bottom":r-=n}switch(w){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":g===v-1?s-=i:g>0&&(s-=i/2)}h={left:s,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}m.push({label:x,font:M,textOffset:A,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:d,textBaseline:C,translation:[_,b],backdrop:h}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Kh(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=t+r,a=this._getLabelSizes().widest.width;let o,l;return"left"===e?i?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===e?i?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(e=>e.value===t);if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,s;const a=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,s=i.length;r<s;++r){const t=i[r];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const a=i.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=Ud(t,this.left,s)-s/2,c=Ud(t,this.right,a)+a/2,u=h=o):(u=Ud(t,this.top,s)-s/2,h=Ud(t,this.bottom,a)+a/2,l=c=o),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&Wd(e,n);const i=this.getLabelItems(t);for(const r of i){const t=r.options,n=r.font;Kd(e,r.label,0,r.textOffset,n,t)}n&&Gd(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=of(n.font),s=af(n.padding),a=n.align;let o=r.lineHeight/2;"bottom"===e||"center"===e||gh(e)?(o+=s.bottom,mh(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(t,e,n,i){const{top:r,left:s,bottom:a,right:o,chart:l}=t,{chartArea:c,scales:u}=l;let h,d,f,p=0;const m=a-r,g=o-s;if(t.isHorizontal()){if(d=md(i,s,o),gh(n)){const t=Object.keys(n)[0],i=n[t];f=u[t].getPixelForValue(i)+m-e}else f="center"===n?(c.bottom+c.top)/2+m-e:Am(t,n,e);h=o-s}else{if(gh(n)){const t=Object.keys(n)[0],i=n[t];d=u[t].getPixelForValue(i)-g+e}else d="center"===n?(c.left+c.right)/2-g+e:Am(t,n,e);f=md(i,a,r),p="left"===n?-Bh:Bh}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,o,e,a);Kd(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:km(a,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=xh(t.grid&&t.grid.z,-1),i=xh(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Om.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=e.length;r<s;++r){const s=e[r];s[n]!==this.id||t&&s.type!==t||i.push(s)}return i}_resolveTickFontOptions(t){return of(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Dm{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=Ah(Object.create(null),[n?Id.get(n):{},Id.get(e),t.defaults]);Id.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),a=e[n].split("."),o=a.pop(),l=a.join(".");Id.route(s,r,l,o)})}(e,t.defaultRoutes);t.descriptors&&Id.describe(e,t.descriptors)}(t,s,n),this.override&&Id.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in Id[i]&&(delete Id[i][n],this.override&&delete Ld[n])}}class Im{constructor(){this.controllers=new Dm(bp,"datasets",!0),this.elements=new Dm(Mm,"elements"),this.plugins=new Dm(Object,"plugins"),this.scales=new Dm(Om,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e)}remove(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e)}addControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.controllers)}addElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.elements)}addPlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.plugins)}addScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.controllers)}removeElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.elements)}removePlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.plugins)}removeScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.scales)}_each(t,e,n){[...e].forEach(e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):wh(e,e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)})})}_exec(t,e,n){const i=Nh(t);bh(n["before"+i],[],n),e[t](n),bh(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var zm=new Im;class jm{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),s=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===bh(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){ph(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=xh(n.options&&n.options.plugins,{}),r=function(t){const e={},n=[],i=Object.keys(zm.plugins.items);for(let s=0;s<i.length;s++)n.push(zm.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const t=r[s];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,e,n,i){let{plugins:r,localIds:s}=e;const a=[],o=t.getContext();for(const l of r){const e=l.id,r=Um(n[e],i);null!==r&&a.push({plugin:l,options:Fm(t.config,{plugin:l,local:s[e]},r,o)})}return a}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function Um(t,e){return e||!1!==t?!0===t?{}:t:null}function Fm(t,e,n,i){let{plugin:r,local:s}=e;const a=t.pluginScopeKeys(r),o=t.getOptionScopes(n,a);return s&&r.defaults&&o.push(r.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Bm(t,e){const n=Id.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Hm(t){if("x"===t||"y"===t||"r"===t)return t}function Vm(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function Wm(t){if(Hm(t))return t;for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(const r of n){const e=r.axis||Vm(r.position)||t.length>1&&Hm(t[0].toLowerCase());if(e)return e}throw new Error("Cannot determine type of '".concat(t,"' axis. Please provide 'axis' or 'position' option."))}function Gm(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Xm(t,e){const n=Ld[t.type]||{scales:{}},i=e.scales||{},r=Bm(t.type,e),s=Object.create(null);return Object.keys(i).forEach(e=>{const a=i[e];if(!gh(a))return console.error("Invalid scale configuration for scale: ".concat(e));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));const o=Wm(e,a,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(n.length)return Gm(t,"x",n[0])||Gm(t,"y",n[0])}return{}}(e,t),Id.scales[a.type]),l=function(t,e){return t===e?"_index_":"_value_"}(o,r),c=n.scales||{};s[e]=Ch(Object.create(null),[{axis:o},a,c[o],c[l]])}),t.data.datasets.forEach(n=>{const r=n.type||t.type,a=n.indexAxis||Bm(r,e),o=(Ld[r]||{}).scales||{};Object.keys(o).forEach(t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),r=n[e+"AxisID"]||e;s[r]=s[r]||Object.create(null),Ch(s[r],[{axis:e},i[r],o[t]])})}),Object.keys(s).forEach(t=>{const e=s[t];Ch(e,[Id.scales[e.type],Id.scale])}),s}function qm(t){const e=t.options||(t.options={});e.plugins=xh(e.plugins,{}),e.scales=Xm(t,e)}function Zm(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Ym=new Map,Km=new Set;function Jm(t,e){let n=Ym.get(t);return n||(n=e(),Ym.set(t,n),Km.add(n)),n}const Qm=(t,e,n)=>{const i=Lh(e,n);void 0!==i&&t.add(i)};class $m{constructor(t){this._config=function(t){return(t=t||{}).data=Zm(t.data),qm(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Zm(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),qm(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Jm(t,()=>[["datasets.".concat(t),""]])}datasetAnimationScopeKeys(t,e){return Jm("".concat(t,".transition.").concat(e),()=>[["datasets.".concat(t,".transitions.").concat(e),"transitions.".concat(e)],["datasets.".concat(t),""]])}datasetElementScopeKeys(t,e){return Jm("".concat(t,"-").concat(e),()=>[["datasets.".concat(t,".elements.").concat(e),"datasets.".concat(t),"elements.".concat(e),""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return Jm("".concat(n,"-plugin-").concat(e),()=>[["plugins.".concat(e),...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,s=this._cachedScopes(t,n),a=s.get(e);if(a)return a;const o=new Set;e.forEach(e=>{t&&(o.add(t),e.forEach(e=>Qm(o,t,e))),e.forEach(t=>Qm(o,i,t)),e.forEach(t=>Qm(o,Ld[r]||{},t)),e.forEach(t=>Qm(o,Id,t)),e.forEach(t=>Qm(o,Nd,t))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Km.has(e)&&s.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ld[e]||{},Id.datasets[e]||{},{type:e},Id,Nd]}resolveNamedOptions(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:a}=tg(this._resolverCache,t,i);let o=s;if(function(t,e){const{isScriptable:n,isIndexable:i}=df(t);for(const r of e){const e=n(r),s=i(r),a=(s||e)&&t[r];if(e&&(Oh(a)||eg(a))||s&&mh(a))return!0}return!1}(s,e)){r.$shared=!1;o=hf(s,n=Oh(n)?n():n,this.createResolver(t,n,a))}for(const l of e)r[l]=o[l];return r}createResolver(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=tg(this._resolverCache,t,n);return gh(e)?hf(r,e,void 0,i):r}}function tg(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:uf(e,n),subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},i.set(r,s)}return s}const eg=t=>gh(t)&&Object.getOwnPropertyNames(t).some(e=>Oh(t[e]));const ng=["top","bottom","left","right","chartArea"];function ig(t,e){return"top"===t||"bottom"===t||-1===ng.indexOf(t)&&"x"===e}function rg(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function sg(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),bh(n&&n.onComplete,[t],e)}function ag(t){const e=t.chart,n=e.options.animation;bh(n&&n.onProgress,[t],e)}function og(t){return Lf()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const lg={},cg=t=>{const e=og(t);return Object.values(lg).filter(t=>t.canvas===e).pop()};function ug(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const s=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=s)}}}class hg{static register(){zm.add(...arguments),dg()}static unregister(){zm.remove(...arguments),dg()}constructor(t,e){const n=this.config=new $m(e),i=og(t),r=cg(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!Lf()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?lm:Sm}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=fh(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new jm,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}(t=>this.update(t),s.resizeDelay||0),this._dataChanges=[],lg[this.id]=this,a&&o?(sp.listen(this,"complete",sg),sp.listen(this,"progress",ag),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return ph(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return zm}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ff(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Fd(this.canvas,this.ctx),this}stop(){return sp.stop(this),this}resize(t,e){sp.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,t,e,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Ff(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),bh(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){wh(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let r=[];e&&(r=r.concat(Object.keys(e).map(t=>{const n=e[t],i=Wm(t,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}}))),wh(r,e=>{const r=e.options,s=r.id,a=Wm(s,r),o=xh(r.type,e.dtype);void 0!==r.position&&ig(r.position,a)===ig(e.dposition)||(r.position=e.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(zm.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,t)}),wh(i,(t,e)=>{t||delete n[e]}),wh(n,t=>{am.configure(this,t,t.options),am.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(rg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||Bm(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=zm.getController(s),{datasetElementType:i,dataElementType:a}=Id.datasets[s];Object.assign(e,{dataElementType:zm.getElement(a),datasetElementType:i&&zm.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){wh(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:t}=this.getDatasetMeta(l),e=!i&&-1===r.indexOf(t);t.buildOrUpdateElements(e),s=Math.max(+t.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||wh(r,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(rg("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){wh(this.scales,t=>{am.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);Dh(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){ug(t,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),i=n(0);for(let r=1;r<e;r++)if(!Dh(i,n(r)))return;return Array.from(i).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;am.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],wh(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Oh(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(sp.has(this)?this.attached&&!sp.running(this)&&sp.start(this):(this.draw(),sg({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=ip(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&Wd(e,i),t.controller.draw(),i&&Gd(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Vd(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=qp.modes[e];return"function"===typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter(t=>t&&t._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=cf(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),s=r.controller._resolveAnimations(void 0,i);kh(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(r,{visible:n}),this.update(e=>e.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),sp.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Fd(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete lg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};wh(this.options.events,t=>n(t,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():s()}unbindEvents(){wh(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},wh(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,s,a,o;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,o=t.length;a<o;++a){s=t[a];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(t=>{let{datasetIndex:e,index:n}=t;const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[n],index:n}});!Sh(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),s=r(e,t),a=n?t:r(t,e);s.length&&this.updateHoverStyle(s,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,s=e,a=this._getActiveElements(t,i,n,s),o=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,o);n&&(this._lastEvent=null,bh(r.onHover,[t,a,this],this),o&&bh(r.onClick,[t,a,this],this));const c=!Sh(a,i);return(c||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function dg(){return wh(hg.instances,t=>t._plugins.invalidate())}function fg(t,e,n,i){const r=nf(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-e)/2,a=Math.min(s,i*e/2),o=t=>{const e=(n-Math.min(s,t))*i/2;return rd(t,0,Math.min(s,e))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:rd(r.innerStart,0,a),innerEnd:rd(r.innerEnd,0,a)}}function pg(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function mg(t,e,n,i,r,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const t=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==t?p*t/(t+i):p))/2}const m=(p-Math.max(.001,p*h-n/Ih)/h)/2,g=l+m+f,v=r-m-f,{outerStart:y,outerEnd:x,innerStart:_,innerEnd:b}=fg(e,d,h,v-g),w=h-y,S=h-x,M=g+y/w,E=v-x/S,T=d+_,A=d+b,C=g+_/T,P=v-b/A;if(t.beginPath(),s){const e=(M+E)/2;if(t.arc(a,o,h,M,e),t.arc(a,o,h,e,E),x>0){const e=pg(S,E,a,o);t.arc(e.x,e.y,x,E,v+Bh)}const n=pg(A,v,a,o);if(t.lineTo(n.x,n.y),b>0){const e=pg(A,P,a,o);t.arc(e.x,e.y,b,v+Bh,P+Math.PI)}const i=(v-b/d+(g+_/d))/2;if(t.arc(a,o,d,v-b/d,i,!0),t.arc(a,o,d,i,g+_/d,!0),_>0){const e=pg(T,C,a,o);t.arc(e.x,e.y,_,C+Math.PI,g-Bh)}const r=pg(w,g,a,o);if(t.lineTo(r.x,r.y),y>0){const e=pg(w,M,a,o);t.arc(e.x,e.y,y,g-Bh,M)}}else{t.moveTo(a,o);const e=Math.cos(M)*h+a,n=Math.sin(M)*h+o;t.lineTo(e,n);const i=Math.cos(E)*h+a,r=Math.sin(E)*h+o;t.lineTo(i,r)}t.closePath()}function gg(t,e,n,i,r){const{fullCircles:s,startAngle:a,circumference:o,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,p?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let m=e.endAngle;if(s){mg(t,e,n,i,m,r);for(let e=0;e<s;++e)t.stroke();isNaN(o)||(m=a+(o%zh||zh))}p&&function(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=e;let c=r/o;t.beginPath(),t.arc(s,a,o,i-c,n+c),l>r?(c=r/l,t.arc(s,a,l,n+c,i-c,!0)):t.arc(s,a,r,n+Bh,i-Bh),t.closePath(),t.clip()}(t,e,m),l.selfJoin&&m-a>=Ih&&0===f&&"miter"!==u&&function(t,e,n){const{startAngle:i,x:r,y:s,outerRadius:a,innerRadius:o,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/a,nd(i-n));if(t.beginPath(),t.arc(r,s,a-c/2,i+h/2,n-h/2),o>0){const e=Math.min(c/o,nd(i-n));t.arc(r,s,o+c/2,n-e/2,i+e/2,!0)}else{const e=Math.min(c/2,a*nd(i-n));if("round"===u)t.arc(r,s,e,n-Ih/2,i+Ih/2,!0);else if("bevel"===u){const a=2*e*e,o=-a*Math.cos(n+Ih/2)+r,l=-a*Math.sin(n+Ih/2)+s,c=a*Math.cos(i+Ih/2)+r,u=a*Math.sin(i+Ih/2)+s;t.lineTo(o,l),t.lineTo(c,u)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,m),s||(mg(t,e,n,i,m,r),t.stroke())}(0,Nu.A)(hg,"defaults",Id),(0,Nu.A)(hg,"instances",lg),(0,Nu.A)(hg,"overrides",Ld),(0,Nu.A)(hg,"registry",zm),(0,Nu.A)(hg,"version","4.5.0"),(0,Nu.A)(hg,"getChart",cg);class vg extends Mm{constructor(t){super(),(0,Nu.A)(this,"circumference",void 0),(0,Nu.A)(this,"endAngle",void 0),(0,Nu.A)(this,"fullCircles",void 0),(0,Nu.A)(this,"innerRadius",void 0),(0,Nu.A)(this,"outerRadius",void 0),(0,Nu.A)(this,"pixelMargin",void 0),(0,Nu.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=$h(i,{x:t,y:e}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=xh(u,o-a),f=id(r,a,o)&&a!==o,p=d>=zh||f,m=sd(s,l+h,c+h);return p&&m}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:o,spacing:l}=this.options,c=(i+r)/2,u=(s+a+l+o)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>zh?Math.floor(n/zh):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const o=i*(1-Math.sin(Math.min(Ih,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,r){const{fullCircles:s,startAngle:a,circumference:o}=e;let l=e.endAngle;if(s){mg(t,e,n,i,l,r);for(let e=0;e<s;++e)t.fill();isNaN(o)||(l=a+(o%zh||zh))}mg(t,e,n,i,l,r),t.fill()}(t,this,o,r,s),gg(t,this,o,r,s),t.restore()}}function yg(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.lineCap=xh(n.borderCapStyle,e.borderCapStyle),t.setLineDash(xh(n.borderDash,e.borderDash)),t.lineDashOffset=xh(n.borderDashOffset,e.borderDashOffset),t.lineJoin=xh(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=xh(n.borderWidth,e.borderWidth),t.strokeStyle=xh(n.borderColor,e.borderColor)}function xg(t,e,n){t.lineTo(n.x,n.y)}function _g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.length,{start:r=0,end:s=i-1}=n,{start:a,end:o}=e,l=Math.max(r,a),c=Math.min(s,o),u=r<a&&s<a||r>o&&s>o;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function bg(t,e,n,i){const{points:r,options:s}=e,{count:a,start:o,loop:l,ilen:c}=_g(r,n,i),u=function(t){return t.stepped?Xd:t.tension||"monotone"===t.cubicInterpolationMode?qd:xg}(s);let h,d,f,{move:p=!0,reverse:m}=i||{};for(h=0;h<=c;++h)d=r[(o+(m?c-h:h))%a],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,m,s.stepped),f=d);return l&&(d=r[(o+(m?c:0))%a],u(t,f,d,m,s.stepped)),!!l}function wg(t,e,n,i){const r=e.points,{count:s,start:a,ilen:o}=_g(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,m,g=0,v=0;const y=t=>(a+(c?o-t:t))%s,x=()=>{f!==p&&(t.lineTo(g,p),t.lineTo(g,f),t.lineTo(g,m))};for(l&&(h=r[y(0)],t.moveTo(h.x,h.y)),u=0;u<=o;++u){if(h=r[y(u)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),g=(v*g+e)/++v):(x(),t.lineTo(e,n),d=i,v=0,f=p=n),m=n}x()}function Sg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n?wg:bg}(0,Nu.A)(vg,"id","arc"),(0,Nu.A)(vg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,Nu.A)(vg,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Nu.A)(vg,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const Mg="function"===typeof Path2D;function Eg(t,e,n,i){Mg&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),yg(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:s}=e,a=Sg(e);for(const o of r)yg(t,s,o.style),t.beginPath(),a(t,e,o,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class Tg extends Mm{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;Rf(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:a,end:o}=function(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}(n,r,s,i);return $f(t,!0===i?[{start:a,end:o,loop:s}]:function(t,e,n,i){const r=t.length,s=[];let a,o=e,l=t[e];for(a=e+1;a<=n;++a){const n=t[a%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:e%r,end:(a-1)%r,loop:i}),e=o=n.stop?a:null):(o=a,l.skip&&(e=a)),l=n}return null!==o&&s.push({start:e%r,end:o%r,loop:i}),s}(n,a,o<a?o+r:o,!!t._fullLoop&&0===a&&o===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,s=Qf(this,{property:e,start:i,end:i});if(!s.length)return;const a=[],o=function(t){return t.stepped?Wf:t.tension||"monotone"===t.cubicInterpolationMode?Gf:Vf}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=r[c],d=r[u];if(h===d){a.push(h);continue}const f=o(h,d,Math.abs((i-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return Sg(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=Sg(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)s&=r(t,this,a,{start:e,end:e+n-1});return!!s}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),Eg(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Ag(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}(0,Nu.A)(Tg,"id","line"),(0,Nu.A)(Tg,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Nu.A)(Tg,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Nu.A)(Tg,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class Cg extends Mm{constructor(t){super(),(0,Nu.A)(this,"parsed",void 0),(0,Nu.A)(this,"skip",void 0),(0,Nu.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return Ag(this,t,"x",e)}inYRange(t,e){return Ag(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!Vd(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Bd(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Pg(t,e){const{x:n,y:i,base:r,width:s,height:a}=t.getProps(["x","y","base","width","height"],e);let o,l,c,u,h;return t.horizontal?(h=a/2,o=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,o=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:o,top:c,right:l,bottom:u}}function Rg(t,e,n,i){return t?0:rd(e,n,i)}function Lg(t){const e=Pg(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=rf(i);return{t:Rg(r.top,s.top,0,n),r:Rg(r.right,s.right,0,e),b:Rg(r.bottom,s.bottom,0,n),l:Rg(r.left,s.left,0,e)}}(t,n/2,i/2),s=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=sf(r),a=Math.min(e,n),o=t.borderSkipped,l=i||gh(r);return{topLeft:Rg(!l||o.top||o.left,s.topLeft,0,a),topRight:Rg(!l||o.top||o.right,s.topRight,0,a),bottomLeft:Rg(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Rg(!l||o.bottom||o.right,s.bottomRight,0,a)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Ng(t,e,n,i){const r=null===e,s=null===n,a=t&&!(r&&s)&&Pg(t,i);return a&&(r||sd(e,a.left,a.right))&&(s||sd(n,a.top,a.bottom))}function kg(t,e){t.rect(e.x,e.y,e.w,e.h)}function Og(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,a=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+a,radius:t.radius}}(0,Nu.A)(Cg,"id","point"),(0,Nu.A)(Cg,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Nu.A)(Cg,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Dg extends Mm{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=Lg(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?Jd:kg;var o;t.save(),s.w===r.w&&s.h===r.h||(t.beginPath(),a(t,Og(s,e,r)),t.clip(),a(t,Og(r,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Og(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Ng(this,t,e,n)}inXRange(t,e){return Ng(this,t,null,e)}inYRange(t,e){return Ng(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}(0,Nu.A)(Dg,"id","bar"),(0,Nu.A)(Dg,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Nu.A)(Dg,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Ig=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class zg extends Mm{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=bh(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=of(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=Ig(n,r);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,i,a,o)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((t,f)=>{const p=n+e/2+r.measureText(t.text).width;(0===f||l[l.length-1]+p+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),o[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+a}),u}_fitCols(t,e,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-t;let u=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach((t,s)=>{const{itemWidth:m,itemHeight:g}=function(t,e,n,i,r){const s=function(t,e,n,i){let r=t.text;r&&"string"!==typeof r&&(r=r.reduce((t,e)=>t.length>e.length?t:e));return e+n.size/2+i.measureText(r).width}(i,t,e,n),a=function(t,e,n){let i=t;"string"!==typeof e.text&&(i=jg(e,n));return i}(r,i,e.lineHeight);return{itemWidth:s,itemHeight:a}}(n,e,r,t,i);s>0&&d+g+2*a>c&&(u+=h+a,l.push({width:h,height:d}),f+=h+a,p++,h=d=0),o[s]={left:f,top:d,col:p,width:m,height:g},h=Math.max(h,m),d+=g+a}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,s=Xf(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=md(n,this.left+i,this.right-this.lineWidths[r]);for(const o of e)r!==o.row&&(r=o.row,a=md(n,this.left+i,this.right-this.lineWidths[r])),o.top+=this.top+t+i,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+i}else{let r=0,a=md(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const o of e)o.col!==r&&(r=o.col,a=md(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),o.top=a,o.left+=this.left+i,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Wd(t,this),this._draw(),Gd(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:s}=t,a=Id.color,o=Xf(t.rtl,this.left,this.width),l=of(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=o.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=Ig(s,u),g=this.isHorizontal(),v=this._computeTitleHeight();d=g?{x:md(r,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:md(r,this.top+v+c,this.bottom-e[0].height),line:0},qf(this.ctx,t.textDirection);const y=m+c;this.legendItems.forEach((x,_)=>{i.strokeStyle=x.fontColor,i.fillStyle=x.fontColor;const b=i.measureText(x.text).width,w=o.textAlign(x.textAlign||(x.textAlign=s.textAlign)),S=f+h+b;let M=d.x,E=d.y;o.setWidth(this.width),g?_>0&&M+S+c>this.right&&(E=d.y+=y,d.line++,M=d.x=md(r,this.left+c,this.right-n[d.line])):_>0&&E+y>this.bottom&&(M=d.x=M+e[d.line].width+c,d.line++,E=d.y=md(r,this.top+v+c,this.bottom-e[d.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=xh(n.lineWidth,1);if(i.fillStyle=xh(n.fillStyle,a),i.lineCap=xh(n.lineCap,"butt"),i.lineDashOffset=xh(n.lineDashOffset,0),i.lineJoin=xh(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=xh(n.strokeStyle,a),i.setLineDash(xh(n.lineDash,[])),s.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(t,f/2);Hd(i,a,l,e+h,s.pointStyleWidth&&f)}else{const s=e+Math.max((u-p)/2,0),a=o.leftForLtr(t,f),l=sf(n.borderRadius);i.beginPath(),Object.values(l).some(t=>0!==t)?Jd(i,{x:a,y:s,w:f,h:p,radius:l}):i.rect(a,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(o.x(M),E,x),M=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(w,M+f+h,g?M+S:this.right,t.rtl),function(t,e,n){Kd(i,n.text,t,e+m/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(M),E,x),g)d.x+=S+c;else if("string"!==typeof x.text){const t=l.lineHeight;d.y+=jg(x,t)+c}else d.y+=y}),Zf(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=of(e.font),i=af(e.padding);if(!e.display)return;const r=Xf(t.rtl,this.left,this.width),s=this.ctx,a=e.position,o=n.size/2,l=i.top+o;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=md(t.align,u,this.right-h);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);c=l+md(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=md(a,u,u+h);s.textAlign=r.textAlign(pd(a)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,Kd(s,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=of(t.font),n=af(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(sd(t,this.left,this.right)&&sd(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],sd(t,i.left,i.left+i.width)&&sd(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const i=this._hoveredItem,r=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(i,n);i&&!r&&bh(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&bh(e.onHover,[t,n,this],this)}else n&&bh(e.onClick,[t,n,this],this)}}function jg(t,e){return e*(t.text?t.text.length:0)}var Ug={id:"legend",_element:zg,start(t,e,n){const i=t.legend=new zg({ctx:t.ctx,options:n,chart:t});am.configure(t,i,n),am.addBox(t,i)},stop(t){am.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;am.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(n?0:void 0),c=af(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Fg extends Mm{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=mh(n.text)?n.text.length:1;this._padding=af(n.padding);const r=i*of(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=md(a,n,r),c=e+t,o=r-n):("left"===s.position?(l=n+t,c=md(a,i,e),u=-.5*Ih):(l=r-t,c=md(a,e,i),u=.5*Ih),o=i-e),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=of(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(i);Kd(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:o,textAlign:pd(e.align),textBaseline:"middle",translation:[r,s]})}}var Bg={id:"title",_element:Fg,start(t,e,n){!function(t,e){const n=new Fg({ctx:t.ctx,options:e,chart:t});am.configure(t,n,e),am.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;am.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;am.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Hg={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i.add(t.x),r+=t.y,++s}}if(0===s||0===i.size)return!1;const a=[...i].reduce((t,e)=>t+e)/i.size;return{x:a,y:r/s}},nearest(t,e){if(!t.length)return!1;let n,i,r,s=e.x,a=e.y,o=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=td(e,i.getCenterPoint());t<o&&(o=t,r=i)}}if(r){const t=r.tooltipPosition();s=t.x,a=t.y}return{x:s,y:a}}};function Vg(t,e){return e&&(mh(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Wg(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Gg(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:t,label:a,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Xg(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:a,boxHeight:o}=e,l=of(e.bodyFont),c=of(e.titleFont),u=of(e.footerFont),h=s.length,d=r.length,f=i.length,p=af(e.padding);let m=p.height,g=0,v=i.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){m+=f*(e.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}d&&(m+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let y=0;const x=function(t){g=Math.max(g,n.measureText(t).width+y)};return n.save(),n.font=c.string,wh(t.title,x),n.font=l.string,wh(t.beforeBody.concat(t.afterBody),x),y=e.displayColors?a+2+e.boxPadding:0,wh(i,t=>{wh(t.before,x),wh(t.lines,x),wh(t.after,x)}),y=0,n.font=u.string,wh(t.footer,x),n.restore(),g+=p.width,{width:g,height:m}}function qg(t,e,n,i){const{x:r,width:s}=n,{width:a,chartArea:{left:o,right:l}}=t;let c="center";return"center"===i?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=a-s/2&&(c="right"),function(t,e,n,i){const{x:r,width:s}=i,a=n.caretSize+n.caretPadding;return"left"===t&&r+s+a>e.width||"right"===t&&r-s-a<0||void 0}(c,t,e,n)&&(c="center"),c}function Zg(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||qg(t,e,n,i),yAlign:i}}function Yg(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=t,{xAlign:o,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=sf(a);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,o);const m=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,d)+r:"right"===o&&(p+=Math.max(h,f)+r),{x:rd(p,0,i.width-e.width),y:rd(m,0,i.height-e.height)}}function Kg(t,e,n){const i=af(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function Jg(t){return Vg([],Wg(t))}function Qg(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const $g={beforeTitle:dh,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:dh,beforeBody:dh,beforeLabel:dh,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ph(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:dh,afterBody:dh,beforeFooter:dh,footer:dh,afterFooter:dh};function tv(t,e,n,i){const r=t[e].call(n,i);return"undefined"===typeof r?$g[e].call(n,i):r}class ev extends Mm{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new cp(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,cf(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=tv(n,"beforeTitle",this,t),r=tv(n,"title",this,t),s=tv(n,"afterTitle",this,t);let a=[];return a=Vg(a,Wg(i)),a=Vg(a,Wg(r)),a=Vg(a,Wg(s)),a}getBeforeBody(t,e){return Jg(tv(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return wh(t,t=>{const e={before:[],lines:[],after:[]},r=Qg(n,t);Vg(e.before,Wg(tv(r,"beforeLabel",this,t))),Vg(e.lines,tv(r,"label",this,t)),Vg(e.after,Wg(tv(r,"afterLabel",this,t))),i.push(e)}),i}getAfterBody(t,e){return Jg(tv(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=tv(n,"beforeFooter",this,t),r=tv(n,"footer",this,t),s=tv(n,"afterFooter",this,t);let a=[];return a=Vg(a,Wg(i)),a=Vg(a,Wg(r)),a=Vg(a,Wg(s)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],s=[];let a,o,l=[];for(a=0,o=e.length;a<o;++a)l.push(Gg(this.chart,e[a]));return t.filter&&(l=l.filter((e,i,r)=>t.filter(e,i,r,n))),t.itemSort&&(l=l.sort((e,i)=>t.itemSort(e,i,n))),wh(l,e=>{const n=Qg(t.callbacks,e);i.push(tv(n,"labelColor",this,e)),r.push(tv(n,"labelPointStyle",this,e)),s.push(tv(n,"labelTextColor",this,e))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const t=Hg[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=Xg(this,n),a=Object.assign({},t,e),o=Zg(this.chart,n,a),l=Yg(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=sf(a),{x:h,y:d}=t,{width:f,height:p}=e;let m,g,v,y,x,_;return"center"===r?(x=d+p/2,"left"===i?(m=h,g=m-s,y=x+s,_=x-s):(m=h+f,g=m+s,y=x-s,_=x+s),v=m):(g="left"===i?h+Math.max(o,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(y=d,x=y-s,m=g-s,v=g+s):(y=d+p,x=y+s,m=g+s,v=g-s),_=y),{x1:m,x2:g,x3:v,y1:y,y2:x,y3:_}}drawTitle(t,e,n){const i=this.title,r=i.length;let s,a,o;if(r){const l=Xf(n.rtl,this.x,this.width);for(t.x=Kg(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",s=of(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,o=0;o<r;++o)e.fillText(i[o],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+a,o+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=r,c=of(r.bodyFont),u=Kg(this,"left",r),h=i.x(u),d=o<c.lineHeight?(c.lineHeight-o)/2:0,f=e.y+d;if(r.usePointStyle){const e={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+o/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Bd(t,e,n,c),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,Bd(t,e,n,c)}else{t.lineWidth=gh(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),a=sf(s.borderRadius);Object.values(a).some(t=>0!==t)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Jd(t,{x:e,y:f,w:l,h:o,radius:a}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),Jd(t,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,f,l,o),t.strokeRect(e,f,l,o),t.fillStyle=s.backgroundColor,t.fillRect(n,f+1,l-2,o-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=of(n.bodyFont);let h=u.lineHeight,d=0;const f=Xf(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+r},m=f.textAlign(s);let g,v,y,x,_,b,w;for(e.textAlign=s,e.textBaseline="middle",e.font=u.string,t.x=Kg(this,m,n),e.fillStyle=n.bodyColor,wh(this.beforeBody,p),d=a&&"right"!==m?"center"===s?l/2+c:l+2+c:0,x=0,b=i.length;x<b;++x){for(g=i[x],v=this.labelTextColors[x],e.fillStyle=v,wh(g.before,p),y=g.lines,a&&y.length&&(this._drawColorBox(e,t,x,f,n),h=Math.max(u.lineHeight,o)),_=0,w=y.length;_<w;++_)p(y[_]),h=u.lineHeight;wh(g.after,p)}d=0,h=u.lineHeight,wh(this.afterBody,p),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let s,a;if(r){const o=Xf(n.rtl,this.x,this.width);for(t.x=Kg(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=o.textAlign(n.footerAlign),e.textBaseline="middle",s=of(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,a=0;a<r;++a)e.fillText(i[a],o.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:s}=this,{x:a,y:o}=t,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=sf(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+u,o),"top"===s&&this.drawCaret(t,e,n,i),e.lineTo(a+l-h,o),e.quadraticCurveTo(a+l,o,a+l,o+h),"center"===s&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+l,o+c-f),e.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(t,e,n,i),e.lineTo(a+d,o+c),e.quadraticCurveTo(a,o+c,a,o+c-d),"center"===s&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(a,o+u),e.quadraticCurveTo(a,o,a+u,o),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Hg[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=Xg(this,t),a=Object.assign({},n,this._size),o=Zg(e,t,a),l=Yg(t,a,o,e);i._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=af(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),qf(t,e.textDirection),r.y+=s.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),Zf(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map(t=>{let{datasetIndex:e,index:n}=t;const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[n],index:n}}),r=!Sh(n,i),s=this._positionChanged(i,e);(r||s)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(t,r,e,n),a=this._positionChanged(s,t),o=e||!Sh(s,r)||a;return o&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),o}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const s=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,s=Hg[r.position].call(this,t,e);return!1!==s&&(n!==s.x||i!==s.y)}}(0,Nu.A)(ev,"positioners",Hg);var nv={id:"tooltip",_element:ev,positioners:Hg,afterInit(t,e,n){n&&(t.tooltip=new ev({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",(0,a.A)((0,a.A)({},n),{},{cancelable:!0})))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:$g},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function iv(t,e,n,i){const r=t.indexOf(e);if(-1===r)return((t,e,n,i)=>("string"===typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i);return r!==t.lastIndexOf(e)?n:r}function rv(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class sv extends Om{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ph(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:rd(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:iv(n,t,xh(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=t;s<=e;s++)i.push({value:s});return i}getLabelForValue(t){return rv.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function av(t,e){const n=[],{bounds:i,step:r,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=t,d=r||1,f=c-1,{min:p,max:m}=e,g=!ph(s),v=!ph(a),y=!ph(l),x=(m-p)/(u+1);let _,b,w,S,M=qh((m-p)/f/d)*d;if(M<1e-14&&!g&&!v)return[{value:p},{value:m}];S=Math.ceil(m/M)-Math.floor(p/M),S>f&&(M=qh(S*M/f/d)*d),ph(o)||(_=Math.pow(10,o),M=Math.ceil(M*_)/_),"ticks"===i?(b=Math.floor(p/M)*M,w=Math.ceil(m/M)*M):(b=p,w=m),g&&v&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-s)/r,M/1e3)?(S=Math.round(Math.min((a-s)/M,c)),M=(a-s)/S,b=s,w=a):y?(b=g?s:b,w=v?a:w,S=l-1,M=(w-b)/S):(S=(w-b)/M,S=Xh(S,Math.round(S),M/1e3)?Math.round(S):Math.ceil(S));const E=Math.max(Qh(M),Qh(b));_=Math.pow(10,ph(o)?E:o),b=Math.round(b*_)/_,w=Math.round(w*_)/_;let T=0;for(g&&(h&&b!==s?(n.push({value:s}),b<s&&T++,Xh(Math.round((b+T*M)*_)/_,s,ov(s,x,t))&&T++):b<s&&T++);T<S;++T){const t=Math.round((b+T*M)*_)/_;if(v&&t>a)break;n.push({value:t})}return v&&h&&w!==a?n.length&&Xh(n[n.length-1].value,a,ov(a,x,t))?n[n.length-1].value=a:n.push({value:a}):v&&w!==a||n.push({value:w}),n}function ov(t,e,n){let{horizontal:i,minRotation:r}=n;const s=Kh(r),a=(i?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}(0,Nu.A)(sv,"id","category"),(0,Nu.A)(sv,"defaults",{ticks:{callback:rv}});class lv extends Om{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ph(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=t=>i=e?i:t,a=t=>r=n?r:t;if(t){const t=Gh(i),e=Gh(r);t<0&&e<0?a(0):t>0&&e>0&&s(0)}if(i===r){let e=0===r?1:Math.abs(.05*r);a(r+e),t||s(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=av({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Yh(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Cd(t,this.chart.options.locale,this.options.ticks.format)}}class cv extends lv{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=vh(t)?t:0,this.max=vh(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=Kh(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}(0,Nu.A)(cv,"id","linear"),(0,Nu.A)(cv,"defaults",{ticks:{callback:Rd.formatters.numeric}});const uv=t=>Math.floor(Wh(t)),hv=(t,e)=>Math.pow(10,uv(t)+e);function dv(t){return 1===t/Math.pow(10,uv(t))}function fv(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function pv(t,e){let{min:n,max:i}=e;n=yh(t.min,n);const r=[],s=uv(n);let a=function(t,e){let n=uv(e-t);for(;fv(t,e,n)>10;)n++;for(;fv(t,e,n)<10;)n--;return Math.min(n,uv(t))}(n,i),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,a)),f=yh(t.min,Math.round((c+h+d*Math.pow(10,a))*o)/o);for(;f<i;)r.push({value:f,major:dv(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,o=a>=0?1:o),f=Math.round((c+h+d*Math.pow(10,a))*o)/o;const p=yh(t.max,f);return r.push({value:p,major:dv(p),significand:d}),r}class mv extends Om{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=lv.prototype.parse.apply(this,[t,e]);if(0!==n)return vh(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=vh(t)?Math.max(0,t):null,this.max=vh(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!vh(this._userMin)&&(this.min=t===hv(this.min,0)?hv(this.min,-1):hv(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,s=t=>i=e?i:t;n===i&&(n<=0?(r(1),s(10)):(r(hv(n,-1)),s(hv(i,1)))),n<=0&&r(hv(i,-1)),i<=0&&s(hv(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=pv({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Yh(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Cd(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Wh(t),this._valueRange=Wh(this.max)-Wh(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Wh(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function gv(t){const e=t.ticks;if(e.display&&t.display){const t=af(e.backdropPadding);return xh(e.font&&e.font.size,Id.font.size)+t.height}return 0}function vv(t,e,n){return n=mh(n)?n:[n],{w:jd(t,e.string,n),h:n.length*e.lineHeight}}function yv(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function xv(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,a=t.options.pointLabels,o=a.centerPointLabels?Ih/s:0;for(let l=0;l<s;l++){const s=a.setContext(t.getPointLabelContext(l));r[l]=s.padding;const c=t.getPointPosition(l,t.drawingArea+r[l],o),u=of(s.font),h=vv(t.ctx,u,t._pointLabels[l]);i[l]=h;const d=nd(t.getIndexAngle(l)+o),f=Math.round(Jh(d));_v(n,e,d,yv(f,c.x,h.w,0,180),yv(f,c.y,h.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:gv(s)/2,additionalAngle:a?Ih/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const r=bv(t,u,l);i.push(r),"auto"===o&&(r.visible=wv(r,c),r.visible&&(c=r))}return i}(t,i,r)}function _v(t,e,n,i,r){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;i.start<e.l?(o=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-o)):i.end>e.r&&(o=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+o)),r.start<e.t?(l=(e.t-r.start)/a,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function bv(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:a,size:o}=n,l=t.getPointPosition(e,i+r+a,s),c=Math.round(Jh(nd(l.angle+Bh))),u=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,o.h,c),h=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),d=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,o.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+o.w,bottom:u+o.h}}function wv(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(Vd({x:n,y:i},e)||Vd({x:n,y:s},e)||Vd({x:r,y:i},e)||Vd({x:r,y:s},e))}function Sv(t,e,n){const{left:i,top:r,right:s,bottom:a}=n,{backdropColor:o}=e;if(!ph(o)){const n=sf(e.borderRadius),l=af(e.backdropPadding);t.fillStyle=o;const c=i-l.left,u=r-l.top,h=s-i+l.width,d=a-r+l.height;Object.values(n).some(t=>0!==t)?(t.beginPath(),Jd(t,{x:c,y:u,w:h,h:d,radius:n}),t.fill()):t.fillRect(c,u,h,d)}}function Mv(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,zh);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=t.getPointPosition(s,e),r.lineTo(n.x,n.y)}}(0,Nu.A)(mv,"id","logarithmic"),(0,Nu.A)(mv,"defaults",{ticks:{callback:Rd.formatters.logarithmic,major:{enabled:!0}}});class Ev extends lv{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=af(gv(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=vh(t)&&!isNaN(t)?t:0,this.max=vh(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/gv(this.options))}generateTickLabels(t){lv.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=bh(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?xv(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return nd(t*(zh/(this._pointLabels.length||1))+Kh(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(ph(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ph(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return cf(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(t)-Bh+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Mv(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,s=this._pointLabels.length;let a,o,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=t._pointLabelItems[r];if(!e.visible)continue;const s=i.setContext(t.getPointLabelContext(r));Sv(n,s,e);const a=of(s.font),{x:o,y:l,textAlign:c}=e;Kd(n,t._pointLabels[r],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((t,e)=>{if(0!==e||0===e&&this.min<0){o=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),a=i.setContext(n),l=r.setContext(n);!function(t,e,n,i,r){const s=t.ctx,a=e.circular,{color:o,lineWidth:l}=e;!a&&!i||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),Mv(t,n,a,i),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}}),n.display){for(t.save(),a=s-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:s}=i;s&&r&&(t.lineWidth=s,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,o=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(a,o),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((i,a)=>{if(0===a&&this.min>=0&&!e.reverse)return;const o=n.setContext(this.getContext(a)),l=of(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){t.font=l.string,s=t.measureText(i.label).width,t.fillStyle=o.backdropColor;const e=af(o.backdropPadding);t.fillRect(-s/2-e.left,-r-l.size/2-e.top,s+e.width,l.size+e.height)}Kd(t,i.label,0,-r,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),t.restore()}drawTitle(){}}(0,Nu.A)(Ev,"id","radialLinear"),(0,Nu.A)(Ev,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Rd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}}),(0,Nu.A)(Ev,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Nu.A)(Ev,"descriptors",{angleLines:{_fallback:"grid"}});const Tv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Av=Object.keys(Tv);function Cv(t,e){return t-e}function Pv(t,e){if(ph(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let a=e;return"function"===typeof i&&(a=i(a)),vh(a)||(a="string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!Zh(s)&&!0!==s?n.startOf(a,r):n.startOf(a,"isoWeek",s)),+a)}function Rv(t,e,n,i){const r=Av.length;for(let s=Av.indexOf(t);s<r-1;++s){const t=Tv[Av[s]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return Av[s]}return Av[r-1]}function Lv(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=ad(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function Nv(t,e,n){const i=[],r={},s=e.length;let a,o;for(a=0;a<s;++a)o=e[a],r[o]=a,i.push({value:o,major:!1});return 0!==s&&n?function(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),a=e[e.length-1].value;let o,l;for(o=s;o<=a;o=+r.add(o,1,i))l=n[o],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}class kv extends Om{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.time||(t.time={}),i=this._adapter=new Fp(t.adapters.date);i.init(e),Ch(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Pv(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();function o(t){s||isNaN(t.min)||(i=Math.min(i,t.min)),a||isNaN(t.max)||(r=Math.max(r,t.max))}s&&a||(o(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||o(this.getMinMax(!1))),i=vh(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=vh(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(i,r,this.max);return this._unit=e.unit||(n.autoSkip?Rv(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let s=Av.length-1;s>=Av.indexOf(n);s--){const n=Av[s];if(Tv[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return Av[n?Av.indexOf(n):0]}(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Av.indexOf(t)+1,n=Av.length;e<n;++e)if(Tv[Av[e]].common)return Av[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&s.reverse(),Nv(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(t=this.getDecimalForValue(n[0]),i=1===n.length?1-t:(this.getDecimalForValue(n[1])-t)/2,e=this.getDecimalForValue(n[n.length-1]),r=1===n.length?e:(e-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=rd(i,0,s),r=rd(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||Rv(r.minUnit,e,n,this._getLabelCapacity(e)),a=xh(i.ticks.stepSize,1),o="week"===s&&r.isoWeekday,l=Zh(o)||!0===o,c={};let u,h,d=e;if(l&&(d=+t.startOf(d,"isoWeek",o)),d=+t.startOf(d,l?"day":s),t.diff(n,e,s)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+t.add(u,a,s),h++)Lv(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||Lv(c,u,f),Object.keys(c).sort(Cv).map(t=>+t)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,i=this._unit,r=e||n[i];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,i){const r=this.options,s=r.ticks.callback;if(s)return bh(s,[t,e,n],this);const a=r.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],h=n[e],d=l&&u&&h&&h.major;return this._adapter.format(t,i||(d?u:c))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=Kh(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*s,h:n*s+a*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Nv(this,[t],this._majorUnit),i),s=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(Pv(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return hd(t.sort(Cv))}}function Ov(t,e,n){let i,r,s,a,o=0,l=t.length-1;n?(e>=t[o].pos&&e<=t[l].pos&&({lo:o,hi:l}=od(t,"pos",e)),({pos:i,time:s}=t[o]),({pos:r,time:a}=t[l])):(e>=t[o].time&&e<=t[l].time&&({lo:o,hi:l}=od(t,"time",e)),({time:i,pos:s}=t[o]),({time:r,pos:a}=t[l]));const c=r-i;return c?s+(a-s)*(e-i)/c:s}(0,Nu.A)(kv,"id","time"),(0,Nu.A)(kv,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Dv extends kv{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ov(e,this.min),this._tableRange=Ov(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let s,a,o,l,c;for(s=0,a=t.length;s<a;++s)l=t[s],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,a=i.length;s<a;++s)c=i[s+1],o=i[s-1],l=i[s],Math.round((c+o)/2)!==l&&r.push({time:l,pos:s/(a-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ov(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Ov(this._table,n*this._tableRange+this._minPos,!0)}}(0,Nu.A)(Dv,"id","timeseries"),(0,Nu.A)(Dv,"defaults",kv.defaults);const Iv=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],zv="label";function jv(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function Uv(t,e){t.labels=e}function Fv(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zv;const i=[];t.datasets=e.map(e=>{const r=t.datasets.find(t=>t[n]===e[n]);return r&&e.data&&!i.includes(r)?(i.push(r),Object.assign(r,e),r):(0,a.A)({},e)})}function Bv(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zv;const n={labels:[],datasets:[]};return Uv(n,t.labels),Fv(n,t.datasets,e),n}function Hv(t,n){const{height:i=150,width:r=300,redraw:s=!1,datasetIdKey:o,type:l,data:c,options:u,plugins:h=[],fallbackContent:d,updateMode:f}=t,p=(0,ri.A)(t,Iv),m=(0,e.useRef)(null),g=(0,e.useRef)(null),v=()=>{m.current&&(g.current=new hg(m.current,{type:l,data:Bv(c,o),options:u&&(0,a.A)({},u),plugins:h}),jv(n,g.current))},y=()=>{jv(n,null),g.current&&(g.current.destroy(),g.current=null)};return(0,e.useEffect)(()=>{!s&&g.current&&u&&function(t,e){const n=t.options;n&&e&&Object.assign(n,e)}(g.current,u)},[s,u]),(0,e.useEffect)(()=>{!s&&g.current&&Uv(g.current.config.data,c.labels)},[s,c.labels]),(0,e.useEffect)(()=>{!s&&g.current&&c.datasets&&Fv(g.current.config.data,c.datasets,o)},[s,c.datasets]),(0,e.useEffect)(()=>{g.current&&(s?(y(),setTimeout(v)):g.current.update(f))},[s,u,c.labels,c.datasets,f]),(0,e.useEffect)(()=>{g.current&&(y(),setTimeout(v))},[l]),(0,e.useEffect)(()=>(v(),()=>y()),[]),e.createElement("canvas",(0,a.A)({ref:m,role:"img",height:i,width:r},p),d)}const Vv=(0,e.forwardRef)(Hv);function Wv(t,n){return hg.register(n),(0,e.forwardRef)((n,i)=>e.createElement(Vv,(0,a.A)((0,a.A)({},n),{},{ref:i,type:t})))}const Gv=Wv("bar",Rp);hg.register(sv,cv,Dg,Bg,nv,Ug);const Xv=()=>{var t,n,i,r,s,o,l,c;const{user:u}=Qn(),{fetchUserSimulations:h,getSimulationStats:d,getAsteroidStats:f}=ei(),[p,m]=(0,e.useState)([]),[g,v]=(0,e.useState)({}),[y,x]=(0,e.useState)(!0);(0,e.useEffect)(()=>{_()},[]);const _=async()=>{try{const[t,e,n]=await Promise.all([h({limit:5}),d(),f()]);m(t.simulations||[]),v((0,a.A)((0,a.A)({},e),n))}catch(t){console.error("Failed to load dashboard data:",t)}finally{x(!1)}},b={labels:["Simulations Run","Mitigations Proposed","Votes Received","Points Earned"],datasets:[{label:"Your Stats",data:[(null===u||void 0===u||null===(t=u.stats)||void 0===t?void 0:t.simulationsRun)||0,(null===u||void 0===u||null===(n=u.stats)||void 0===n?void 0:n.mitigationsProposed)||0,(null===u||void 0===u||null===(i=u.stats)||void 0===i?void 0:i.votesReceived)||0,(null===u||void 0===u||null===(r=u.stats)||void 0===r?void 0:r.points)||0],backgroundColor:["rgba(0, 102, 204, 0.6)","rgba(255, 107, 53, 0.6)","rgba(0, 212, 255, 0.6)","rgba(40, 167, 69, 0.6)"],borderColor:["rgba(0, 102, 204, 1)","rgba(255, 107, 53, 1)","rgba(0, 212, 255, 1)","rgba(40, 167, 69, 1)"],borderWidth:1}]};return y?(0,Kn.jsx)(yi,{className:"py-5 mt-5",children:(0,Kn.jsxs)("div",{className:"text-center",children:[(0,Kn.jsx)("div",{className:"loading-spinner"}),(0,Kn.jsx)("p",{className:"mt-3",children:"Loading your dashboard..."})]})}):(0,Kn.jsxs)(yi,{className:"py-5",style:{marginTop:"100px"},children:[(0,Kn.jsx)(Dc,{children:(0,Kn.jsx)(Uc,{children:(0,Kn.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("h1",{children:["Welcome back, ",null===u||void 0===u?void 0:u.username,"!"]}),(0,Kn.jsx)("p",{className:"text-muted",children:"Here's your asteroid impact simulation overview"})]}),(0,Kn.jsx)(Lc.m,{to:"/simulator",children:(0,Kn.jsxs)(bc,{variant:"primary",children:[(0,Kn.jsx)("i",{className:"bi bi-plus-circle me-2"}),"New Simulation"]})})]})})}),(0,Kn.jsxs)(Dc,{className:"mb-4",children:[(0,Kn.jsx)(Uc,{md:3,className:"mb-3",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100",children:(0,Kn.jsxs)(vu.Body,{className:"text-center",children:[(0,Kn.jsx)("i",{className:"bi bi-cpu display-6 text-primary mb-2"}),(0,Kn.jsx)("h4",{children:(null===u||void 0===u||null===(s=u.stats)||void 0===s?void 0:s.simulationsRun)||0}),(0,Kn.jsx)("p",{className:"text-muted mb-0",children:"Simulations Run"})]})})}),(0,Kn.jsx)(Uc,{md:3,className:"mb-3",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100",children:(0,Kn.jsxs)(vu.Body,{className:"text-center",children:[(0,Kn.jsx)("i",{className:"bi bi-shield-check display-6 text-success mb-2"}),(0,Kn.jsx)("h4",{children:(null===u||void 0===u||null===(o=u.stats)||void 0===o?void 0:o.mitigationsProposed)||0}),(0,Kn.jsx)("p",{className:"text-muted mb-0",children:"Mitigations Proposed"})]})})}),(0,Kn.jsx)(Uc,{md:3,className:"mb-3",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100",children:(0,Kn.jsxs)(vu.Body,{className:"text-center",children:[(0,Kn.jsx)("i",{className:"bi bi-heart display-6 text-danger mb-2"}),(0,Kn.jsx)("h4",{children:(null===u||void 0===u||null===(l=u.stats)||void 0===l?void 0:l.votesReceived)||0}),(0,Kn.jsx)("p",{className:"text-muted mb-0",children:"Votes Received"})]})})}),(0,Kn.jsx)(Uc,{md:3,className:"mb-3",children:(0,Kn.jsx)(vu,{className:"glass-effect h-100",children:(0,Kn.jsxs)(vu.Body,{className:"text-center",children:[(0,Kn.jsx)("i",{className:"bi bi-star display-6 text-warning mb-2"}),(0,Kn.jsx)("h4",{children:(null===u||void 0===u||null===(c=u.stats)||void 0===c?void 0:c.points)||0}),(0,Kn.jsx)("p",{className:"text-muted mb-0",children:"Points Earned"})]})})})]}),(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{lg:8,className:"mb-4",children:(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsxs)(vu.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,Kn.jsxs)("h5",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-clock-history me-2"}),"Recent Simulations"]}),(0,Kn.jsx)(Lc.m,{to:"/simulations",children:(0,Kn.jsx)(bc,{variant:"outline-primary",size:"sm",children:"View All"})})]}),(0,Kn.jsx)(vu.Body,{children:p.length>0?(0,Kn.jsxs)(bu,{responsive:!0,variant:"dark",className:"mb-0",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Asteroid"}),(0,Kn.jsx)("th",{children:"Location"}),(0,Kn.jsx)("th",{children:"Date"}),(0,Kn.jsx)("th",{children:"Actions"})]})}),(0,Kn.jsx)("tbody",{children:p.map(t=>{var e,n,i,r;return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("strong",{children:null===(e=t.asteroid)||void 0===e?void 0:e.name}),(null===(n=t.asteroid)||void 0===n?void 0:n.is_potentially_hazardous_asteroid)&&(0,Kn.jsx)(Rc,{bg:"warning",text:"dark",className:"ms-2",children:"Hazardous"})]})}),(0,Kn.jsxs)("td",{children:[(null===(i=t.impactLocation)||void 0===i?void 0:i.city)||"Unknown",", ",(null===(r=t.impactLocation)||void 0===r?void 0:r.country)||"Unknown"]}),(0,Kn.jsx)("td",{children:new Date(t.createdAt).toLocaleDateString()}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)(Lc.m,{to:"/simulation/".concat(t._id),children:(0,Kn.jsx)(bc,{variant:"outline-primary",size:"sm",children:"View"})})})]},t._id)})})]}):(0,Kn.jsxs)(Lu,{variant:"info",children:[(0,Kn.jsx)("i",{className:"bi bi-info-circle me-2"}),"You haven't run any simulations yet.",(0,Kn.jsx)(Lc.m,{to:"/simulator",children:(0,Kn.jsx)(bc,{variant:"link",className:"p-0 ms-1",children:"Start your first simulation"})})]})})]})}),(0,Kn.jsx)(Uc,{lg:4,className:"mb-4",children:(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsx)(vu.Header,{children:(0,Kn.jsxs)("h5",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-bar-chart me-2"}),"Activity Overview"]})}),(0,Kn.jsx)(vu.Body,{children:(0,Kn.jsx)(Gv,{data:b,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Your Activity Overview",color:"#ffffff"}},scales:{y:{beginAtZero:!0,ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}}})})]})})]}),(0,Kn.jsx)(Dc,{children:(0,Kn.jsx)(Uc,{children:(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsx)(vu.Header,{children:(0,Kn.jsxs)("h5",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-globe me-2"}),"Global Statistics"]})}),(0,Kn.jsx)(vu.Body,{children:(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsxs)(Uc,{md:3,className:"text-center mb-3",children:[(0,Kn.jsx)("h4",{className:"text-primary",children:g.totalAsteroids||0}),(0,Kn.jsx)("p",{className:"text-muted mb-0",children:"Total Asteroids"})]}),(0,Kn.jsxs)(Uc,{md:3,className:"text-center mb-3",children:[(0,Kn.jsx)("h4",{className:"text-warning",children:g.hazardousAsteroids||0}),(0,Kn.jsx)("p",{className:"text-muted mb-0",children:"Potentially Hazardous"})]}),(0,Kn.jsxs)(Uc,{md:3,className:"text-center mb-3",children:[(0,Kn.jsx)("h4",{className:"text-success",children:g.totalSimulations||0}),(0,Kn.jsx)("p",{className:"text-muted mb-0",children:"Global Simulations"})]}),(0,Kn.jsxs)(Uc,{md:3,className:"text-center mb-3",children:[(0,Kn.jsx)("h4",{className:"text-info",children:g.publicSimulations||0}),(0,Kn.jsx)("p",{className:"text-muted mb-0",children:"Shared Simulations"})]})]})})]})})})]})},qv=["as","className","type","tooltip"],Zv={type:As().string,tooltip:As().bool,as:As().elementType},Yv=e.forwardRef((t,e)=>{let{as:n="div",className:i,type:r="valid",tooltip:s=!1}=t,o=(0,ri.A)(t,qv);return(0,Kn.jsx)(n,(0,a.A)((0,a.A)({},o),{},{ref:e,className:ai()(i,"".concat(r,"-").concat(s?"tooltip":"feedback"))}))});Yv.displayName="Feedback",Yv.propTypes=Zv;const Kv=Yv,Jv=e.createContext({}),Qv=["id","bsPrefix","className","type","isValid","isInvalid","as"],$v=e.forwardRef((t,n)=>{let{id:i,bsPrefix:r,className:s,type:o="checkbox",isValid:l=!1,isInvalid:c=!1,as:u="input"}=t,h=(0,ri.A)(t,Qv);const{controlId:d}=(0,e.useContext)(Jv);return r=di(r,"form-check-input"),(0,Kn.jsx)(u,(0,a.A)((0,a.A)({},h),{},{ref:n,type:o,id:i||d,className:ai()(s,r,l&&"is-valid",c&&"is-invalid")}))});$v.displayName="FormCheckInput";const ty=$v,ey=["bsPrefix","className","htmlFor"],ny=e.forwardRef((t,n)=>{let{bsPrefix:i,className:r,htmlFor:s}=t,o=(0,ri.A)(t,ey);const{controlId:l}=(0,e.useContext)(Jv);return i=di(i,"form-check-label"),(0,Kn.jsx)("label",(0,a.A)((0,a.A)({},o),{},{ref:n,htmlFor:s||l,className:ai()(r,i)}))});ny.displayName="FormCheckLabel";const iy=ny;const ry=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],sy=e.forwardRef((t,n)=>{let{id:i,bsPrefix:r,bsSwitchPrefix:s,inline:o=!1,reverse:l=!1,disabled:c=!1,isValid:u=!1,isInvalid:h=!1,feedbackTooltip:d=!1,feedback:f,feedbackType:p,className:m,style:g,title:v="",type:y="checkbox",label:x,children:_,as:b="input"}=t,w=(0,ri.A)(t,ry);r=di(r,"form-check"),s=di(s,"form-switch");const{controlId:S}=(0,e.useContext)(Jv),M=(0,e.useMemo)(()=>({controlId:i||S}),[S,i]),E=!_&&null!=x&&!1!==x||function(t,n){return e.Children.toArray(t).some(t=>e.isValidElement(t)&&t.type===n)}(_,iy),T=(0,Kn.jsx)(ty,(0,a.A)((0,a.A)({},w),{},{type:"switch"===y?"checkbox":y,ref:n,isValid:u,isInvalid:h,disabled:c,as:b}));return(0,Kn.jsx)(Jv.Provider,{value:M,children:(0,Kn.jsx)("div",{style:g,className:ai()(m,E&&r,o&&"".concat(r,"-inline"),l&&"".concat(r,"-reverse"),"switch"===y&&s),children:_||(0,Kn.jsxs)(Kn.Fragment,{children:[T,E&&(0,Kn.jsx)(iy,{title:v,children:x}),f&&(0,Kn.jsx)(Kv,{type:p,tooltip:d,children:f})]})})})});sy.displayName="FormCheck";const ay=Object.assign(sy,{Input:ty,Label:iy}),oy=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],ly=e.forwardRef((t,n)=>{let{bsPrefix:i,type:r,size:s,htmlSize:o,id:l,className:c,isValid:u=!1,isInvalid:h=!1,plaintext:d,readOnly:f,as:p="input"}=t,m=(0,ri.A)(t,oy);const{controlId:g}=(0,e.useContext)(Jv);return i=di(i,"form-control"),(0,Kn.jsx)(p,(0,a.A)((0,a.A)({},m),{},{type:r,size:o,ref:n,readOnly:f,id:l||g,className:ai()(c,d?"".concat(i,"-plaintext"):i,s&&"".concat(i,"-").concat(s),"color"===r&&"".concat(i,"-color"),u&&"is-valid",h&&"is-invalid")}))});ly.displayName="FormControl";const cy=Object.assign(ly,{Feedback:Kv}),uy=["className","bsPrefix","as"],hy=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="div"}=t,s=(0,ri.A)(t,uy);return i=di(i,"form-floating"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});hy.displayName="FormFloating";const dy=hy,fy=["controlId","as"],py=e.forwardRef((t,n)=>{let{controlId:i,as:r="div"}=t,s=(0,ri.A)(t,fy);const o=(0,e.useMemo)(()=>({controlId:i}),[i]);return(0,Kn.jsx)(Jv.Provider,{value:o,children:(0,Kn.jsx)(r,(0,a.A)((0,a.A)({},s),{},{ref:n}))})});py.displayName="FormGroup";const my=py,gy=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],vy=e.forwardRef((t,n)=>{let{as:i="label",bsPrefix:r,column:s=!1,visuallyHidden:o=!1,className:l,htmlFor:c}=t,u=(0,ri.A)(t,gy);const{controlId:h}=(0,e.useContext)(Jv);r=di(r,"form-label");let d="col-form-label";"string"===typeof s&&(d="".concat(d," ").concat(d,"-").concat(s));const f=ai()(l,r,o&&"visually-hidden",s&&d);return c=c||h,s?(0,Kn.jsx)(Uc,(0,a.A)({ref:n,as:"label",className:f,htmlFor:c},u)):(0,Kn.jsx)(i,(0,a.A)({ref:n,className:f,htmlFor:c},u))});vy.displayName="FormLabel";const yy=vy,xy=["bsPrefix","className","id"],_y=e.forwardRef((t,n)=>{let{bsPrefix:i,className:r,id:s}=t,o=(0,ri.A)(t,xy);const{controlId:l}=(0,e.useContext)(Jv);return i=di(i,"form-range"),(0,Kn.jsx)("input",(0,a.A)((0,a.A)({},o),{},{type:"range",ref:n,className:ai()(r,i),id:s||l}))});_y.displayName="FormRange";const by=_y,wy=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],Sy=e.forwardRef((t,n)=>{let{bsPrefix:i,size:r,htmlSize:s,className:o,isValid:l=!1,isInvalid:c=!1,id:u}=t,h=(0,ri.A)(t,wy);const{controlId:d}=(0,e.useContext)(Jv);return i=di(i,"form-select"),(0,Kn.jsx)("select",(0,a.A)((0,a.A)({},h),{},{size:s,ref:n,className:ai()(o,i,r&&"".concat(i,"-").concat(r),l&&"is-valid",c&&"is-invalid"),id:u||d}))});Sy.displayName="FormSelect";const My=Sy,Ey=["bsPrefix","className","as","muted"],Ty=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,as:r="small",muted:s}=t,o=(0,ri.A)(t,Ey);return n=di(n,"form-text"),(0,Kn.jsx)(r,(0,a.A)((0,a.A)({},o),{},{ref:e,className:ai()(i,n,s&&"text-muted")}))});Ty.displayName="FormText";const Ay=Ty,Cy=e.forwardRef((t,e)=>(0,Kn.jsx)(ay,(0,a.A)((0,a.A)({},t),{},{ref:e,type:"switch"})));Cy.displayName="Switch";const Py=Object.assign(Cy,{Input:ay.Input,Label:ay.Label}),Ry=["bsPrefix","className","children","controlId","label"],Ly=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,children:r,controlId:s,label:o}=t,l=(0,ri.A)(t,Ry);return n=di(n,"form-floating"),(0,Kn.jsxs)(my,(0,a.A)((0,a.A)({ref:e,className:ai()(i,n),controlId:s},l),{},{children:[r,(0,Kn.jsx)("label",{htmlFor:s,children:o})]}))});Ly.displayName="FloatingLabel";const Ny=Ly,ky=["className","validated","as"],Oy={_ref:As().any,validated:As().bool,as:As().elementType},Dy=e.forwardRef((t,e)=>{let{className:n,validated:i,as:r="form"}=t,s=(0,ri.A)(t,ky);return(0,Kn.jsx)(r,(0,a.A)((0,a.A)({},s),{},{ref:e,className:ai()(n,i&&"was-validated")}))});Dy.displayName="Form",Dy.propTypes=Oy;const Iy=Object.assign(Dy,{Group:my,Control:cy,Floating:dy,Check:ay,Switch:Py,Label:yy,Text:Ay,Range:by,Select:My,FloatingLabel:Ny});var zy;function jy(t){if((!zy&&0!==zy||t)&&Qi){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),zy=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return zy}function Uy(t){const n=function(t){const n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)(()=>()=>n.current(),[])}const Fy=["className","bsPrefix","as"],By=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="div"}=t,s=(0,ri.A)(t,Fy);return i=di(i,"modal-body"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});By.displayName="ModalBody";const Hy=By,Vy=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],Wy=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,contentClassName:r,centered:s,size:o,fullscreen:l,children:c,scrollable:u}=t,h=(0,ri.A)(t,Vy);n=di(n,"modal");const d="".concat(n,"-dialog"),f="string"===typeof l?"".concat(n,"-fullscreen-").concat(l):"".concat(n,"-fullscreen");return(0,Kn.jsx)("div",(0,a.A)((0,a.A)({},h),{},{ref:e,className:ai()(d,i,o&&"".concat(n,"-").concat(o),s&&"".concat(d,"-centered"),u&&"".concat(d,"-scrollable"),l&&f),children:(0,Kn.jsx)("div",{className:ai()("".concat(n,"-content"),r),children:c})}))});Wy.displayName="ModalDialog";const Gy=Wy,Xy=["className","bsPrefix","as"],qy=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="div"}=t,s=(0,ri.A)(t,Xy);return i=di(i,"modal-footer"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});qy.displayName="ModalFooter";const Zy=qy,Yy=["bsPrefix","className","closeLabel","closeButton"],Ky=e.forwardRef((t,e)=>{let{bsPrefix:n,className:i,closeLabel:r="Close",closeButton:s=!1}=t,o=(0,ri.A)(t,Yy);return n=di(n,"modal-header"),(0,Kn.jsx)(Os,(0,a.A)((0,a.A)({ref:e},o),{},{className:ai()(i,n),closeLabel:r,closeButton:s}))});Ky.displayName="ModalHeader";const Jy=Ky,Qy=["className","bsPrefix","as"],$y=js("h4"),tx=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r=$y}=t,s=(0,ri.A)(t,Qy);return i=di(i,"modal-title"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});tx.displayName="ModalTitle";const ex=tx,nx=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","data-bs-theme","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function ix(t){return(0,Kn.jsx)(vs,(0,a.A)((0,a.A)({},t),{},{timeout:null}))}function rx(t){return(0,Kn.jsx)(vs,(0,a.A)((0,a.A)({},t),{},{timeout:null}))}const sx=e.forwardRef((t,n)=>{let{bsPrefix:i,className:r,style:s,dialogClassName:o,contentClassName:l,children:c,dialogAs:u=Gy,"data-bs-theme":h,"aria-labelledby":d,"aria-describedby":f,"aria-label":p,show:m=!1,animation:g=!0,backdrop:v=!0,keyboard:y=!0,onEscapeKeyDown:x,onShow:_,onHide:b,container:w,autoFocus:S=!0,enforceFocus:M=!0,restoreFocus:E=!0,restoreFocusOptions:T,onEntered:A,onExit:C,onExiting:P,onEnter:R,onEntering:L,onExited:N,backdropClassName:k,manager:O}=t,D=(0,ri.A)(t,nx);const[I,z]=(0,e.useState)({}),[j,U]=(0,e.useState)(!1),F=(0,e.useRef)(!1),B=(0,e.useRef)(!1),H=(0,e.useRef)(null),[V,W]=(0,e.useState)(null),G=dr(n,W),X=Cr(b),q=mi();i=di(i,"modal");const Z=(0,e.useMemo)(()=>({onHide:X}),[X]);function Y(){return O||Js({isRTL:q})}function K(t){if(!Qi)return;const e=Y().getScrollbarWidth()>0,n=t.scrollHeight>Ni(t).documentElement.clientHeight;z({paddingRight:e&&!n?jy():void 0,paddingLeft:!e&&n?jy():void 0})}const J=Cr(()=>{V&&K(V.dialog)});Uy(()=>{ir(window,"resize",J),null==H.current||H.current()});const Q=()=>{F.current=!0},$=t=>{F.current&&V&&t.target===V.dialog&&(B.current=!0),F.current=!1},tt=()=>{U(!0),H.current=ar(V.dialog,()=>{U(!1)})},et=t=>{"static"!==v?B.current||t.target!==t.currentTarget?B.current=!1:null==b||b():(t=>{t.target===t.currentTarget&&tt()})(t)},nt=(0,e.useCallback)(t=>(0,Kn.jsx)("div",(0,a.A)((0,a.A)({},t),{},{className:ai()("".concat(i,"-backdrop"),k,!g&&"show")})),[g,k,i]),it=(0,a.A)((0,a.A)({},s),I);it.display="block";return(0,Kn.jsx)(Es.Provider,{value:Z,children:(0,Kn.jsx)(fs,{show:m,ref:G,backdrop:v,container:w,keyboard:!0,autoFocus:S,enforceFocus:M,restoreFocus:E,restoreFocusOptions:T,onEscapeKeyDown:t=>{y?null==x||x(t):(t.preventDefault(),"static"===v&&tt())},onShow:_,onHide:b,onEnter:(t,e)=>{t&&K(t),null==R||R(t,e)},onEntering:(t,e)=>{null==L||L(t,e),nr(window,"resize",J)},onEntered:A,onExit:t=>{null==H.current||H.current(),null==C||C(t)},onExiting:P,onExited:t=>{t&&(t.style.display=""),null==N||N(t),ir(window,"resize",J)},manager:Y(),transition:g?ix:void 0,backdropTransition:g?rx:void 0,renderBackdrop:nt,renderDialog:t=>(0,Kn.jsx)("div",(0,a.A)((0,a.A)({role:"dialog"},t),{},{style:it,className:ai()(r,i,j&&"".concat(i,"-static"),!g&&"show"),onClick:v?et:void 0,onMouseUp:$,"data-bs-theme":h,"aria-label":p,"aria-labelledby":d,"aria-describedby":f,children:(0,Kn.jsx)(u,(0,a.A)((0,a.A)({},D),{},{onMouseDown:Q,className:o,contentClassName:l,children:c}))}))})})});sx.displayName="Modal";const ax=Object.assign(sx,{Body:Hy,Header:Jy,Title:ex,Footer:Zy,Dialog:Gy,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});const ox=(0,e.createContext)(null),lx=ox.Provider;function cx(){const t=(0,e.useContext)(ox);if(null==t)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function ux(){return cx().map}var hx=n(228),dx=n.n(hx);const fx=["bounds","boundsOptions","center","children","className","id","placeholder","style","whenReady","zoom"];function px(){return px=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},px.apply(this,arguments)}function mx(t,n){let{bounds:i,boundsOptions:r,center:s,children:a,className:o,id:l,placeholder:c,style:u,whenReady:h,zoom:d}=t,f=(0,ri.A)(t,fx);const[p]=(0,e.useState)({className:o,id:l,style:u}),[m,g]=(0,e.useState)(null);(0,e.useImperativeHandle)(n,()=>{var t;return null!==(t=null===m||void 0===m?void 0:m.map)&&void 0!==t?t:null},[m]);const v=(0,e.useCallback)(t=>{if(null!==t&&null===m){const e=new hx.Map(t,f);null!=s&&null!=d?e.setView(s,d):null!=i&&e.fitBounds(i,r),null!=h&&e.whenReady(h),g(function(t){return Object.freeze({__version:1,map:t})}(e))}},[]);(0,e.useEffect)(()=>()=>{null===m||void 0===m||m.map.remove()},[m]);const y=m?e.createElement(lx,{value:m},a):null!==c&&void 0!==c?c:null;return e.createElement("div",px({},p,{ref:v}),y)}const gx=(0,e.forwardRef)(mx);function vx(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function yx(t,n){return null==n?function(n,i){const r=(0,e.useRef)();return r.current||(r.current=t(n,i)),r}:function(i,r){const s=(0,e.useRef)();s.current||(s.current=t(i,r));const a=(0,e.useRef)(i),{instance:o}=s.current;return(0,e.useEffect)(function(){a.current!==i&&(n(o,i,a.current),a.current=i)},[o,i,r]),s}}function xx(t,e){var n;const i=null!==(n=t.pane)&&void 0!==n?n:e.pane;return i?(0,a.A)((0,a.A)({},t),{},{pane:i}):t}function _x(t){return function(n){const i=cx(),r=t(xx(n,i),i);return function(t,n){const i=(0,e.useRef)(n);(0,e.useEffect)(function(){n!==i.current&&null!=t.attributionControl&&(null!=i.current&&t.attributionControl.removeAttribution(i.current),null!=n&&t.attributionControl.addAttribution(n)),i.current=n},[t,n])}(i.map,n.attribution),function(t,n){const i=(0,e.useRef)();(0,e.useEffect)(function(){return null!=n&&t.instance.on(n),i.current=n,function(){null!=i.current&&t.instance.off(i.current),i.current=null}},[t,n])}(r.current,n.eventHandlers),function(t,n){(0,e.useEffect)(function(){var e;return(null!==(e=n.layerContainer)&&void 0!==e?e:n.map).addLayer(t.instance),function(){var e;null===(e=n.layerContainer)||void 0===e||e.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}(r.current,i),r}}const bx=["url"],wx=(Sx=function(t,e){let{url:n}=t,i=(0,ri.A)(t,bx);return vx(new hx.TileLayer(n,xx(i,e)),e)},function(t){function n(n,i){const{instance:r}=t(n).current;return(0,e.useImperativeHandle)(i,()=>r),null}return(0,e.forwardRef)(n)}(_x(yx(Sx,function(t,e,n){!function(t,e,n){const{opacity:i,zIndex:r}=e;null!=i&&i!==n.opacity&&t.setOpacity(i),null!=r&&r!==n.zIndex&&t.setZIndex(r)}(t,e,n);const{url:i}=e;null!=i&&i!==n.url&&t.setUrl(i)}))));var Sx;const Mx=["position"],Ex=function(t,n){return function(t){function n(n,i){const{instance:r,context:s}=t(n).current;return(0,e.useImperativeHandle)(i,()=>r),null==n.children?null:e.createElement(lx,{value:s},n.children)}return(0,e.forwardRef)(n)}(_x(yx(t,n)))}(function(t,e){let{position:n}=t,i=(0,ri.A)(t,Mx);const r=new hx.Marker(n,i);return vx(r,(s=e,o={overlayContainer:r},Object.freeze((0,a.A)((0,a.A)({},s),o))));var s,o},function(t,e,n){e.position!==n.position&&t.setLatLng(e.position),null!=e.icon&&e.icon!==n.icon&&t.setIcon(e.icon),null!=e.zIndexOffset&&e.zIndexOffset!==n.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),null!=e.opacity&&e.opacity!==n.opacity&&t.setOpacity(e.opacity),null!=t.dragging&&e.draggable!==n.draggable&&(!0===e.draggable?t.dragging.enable():t.dragging.disable())}),Tx=["bsPrefix","variant","animation","size","as","className"],Ax=e.forwardRef((t,e)=>{let{bsPrefix:n,variant:i,animation:r="border",size:s,as:o="div",className:l}=t,c=(0,ri.A)(t,Tx);n=di(n,"spinner");const u="".concat(n,"-").concat(r);return(0,Kn.jsx)(o,(0,a.A)((0,a.A)({ref:e},c),{},{className:ai()(l,u,s&&"".concat(u,"-").concat(s),i&&"text-".concat(i))}))});Ax.displayName="Spinner";const Cx=Ax,Px=e.lazy(()=>n.e(173).then(n.bind(n,554)).catch(t=>(console.error("Failed to load Earth3D:",t),{default:()=>(0,Kn.jsx)("div",{children:"3D Earth view unavailable"})}))),Rx=e.lazy(()=>n.e(431).then(n.bind(n,431)).catch(t=>(console.error("Failed to load Asteroid3D:",t),{default:()=>(0,Kn.jsx)("div",{children:"3D Asteroid view unavailable"})}))),Lx=e.lazy(()=>n.e(60).then(n.bind(n,60)).catch(t=>(console.error("Failed to load Impact3D:",t),{default:()=>(0,Kn.jsx)("div",{children:"3D Impact view unavailable"})}))),Nx=e.lazy(()=>n.e(401).then(n.bind(n,401)).catch(t=>(console.error("Failed to load WorkingEnhancedImpact3D:",t),n.e(60).then(n.bind(n,60)).catch(()=>({default:()=>(0,Kn.jsx)("div",{children:"3D Impact view unavailable"})}))))),kx=()=>(0,Kn.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center",style:{height:"100%",background:"#000"},children:[(0,Kn.jsx)(Cx,{animation:"border",variant:"primary",className:"mb-3"}),(0,Kn.jsxs)("div",{style:{color:"#ffffff",textAlign:"center"},children:[(0,Kn.jsx)("div",{children:"Loading 3D Environment..."}),(0,Kn.jsx)("small",{style:{color:"#cccccc"},children:"Initializing Three.js renderer and shaders"})]})]});class Ox extends e.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,e){console.error("3D Visualization Error:",t,e)}render(){return this.state.hasError?(0,Kn.jsx)("div",{className:"d-flex flex-column align-items-center justify-content-center p-4",style:{height:"100%",background:"#000"},children:(0,Kn.jsxs)(Lu,{variant:"warning",className:"text-center",children:[(0,Kn.jsxs)(Lu.Heading,{children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),"3D Visualization Unavailable"]}),(0,Kn.jsx)("p",{children:"The 3D visualization feature requires WebGL support and Three.js libraries. Please try refreshing the page or use the 2D map view."}),(0,Kn.jsx)("hr",{}),(0,Kn.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[(0,Kn.jsxs)("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>this.setState({hasError:!1}),children:[(0,Kn.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Retry"]}),(0,Kn.jsxs)("button",{className:"btn btn-primary btn-sm",onClick:()=>window.location.reload(),children:[(0,Kn.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Refresh Page"]})]})]})}):this.props.children}}const Dx=t=>(0,Kn.jsx)(Ox,{children:(0,Kn.jsx)(e.Suspense,{fallback:(0,Kn.jsx)(kx,{}),children:(0,Kn.jsx)(Px,(0,a.A)({},t))})}),Ix=t=>(0,Kn.jsx)(Ox,{children:(0,Kn.jsx)(e.Suspense,{fallback:(0,Kn.jsx)(kx,{}),children:(0,Kn.jsx)(Rx,(0,a.A)({},t))})}),zx=t=>(0,Kn.jsx)(Ox,{children:(0,Kn.jsx)(e.Suspense,{fallback:(0,Kn.jsx)(kx,{}),children:(0,Kn.jsx)(Lx,(0,a.A)({},t))})}),jx=t=>(0,Kn.jsx)(Ox,{children:(0,Kn.jsx)(e.Suspense,{fallback:(0,Kn.jsx)(kx,{}),children:(0,Kn.jsx)(Nx,(0,a.A)({},t))})}),Ux=()=>{try{const t=document.createElement("canvas");return!!(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(o){return!1}};delete dx().Icon.Default.prototype._getIconUrl,dx().Icon.Default.mergeOptions({iconRetinaUrl:n(249),iconUrl:n(24),shadowUrl:n(71)});const Fx=new(dx().Icon)({iconUrl:"data:image/svg+xml;base64,"+btoa('\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32">\n      <circle cx="16" cy="16" r="12" fill="#ff4444" stroke="#fff" stroke-width="2"/>\n      <circle cx="16" cy="16" r="8" fill="#ff6666" opacity="0.7"/>\n      <circle cx="16" cy="16" r="4" fill="#ffaaaa" opacity="0.5"/>\n    </svg>\n  '),iconSize:[32,32],iconAnchor:[16,16]}),Bx=t=>{let{onLocationSelect:n}=t;return function(t){const n=ux();(0,e.useEffect)(function(){return n.on(t),function(){n.off(t)}},[n,t])}({click:t=>{n(t.latlng)}}),null},Hx=()=>{var t,n,i,s,a;const{user:o}=(0,e.useContext)(Jn),l=(0,ii.zy)(),[c]=(0,r.useSearchParams)(),[u,h]=(0,e.useState)(null),[d,f]=(0,e.useState)([]),[p,m]=(0,e.useState)({lat:23.8785,lng:90.3217}),[g,v]=(0,e.useState)(45),[y,x]=(0,e.useState)(20),[_,b]=(0,e.useState)(null),[w,S]=(0,e.useState)(!1),[M,E]=(0,e.useState)(!1),[T,A]=(0,e.useState)("2d"),[C,P]=(0,e.useState)(!1),[R,L]=(0,e.useState)(!0),[N,k]=(0,e.useState)(!0);(0,e.useEffect)(()=>{O(),L(Ux())},[]),(0,e.useEffect)(()=>{var t;const e=(null===(t=l.state)||void 0===t?void 0:t.asteroidId)||c.get("asteroid");if(e&&d.length>0){const t=d.find(t=>t._id===e);t&&(h(t),J.success("Selected asteroid: ".concat(t.name)))}},[d,l.state,c]);const O=async()=>{try{var t;const e=(await Yn.get("/api/asteroids")).data;f(e.asteroids||[]);const n=(null===(t=l.state)||void 0===t?void 0:t.asteroidId)||c.get("asteroid");if(n&&e.asteroids){const t=e.asteroids.find(t=>t._id===n);t?h(t):e.asteroids.length>0&&h(e.asteroids[0])}else e.asteroids&&e.asteroids.length>0&&h(e.asteroids[0])}catch(e){console.error("Error loading asteroids:",e),J.error("Failed to load asteroid data")}},D=t=>t>=1e9?(t/1e9).toFixed(1)+"B":t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toFixed(0);return(0,Kn.jsxs)(yi,{className:"py-5",style:{marginTop:"100px"},children:[!R&&(0,Kn.jsxs)(Lu,{variant:"warning",className:"mb-4",children:[(0,Kn.jsxs)(Lu.Heading,{children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),"Limited 3D Support"]}),(0,Kn.jsx)("p",{children:"Your browser doesn't support WebGL, so 3D visualizations are disabled. You can still use the full-featured 2D map simulator."}),(0,Kn.jsx)("hr",{}),(0,Kn.jsx)("p",{className:"mb-0",children:"For the best experience, try using a modern browser like Chrome, Firefox, or Edge."})]}),(0,Kn.jsx)(Dc,{children:(0,Kn.jsxs)(Uc,{children:[(0,Kn.jsxs)("h1",{children:[(0,Kn.jsx)("i",{className:"bi bi-cpu me-2"}),"Impact Simulator"]}),(0,Kn.jsxs)("p",{className:"text-white mb-4",children:["Model asteroid impact scenarios with real NASA data",R&&(0,Kn.jsxs)("span",{className:"text-success ms-2",children:[(0,Kn.jsx)("i",{className:"bi bi-check-circle me-1"}),"3D Ready"]})]})]})}),(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{lg:4,children:(0,Kn.jsxs)(vu,{className:"glass-effect mb-4",children:[(0,Kn.jsx)(vu.Header,{children:(0,Kn.jsxs)("h5",{children:[(0,Kn.jsx)("i",{className:"bi bi-sliders text-white me-2"}),"Simulation Parameters"]})}),(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Select Asteroid"}),(0,Kn.jsxs)(Iy.Select,{className:"text-white bg-dark",value:(null===u||void 0===u?void 0:u.id)||"",onChange:t=>{const e=d.find(e=>e.id===t.target.value);h(e)},children:[(0,Kn.jsx)("option",{value:"",children:"Choose an asteroid..."}),d.map(t=>{var e,n,i;return(0,Kn.jsxs)("option",{value:t.id,children:[t.name," (",(null===(e=t.estimatedDiameter)||void 0===e||null===(n=e.kilometers)||void 0===n||null===(i=n.estimated_diameter_max)||void 0===i?void 0:i.toFixed(2))||"?"," km)"]},t.id)})]})]}),u&&(0,Kn.jsx)(vu,{className:"mb-3 bg-dark border-secondary",children:(0,Kn.jsxs)(vu.Body,{className:"p-3",children:[(0,Kn.jsx)("h6",{className:"text-primary",children:u.name}),(0,Kn.jsxs)("small",{className:"text-muted text-white d-block",children:[(0,Kn.jsx)("strong",{children:"Diameter:"})," ",(null===(t=u.estimatedDiameter)||void 0===t||null===(n=t.kilometers)||void 0===n||null===(i=n.estimated_diameter_max)||void 0===i?void 0:i.toFixed(2))||"Unknown"," km"]}),(0,Kn.jsxs)("small",{className:"text-muted text-white d-block",children:[(0,Kn.jsx)("strong",{children:"Hazardous:"})," ",u.isPotentiallyHazardousAsteroid?"Yes":"No"]}),(null===(s=u.closeApproachData)||void 0===s?void 0:s[0])&&(0,Kn.jsxs)("small",{className:"text-muted text-white d-block",children:[(0,Kn.jsx)("strong",{children:"Velocity:"})," ",parseFloat((null===(a=u.closeApproachData[0].relativeVelocity)||void 0===a?void 0:a.kilometersPerSecond)||0).toFixed(1)," km/s"]})]})}),(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Impact Angle (degrees)"}),(0,Kn.jsx)(Iy.Range,{min:"15",max:"90",value:g,onChange:t=>v(t.target.value)}),(0,Kn.jsxs)("small",{className:"text-muted text-white",children:[g,"\xb0 from horizontal"]})]}),(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Impact Velocity (km/s)"}),(0,Kn.jsx)(Iy.Range,{min:"11",max:"72",value:y,onChange:t=>x(t.target.value)}),(0,Kn.jsxs)("small",{className:"text-muted text-white",children:[y," km/s"]})]}),(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Impact Coordinates"}),(0,Kn.jsx)(Iy.Control,{type:"text",value:"".concat(p.lat.toFixed(4),", ").concat(p.lng.toFixed(4)),readOnly:!0}),(0,Kn.jsx)("small",{className:"text-muted text-white",children:"Click on the map to select location"})]}),(0,Kn.jsx)(bc,{variant:"danger",size:"lg",className:"w-100",onClick:async()=>{if(!u)return void J.error("Please select an asteroid");if(!o)return void J.error("Please log in to run simulations");const t=localStorage.getItem("token");console.log("User:",o),console.log("Token exists:",!!t),console.log("Token value:",t?t.substring(0,20)+"...":"null"),E(!0);try{const t={asteroidId:u.id,impactLocation:p,impactAngle:g,impactVelocity:y,asteroidData:u};console.log("Sending simulation data:",t);const e=await Yn.post("/api/simulations",t);console.log("Response status:",e.status),console.log("Simulation results:",e.data),b(e.data),S(!0),J.success("Simulation completed successfully!")}catch(i){var e,n;console.error("Simulation failed with error:",i);const t=(null===(e=i.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||"Simulation failed";J.error(t)}finally{E(!1)}},disabled:M||!u||!o,children:M?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Running Simulation..."]}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("i",{className:"bi bi-play-fill me-2"}),"Run Impact Simulation"]})}),!o&&(0,Kn.jsxs)(Lu,{variant:"warning",className:"mt-3 mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),"Please"," ",(0,Kn.jsx)("a",{href:"/login",className:"alert-link",children:"log in"})," ","or"," ",(0,Kn.jsx)("a",{href:"/register",className:"alert-link",children:"create an account"})," ","to run simulations"]})]})]})}),(0,Kn.jsx)(Uc,{lg:8,children:(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsxs)(vu.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,Kn.jsxs)("h5",{children:[(0,Kn.jsx)("i",{className:"bi bi-geo-alt me-2"}),"Impact Visualization"]}),(0,Kn.jsxs)("div",{className:"btn-group",role:"group",children:[(0,Kn.jsxs)(bc,{variant:"2d"===T?"primary":"outline-primary",size:"sm",onClick:()=>A("2d"),children:[(0,Kn.jsx)("i",{className:"bi bi-map me-1"}),"2D Map"]}),(0,Kn.jsxs)(bc,{variant:"3d-earth"===T?"primary":"outline-primary",size:"sm",onClick:()=>A("3d-earth"),disabled:!R,title:R?"":"WebGL not supported",children:[(0,Kn.jsx)("i",{className:"bi bi-globe me-1"}),"3D Earth"]}),(0,Kn.jsxs)(bc,{variant:"3d-asteroid"===T?"primary":"outline-primary",size:"sm",onClick:()=>A("3d-asteroid"),disabled:!R||!u,title:R?u?"":"Select an asteroid first":"WebGL not supported",children:[(0,Kn.jsx)("i",{className:"bi bi-asterisk me-1"}),"3D Asteroid"]}),(0,Kn.jsxs)(bc,{variant:"3d-impact"===T?"primary":"outline-primary",size:"sm",onClick:()=>A("3d-impact"),disabled:!R,title:R?"":"WebGL not supported",children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-1"}),"3D Impact"]})]})]}),(0,Kn.jsx)(vu.Body,{className:"p-0",children:(0,Kn.jsxs)("div",{style:{height:"500px",width:"100%"},children:["2d"===T&&(0,Kn.jsxs)(gx,{center:[p.lat,p.lng],zoom:6,style:{height:"100%",width:"100%"},children:[(0,Kn.jsx)(wx,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,Kn.jsx)(Bx,{onLocationSelect:t=>{m(t),J.success("Impact location set: ".concat(t.lat.toFixed(4),", ").concat(t.lng.toFixed(4)))}}),(0,Kn.jsx)(Ex,{position:[p.lat,p.lng],icon:Fx})]}),"3d-earth"===T&&(0,Kn.jsx)("div",{style:{height:"100%",background:"#000"},children:(0,Kn.jsx)(Dx,{impactLocation:p,asteroidData:u,showImpact:!!_,animateImpact:C,onAnimationComplete:()=>P(!1)})}),"3d-asteroid"===T&&u&&(0,Kn.jsx)("div",{style:{height:"100%",background:"#000"},children:(0,Kn.jsx)(Ix,{asteroidData:u,showComparison:!0,showTrajectory:C})}),"3d-impact"===T&&(0,Kn.jsx)("div",{style:{height:"100%",background:"#000"},children:N?(0,Kn.jsx)(jx,{simulationData:{impactData:null===_||void 0===_?void 0:_.results,asteroidData:u,impactLocation:p,impactAngle:g,impactVelocity:y,animate:C},onAnimationComplete:()=>P(!1)}):(0,Kn.jsx)(zx,{impactData:null===_||void 0===_?void 0:_.results,asteroidData:u,animate:C,onAnimationComplete:()=>P(!1)})}),(0,Kn.jsxs)("div",{style:{position:"absolute",bottom:"10px",left:"10px",background:"rgba(0, 0, 0, 0.8)",color:"#ffffff",padding:"8px 12px",borderRadius:"6px",fontSize:"12px",zIndex:1e3},children:["2d"===T&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("i",{className:"bi bi-info-circle me-1"}),"Click on map to set impact location"]}),T.startsWith("3d")&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("i",{className:"bi bi-mouse me-1"}),"Drag to rotate \u2022 Scroll to zoom \u2022 Click objects for details"]})]}),T.startsWith("3d")&&_&&(0,Kn.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:1e3},children:(0,Kn.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,Kn.jsxs)(bc,{variant:C?"danger":"success",size:"sm",onClick:()=>P(!C),disabled:M,children:[(0,Kn.jsx)("i",{className:"bi bi-".concat(C?"stop":"play","-circle me-1")}),C?"Stop":"Animate"," Impact"]}),"3d-impact"===T&&(0,Kn.jsxs)(bc,{variant:N?"primary":"outline-primary",size:"sm",onClick:()=>k(!N),title:N?"Switch to Basic 3D":"Switch to Enhanced 3D",children:[(0,Kn.jsx)("i",{className:"bi bi-".concat(N?"cpu":"cpu-fill"," me-1")}),N?"Enhanced":"Basic"]})]})})]})})]})})]}),(0,Kn.jsxs)(ax,{show:w,onHide:()=>S(!1),size:"lg",centered:!0,children:[(0,Kn.jsx)(ax.Header,{closeButton:!0,className:"bg-dark border-secondary",children:(0,Kn.jsxs)(ax.Title,{children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle text-warning me-2"}),"Impact Simulation Results"]})}),(0,Kn.jsx)(ax.Body,{className:"bg-dark text-light",children:_&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)(Dc,{className:"mb-4",children:[(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsx)(vu,{className:"bg-dark border-secondary",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("h6",{className:"text-primary",children:"Impact Energy"}),(0,Kn.jsxs)("h4",{children:[D(_.results.energy)," Joules"]}),(0,Kn.jsxs)("small",{className:"text-muted text-white",children:["TNT Equivalent: ",D(_.results.tntEquivalent)," tons"]})]})})}),(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsx)(vu,{className:"bg-dark border-secondary",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("h6",{className:"text-warning",children:"Crater Diameter"}),(0,Kn.jsxs)("h4",{children:[_.results.craterDiameter.toFixed(1)," km"]}),(0,Kn.jsxs)("small",{className:"text-muted text-white",children:["Depth: ",_.results.craterDepth.toFixed(1)," km"]})]})})})]}),(0,Kn.jsx)(Dc,{className:"mb-4",children:(0,Kn.jsxs)(Uc,{children:[(0,Kn.jsx)("h6",{children:"Impact Severity"}),(0,Kn.jsx)(Rc,{bg:(t=>{switch(t){case"catastrophic":return"danger";case"severe":return"warning";case"moderate":return"info";default:return"success"}})(_.results.severity),className:"fs-6 p-2",children:_.results.severity.toUpperCase()})]})}),(0,Kn.jsxs)(Dc,{className:"mb-4",children:[(0,Kn.jsx)(Uc,{md:4,children:(0,Kn.jsx)(vu,{className:"bg-dark border-secondary",children:(0,Kn.jsxs)(vu.Body,{className:"text-center",children:[(0,Kn.jsx)("h6",{className:"text-danger",children:"Affected Area"}),(0,Kn.jsxs)("h5",{children:[D(_.results.affectedArea)," km\xb2"]})]})})}),(0,Kn.jsx)(Uc,{md:4,children:(0,Kn.jsx)(vu,{className:"bg-dark border-secondary",children:(0,Kn.jsxs)(vu.Body,{className:"text-center",children:[(0,Kn.jsx)("h6",{className:"text-warning",children:"Estimated Casualties"}),(0,Kn.jsx)("h5",{children:D(_.results.estimatedCasualties)})]})})}),(0,Kn.jsx)(Uc,{md:4,children:(0,Kn.jsx)(vu,{className:"bg-dark border-secondary",children:(0,Kn.jsxs)(vu.Body,{className:"text-center",children:[(0,Kn.jsx)("h6",{className:"text-info",children:"Economic Impact"}),(0,Kn.jsxs)("h5",{children:["$",D(_.results.economicImpact)]})]})})})]}),_.results.mitigationStrategies&&(0,Kn.jsxs)("div",{className:"mt-4",children:[(0,Kn.jsx)("h6",{children:"Recommended Mitigation Strategies"}),(0,Kn.jsx)("ul",{className:"list-unstyled",children:_.results.mitigationStrategies.map((t,e)=>(0,Kn.jsxs)("li",{className:"mb-2",children:[(0,Kn.jsx)(Rc,{bg:"info",className:"me-2",children:e+1}),t]},e))})]})]})}),(0,Kn.jsxs)(ax.Footer,{className:"bg-dark border-secondary",children:[(0,Kn.jsx)(bc,{variant:"outline-light",onClick:()=>S(!1),children:"Close"}),(0,Kn.jsx)(bc,{variant:"primary",onClick:()=>{J.success("Results saved to your profile!"),S(!1)},children:"Save Results"})]})]})]})},Vx=()=>{const{fetchPublicSimulations:t,loading:n}=ei(),[i,r]=(0,e.useState)([]),[s,o]=(0,e.useState)({sortBy:"votes.likes",featured:!1});(0,e.useEffect)(()=>{l()},[s]);const l=async()=>{try{const e=await t(s);r(e.simulations||[])}catch(e){console.error("Failed to load community simulations:",e)}};return(0,Kn.jsxs)(yi,{className:"py-5",style:{marginTop:"100px"},children:[(0,Kn.jsx)(Dc,{children:(0,Kn.jsx)(Uc,{children:(0,Kn.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("h1",{children:[(0,Kn.jsx)("i",{className:"bi bi-people me-2"}),"Community Simulations"]}),(0,Kn.jsx)("p",{className:"text-muted",children:"Explore and vote on simulations shared by the community"})]})})})}),(0,Kn.jsx)(Dc,{className:"mb-4",children:(0,Kn.jsx)(Uc,{children:(0,Kn.jsx)(vu,{className:"glass-effect",children:(0,Kn.jsx)(vu.Body,{children:(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsxs)(Uc,{md:6,children:[(0,Kn.jsx)(Iy.Label,{children:"Sort By"}),(0,Kn.jsxs)(Iy.Select,{className:"text-white bg-dark",value:s.sortBy,onChange:t=>o(e=>(0,a.A)((0,a.A)({},e),{},{sortBy:t.target.value})),children:[(0,Kn.jsx)("option",{value:"votes.likes",children:"Most Liked"}),(0,Kn.jsx)("option",{value:"createdAt",children:"Most Recent"}),(0,Kn.jsx)("option",{value:"results.craterDiameter",children:"Largest Impact"}),(0,Kn.jsx)("option",{value:"results.populationEffects.estimatedCasualties",children:"Most Casualties"})]})]}),(0,Kn.jsx)(Uc,{md:6,className:"d-flex align-items-end",children:(0,Kn.jsx)(Iy.Check,{type:"checkbox",label:"Featured Only",checked:s.featured,onChange:t=>o(e=>(0,a.A)((0,a.A)({},e),{},{featured:t.target.checked}))})})]})})})})}),(0,Kn.jsx)(Dc,{children:n?(0,Kn.jsxs)(Uc,{className:"text-center py-5",children:[(0,Kn.jsx)("div",{className:"loading-spinner"}),(0,Kn.jsx)("p",{className:"mt-3",children:"Loading community simulations..."})]}):i.length>0?i.map(t=>{var e,n,i,r,s,a,o,l,c,u,h,d;return(0,Kn.jsx)(Uc,{lg:6,className:"mb-4",children:(0,Kn.jsxs)(vu,{className:"glass-effect h-100",children:[(0,Kn.jsxs)(vu.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("h6",{className:"mb-0 text-truncate",title:null===(e=t.asteroid)||void 0===e?void 0:e.name,children:null===(n=t.asteroid)||void 0===n?void 0:n.name}),(0,Kn.jsxs)("small",{className:"text-muted",children:["by ",null===(i=t.user)||void 0===i?void 0:i.username," \u2022 ",(d=t.createdAt,new Date(d).toLocaleDateString())]})]}),t.isFeatured&&(0,Kn.jsxs)(Rc,{bg:"warning",text:"dark",children:[(0,Kn.jsx)("i",{className:"bi bi-star-fill me-1"}),"Featured"]})]}),(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("div",{className:"mb-3",children:(0,Kn.jsxs)("div",{className:"d-flex justify-content-between text-sm",children:[(0,Kn.jsx)("span",{children:"Impact Location:"}),(0,Kn.jsxs)("strong",{children:[(null===(r=t.impactLocation)||void 0===r?void 0:r.city)||"Unknown",", ",(null===(s=t.impactLocation)||void 0===s?void 0:s.country)||"Unknown"]})]})}),(0,Kn.jsx)("div",{className:"mb-3",children:(0,Kn.jsxs)("div",{className:"d-flex justify-content-between text-sm",children:[(0,Kn.jsx)("span",{children:"Crater Diameter:"}),(0,Kn.jsx)("strong",{children:null!==(a=t.results)&&void 0!==a&&a.craterDiameter?"".concat((t.results.craterDiameter/1e3).toFixed(2)," km"):"Unknown"})]})}),(0,Kn.jsx)("div",{className:"mb-3",children:(0,Kn.jsxs)("div",{className:"d-flex justify-content-between text-sm",children:[(0,Kn.jsx)("span",{children:"Estimated Casualties:"}),(0,Kn.jsx)("strong",{className:"text-danger",children:null!==(o=t.results)&&void 0!==o&&null!==(l=o.populationEffects)&&void 0!==l&&l.estimatedCasualties?t.results.populationEffects.estimatedCasualties.toLocaleString():"Unknown"})]})}),"none"!==(null===(c=t.mitigationStrategy)||void 0===c?void 0:c.method)&&(0,Kn.jsx)("div",{className:"mb-3",children:(0,Kn.jsxs)(Rc,{bg:"info",children:[(0,Kn.jsx)("i",{className:"bi bi-shield-check me-1"}),t.mitigationStrategy.method.replace(/_/g," ").toUpperCase()]})})]}),(0,Kn.jsx)(vu.Footer,{children:(0,Kn.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Kn.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,Kn.jsxs)("span",{children:[(0,Kn.jsx)("i",{className:"bi bi-heart text-success me-1"}),(null===(u=t.votes)||void 0===u?void 0:u.likes)||0]}),(0,Kn.jsxs)("span",{children:[(0,Kn.jsx)("i",{className:"bi bi-chat text-info me-1"}),(null===(h=t.comments)||void 0===h?void 0:h.length)||0]})]}),(0,Kn.jsx)(Lc.m,{to:"/simulation/".concat(t._id),children:(0,Kn.jsx)(bc,{variant:"primary",size:"sm",children:"View Details"})})]})})]})},t._id)}):(0,Kn.jsxs)(Uc,{className:"text-center py-5",children:[(0,Kn.jsx)("i",{className:"bi bi-people display-1 text-muted"}),(0,Kn.jsx)("h4",{className:"mt-3",children:"No simulations found"}),(0,Kn.jsx)("p",{className:"text-muted",children:"Be the first to share a simulation with the community!"})]})})]})},Wx=()=>{var t,n,i,r,s,o;const{user:l,updateProfile:c,changePassword:u}=Qn(),{fetchUserSimulations:h}=ei(),[d,f]=(0,e.useState)({firstName:(null===l||void 0===l||null===(t=l.profile)||void 0===t?void 0:t.firstName)||"",lastName:(null===l||void 0===l||null===(n=l.profile)||void 0===n?void 0:n.lastName)||"",city:(null===l||void 0===l||null===(i=l.profile)||void 0===i?void 0:i.city)||"",country:(null===l||void 0===l||null===(r=l.profile)||void 0===r?void 0:r.country)||""}),[p,m]=(0,e.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[g,v]=(0,e.useState)(!1),[y,x]=(0,e.useState)(!1),[_,b]=(0,e.useState)([]);(0,e.useEffect)(()=>{(async()=>{const t=await h({limit:5,sortBy:"createdAt",sortOrder:"desc"});b(t.simulations||[])})()},[h]),(0,e.useEffect)(()=>{var t,e,n,i;f({firstName:(null===l||void 0===l||null===(t=l.profile)||void 0===t?void 0:t.firstName)||"",lastName:(null===l||void 0===l||null===(e=l.profile)||void 0===e?void 0:e.lastName)||"",city:(null===l||void 0===l||null===(n=l.profile)||void 0===n?void 0:n.city)||"",country:(null===l||void 0===l||null===(i=l.profile)||void 0===i?void 0:i.country)||""})},[l]);return(0,Kn.jsxs)(yi,{className:"py-5",style:{marginTop:"100px"},children:[(0,Kn.jsx)(Dc,{children:(0,Kn.jsxs)(Uc,{children:[(0,Kn.jsxs)("h1",{children:[(0,Kn.jsx)("i",{className:"bi bi-person-circle me-2"}),"User Profile"]}),(0,Kn.jsx)("p",{className:"text-muted mb-4",children:"Manage your account and view your achievements"})]})}),(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{md:4,className:"mb-4",children:(0,Kn.jsx)(vu,{className:"glass-effect",children:(0,Kn.jsxs)(vu.Body,{className:"text-center",children:[(0,Kn.jsx)("i",{className:"bi bi-person-circle display-1 text-primary mb-3"}),(0,Kn.jsx)("h4",{children:null===l||void 0===l?void 0:l.username}),(0,Kn.jsx)("p",{className:"text-muted",children:null===l||void 0===l?void 0:l.email}),(null===l||void 0===l||null===(s=l.profile)||void 0===s?void 0:s.firstName)&&(0,Kn.jsxs)("p",{className:"mb-0",children:[l.profile.firstName," ",l.profile.lastName]}),(null===l||void 0===l||null===(o=l.profile)||void 0===o?void 0:o.city)&&(0,Kn.jsxs)("p",{className:"text-muted",children:[l.profile.city,", ",l.profile.country]})]})})}),(0,Kn.jsx)(Uc,{md:8,children:(0,Kn.jsxs)(Dc,{className:"g-3",children:[(0,Kn.jsx)(Uc,{md:12,children:(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsx)(vu.Header,{children:(0,Kn.jsxs)("h5",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-pencil-square me-2"}),"Edit Profile"]})}),(0,Kn.jsx)(vu.Body,{children:(0,Kn.jsxs)(Iy,{onSubmit:async t=>{t.preventDefault(),v(!0);try{await c({profile:(0,a.A)({},d)})}finally{v(!1)}},children:[(0,Kn.jsxs)(Dc,{className:"g-2",children:[(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{children:[(0,Kn.jsx)(Iy.Label,{children:"First Name"}),(0,Kn.jsx)(Iy.Control,{className:"text-white bg-dark",value:d.firstName,onChange:t=>f((0,a.A)((0,a.A)({},d),{},{firstName:t.target.value}))})]})}),(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{children:[(0,Kn.jsx)(Iy.Label,{children:"Last Name"}),(0,Kn.jsx)(Iy.Control,{className:"text-white bg-dark",value:d.lastName,onChange:t=>f((0,a.A)((0,a.A)({},d),{},{lastName:t.target.value}))})]})}),(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{children:[(0,Kn.jsx)(Iy.Label,{children:"City"}),(0,Kn.jsx)(Iy.Control,{className:"text-white bg-dark",value:d.city,onChange:t=>f((0,a.A)((0,a.A)({},d),{},{city:t.target.value}))})]})}),(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{children:[(0,Kn.jsx)(Iy.Label,{children:"Country"}),(0,Kn.jsx)(Iy.Control,{className:"text-white bg-dark",value:d.country,onChange:t=>f((0,a.A)((0,a.A)({},d),{},{country:t.target.value}))})]})})]}),(0,Kn.jsx)("div",{className:"mt-3 d-flex justify-content-end",children:(0,Kn.jsx)(bc,{type:"submit",variant:"primary",disabled:g,children:g?"Saving...":"Save Changes"})})]})})]})}),(0,Kn.jsx)(Uc,{md:12,children:(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsx)(vu.Header,{children:(0,Kn.jsxs)("h5",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-shield-lock me-2"}),"Change Password"]})}),(0,Kn.jsx)(vu.Body,{children:(0,Kn.jsxs)(Iy,{onSubmit:async t=>{if(t.preventDefault(),p.newPassword===p.confirmPassword){x(!0);try{await u(p.currentPassword,p.newPassword),m({currentPassword:"",newPassword:"",confirmPassword:""})}finally{x(!1)}}},children:[(0,Kn.jsxs)(Dc,{className:"g-2",children:[(0,Kn.jsx)(Uc,{md:4,children:(0,Kn.jsxs)(Iy.Group,{children:[(0,Kn.jsx)(Iy.Label,{children:"Current Password"}),(0,Kn.jsx)(Iy.Control,{className:"text-white bg-dark",type:"password",value:p.currentPassword,onChange:t=>m((0,a.A)((0,a.A)({},p),{},{currentPassword:t.target.value})),required:!0})]})}),(0,Kn.jsx)(Uc,{md:4,children:(0,Kn.jsxs)(Iy.Group,{children:[(0,Kn.jsx)(Iy.Label,{children:"New Password"}),(0,Kn.jsx)(Iy.Control,{className:"text-white bg-dark",type:"password",value:p.newPassword,onChange:t=>m((0,a.A)((0,a.A)({},p),{},{newPassword:t.target.value})),required:!0})]})}),(0,Kn.jsx)(Uc,{md:4,children:(0,Kn.jsxs)(Iy.Group,{children:[(0,Kn.jsx)(Iy.Label,{children:"Confirm Password"}),(0,Kn.jsx)(Iy.Control,{className:"text-white bg-dark",type:"password",value:p.confirmPassword,onChange:t=>m((0,a.A)((0,a.A)({},p),{},{confirmPassword:t.target.value})),required:!0})]})})]}),(0,Kn.jsx)("div",{className:"mt-3 d-flex justify-content-end",children:(0,Kn.jsx)(bc,{type:"submit",variant:"warning",disabled:y||p.newPassword!==p.confirmPassword,children:y?"Changing...":"Change Password"})})]})})]})}),(0,Kn.jsx)(Uc,{md:12,children:(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsx)(vu.Header,{children:(0,Kn.jsxs)("h5",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-clock-history me-2"}),"Recent Simulations"]})}),(0,Kn.jsx)(vu.Body,{children:0===_.length?(0,Kn.jsx)("div",{className:"text-muted",children:"No simulations yet."}):(0,Kn.jsxs)(bu,{responsive:!0,size:"sm",className:"mb-0 text-white",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"When"}),(0,Kn.jsx)("th",{children:"Asteroid"}),(0,Kn.jsx)("th",{children:"Energy"}),(0,Kn.jsx)("th",{children:"Severity"})]})}),(0,Kn.jsx)("tbody",{children:_.map(t=>{var e,n,i,r,s,a,o;return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{children:new Date(t.createdAt).toLocaleString()}),(0,Kn.jsx)("td",{children:(null===(e=t.asteroid)||void 0===e?void 0:e.name)||(null===(n=t.asteroidData)||void 0===n?void 0:n.name)||t.asteroidId||"N/A"}),(0,Kn.jsx)("td",{children:null!==(i=t.results)&&void 0!==i&&i.energy?t.results.energy.toExponential(2)+" J":"N/A"}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)(Rc,{bg:"catastrophic"===(null===(r=t.results)||void 0===r?void 0:r.severity)?"danger":"severe"===(null===(s=t.results)||void 0===s?void 0:s.severity)?"warning":"moderate"===(null===(a=t.results)||void 0===a?void 0:a.severity)?"info":"success",children:null!==(o=t.results)&&void 0!==o&&o.severity?String(t.results.severity).toUpperCase():"N/A"})})]},t._id)})})]})})]})})]})})]})]})},Gx=()=>{var t,n;const[i,s]=(0,e.useState)({email:"",password:""}),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(""),{login:h}=Qn(),d=(0,ii.Zp)(),f=(null===(t=(0,ii.zy)().state)||void 0===t||null===(n=t.from)||void 0===n?void 0:n.pathname)||"/dashboard",p=t=>{s((0,a.A)((0,a.A)({},i),{},{[t.target.name]:t.target.value})),u("")};return(0,Kn.jsx)(yi,{className:"py-5",style:{marginTop:"100px"},children:(0,Kn.jsx)(Dc,{className:"justify-content-center",children:(0,Kn.jsxs)(Uc,{md:6,lg:5,children:[(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsxs)(vu.Header,{className:"text-center",children:[(0,Kn.jsxs)("h3",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-rocket-takeoff me-2"}),"Welcome Back"]}),(0,Kn.jsx)("p",{className:"text-muted mt-2",children:"Sign in to continue your asteroid research"})]}),(0,Kn.jsxs)(vu.Body,{children:[c&&(0,Kn.jsxs)(Lu,{variant:"danger",className:"mb-3",children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),c]}),(0,Kn.jsxs)(Iy,{onSubmit:async t=>{t.preventDefault(),l(!0),u("");try{const t=await h(i.email,i.password);t.success?d(f,{replace:!0}):u(t.error)}catch(e){u("An unexpected error occurred")}finally{l(!1)}},children:[(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsxs)(Iy.Label,{children:[(0,Kn.jsx)("i",{className:"bi bi-envelope me-2"}),"Email Address"]}),(0,Kn.jsx)(Iy.Control,{type:"email",name:"email",value:i.email,onChange:p,placeholder:"Enter your email",required:!0,autoFocus:!0})]}),(0,Kn.jsxs)(Iy.Group,{className:"mb-4",children:[(0,Kn.jsxs)(Iy.Label,{children:[(0,Kn.jsx)("i",{className:"bi bi-lock me-2"}),"Password"]}),(0,Kn.jsx)(Iy.Control,{type:"password",name:"password",value:i.password,onChange:p,placeholder:"Enter your password",required:!0})]}),(0,Kn.jsx)(bc,{type:"submit",variant:"primary",size:"lg",className:"w-100",disabled:o,children:o?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Signing In..."]}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("i",{className:"bi bi-box-arrow-in-right me-2"}),"Sign In"]})})]})]}),(0,Kn.jsx)(vu.Footer,{className:"text-center",children:(0,Kn.jsxs)("p",{className:"mb-0",children:["Don't have an account?"," ",(0,Kn.jsx)(r.Link,{to:"/register",className:"text-decoration-none",children:(0,Kn.jsx)("strong",{children:"Sign up now"})})]})})]}),(0,Kn.jsx)(vu,{className:"glass-effect mt-3",children:(0,Kn.jsxs)(vu.Body,{className:"text-center",children:[(0,Kn.jsxs)("h6",{className:"text-muted mb-2",children:[(0,Kn.jsx)("i",{className:"bi bi-info-circle me-2"}),"Demo Credentials"]}),(0,Kn.jsxs)("p",{className:"mb-1",children:[(0,Kn.jsx)("strong",{children:"Email:"})," demo@astroimpact.com"]}),(0,Kn.jsxs)("p",{className:"mb-0",children:[(0,Kn.jsx)("strong",{children:"Password:"})," demo123"]}),(0,Kn.jsx)("small",{className:"text-muted",children:"Use these credentials to test the application"})]})})]})})})},Xx=["confirmPassword"],qx=()=>{const[t,n]=(0,e.useState)({username:"",email:"",password:"",confirmPassword:"",profile:{firstName:"",lastName:"",country:"",city:""}}),[i,s]=(0,e.useState)(!1),[o,l]=(0,e.useState)(""),[c,u]=(0,e.useState)({}),{register:h}=Qn(),d=(0,ii.Zp)(),f=e=>{const{name:i,value:r}=e.target;if(i.startsWith("profile.")){const e=i.split(".")[1];n((0,a.A)((0,a.A)({},t),{},{profile:(0,a.A)((0,a.A)({},t.profile),{},{[e]:r})}))}else n((0,a.A)((0,a.A)({},t),{},{[i]:r}));l(""),u({})};return(0,Kn.jsx)(yi,{className:"py-5",style:{marginTop:"100px"},children:(0,Kn.jsx)(Dc,{className:"justify-content-center",children:(0,Kn.jsx)(Uc,{md:8,lg:6,children:(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsxs)(vu.Header,{className:"text-center",children:[(0,Kn.jsxs)("h3",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-person-plus me-2"}),"Join Zuricatas"]}),(0,Kn.jsx)("p",{className:"text-muted mt-2",children:"Create your account to start simulating asteroid impacts"})]}),(0,Kn.jsxs)(vu.Body,{children:[o&&(0,Kn.jsxs)(Lu,{variant:"danger",className:"mb-3",children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),o]}),(0,Kn.jsxs)(Iy,{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return t.username.length<3&&(e.username="Username must be at least 3 characters"),/\S+@\S+\.\S+/.test(t.email)||(e.email="Please enter a valid email address"),t.password.length<6&&(e.password="Password must be at least 6 characters"),t.password!==t.confirmPassword&&(e.confirmPassword="Passwords do not match"),u(e),0===Object.keys(e).length})()){s(!0),l("");try{const{confirmPassword:e}=t,n=(0,ri.A)(t,Xx),i=await h(n);i.success?d("/dashboard"):l(i.error)}catch(n){l("An unexpected error occurred")}finally{s(!1)}}},children:[(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsxs)(Iy.Label,{children:[(0,Kn.jsx)("i",{className:"bi bi-person me-2"}),"Username *"]}),(0,Kn.jsx)(Iy.Control,{type:"text",name:"username",value:t.username,onChange:f,placeholder:"Choose a username",isInvalid:!!c.username,required:!0,autoFocus:!0}),(0,Kn.jsx)(Iy.Control.Feedback,{type:"invalid",children:c.username})]})}),(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsxs)(Iy.Label,{children:[(0,Kn.jsx)("i",{className:"bi bi-envelope me-2"}),"Email Address *"]}),(0,Kn.jsx)(Iy.Control,{type:"email",name:"email",value:t.email,onChange:f,placeholder:"Enter your email",isInvalid:!!c.email,required:!0}),(0,Kn.jsx)(Iy.Control.Feedback,{type:"invalid",children:c.email})]})})]}),(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsxs)(Iy.Label,{children:[(0,Kn.jsx)("i",{className:"bi bi-lock me-2"}),"Password *"]}),(0,Kn.jsx)(Iy.Control,{type:"password",name:"password",value:t.password,onChange:f,placeholder:"Create a password",isInvalid:!!c.password,required:!0}),(0,Kn.jsx)(Iy.Control.Feedback,{type:"invalid",children:c.password})]})}),(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsxs)(Iy.Label,{children:[(0,Kn.jsx)("i",{className:"bi bi-lock-fill me-2"}),"Confirm Password *"]}),(0,Kn.jsx)(Iy.Control,{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:f,placeholder:"Confirm your password",isInvalid:!!c.confirmPassword,required:!0}),(0,Kn.jsx)(Iy.Control.Feedback,{type:"invalid",children:c.confirmPassword})]})})]}),(0,Kn.jsx)("hr",{className:"my-4"}),(0,Kn.jsx)("h6",{className:"text-muted mb-3",children:"Profile Information (Optional)"}),(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"First Name"}),(0,Kn.jsx)(Iy.Control,{type:"text",name:"profile.firstName",value:t.profile.firstName,onChange:f,placeholder:"Your first name"})]})}),(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Last Name"}),(0,Kn.jsx)(Iy.Control,{type:"text",name:"profile.lastName",value:t.profile.lastName,onChange:f,placeholder:"Your last name"})]})})]}),(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Country"}),(0,Kn.jsx)(Iy.Control,{type:"text",name:"profile.country",value:t.profile.country,onChange:f,placeholder:"Your country"})]})}),(0,Kn.jsx)(Uc,{md:6,children:(0,Kn.jsxs)(Iy.Group,{className:"mb-4",children:[(0,Kn.jsx)(Iy.Label,{children:"City"}),(0,Kn.jsx)(Iy.Control,{type:"text",name:"profile.city",value:t.profile.city,onChange:f,placeholder:"Your city"})]})})]}),(0,Kn.jsx)(bc,{type:"submit",variant:"primary",size:"lg",className:"w-100",disabled:i,children:i?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Creating Account..."]}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("i",{className:"bi bi-person-check me-2"}),"Create Account"]})})]})]}),(0,Kn.jsx)(vu.Footer,{className:"text-center",children:(0,Kn.jsxs)("p",{className:"mb-0",children:["Already have an account?"," ",(0,Kn.jsx)(r.Link,{to:"/login",className:"text-decoration-none",children:(0,Kn.jsx)("strong",{children:"Sign in here"})})]})})]})})})})},Zx=["className","bsPrefix","as"],Yx=e.forwardRef((t,e)=>{let{className:n,bsPrefix:i,as:r="span"}=t,s=(0,ri.A)(t,Zx);return i=di(i,"input-group-text"),(0,Kn.jsx)(r,(0,a.A)({ref:e,className:ai()(n,i)},s))});Yx.displayName="InputGroupText";const Kx=Yx,Jx=["bsPrefix","size","hasValidation","className","as"],Qx=e.forwardRef((t,n)=>{let{bsPrefix:i,size:r,hasValidation:s,className:o,as:l="div"}=t,c=(0,ri.A)(t,Jx);i=di(i,"input-group");const u=(0,e.useMemo)(()=>({}),[]);return(0,Kn.jsx)(fc.Provider,{value:u,children:(0,Kn.jsx)(l,(0,a.A)((0,a.A)({ref:n},c),{},{className:ai()(o,i,r&&"".concat(i,"-").concat(r),s&&"has-validation")}))})});Qx.displayName="InputGroup";const $x=Object.assign(Qx,{Text:Kx,Radio:t=>(0,Kn.jsx)(Kx,{children:(0,Kn.jsx)(ty,(0,a.A)({type:"radio"},t))}),Checkbox:t=>(0,Kn.jsx)(Kx,{children:(0,Kn.jsx)(ty,(0,a.A)({type:"checkbox"},t))})}),t_=()=>{const{fetchAsteroids:t,searchAsteroids:n,loading:i}=ei(),r=(0,ii.Zp)(),[s,o]=(0,e.useState)([]),[l,c]=(0,e.useState)(""),[u,h]=(0,e.useState)({hazardous:"",minSize:"",maxSize:"",sortBy:"calculatedProperties.averageDiameter",sortOrder:"desc"}),[d,f]=(0,e.useState)({currentPage:1,totalPages:1,totalItems:0});(0,e.useEffect)(()=>{p()},[u,d.currentPage]);const p=async()=>{try{const e=(0,a.A)({page:d.currentPage,limit:20},u);Object.keys(e).forEach(t=>{""!==e[t]&&null!==e[t]&&void 0!==e[t]||delete e[t]});const n=await t(e);o(n.asteroids||[]),f(n.pagination||{})}catch(e){console.error("Failed to load asteroids:",e)}},m=(t,e)=>{h(n=>(0,a.A)((0,a.A)({},n),{},{[t]:e})),f(t=>(0,a.A)((0,a.A)({},t),{},{currentPage:1}))},g=t=>{f(e=>(0,a.A)((0,a.A)({},e),{},{currentPage:t}))},v=t=>{var e;const n=null===(e=t.calculatedProperties)||void 0===e?void 0:e.averageDiameter;return n?n>=1e3?"".concat((n/1e3).toFixed(2)," km"):"".concat(n.toFixed(0)," m"):"Unknown"},y=t=>{var e;const n=null===(e=t.calculatedProperties)||void 0===e?void 0:e.averageVelocity;return n?"".concat(n.toFixed(2)," km/s"):"Unknown"},x=t=>{var e;const n=null===(e=t.calculatedProperties)||void 0===e?void 0:e.kineticEnergy;return n?n>=1e15?"".concat((n/1e15).toExponential(2)," PJ"):n>=1e12?"".concat((n/1e12).toFixed(2)," TJ"):"".concat((n/1e9).toFixed(2)," GJ"):"Unknown"};return(0,Kn.jsxs)(yi,{className:"py-5",style:{marginTop:"100px"},children:[(0,Kn.jsx)(Dc,{children:(0,Kn.jsx)(Uc,{children:(0,Kn.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("h1",{children:[(0,Kn.jsx)("i",{className:"bi bi-search me-2"}),"Asteroid Explorer"]}),(0,Kn.jsx)("p",{className:"text-muted",children:"Browse NASA's near-Earth asteroid database"})]})})})}),(0,Kn.jsx)(Dc,{className:"mb-4",children:(0,Kn.jsx)(Uc,{children:(0,Kn.jsx)(vu,{className:"glass-effect",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)(Iy,{onSubmit:async t=>{if(t.preventDefault(),l.trim())try{const t=await n(l.trim(),20);o(t),f({currentPage:1,totalPages:1,totalItems:t.length})}catch(e){console.error("Search failed:",e)}else p()},className:"mb-3",children:(0,Kn.jsxs)($x,{children:[(0,Kn.jsx)(Iy.Control,{type:"text",placeholder:"Search asteroids by name or ID...",value:l,onChange:t=>c(t.target.value)}),(0,Kn.jsx)(bc,{type:"submit",variant:"primary",disabled:i,children:(0,Kn.jsx)("i",{className:"bi bi-search"})})]})}),(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsxs)(Uc,{md:6,lg:3,className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Hazard Level"}),(0,Kn.jsxs)(Iy.Select,{className:"text-white bg-dark",value:u.hazardous,onChange:t=>m("hazardous",t.target.value),children:[(0,Kn.jsx)("option",{value:"",children:"All Asteroids"}),(0,Kn.jsx)("option",{value:"true",children:"Potentially Hazardous"}),(0,Kn.jsx)("option",{value:"false",children:"Non-Hazardous"})]})]}),(0,Kn.jsxs)(Uc,{md:6,lg:3,className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Min Size (meters)"}),(0,Kn.jsx)(Iy.Control,{type:"number",placeholder:"Min diameter",value:u.minSize,onChange:t=>m("minSize",t.target.value)})]}),(0,Kn.jsxs)(Uc,{md:6,lg:3,className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Max Size (meters)"}),(0,Kn.jsx)(Iy.Control,{type:"number",placeholder:"Max diameter",value:u.maxSize,onChange:t=>m("maxSize",t.target.value)})]}),(0,Kn.jsxs)(Uc,{md:6,lg:3,className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Sort By"}),(0,Kn.jsxs)(Iy.Select,{className:"text-white bg-dark",value:"".concat(u.sortBy,"-").concat(u.sortOrder),onChange:t=>{const[e,n]=t.target.value.split("-");m("sortBy",e),m("sortOrder",n)},children:[(0,Kn.jsx)("option",{value:"calculatedProperties.averageDiameter-desc",children:"Size (Largest First)"}),(0,Kn.jsx)("option",{value:"calculatedProperties.averageDiameter-asc",children:"Size (Smallest First)"}),(0,Kn.jsx)("option",{value:"calculatedProperties.kineticEnergy-desc",children:"Energy (Highest First)"}),(0,Kn.jsx)("option",{value:"calculatedProperties.averageVelocity-desc",children:"Velocity (Fastest First)"}),(0,Kn.jsx)("option",{value:"name-asc",children:"Name (A-Z)"}),(0,Kn.jsx)("option",{value:"lastUpdated-desc",children:"Recently Updated"})]})]})]})]})})})}),(0,Kn.jsx)(Dc,{children:(0,Kn.jsx)(Uc,{children:(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsxs)(vu.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,Kn.jsxs)("h5",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-list me-2"}),"Asteroids (",d.totalItems||0,")"]}),i&&(0,Kn.jsx)("div",{className:"loading-spinner"})]}),(0,Kn.jsx)(vu.Body,{className:"p-0",children:s.length>0?(0,Kn.jsxs)(bu,{responsive:!0,variant:"dark",className:"mb-0",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Name"}),(0,Kn.jsx)("th",{children:"Diameter"}),(0,Kn.jsx)("th",{children:"Velocity"}),(0,Kn.jsx)("th",{children:"Kinetic Energy"}),(0,Kn.jsx)("th",{children:"Hazard Level"}),(0,Kn.jsx)("th",{children:"Actions"})]})}),(0,Kn.jsx)("tbody",{children:s.map(t=>(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("strong",{className:"text-truncate d-block",style:{maxWidth:"200px"},children:t.name}),(0,Kn.jsxs)("small",{className:"text-muted",children:["ID: ",t.neo_reference_id]})]})}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)("strong",{children:v(t)})}),(0,Kn.jsx)("td",{children:y(t)}),(0,Kn.jsx)("td",{children:x(t)}),(0,Kn.jsx)("td",{children:t.is_potentially_hazardous_asteroid?(0,Kn.jsxs)(Rc,{bg:"warning",text:"dark",children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-1"}),"Hazardous"]}):(0,Kn.jsxs)(Rc,{bg:"success",children:[(0,Kn.jsx)("i",{className:"bi bi-check-circle me-1"}),"Safe"]})}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"d-flex gap-2",children:[(0,Kn.jsx)(bc,{variant:"outline-info",size:"sm",onClick:()=>window.open(t.nasa_jpl_url,"_blank"),disabled:!t.nasa_jpl_url,children:(0,Kn.jsx)("i",{className:"bi bi-info-circle"})}),(0,Kn.jsx)(bc,{variant:"primary",size:"sm",onClick:()=>r("/simulator",{state:{asteroidId:t._id}}),children:(0,Kn.jsx)("i",{className:"bi bi-play-circle"})})]})})]},t._id))})]}):(0,Kn.jsxs)("div",{className:"text-center py-5",children:[(0,Kn.jsx)("i",{className:"bi bi-search display-1 text-muted"}),(0,Kn.jsx)("h4",{className:"mt-3",children:"No asteroids found"}),(0,Kn.jsx)("p",{className:"text-muted",children:"Try adjusting your search criteria or filters"})]})}),d.totalPages>1&&(0,Kn.jsx)(vu.Footer,{children:(0,Kn.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Kn.jsxs)("div",{className:"text-muted",children:["Page ",d.currentPage," of ",d.totalPages]}),(0,Kn.jsxs)("div",{className:"d-flex gap-2",children:[(0,Kn.jsx)(bc,{variant:"outline-primary",size:"sm",disabled:d.currentPage<=1,onClick:()=>g(d.currentPage-1),children:(0,Kn.jsx)("i",{className:"bi bi-chevron-left"})}),(0,Kn.jsx)(bc,{variant:"outline-primary",size:"sm",disabled:d.currentPage>=d.totalPages,onClick:()=>g(d.currentPage+1),children:(0,Kn.jsx)("i",{className:"bi bi-chevron-right"})})]})]})})]})})})]})},e_=t=>null==t||isNaN(t)?"N/A":t>=1e12?(t/1e12).toFixed(2)+"T":t>=1e9?(t/1e9).toFixed(2)+"B":t>=1e6?(t/1e6).toFixed(2)+"M":t>=1e3?(t/1e3).toFixed(2)+"K":Number(t).toFixed(0),n_=()=>{var t,n,i,r,s;const{id:a}=(0,ii.g)(),l=(0,ii.Zp)(),{getSimulationById:c,loading:u}=ei(),[h,d]=(0,e.useState)(null),[f,p]=(0,e.useState)(""),[m,g]=(0,e.useState)(!1);(0,e.useEffect)(()=>{a&&(async()=>{try{const t=await c(a);d(t)}catch(o){p("Failed to load simulation.")}})()},[a,c]);const v=(null===h||void 0===h?void 0:h.results)||(null===h||void 0===h?void 0:h.impact)||{},y=(null===h||void 0===h?void 0:h.asteroid)||(null===h||void 0===h?void 0:h.asteroidData)||{},x=(null===h||void 0===h?void 0:h.impactLocation)||(null===h||void 0===h?void 0:h.location)||null,_=(0,e.useMemo)(()=>({energyJ:v.energy,tntTons:v.tntEquivalent,craterDiameterKm:v.craterDiameter,craterDepthKm:v.craterDepth,affectedAreaKm2:v.affectedArea,estimatedCasualties:v.estimatedCasualties,economicImpactUSD:v.economicImpact,severity:v.severity}),[v]);return(0,Kn.jsxs)(yi,{className:"py-5",style:{marginTop:"100px"},children:[(0,Kn.jsx)(Dc,{className:"mb-3",children:(0,Kn.jsx)(Uc,{children:(0,Kn.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("h1",{className:"mb-1",children:[(0,Kn.jsx)("i",{className:"bi bi-graph-up me-2"}),"Simulation Results"]}),(0,Kn.jsx)("div",{className:"text-muted",children:(null===h||void 0===h?void 0:h._id)&&(0,Kn.jsxs)("small",{children:["ID: ",h._id]})})]}),(0,Kn.jsxs)("div",{className:"d-flex gap-2",children:[(0,Kn.jsxs)(bc,{variant:"outline-secondary",onClick:()=>l(-1),children:[(0,Kn.jsx)("i",{className:"bi bi-arrow-left me-1"}),"Back"]}),(0,Kn.jsxs)(bc,{variant:"primary",onClick:()=>g(!0),disabled:!x,children:[(0,Kn.jsx)("i",{className:"bi bi-play-fill me-1"}),"Replay Impact"]})]})]})})}),f&&(0,Kn.jsx)(Dc,{className:"mb-3",children:(0,Kn.jsx)(Uc,{children:(0,Kn.jsx)(Lu,{variant:"danger",className:"mb-0",children:f})})}),(0,Kn.jsxs)(Dc,{className:"g-3 mb-3",children:[(0,Kn.jsx)(Uc,{md:3,children:(0,Kn.jsx)(vu,{className:"bg-dark border-secondary h-100",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("div",{className:"text-muted",children:"Impact Energy"}),(0,Kn.jsxs)("div",{className:"fs-4",children:[e_(_.energyJ)," J"]}),(0,Kn.jsxs)("small",{className:"text-muted",children:["TNT: ",e_(_.tntTons)," tons"]})]})})}),(0,Kn.jsx)(Uc,{md:3,children:(0,Kn.jsx)(vu,{className:"bg-dark border-secondary h-100",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("div",{className:"text-muted",children:"Crater Diameter"}),(0,Kn.jsxs)("div",{className:"fs-4",children:[null!==(t=_.craterDiameterKm)&&void 0!==t&&t.toFixed?_.craterDiameterKm.toFixed(1):"N/A"," km"]}),(0,Kn.jsxs)("small",{className:"text-muted",children:["Depth: ",null!==(n=_.craterDepthKm)&&void 0!==n&&n.toFixed?_.craterDepthKm.toFixed(1):"N/A"," km"]})]})})}),(0,Kn.jsx)(Uc,{md:3,children:(0,Kn.jsx)(vu,{className:"bg-dark border-secondary h-100",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("div",{className:"text-muted",children:"Affected Area"}),(0,Kn.jsxs)("div",{className:"fs-4",children:[e_(_.affectedAreaKm2)," km\xb2"]}),(0,Kn.jsxs)("small",{className:"text-muted",children:["Casualties: ",e_(_.estimatedCasualties)]})]})})}),(0,Kn.jsx)(Uc,{md:3,children:(0,Kn.jsx)(vu,{className:"bg-dark border-secondary h-100",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("div",{className:"text-muted",children:"Severity"}),(0,Kn.jsx)("div",{className:"fs-5",children:(0,Kn.jsx)(Rc,{bg:"catastrophic"===_.severity?"danger":"severe"===_.severity?"warning":"moderate"===_.severity?"info":"success",children:_.severity?String(_.severity).toUpperCase():"N/A"})}),(0,Kn.jsxs)("small",{className:"text-muted",children:["Economic: $",e_(_.economicImpactUSD)]})]})})})]}),(0,Kn.jsxs)(Dc,{className:"mb-3",children:[(0,Kn.jsx)(Uc,{md:4,children:(0,Kn.jsxs)(vu,{className:"bg-dark border-secondary h-100",children:[(0,Kn.jsx)(vu.Header,{children:(0,Kn.jsxs)("h6",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-asterisk me-2"}),"Asteroid"]})}),(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsxs)("div",{className:"mb-1",children:[(0,Kn.jsx)("strong",{children:"Name:"})," ",y.name||"N/A"]}),(0,Kn.jsxs)("div",{className:"mb-1",children:[(0,Kn.jsx)("strong",{children:"ID:"})," ",y.neo_reference_id||y._id||"N/A"]}),(0,Kn.jsxs)("div",{className:"mb-1",children:[(0,Kn.jsx)("strong",{children:"Diameter:"})," ",null!==y&&void 0!==y&&null!==(i=y.estimatedDiameter)&&void 0!==i&&null!==(r=i.kilometers)&&void 0!==r&&null!==(s=r.estimated_diameter_max)&&void 0!==s&&s.toFixed?y.estimatedDiameter.kilometers.estimated_diameter_max.toFixed(2):"N/A"," km"]}),(0,Kn.jsxs)("div",{className:"mb-1",children:[(0,Kn.jsx)("strong",{children:"Hazard:"})," ",y.isPotentiallyHazardousAsteroid?"Hazardous":"Not Hazardous"]})]})]})}),(0,Kn.jsx)(Uc,{md:8,children:(0,Kn.jsxs)(vu,{className:"glass-effect",children:[(0,Kn.jsxs)(vu.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,Kn.jsxs)("h6",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),"Impact Visualization"]}),(0,Kn.jsx)("div",{children:(0,Kn.jsxs)(bc,{size:"sm",variant:m?"danger":"outline-primary",onClick:()=>g(!m),disabled:!x,children:[(0,Kn.jsx)("i",{className:"bi bi-".concat(m?"stop":"play","-circle me-1")}),m?"Stop":"Play"]})})]}),(0,Kn.jsx)(vu.Body,{className:"p-0",style:{height:400,background:"#000"},children:(0,Kn.jsx)(jx,{simulationData:{impactData:v,asteroidData:y,impactLocation:x,impactAngle:(null===h||void 0===h?void 0:h.impactAngle)||45,impactVelocity:(null===h||void 0===h?void 0:h.impactVelocity)||20,animate:m},onAnimationComplete:()=>g(!1)})})]})})]}),!h&&!u&&!f&&(0,Kn.jsx)(Dc,{children:(0,Kn.jsx)(Uc,{children:(0,Kn.jsx)(Lu,{variant:"info",children:"No simulation data found."})})})]})},i_=()=>{const[t,n]=(0,e.useState)(!0),[i,r]=(0,e.useState)(!1),[s,a]=(0,e.useState)("small");(0,e.useEffect)(()=>{n(Ux())},[]);const o={small:{name:"Small Asteroid (Chelyabinsk-like)",asteroidData:{id:"test-small",name:"Test Small Asteroid",estimatedDiameter:{kilometers:{estimated_diameter_max:.02}},isPotentiallyHazardousAsteroid:!1,closeApproachData:[{relativeVelocity:{kilometersPerSecond:"18.5"}}]},simulationResults:{energy:54e13,tntEquivalent:44e4,craterDiameter:.15,craterDepth:.03,severity:"moderate",affectedArea:1500,estimatedCasualties:1500,economicImpact:33e6},impactLocation:{lat:55.1544,lng:61.4292},impactAngle:18,impactVelocity:18.5},medium:{name:"Medium Asteroid (Tunguska-like)",asteroidData:{id:"test-medium",name:"Test Medium Asteroid",estimatedDiameter:{kilometers:{estimated_diameter_max:.06}},isPotentiallyHazardousAsteroid:!0,closeApproachData:[{relativeVelocity:{kilometersPerSecond:"27.0"}}]},simulationResults:{energy:15e15,tntEquivalent:12e6,craterDiameter:1.2,craterDepth:.2,severity:"severe",affectedArea:2150,estimatedCasualties:0,economicImpact:0},impactLocation:{lat:60.8858,lng:101.8917},impactAngle:30,impactVelocity:27},large:{name:"Large Asteroid (Chicxulub-like)",asteroidData:{id:"test-large",name:"Test Large Asteroid",estimatedDiameter:{kilometers:{estimated_diameter_max:10}},isPotentiallyHazardousAsteroid:!0,closeApproachData:[{relativeVelocity:{kilometersPerSecond:"30.0"}}]},simulationResults:{energy:42e22,tntEquivalent:1e14,craterDiameter:150,craterDepth:20,severity:"catastrophic",affectedArea:7e7,estimatedCasualties:6e9,economicImpact:1e14},impactLocation:{lat:21.4,lng:-89.5},impactAngle:60,impactVelocity:30}}[s],l=t=>t>=1e9?(t/1e9).toFixed(1)+"B":t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toFixed(0);return t?(0,Kn.jsx)("div",{style:{background:"radial-gradient(circle at top, #0b0b15 0%, #000 100%)",color:"#fff",minHeight:"100vh",paddingTop:"80px"},children:(0,Kn.jsxs)(yi,{fluid:"lg",children:[(0,Kn.jsx)(Dc,{className:"mb-4",children:(0,Kn.jsxs)(Uc,{children:[(0,Kn.jsxs)("h1",{className:"display-5 fw-bold text-glow",children:[(0,Kn.jsx)("i",{className:"bi bi-cpu-fill me-2 text-warning"}),"Enhanced 3D Animation Test"]}),(0,Kn.jsx)("p",{className:"text-muted",children:"Test the new enhanced 3D asteroid impact animation system with realistic scenarios."})]})}),(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{lg:4,children:(0,Kn.jsxs)(vu,{className:"glass-card mb-4 p-2",children:[(0,Kn.jsxs)(vu.Header,{className:"border-secondary text-uppercase fw-bold text-warning",children:[(0,Kn.jsx)("i",{className:"bi bi-sliders me-2"})," Test Controls"]}),(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsxs)(Iy.Group,{className:"mb-3",children:[(0,Kn.jsx)(Iy.Label,{children:"Test Scenario"}),(0,Kn.jsxs)(Iy.Select,{className:"bg-dark text-light border-secondary",value:s,onChange:t=>{a(t.target.value),r(!1)},children:[(0,Kn.jsx)("option",{value:"small",children:"Small Asteroid (Chelyabinsk-like)"}),(0,Kn.jsx)("option",{value:"medium",children:"Medium Asteroid (Tunguska-like)"}),(0,Kn.jsx)("option",{value:"large",children:"Large Asteroid (Chicxulub-like)"})]})]}),(0,Kn.jsx)(vu,{className:"bg-black border-secondary mb-3",children:(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("h6",{className:"text-info mb-2",children:o.asteroidData.name}),(0,Kn.jsxs)("div",{className:"small text-white",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("b",{children:"Diameter:"})," ",o.asteroidData.estimatedDiameter.kilometers.estimated_diameter_max," km"]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("b",{children:"Velocity:"})," ",o.asteroidData.closeApproachData[0].relativeVelocity.kilometersPerSecond," km/s"]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("b",{children:"Impact Angle:"})," ",o.impactAngle,"\xb0"]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("b",{children:"Severity:"})," ",(0,Kn.jsx)(Rc,{bg:(t=>{switch(t){case"catastrophic":return"danger";case"severe":return"warning";case"moderate":return"info";default:return"success"}})(o.simulationResults.severity),children:o.simulationResults.severity.toUpperCase()})]})]})]})}),(0,Kn.jsx)("div",{className:"d-grid gap-2 mb-4",children:(0,Kn.jsxs)(bc,{variant:i?"danger":"success",size:"lg",className:"fw-bold btn-glow",onClick:()=>r(!i),children:[(0,Kn.jsx)("i",{className:"bi bi-".concat(i?"stop-circle":"play-circle"," me-2")}),i?"Stop Animation":"Start Animation"]})}),(0,Kn.jsxs)("div",{className:"small text-muted",children:[(0,Kn.jsxs)("h6",{className:"text-warning mb-2",children:[(0,Kn.jsx)("i",{className:"bi bi-stars me-2"}),"Enhanced Features"]}),(0,Kn.jsxs)("ul",{className:"mb-0",children:[(0,Kn.jsx)("li",{children:"Physics-based trajectory simulation"}),(0,Kn.jsx)("li",{children:"Advanced particle systems (explosion & debris)"}),(0,Kn.jsx)("li",{children:"Realistic material shaders"}),(0,Kn.jsx)("li",{children:"Performance optimization (LOD, pooling)"}),(0,Kn.jsx)("li",{children:"Interactive camera controls"}),(0,Kn.jsx)("li",{children:"Real-time timeline"})]})]})]})]})}),(0,Kn.jsxs)(Uc,{lg:8,children:[(0,Kn.jsxs)(vu,{className:"glass-card border-secondary shadow-lg",children:[(0,Kn.jsxs)(vu.Header,{className:"fw-bold text-warning text-uppercase border-secondary",children:[(0,Kn.jsx)("i",{className:"bi bi-globe2 me-2"})," Enhanced 3D Impact Simulation"]}),(0,Kn.jsx)(vu.Body,{className:"p-0 position-relative",children:(0,Kn.jsxs)("div",{style:{height:"600px",width:"100%",background:"#000"},children:[(0,Kn.jsx)(jx,{simulationData:{impactData:o.simulationResults,asteroidData:o.asteroidData,impactLocation:o.impactLocation,impactAngle:o.impactAngle,impactVelocity:o.impactVelocity,animate:i},onAnimationComplete:()=>r(!1)}),(0,Kn.jsx)("div",{className:"position-absolute bottom-0 start-0 p-2 small text-muted",style:{background:"rgba(0,0,0,0.6)",borderRadius:"4px"},children:"Drag to rotate \u2022 Scroll to zoom \u2022 Click UI controls for settings"})]})})]}),(0,Kn.jsxs)(vu,{className:"glass-card mt-4 border-secondary",children:[(0,Kn.jsxs)(vu.Header,{className:"text-uppercase fw-bold text-info border-secondary",children:[(0,Kn.jsx)("i",{className:"bi bi-bar-chart me-2"})," Impact Results Preview"]}),(0,Kn.jsx)(vu.Body,{children:(0,Kn.jsxs)(Dc,{className:"text-center",children:[(0,Kn.jsxs)(Uc,{md:3,children:[(0,Kn.jsx)("h6",{className:"text-primary",children:"Energy"}),(0,Kn.jsxs)("div",{className:"fw-bold text-glow-blue",children:[l(o.simulationResults.energy)," J"]})]}),(0,Kn.jsxs)(Uc,{md:3,children:[(0,Kn.jsx)("h6",{className:"text-warning",children:"Crater"}),(0,Kn.jsxs)("div",{className:"fw-bold text-glow-orange",children:[o.simulationResults.craterDiameter," km"]})]}),(0,Kn.jsxs)(Uc,{md:3,children:[(0,Kn.jsx)("h6",{className:"text-danger",children:"Affected Area"}),(0,Kn.jsxs)("div",{className:"fw-bold text-glow-red",children:[l(o.simulationResults.affectedArea)," km\xb2"]})]}),(0,Kn.jsxs)(Uc,{md:3,children:[(0,Kn.jsx)("h6",{className:"text-success",children:"TNT Equivalent"}),(0,Kn.jsxs)("div",{className:"fw-bold text-glow-green",children:[l(o.simulationResults.tntEquivalent)," tons"]})]})]})})]})]})]})]})}):(0,Kn.jsx)(yi,{className:"py-5",style:{marginTop:"100px"},children:(0,Kn.jsxs)(Lu,{variant:"danger",children:[(0,Kn.jsxs)(Lu.Heading,{children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),"WebGL Not Supported"]}),(0,Kn.jsx)("p",{children:"Your browser doesn't support WebGL, which is required for the Enhanced 3D visualization."})]})})};var r_=n(918),s_=n(985),a_=n(201),o_=n(408);const l_=new o_.Box3,c_=new o_.Vector3;class u_ extends o_.InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new o_.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new o_.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(t){const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==e&&(e.applyMatrix4(t),n.applyMatrix4(t),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const n=new o_.InstancedInterleavedBuffer(e,6,1);return this.setAttribute("instanceStart",new o_.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceEnd",new o_.InterleavedBufferAttribute(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const i=new o_.InstancedInterleavedBuffer(e,2*n,1);return this.setAttribute("instanceColorStart",new o_.InterleavedBufferAttribute(i,n,0)),this.setAttribute("instanceColorEnd",new o_.InterleavedBufferAttribute(i,n,n)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new o_.WireframeGeometry(t.geometry)),this}fromLineSegments(t){const e=t.geometry;return this.setPositions(e.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new o_.Box3);const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;void 0!==t&&void 0!==e&&(this.boundingBox.setFromBufferAttribute(t),l_.setFromBufferAttribute(e),this.boundingBox.union(l_))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new o_.Sphere),null===this.boundingBox&&this.computeBoundingBox();const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;if(void 0!==t&&void 0!==e){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let r=0,s=t.count;r<s;r++)c_.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(c_)),c_.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(c_));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(t){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}const h_=(()=>parseInt(o_.REVISION.replace(/\D+/g,"")))();class d_ extends o_.ShaderMaterial{constructor(t){super({type:"LineMaterial",uniforms:o_.UniformsUtils.clone(o_.UniformsUtils.merge([o_.UniformsLib.common,o_.UniformsLib.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new o_.Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:"\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\t\t\t\t#include <clipping_planes_pars_vertex>\n\n\t\t\t\tuniform float linewidth;\n\t\t\t\tuniform vec2 resolution;\n\n\t\t\t\tattribute vec3 instanceStart;\n\t\t\t\tattribute vec3 instanceEnd;\n\n\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\tvarying vec4 vLineColor;\n\t\t\t\t\t\tattribute vec4 instanceColorStart;\n\t\t\t\t\t\tattribute vec4 instanceColorEnd;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 vLineColor;\n\t\t\t\t\t\tattribute vec3 instanceColorStart;\n\t\t\t\t\t\tattribute vec3 instanceColorEnd;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\tvarying vec4 worldPos;\n\t\t\t\t\tvarying vec3 worldStart;\n\t\t\t\t\tvarying vec3 worldEnd;\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#else\n\n\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\tuniform float dashScale;\n\t\t\t\t\tattribute float instanceDistanceStart;\n\t\t\t\t\tattribute float instanceDistanceEnd;\n\t\t\t\t\tvarying float vLineDistance;\n\n\t\t\t\t#endif\n\n\t\t\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t\t\t// conservative estimate of the near plane\n\t\t\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#ifdef USE_COLOR\n\n\t\t\t\t\t\tvLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t\t\t// camera space\n\t\t\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\tworldStart = start.xyz;\n\t\t\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\t\t\tif ( perspective ) {\n\n\t\t\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// clip space\n\t\t\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t\t\t// ndc space\n\t\t\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t\t\t// direction\n\t\t\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t\t\t// account for clip-space aspect ratio\n\t\t\t\t\tdir.x *= aspect;\n\t\t\t\t\tdir = normalize( dir );\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\t\t\tvec3 offset;\n\t\t\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// sign flip\n\t\t\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// endcaps\n\t\t\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// adjust for linewidth\n\t\t\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t\t\t// set the world position\n\t\t\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t\t\t// project the worldpos\n\t\t\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t\t\t// segments overlap neatly\n\t\t\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\t\t\tdir.x /= aspect;\n\t\t\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t\t\t// sign flip\n\t\t\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t\t\t// endcaps\n\t\t\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\t\t\toffset += - dir;\n\n\t\t\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\t\t\toffset += dir;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// adjust for linewidth\n\t\t\t\t\t\toffset *= linewidth;\n\n\t\t\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t\t\t// select end\n\t\t\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t\t\t// back to clip space\n\t\t\t\t\t\toffset *= clip.w;\n\n\t\t\t\t\t\tclip.xy += offset;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tgl_Position = clip;\n\n\t\t\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t\t#include <clipping_planes_vertex>\n\t\t\t\t\t#include <fog_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\t\t\t\tuniform vec3 diffuse;\n\t\t\t\tuniform float opacity;\n\t\t\t\tuniform float linewidth;\n\n\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\tuniform float dashOffset;\n\t\t\t\t\tuniform float dashSize;\n\t\t\t\t\tuniform float gapSize;\n\n\t\t\t\t#endif\n\n\t\t\t\tvarying float vLineDistance;\n\n\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\tvarying vec4 worldPos;\n\t\t\t\t\tvarying vec3 worldStart;\n\t\t\t\t\tvarying vec3 worldEnd;\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#else\n\n\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t#endif\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <clipping_planes_pars_fragment>\n\n\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\tvarying vec4 vLineColor;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 vLineColor;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\t\t\tfloat mua;\n\t\t\t\t\tfloat mub;\n\n\t\t\t\t\tvec3 p13 = p1 - p3;\n\t\t\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\t\t\tmua = numer / denom;\n\t\t\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\t\t\treturn vec2( mua, mub );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat alpha = opacity;\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\t\t\tfloat len = length( delta );\n\t\t\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t\t\t#else\n\n\t\t\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t#else\n\n\t\t\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\t\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\t\tdiffuseColor *= vLineColor;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tdiffuseColor.rgb *= vLineColor;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\t\t\tgl_FragColor = diffuseColor;\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <".concat(h_>=154?"colorspace_fragment":"encodings_fragment",">\n\t\t\t\t\t#include <fog_fragment>\n\t\t\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t\t\t}\n\t\t\t"),clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){!0===t?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(t){Boolean(t)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===t?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(t){Boolean(t)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===t?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(t)}}const f_=h_>=125?"uv1":"uv2",p_=new o_.Vector4,m_=new o_.Vector3,g_=new o_.Vector3,v_=new o_.Vector4,y_=new o_.Vector4,x_=new o_.Vector4,__=new o_.Vector3,b_=new o_.Matrix4,w_=new o_.Line3,S_=new o_.Vector3,M_=new o_.Box3,E_=new o_.Sphere,T_=new o_.Vector4;let A_,C_;function P_(t,e,n){return T_.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),T_.multiplyScalar(1/T_.w),T_.x=C_/n.width,T_.y=C_/n.height,T_.applyMatrix4(t.projectionMatrixInverse),T_.multiplyScalar(1/T_.w),Math.abs(Math.max(T_.x,T_.y))}class R_ extends o_.Mesh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new u_,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new d_({color:16777215*Math.random()})),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,e=t.attributes.instanceStart,n=t.attributes.instanceEnd,i=new Float32Array(2*e.count);for(let s=0,a=0,o=e.count;s<o;s++,a+=2)m_.fromBufferAttribute(e,s),g_.fromBufferAttribute(n,s),i[a]=0===a?0:i[a-1],i[a+1]=i[a]+m_.distanceTo(g_);const r=new o_.InstancedInterleavedBuffer(i,2,1);return t.setAttribute("instanceDistanceStart",new o_.InterleavedBufferAttribute(r,1,0)),t.setAttribute("instanceDistanceEnd",new o_.InterleavedBufferAttribute(r,1,1)),this}raycast(t,e){const n=this.material.worldUnits,i=t.camera;null!==i||n||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const r=void 0!==t.params.Line2&&t.params.Line2.threshold||0;A_=t.ray;const s=this.matrixWorld,a=this.geometry,o=this.material;let l,c;if(C_=o.linewidth+r,null===a.boundingSphere&&a.computeBoundingSphere(),E_.copy(a.boundingSphere).applyMatrix4(s),n)l=.5*C_;else{l=P_(i,Math.max(i.near,E_.distanceToPoint(A_.origin)),o.resolution)}if(E_.radius+=l,!1!==A_.intersectsSphere(E_)){if(null===a.boundingBox&&a.computeBoundingBox(),M_.copy(a.boundingBox).applyMatrix4(s),n)c=.5*C_;else{c=P_(i,Math.max(i.near,M_.distanceToPoint(A_.origin)),o.resolution)}M_.expandByScalar(c),!1!==A_.intersectsBox(M_)&&(n?function(t,e){const n=t.matrixWorld,i=t.geometry,r=i.attributes.instanceStart,s=i.attributes.instanceEnd;for(let a=0,o=Math.min(i.instanceCount,r.count);a<o;a++){w_.start.fromBufferAttribute(r,a),w_.end.fromBufferAttribute(s,a),w_.applyMatrix4(n);const i=new o_.Vector3,o=new o_.Vector3;A_.distanceSqToSegment(w_.start,w_.end,o,i),o.distanceTo(i)<.5*C_&&e.push({point:o,pointOnLine:i,distance:A_.origin.distanceTo(o),object:t,face:null,faceIndex:a,uv:null,[f_]:null})}}(this,e):function(t,e,n){const i=e.projectionMatrix,r=t.material.resolution,s=t.matrixWorld,a=t.geometry,o=a.attributes.instanceStart,l=a.attributes.instanceEnd,c=Math.min(a.instanceCount,o.count),u=-e.near;A_.at(1,x_),x_.w=1,x_.applyMatrix4(e.matrixWorldInverse),x_.applyMatrix4(i),x_.multiplyScalar(1/x_.w),x_.x*=r.x/2,x_.y*=r.y/2,x_.z=0,__.copy(x_),b_.multiplyMatrices(e.matrixWorldInverse,s);for(let h=0,d=c;h<d;h++){if(v_.fromBufferAttribute(o,h),y_.fromBufferAttribute(l,h),v_.w=1,y_.w=1,v_.applyMatrix4(b_),y_.applyMatrix4(b_),v_.z>u&&y_.z>u)continue;if(v_.z>u){const t=v_.z-y_.z,e=(v_.z-u)/t;v_.lerp(y_,e)}else if(y_.z>u){const t=y_.z-v_.z,e=(y_.z-u)/t;y_.lerp(v_,e)}v_.applyMatrix4(i),y_.applyMatrix4(i),v_.multiplyScalar(1/v_.w),y_.multiplyScalar(1/y_.w),v_.x*=r.x/2,v_.y*=r.y/2,y_.x*=r.x/2,y_.y*=r.y/2,w_.start.copy(v_),w_.start.z=0,w_.end.copy(y_),w_.end.z=0;const e=w_.closestPointToPointParameter(__,!0);w_.at(e,S_);const a=o_.MathUtils.lerp(v_.z,y_.z,e),c=a>=-1&&a<=1,d=__.distanceTo(S_)<.5*C_;if(c&&d){w_.start.fromBufferAttribute(o,h),w_.end.fromBufferAttribute(l,h),w_.start.applyMatrix4(s),w_.end.applyMatrix4(s);const e=new o_.Vector3,i=new o_.Vector3;A_.distanceSqToSegment(w_.start,w_.end,i,e),n.push({point:i,pointOnLine:e,distance:A_.origin.distanceTo(i),object:t,face:null,faceIndex:h,uv:null,[f_]:null})}}}(this,i,e))}}onBeforeRender(t){const e=this.material.uniforms;e&&e.resolution&&(t.getViewport(p_),this.material.uniforms.resolution.value.set(p_.z,p_.w))}}class L_ extends u_{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(t){const e=t.length-3,n=new Float32Array(2*e);for(let i=0;i<e;i+=3)n[2*i]=t[i],n[2*i+1]=t[i+1],n[2*i+2]=t[i+2],n[2*i+3]=t[i+3],n[2*i+4]=t[i+4],n[2*i+5]=t[i+5];return super.setPositions(n),this}setColors(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=t.length-e,i=new Float32Array(2*n);if(3===e)for(let r=0;r<n;r+=e)i[2*r]=t[r],i[2*r+1]=t[r+1],i[2*r+2]=t[r+2],i[2*r+3]=t[r+3],i[2*r+4]=t[r+4],i[2*r+5]=t[r+5];else for(let r=0;r<n;r+=e)i[2*r]=t[r],i[2*r+1]=t[r+1],i[2*r+2]=t[r+2],i[2*r+3]=t[r+3],i[2*r+4]=t[r+4],i[2*r+5]=t[r+5],i[2*r+6]=t[r+6],i[2*r+7]=t[r+7];return super.setColors(i,e),this}fromLine(t){const e=t.geometry;return this.setPositions(e.attributes.position.array),this}}class N_ extends R_{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new L_,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new d_({color:16777215*Math.random()})),this.isLine2=!0,this.type="Line2"}}const k_=["points","color","vertexColors","linewidth","lineWidth","segments","dashed"],O_=e.forwardRef(function(t,n){let{points:i,color:r="black",vertexColors:s,linewidth:a,lineWidth:o,segments:l,dashed:c}=t,u=(0,ri.A)(t,k_);const h=(0,r_.A)(t=>t.size),d=e.useMemo(()=>l?new R_:new N_,[l]),[f]=e.useState(()=>new d_),p=e.useMemo(()=>{const t=l?new u_:new L_,e=i.map(t=>{const e=Array.isArray(t);return t instanceof o_.Vector3?[t.x,t.y,t.z]:t instanceof o_.Vector2?[t.x,t.y,0]:e&&3===t.length?[t[0],t[1],t[2]]:e&&2===t.length?[t[0],t[1],0]:t});if(t.setPositions(e.flat()),s){const e=s.map(t=>t instanceof o_.Color?t.toArray():t);t.setColors(e.flat())}return t},[i,l,s]);return e.useLayoutEffect(()=>{d.computeLineDistances()},[i,d]),e.useLayoutEffect(()=>{c?f.defines.USE_DASH="":delete f.defines.USE_DASH,f.needsUpdate=!0},[c,f]),e.useEffect(()=>()=>p.dispose(),[p]),e.createElement("primitive",(0,bi.A)({object:d,ref:n},u),e.createElement("primitive",{object:p,attach:"geometry"}),e.createElement("primitive",(0,bi.A)({object:f,attach:"material",color:r,vertexColors:Boolean(s),resolution:[h.width,h.height],linewidth:null!==a&&void 0!==a?a:o,dashed:c},u)))});class D_ extends o_.ShaderMaterial{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:"\n      uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"\n      uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n\n        #include <tonemapping_fragment>\n\t      #include <".concat(parseInt(o_.REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment",">\n      }")})}}const I_=t=>(new o_.Vector3).setFromSpherical(new o_.Spherical(t,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI)),z_=e.forwardRef((t,n)=>{let{radius:i=100,depth:r=50,count:s=5e3,saturation:a=0,factor:o=4,fade:l=!1,speed:c=1}=t;const u=e.useRef(),[h,d,f]=e.useMemo(()=>{const t=[],e=[],n=Array.from({length:s},()=>(.5+.5*Math.random())*o),l=new o_.Color;let c=i+r;const u=r/s;for(let i=0;i<s;i++)c-=u*Math.random(),t.push(...I_(c).toArray()),l.setHSL(i/s,a,.9),e.push(l.r,l.g,l.b);return[new Float32Array(t),new Float32Array(e),new Float32Array(n)]},[s,r,o,i,a]);(0,r_.C)(t=>u.current&&(u.current.uniforms.time.value=t.clock.getElapsedTime()*c));const[p]=e.useState(()=>new D_);return e.createElement("points",{ref:n},e.createElement("bufferGeometry",null,e.createElement("bufferAttribute",{attach:"attributes-position",args:[h,3]}),e.createElement("bufferAttribute",{attach:"attributes-color",args:[d,3]}),e.createElement("bufferAttribute",{attach:"attributes-size",args:[f,1]})),e.createElement("primitive",{ref:u,object:p,attach:"material",blending:o_.AdditiveBlending,"uniforms-fade-value":l,depthWrite:!1,transparent:!0,vertexColors:!0}))});var j_=n(7);const U_=()=>{const t=(0,e.useRef)(),n=(0,e.useRef)(),[i,r,s]=(0,a_.z)(["https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg","https://threejs.org/examples/textures/planets/earth_normal_2048.jpg","https://threejs.org/examples/textures/planets/earth_clouds_1024.png"]);return(0,r_.C)(()=>{t.current&&(t.current.rotation.y+=5e-4),n.current&&(n.current.rotation.y+=7e-4)}),(0,Kn.jsxs)("group",{children:[(0,Kn.jsxs)("mesh",{ref:t,children:[(0,Kn.jsx)("sphereGeometry",{args:[1,64,64]}),(0,Kn.jsx)("meshStandardMaterial",{map:i,normalMap:r,roughness:.8,metalness:.2})]}),(0,Kn.jsxs)("mesh",{ref:n,children:[(0,Kn.jsx)("sphereGeometry",{args:[1.015,64,64]}),(0,Kn.jsx)("meshPhongMaterial",{map:s,transparent:!0,opacity:.4,depthWrite:!1})]}),(0,Kn.jsxs)("mesh",{children:[(0,Kn.jsx)("sphereGeometry",{args:[1.03,64,64]}),(0,Kn.jsx)("meshBasicMaterial",{color:"#007bff",transparent:!0,opacity:.15,side:o_.BackSide})]})]})},F_=t=>{let{a:n,b:i,color:r}=t;const s=(0,e.useMemo)(()=>{const t=[];for(let e=0;e<=200;e++){const r=e/200*Math.PI*2;t.push(new o_.Vector3(Math.cos(r)*n,0,Math.sin(r)*i))}return t},[n,i]);return(0,Kn.jsx)(O_,{points:s,color:r,lineWidth:1.2,transparent:!0,opacity:.6})},B_=t=>{var n,i,r,s,a,o,l,c,u,h,d,f;let{asteroid:p,index:m,isSelected:g}=t;const v=(0,e.useRef)(),y=(0,e.useRef)(),x=(null===p||void 0===p||null===(n=p.calculatedProperties)||void 0===n?void 0:n.averageDiameter)||(null===p||void 0===p||null===(i=p.estimated_diameter)||void 0===i||null===(r=i.meters)||void 0===r?void 0:r.estimated_diameter_max)||200,_=Number(null===p||void 0===p||null===(s=p.close_approach_data)||void 0===s||null===(a=s[0])||void 0===a||null===(o=a.relative_velocity)||void 0===o?void 0:o.kilometers_per_second)||(null===p||void 0===p||null===(l=p.calculatedProperties)||void 0===l?void 0:l.averageVelocity)||10,b=Number(null===p||void 0===p||null===(c=p.close_approach_data)||void 0===c||null===(u=c[0])||void 0===u||null===(h=u.miss_distance)||void 0===h?void 0:h.kilometers)||38e4,w=(0,e.useMemo)(()=>Math.max(1.5,Math.min(15,b/12e3)),[b]),S=(0,e.useMemo)(()=>{const t=Math.max(1,Math.min(50,_))/50,e=.55+.35*(.3+m%7/10)*(1-t);return Math.max(.6,Math.min(w,w*e))},[w,_,m]),M=Math.max(.02,Math.min(.12,x/1e3*.05)),E=Number(null===p||void 0===p||null===(d=p.close_approach_data)||void 0===d||null===(f=d[0])||void 0===f?void 0:f.epoch_date_close_approach)||0,T=(0,e.useMemo)(()=>E/1e7%(2*Math.PI)+m%16*(Math.PI/8),[E,m]),A=((null===p||void 0===p?void 0:p.neo_reference_id)||String((null===p||void 0===p?void 0:p._id)||m)).split("").reduce((t,e)=>t+e.charCodeAt(0),0),C=(A%45-22.5)*(Math.PI/180),P=A%360*Math.PI/180,R=3*A%360*Math.PI/180,L=(0,e.useMemo)(()=>Math.max(1,Math.min(50,_))/50*.7/Math.max(.8,(w+S)/2),[_,w,S]);(0,r_.C)(t=>{const e=t.clock.getElapsedTime(),n=T+e*L,i=Math.cos(n)*w,r=Math.sin(n)*S;v.current&&v.current.position.set(i,0,r)});const N=null!==p&&void 0!==p&&p.is_potentially_hazardous_asteroid?"#ff5b5b":"#cfcfcf";return(0,Kn.jsxs)("group",{ref:y,rotation:[C,P,R],children:[(0,Kn.jsx)(F_,{a:w,b:S,color:N}),(0,Kn.jsxs)("mesh",{ref:v,children:[(0,Kn.jsx)("dodecahedronGeometry",{args:[M,0]}),(0,Kn.jsx)("meshStandardMaterial",{color:g?"#ffcc66":"#b38b6d",emissive:g?"#ffcc33":"#000",emissiveIntensity:g?.6:.1}),(0,Kn.jsxs)("mesh",{position:[0,3*M,0],children:[(0,Kn.jsx)("coneGeometry",{args:[.8*M,1.8*M,3]}),(0,Kn.jsx)("meshStandardMaterial",{color:null!==p&&void 0!==p&&p.is_potentially_hazardous_asteroid?"#ff5555":"#66ccff",emissive:null!==p&&void 0!==p&&p.is_potentially_hazardous_asteroid?"#ff3333":"#0a7bff",emissiveIntensity:.9})]})]})]})},H_=t=>{let{asteroids:e=[],selectedAsteroid:n}=t;return(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("ambientLight",{intensity:.35}),(0,Kn.jsx)("directionalLight",{position:[6,8,5],intensity:1.2}),(0,Kn.jsx)("pointLight",{position:[-6,-4,-4],intensity:.4,color:"#3399ff"}),(0,Kn.jsx)(z_,{radius:100,depth:50,count:6e3,factor:4,fade:!0}),(0,Kn.jsx)(U_,{}),e.map((t,e)=>(0,Kn.jsx)(B_,{asteroid:t,index:e,isSelected:n&&t._id===n._id},t._id||e)),(0,Kn.jsx)(j_.N,{enablePan:!0,enableZoom:!0,enableRotate:!0})]})},V_=t=>{var e,n,i,r,s,a,o,l,c;let{asteroid:u}=t;if(!u)return null;const h=null===u||void 0===u||null===(e=u.close_approach_data)||void 0===e||null===(n=e[0])||void 0===n||null===(i=n.relative_velocity)||void 0===i?void 0:i.kilometers_per_second,d=null===u||void 0===u||null===(r=u.close_approach_data)||void 0===r||null===(s=r[0])||void 0===s||null===(a=s.miss_distance)||void 0===a?void 0:a.kilometers,f=(null===u||void 0===u||null===(o=u.calculatedProperties)||void 0===o?void 0:o.averageDiameter)||(null===u||void 0===u||null===(l=u.estimated_diameter)||void 0===l||null===(c=l.meters)||void 0===c?void 0:c.estimated_diameter_max),p=null===u||void 0===u?void 0:u.is_potentially_hazardous_asteroid,m=p?"This asteroid is classified as potentially hazardous because its orbit crosses near Earth's path (less than 7.5 million km) and its size or velocity could cause significant impact effects if it entered the atmosphere.":"This asteroid is considered non-hazardous because its orbit remains safely distant from Earth or its size is too small to cause major damage.";return(0,Kn.jsxs)("div",{style:{position:"absolute",right:20,bottom:20,background:"rgba(0,0,0,0.8)",border:"1px solid #444",borderRadius:10,padding:"12px 16px",color:"#fff",width:320,fontSize:"0.9rem",lineHeight:1.4,zIndex:5},children:[(0,Kn.jsx)("h6",{style:{color:p?"#ff6666":"#66ff99",marginBottom:6},children:u.name||"Unnamed Asteroid"}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("b",{children:"Velocity:"})," ",h?"".concat(parseFloat(h).toFixed(2)," km/s"):"N/A"]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("b",{children:"Closest Approach:"})," ",d?"".concat((d/1e3).toFixed(2)," million km"):"N/A"]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("b",{children:"Diameter:"})," ",f?"".concat((f/1e3).toFixed(3)," km"):"N/A"]}),(0,Kn.jsx)("div",{style:{marginTop:8,fontStyle:"italic",opacity:.9},children:m})]})},W_=t=>{let{asteroids:e=[],selectedAsteroid:n}=t;return(0,Kn.jsxs)("div",{style:{position:"relative",width:"100%",height:"600px",borderRadius:"12px",overflow:"hidden",background:"#000"},children:[(0,Kn.jsx)(s_.Hl,{shadows:!0,camera:{position:[0,3,10],fov:55},children:(0,Kn.jsx)(H_,{asteroids:e,selectedAsteroid:n})}),n&&(0,Kn.jsx)(V_,{asteroid:n})]})},G_=()=>{const[t,n]=(0,e.useState)([]),[i,r]=(0,e.useState)("all"),[s,a]=(0,e.useState)("all"),[l,c]=(0,e.useState)(!1),[u,h]=(0,e.useState)(""),d=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{c(!0),h("");const{data:e}=await Yn.get("/api/asteroids?limit=99&sortBy=close_approach_data.0.epoch_date_close_approach&sortOrder=asc");n(e.asteroids||[]),t&&(a("all"),r("all"),window.followAsteroid=!1)}catch(o){var e,i;console.error("Failed to load asteroids",o),h((null===o||void 0===o||null===(e=o.response)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.error)||"Failed to load asteroids")}finally{c(!1)}};(0,e.useEffect)(()=>{d(!0)},[]);const f=t.filter(t=>"hazardous"===s?t.is_potentially_hazardous_asteroid:"nonhazardous"!==s||!t.is_potentially_hazardous_asteroid),p="all"===i?f:f.filter(t=>String(t._id)===String(i));return(0,Kn.jsx)("div",{style:{minHeight:"100vh",background:"radial-gradient(ellipse at center, #0b0b13 60%, #000 100%)",color:"#fff",paddingTop:"80px"},children:(0,Kn.jsx)(yi,{fluid:!0,className:"py-4 px-5",children:(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{md:4,lg:3,className:"mb-4",children:(0,Kn.jsxs)(vu,{className:"bg-dark text-light border-secondary shadow-sm",style:{minHeight:"85vh",borderRadius:"10px"},children:[(0,Kn.jsx)(vu.Header,{className:"fw-bold text-uppercase text-warning",style:{borderBottom:"1px solid #333",fontSize:"1.2rem"},children:"Orbit Controls"}),(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsx)("div",{className:"mb-3",children:(0,Kn.jsx)(bc,{variant:"warning",onClick:()=>d(!0),disabled:l,className:"w-100 fw-bold mb-3 text-dark",style:{background:"linear-gradient(90deg, #ff7e29, #ffb347)",border:"none"},children:l?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(Cx,{size:"sm",className:"me-2"}),"Loading..."]}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("i",{className:"bi bi-arrow-clockwise me-2"}),"REFRESH"]})})}),(0,Kn.jsxs)("div",{className:"mb-4",children:[(0,Kn.jsxs)("h6",{className:"text-uppercase text-info mb-2",children:[(0,Kn.jsx)("i",{className:"bi bi-funnel me-2"}),"Filter by Hazard Level"]}),(0,Kn.jsxs)("div",{className:"d-flex flex-wrap gap-2",children:[(0,Kn.jsx)(bc,{variant:"all"===s?"primary":"outline-light",onClick:()=>a("all"),children:"All"}),(0,Kn.jsx)(bc,{variant:"hazardous"===s?"danger":"outline-danger",onClick:()=>a("hazardous"),children:"Hazardous"}),(0,Kn.jsx)(bc,{variant:"nonhazardous"===s?"success":"outline-success",onClick:()=>a("nonhazardous"),children:"Non-Hazardous"})]})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("h6",{className:"text-uppercase text-info mb-2",children:[(0,Kn.jsx)("i",{className:"bi bi-globe-americas me-2"}),"Select Orbit"]}),(0,Kn.jsxs)("select",{id:"asteroid-select",className:"form-select bg-black text-light border-secondary",value:i,onChange:t=>r(t.target.value),children:[(0,Kn.jsx)("option",{value:"all",children:"All Orbits"}),f.map(t=>(0,Kn.jsx)("option",{value:t._id,children:t.name||t.neo_reference_id||t._id},t._id))]})]})]})]})}),(0,Kn.jsx)(Uc,{md:8,lg:9,children:(0,Kn.jsxs)(vu,{className:"bg-black border-secondary shadow-lg",style:{borderRadius:"10px",height:"85vh"},children:[(0,Kn.jsx)(vu.Header,{className:"text-uppercase fw-bold text-warning",style:{borderBottom:"1px solid #333",fontSize:"1.2rem"},children:"Earth Orbit Simulation"}),(0,Kn.jsxs)(vu.Body,{className:"p-0",children:[u&&(0,Kn.jsx)("div",{className:"alert alert-warning py-2 mb-3",children:u}),(0,Kn.jsx)(W_,{asteroids:p,selectedAsteroid:1===p.length?p[0]:null})]})]})})]})})})};var X_=n(309);const q_=()=>{const t=(0,e.useRef)(),n=(0,e.useRef)(),[i,r,s]=(0,a_.z)(["https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg","https://threejs.org/examples/textures/planets/earth_normal_2048.jpg","https://threejs.org/examples/textures/planets/earth_clouds_1024.png"]);return(0,r_.C)(()=>{t.current&&(t.current.rotation.y+=.005),n.current&&(n.current.rotation.y+=.006)}),(0,Kn.jsxs)("group",{children:[(0,Kn.jsxs)("mesh",{ref:t,children:[(0,Kn.jsx)("sphereGeometry",{args:[1,48,48]}),(0,Kn.jsx)("meshStandardMaterial",{map:i,normalMap:r,roughness:.9,metalness:0})]}),(0,Kn.jsxs)("mesh",{ref:n,children:[(0,Kn.jsx)("sphereGeometry",{args:[1.015,48,48]}),(0,Kn.jsx)("meshPhongMaterial",{map:s,transparent:!0,opacity:.4,depthWrite:!1})]})]})},Z_=t=>{var n,i,r,s,a,o,l,c,u,h,d,f;let{asteroid:p,index:m}=t;const g=(0,e.useRef)(),v=(0,e.useRef)(),[y,x]=(0,e.useState)(!1),_=(null===p||void 0===p||null===(n=p.calculatedProperties)||void 0===n?void 0:n.averageDiameter)||(null===p||void 0===p||null===(i=p.estimated_diameter)||void 0===i||null===(r=i.meters)||void 0===r?void 0:r.estimated_diameter_max)||200,b=Number(null===p||void 0===p||null===(s=p.close_approach_data)||void 0===s||null===(a=s[0])||void 0===a||null===(o=a.relative_velocity)||void 0===o?void 0:o.kilometers_per_second)||(null===p||void 0===p||null===(l=p.calculatedProperties)||void 0===l?void 0:l.averageVelocity)||10,w=Number(null===p||void 0===p||null===(c=p.close_approach_data)||void 0===c||null===(u=c[0])||void 0===u||null===(h=u.miss_distance)||void 0===h?void 0:h.kilometers)||38e4,S=Math.max(1.2,Math.min(12,w/12e3)),M=Math.max(.6,Math.min(S,S*(.55+.35*(.3+m%7/10)))),E=Math.max(.03,Math.min(.15,_/1e3*.05)),T=(Number(null===p||void 0===p||null===(d=p.close_approach_data)||void 0===d||null===(f=d[0])||void 0===f?void 0:f.epoch_date_close_approach)||0)/1e7%(2*Math.PI)+m%16*(Math.PI/8),A=b/50*.7/Math.max(.8,(S+M)/2);return(0,r_.C)(t=>{const e=t.clock.getElapsedTime(),n=T+e*A,i=Math.cos(n)*S,r=Math.sin(n)*M;g.current&&g.current.position.set(i,0,r)}),(0,Kn.jsx)("group",{ref:v,children:(0,Kn.jsxs)("mesh",{ref:g,castShadow:!0,onPointerOver:t=>{t.stopPropagation(),x(!0)},onPointerOut:t=>{t.stopPropagation(),x(!1)},children:[(0,Kn.jsx)("dodecahedronGeometry",{args:[E,0]}),(0,Kn.jsx)("meshStandardMaterial",{color:y?"#e0b089":"#b38b6d",roughness:.9,metalness:.05}),y&&(0,Kn.jsx)(X_.E,{position:[0,.25+2*E,0],center:!0,distanceFactor:6,children:(0,Kn.jsxs)("div",{style:{background:"rgba(0,0,0,0.8)",color:"#fff",padding:"6px 8px",borderRadius:"6px",fontSize:"12px",border:"1px solid #444",maxWidth:"260px"},children:[(0,Kn.jsx)("div",{style:{fontWeight:600,marginBottom:4},children:(null===p||void 0===p?void 0:p.name)||(null===p||void 0===p?void 0:p.neo_reference_id)||"Asteroid"}),(0,Kn.jsxs)("div",{style:{opacity:.9},children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("b",{children:"Diameter:"})," ",null===_||void 0===_?void 0:_.toFixed(0)," m"]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("b",{children:"Velocity:"})," ",null===b||void 0===b?void 0:b.toFixed(2)," km/s"]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("b",{children:"Hazard:"})," ",null!==p&&void 0!==p&&p.is_potentially_hazardous_asteroid?"Yes":"No"]})]})]})})]})})},Y_=()=>(0,Kn.jsxs)("mesh",{children:[(0,Kn.jsx)("sphereGeometry",{args:[60,32,32]}),(0,Kn.jsx)("meshBasicMaterial",{color:"#000010",side:1})]}),K_=t=>{let{asteroids:e,vrMode:n}=t;return(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("ambientLight",{intensity:.45}),(0,Kn.jsx)("directionalLight",{position:[6,8,5],intensity:1,castShadow:!0}),(0,Kn.jsx)("pointLight",{position:[-6,-4,-4],intensity:.3,color:"#ff6b35"}),(0,Kn.jsx)(Y_,{}),(0,Kn.jsxs)("group",{children:[(0,Kn.jsx)(q_,{}),null===e||void 0===e?void 0:e.map((t,e)=>(0,Kn.jsx)(Z_,{asteroid:t,index:e},t._id||e))]}),(0,Kn.jsx)(j_.N,{enablePan:!n,enableZoom:!n,enableRotate:!n,autoRotate:n,autoRotateSpeed:.5})]})},J_=()=>{const[t,n]=(0,e.useState)([]),[i,r]=(0,e.useState)(!1),[s,a]=(0,e.useState)(""),[l,c]=(0,e.useState)(!1),[u,h]=(0,e.useState)(null),[d,f]=(0,e.useState)("desktop"),[p,m]=(0,e.useState)(!1),g=(0,e.useRef)(null);(0,e.useRef)(null);(0,e.useEffect)(()=>{const t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);f(t?"mobile":"desktop")},[]);const v=async()=>{try{r(!0),a("");const t=await fetch("/api/asteroids?limit=50&sortBy=close_approach_data.0.epoch_date_close_approach&sortOrder=asc"),e=await t.json();n(e.asteroids||[])}catch(o){console.error("Failed to load asteroids",o),a("Error al cargar asteroides")}finally{r(!1)}},y=async()=>{try{const t={video:{facingMode:"mobile"===d?"environment":"user",width:{ideal:1280},height:{ideal:720}}},e=await navigator.mediaDevices.getUserMedia(t);h(e),g.current&&(g.current.srcObject=e)}catch(t){console.error("Error accessing camera:",t),a("No se pudo acceder a la c\xe1mara. Verifica los permisos.")}},x=()=>{u&&(u.getTracks().forEach(t=>t.stop()),h(null))};return(0,e.useEffect)(()=>(v(),()=>{x()}),[]),(0,Kn.jsx)("div",{className:"py-4",children:(0,Kn.jsxs)(yi,{children:[(0,Kn.jsxs)(Dc,{className:"mb-3 align-items-center",children:[(0,Kn.jsxs)(Uc,{children:[(0,Kn.jsxs)("h2",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-vr me-2"}),"Realidad Virtual - \xd3rbitas"]}),(0,Kn.jsx)("small",{className:"text-muted",children:"Visualizaci\xf3n inmersiva de asteroides orbitando la Tierra"})]}),(0,Kn.jsx)(Uc,{xs:"auto",children:(0,Kn.jsxs)("div",{className:"d-flex gap-2",children:[(0,Kn.jsxs)(bc,{variant:l?"danger":"success",onClick:()=>{c(!l),l?x():y()},disabled:i,children:[(0,Kn.jsx)("i",{className:"bi ".concat(l?"bi-stop-circle":"bi-play-circle"," me-1")}),l?"Salir VR":"Activar VR"]}),(0,Kn.jsxs)(bc,{variant:"outline-primary",onClick:()=>m(!0),children:[(0,Kn.jsx)("i",{className:"bi bi-question-circle me-1"}),"Ayuda"]})]})})]}),s&&(0,Kn.jsxs)(Lu,{variant:"warning",className:"mb-3",children:[(0,Kn.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),s]}),(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsx)(Uc,{lg:8,children:(0,Kn.jsx)(vu,{className:"mb-3",children:(0,Kn.jsx)(vu.Body,{className:"p-0",children:(0,Kn.jsxs)("div",{style:{width:"100%",height:"600px",borderRadius:"12px",overflow:"hidden",background:"#000",position:"relative"},children:[(0,Kn.jsx)(s_.Hl,{shadows:!0,camera:{position:[0,3,10],fov:50},children:(0,Kn.jsx)(K_,{asteroids:t,vrMode:l})}),l&&(0,Kn.jsxs)("div",{style:{position:"absolute",top:"10px",left:"10px",background:"rgba(0,0,0,0.7)",color:"white",padding:"8px 12px",borderRadius:"6px",fontSize:"14px"},children:[(0,Kn.jsx)("i",{className:"bi bi-camera-video me-1"}),"Modo VR Activo",(0,Kn.jsx)(Rc,{bg:"success",className:"ms-2",children:"ON"})]})]})})})}),(0,Kn.jsxs)(Uc,{lg:4,children:[(0,Kn.jsxs)(vu,{className:"mb-3",children:[(0,Kn.jsx)(vu.Header,{children:(0,Kn.jsxs)("h5",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-gear me-2"}),"Controles VR"]})}),(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsxs)("div",{className:"mb-3",children:[(0,Kn.jsx)("h6",{children:"Dispositivo Detectado:"}),(0,Kn.jsxs)(Rc,{bg:"mobile"===d?"primary":"secondary",children:[(0,Kn.jsx)("i",{className:"bi ".concat("mobile"===d?"bi-phone":"bi-laptop"," me-1")}),"mobile"===d?"M\xf3vil":"Escritorio"]})]}),(0,Kn.jsxs)("div",{className:"mb-3",children:[(0,Kn.jsx)("h6",{children:"C\xe1mara:"}),(0,Kn.jsxs)("div",{className:"d-flex gap-2",children:[(0,Kn.jsxs)(bc,{variant:"outline-primary",size:"sm",onClick:y,disabled:!!u,children:[(0,Kn.jsx)("i",{className:"bi bi-camera me-1"}),"Iniciar"]}),(0,Kn.jsxs)(bc,{variant:"outline-danger",size:"sm",onClick:x,disabled:!u,children:[(0,Kn.jsx)("i",{className:"bi bi-stop me-1"}),"Detener"]})]})]}),(0,Kn.jsxs)("div",{className:"mb-3",children:[(0,Kn.jsx)("h6",{children:"Estad\xedsticas:"}),(0,Kn.jsxs)("small",{className:"text-muted",children:[(0,Kn.jsxs)("div",{children:["Asteroides cargados: ",(0,Kn.jsx)("strong",{children:t.length})]}),(0,Kn.jsxs)("div",{children:["Modo VR: ",(0,Kn.jsx)("strong",{children:l?"Activo":"Inactivo"})]}),(0,Kn.jsxs)("div",{children:["C\xe1mara: ",(0,Kn.jsx)("strong",{children:u?"Conectada":"Desconectada"})]})]})]}),(0,Kn.jsx)(bc,{variant:"primary",onClick:v,disabled:i,className:"w-100",children:i?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("i",{className:"bi bi-arrow-clockwise me-2"}),"Cargando..."]}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("i",{className:"bi bi-arrow-clockwise me-2"}),"Actualizar Asteroides"]})})]})]}),(0,Kn.jsxs)(vu,{children:[(0,Kn.jsx)(vu.Header,{children:(0,Kn.jsxs)("h5",{className:"mb-0",children:[(0,Kn.jsx)("i",{className:"bi bi-info-circle me-2"}),"Informaci\xf3n VR"]})}),(0,Kn.jsxs)(vu.Body,{children:[(0,Kn.jsxs)("p",{className:"small text-muted",children:[(0,Kn.jsx)("strong",{children:"Modo VR:"})," Activa la rotaci\xf3n autom\xe1tica y desactiva controles manuales."]}),(0,Kn.jsxs)("p",{className:"small text-muted",children:[(0,Kn.jsx)("strong",{children:"C\xe1mara:"})," Usa la c\xe1mara trasera en m\xf3viles y webcam en escritorio."]}),(0,Kn.jsxs)("p",{className:"small text-muted",children:[(0,Kn.jsx)("strong",{children:"Interacci\xf3n:"})," Pasa el mouse sobre los asteroides para ver detalles."]})]})]})]})]}),(0,Kn.jsxs)(ax,{show:p,onHide:()=>m(!1),size:"lg",children:[(0,Kn.jsx)(ax.Header,{closeButton:!0,children:(0,Kn.jsxs)(ax.Title,{children:[(0,Kn.jsx)("i",{className:"bi bi-vr me-2"}),"Instrucciones de Realidad Virtual"]})}),(0,Kn.jsxs)(ax.Body,{children:[(0,Kn.jsxs)(Dc,{children:[(0,Kn.jsxs)(Uc,{md:6,children:[(0,Kn.jsxs)("h5",{children:[(0,Kn.jsx)("i",{className:"bi bi-phone me-2"}),"Para M\xf3viles:"]}),(0,Kn.jsxs)("ul",{children:[(0,Kn.jsx)("li",{children:"Permite el acceso a la c\xe1mara cuando se solicite"}),(0,Kn.jsx)("li",{children:"Usa la c\xe1mara trasera para mejor experiencia"}),(0,Kn.jsx)("li",{children:"Mueve el dispositivo para explorar diferentes \xe1ngulos"}),(0,Kn.jsx)("li",{children:"El modo VR activa la rotaci\xf3n autom\xe1tica"})]})]}),(0,Kn.jsxs)(Uc,{md:6,children:[(0,Kn.jsxs)("h5",{children:[(0,Kn.jsx)("i",{className:"bi bi-laptop me-2"}),"Para Escritorio:"]}),(0,Kn.jsxs)("ul",{children:[(0,Kn.jsx)("li",{children:"Permite el acceso a la webcam"}),(0,Kn.jsx)("li",{children:"Usa los controles del mouse para navegar"}),(0,Kn.jsx)("li",{children:"Activa VR para experiencia inmersiva"}),(0,Kn.jsx)("li",{children:"Combina con realidad aumentada usando la webcam"})]})]})]}),(0,Kn.jsxs)(Lu,{variant:"info",className:"mt-3",children:[(0,Kn.jsx)("i",{className:"bi bi-lightbulb me-2"}),(0,Kn.jsx)("strong",{children:"Tip:"})," Para una experiencia completa, coloca el dispositivo en un soporte y permite que la escena rote autom\xe1ticamente en modo VR."]})]}),(0,Kn.jsx)(ax.Footer,{children:(0,Kn.jsx)(bc,{variant:"secondary",onClick:()=>m(!1),children:"Cerrar"})})]})]})})},Q_=t=>{let{children:e}=t;const{isAuthenticated:n,loading:i}=Qn(),r=(0,ii.zy)();return i?(0,Kn.jsx)("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:(0,Kn.jsx)("div",{className:"loading-spinner"})}):n?e:(0,Kn.jsx)(ii.C5,{to:"/login",state:{from:r},replace:!0})};const $_=function(){const{user:t,loading:e}=Qn();return e?(0,Kn.jsx)("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:(0,Kn.jsx)("div",{className:"loading-spinner"})}):(0,Kn.jsxs)("div",{className:"App",children:[(0,Kn.jsx)(Nc,{}),(0,Kn.jsx)("main",{className:"main-content",children:(0,Kn.jsxs)(ii.BV,{children:[(0,Kn.jsx)(ii.qh,{path:"/",element:(0,Kn.jsx)(yu,{})}),(0,Kn.jsx)(ii.qh,{path:"/login",element:(0,Kn.jsx)(Gx,{})}),(0,Kn.jsx)(ii.qh,{path:"/register",element:(0,Kn.jsx)(qx,{})}),(0,Kn.jsx)(ii.qh,{path:"/asteroids",element:(0,Kn.jsx)(t_,{})}),(0,Kn.jsx)(ii.qh,{path:"/community",element:(0,Kn.jsx)(Vx,{})}),(0,Kn.jsx)(ii.qh,{path:"/simulation/:id",element:(0,Kn.jsx)(n_,{})}),(0,Kn.jsx)(ii.qh,{path:"/3d-test",element:(0,Kn.jsx)(i_,{})}),(0,Kn.jsx)(ii.qh,{path:"/orbits",element:(0,Kn.jsx)(G_,{})}),(0,Kn.jsx)(ii.qh,{path:"/vr",element:(0,Kn.jsx)(J_,{})}),(0,Kn.jsx)(ii.qh,{path:"/dashboard",element:(0,Kn.jsx)(Q_,{children:(0,Kn.jsx)(Xv,{})})}),(0,Kn.jsx)(ii.qh,{path:"/simulator",element:(0,Kn.jsx)(Q_,{children:(0,Kn.jsx)(Hx,{})})}),(0,Kn.jsx)(ii.qh,{path:"/profile",element:(0,Kn.jsx)(Q_,{children:(0,Kn.jsx)(Wx,{})})}),(0,Kn.jsx)(ii.qh,{path:"*",element:(0,Kn.jsxs)(yi,{className:"py-5 text-center",children:[(0,Kn.jsx)("h1",{children:"404 - Page Not Found"}),(0,Kn.jsx)("p",{className:"text-muted",children:"The page you're looking for doesn't exist."})]})})]})})]})};i.createRoot(document.getElementById("root")).render((0,Kn.jsx)(e.StrictMode,{children:(0,Kn.jsx)(r.BrowserRouter,{children:(0,Kn.jsx)($n,{children:(0,Kn.jsxs)(ni,{children:[(0,Kn.jsx)($_,{}),(0,Kn.jsx)(_t,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1a1a1a",color:"#fff",border:"1px solid #333"}}})]})})})}))})()})();
//# sourceMappingURL=main.bc549191.js.map